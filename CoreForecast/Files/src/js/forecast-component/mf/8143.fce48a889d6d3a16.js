(self.webpackChunkapp_studio_enterprise_forecast=self.webpackChunkapp_studio_enterprise_forecast||[]).push([[8143,3334],{63334:(h,u,d)=>{d.r(u),d.d(u,{FormulaEditorControlPanelComponent:()=>r,FormulaEditorPanelModule:()=>l});var m=d(31134),c=d(96923),t=d(94450),f=d(97600);const _=["formulaEditorRef"];function C(o,e){if(o&1){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(n).$implicit,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.addToFormula(s))}),t.\u0275\u0275elementStart(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(o&2){const n=e.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",n.caption," ")}}function g(o,e){if(o&1){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(n).$implicit,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.addToFormula(s))}),t.\u0275\u0275elementStart(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(o&2){const n=e.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",n.caption," ")}}function v(o,e){if(o&1){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(n).$implicit,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.addToFormula(s))}),t.\u0275\u0275element(1,"ts-formula-operand-item",10),t.\u0275\u0275elementEnd()}if(o&2){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("caption",n.caption)("value",n.value)}}class r{constructor(){this.formulaChanged=new t.EventEmitter}get data(){return this._data||[]}set data(e){this._data=r._applyOperandsToData(e||[],this.operands)}get operators(){return this._operators}set operators(e){this._operators=e}get operands(){return this._operands||[]}set operands(e){this._operands=e,this._data=r._applyOperandsToData(this.data,this.operands)}get functions(){return this._functions}set functions(e){this._functions=e}static _changeCaption(e,n){const a=(0,f.assign)({},e,{caption:n});return new c.FormulaItem(a)}static _applyOperandsToData(e,n){const a=(0,f.keyBy)(n,"value");return e.map(i=>{const{caption:s}=a[i.value]||i;return r._changeCaption(i,s)})}addToFormula(e){this.formulaEditor.addItem(e)}handleFormulaChanged(e){this.formulaChanged.emit(e)}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ts-formula-editor-control-panel"]],viewQuery:function(e,n){if(e&1&&t.\u0275\u0275viewQuery(_,7),e&2){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(n.formulaEditor=a.first)}},inputs:{data:"data",operators:"operators",operands:"operands",functions:"functions"},outputs:{formulaChanged:"formulaChanged"},decls:8,vars:4,consts:[[1,"formula-editor-control-panel"],[3,"formulaData","itemsChanged"],["formulaEditorRef",""],[1,"control-panel"],["class","operator-button control-panel-item",3,"click",4,"ngFor","ngForOf"],["class","function-button control-panel-item",3,"click",4,"ngFor","ngForOf"],["class","operands control-panel-item",3,"click",4,"ngFor","ngForOf"],[1,"operator-button","control-panel-item",3,"click"],[1,"function-button","control-panel-item",3,"click"],[1,"operands","control-panel-item",3,"click"],[3,"caption","value"]],template:function(e,n){e&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"ts-formula-editor",1,2),t.\u0275\u0275listener("itemsChanged",function(i){return n.handleFormulaChanged(i)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,C,3,1,"div",4),t.\u0275\u0275template(5,g,3,1,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",3),t.\u0275\u0275template(7,v,2,2,"div",6),t.\u0275\u0275elementEnd()()),e&2&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("formulaData",n.data),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.operators),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.functions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.operands))},dependencies:[m.NgForOf,c.FormulaOperandItemComponent,c.FormulaEditorComponent],styles:[".control-panel[_ngcontent-%COMP%]{width:100%;padding-top:.4em;font-family:Bpmonline Open Sans}.control-panel[_ngcontent-%COMP%]   .operator-button[_ngcontent-%COMP%]{margin:5px;width:30px;font-size:22px;text-align:center;color:#658cdd}.control-panel[_ngcontent-%COMP%]   .function-button[_ngcontent-%COMP%]{margin:5px;font-size:18px;text-align:center;color:#658cdd}.control-panel[_ngcontent-%COMP%]   .control-panel-item[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none}"]});class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[m.CommonModule,c.FormulaEditorModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(l,{declarations:[r],imports:[m.CommonModule,c.FormulaEditorModule],exports:[r]})}()}}]);
