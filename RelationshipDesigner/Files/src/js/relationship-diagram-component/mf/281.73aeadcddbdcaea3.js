(self.webpackChunkapp_studio_enterprise_relationship_diagram=self.webpackChunkapp_studio_enterprise_relationship_diagram||[]).push([[281,8239,5036,6118,7344,8160,1034,8056,1906],{11524:($,H,u)=>{var h;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(L,d,E,v){"use strict";var O=["","webkit","Moz","MS","ms","o"],p=d.createElement("div"),x="function",T=Math.round,c=Math.abs,a=Date.now;function e(M,S,j){return setTimeout(l(M,j),S)}function g(M,S,j){return Array.isArray(M)?(t(M,j[S],j),!0):!1}function t(M,S,j){var K;if(!!M)if(M.forEach)M.forEach(S,j);else if(M.length!==v)for(K=0;K<M.length;)S.call(j,M[K],K,M),K++;else for(K in M)M.hasOwnProperty(K)&&S.call(j,M[K],K,M)}function o(M,S,j){var K="DEPRECATED METHOD: "+S+`
`+j+` AT 
`;return function(){var k=new Error("get-stack-trace"),et=k&&k.stack?k.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ct=L.console&&(L.console.warn||L.console.log);return ct&&ct.call(L.console,K,et),M.apply(this,arguments)}}var r;typeof Object.assign!="function"?r=function(S){if(S===v||S===null)throw new TypeError("Cannot convert undefined or null to object");for(var j=Object(S),K=1;K<arguments.length;K++){var k=arguments[K];if(k!==v&&k!==null)for(var et in k)k.hasOwnProperty(et)&&(j[et]=k[et])}return j}:r=Object.assign;var y=o(function(S,j,K){for(var k=Object.keys(j),et=0;et<k.length;)(!K||K&&S[k[et]]===v)&&(S[k[et]]=j[k[et]]),et++;return S},"extend","Use `assign`."),m=o(function(S,j){return y(S,j,!0)},"merge","Use `assign`.");function n(M,S,j){var K=S.prototype,k;k=M.prototype=Object.create(K),k.constructor=M,k._super=K,j&&r(k,j)}function l(M,S){return function(){return M.apply(S,arguments)}}function _(M,S){return typeof M==x?M.apply(S&&S[0]||v,S):M}function I(M,S){return M===v?S:M}function D(M,S,j){t(N(S),function(K){M.addEventListener(K,j,!1)})}function b(M,S,j){t(N(S),function(K){M.removeEventListener(K,j,!1)})}function w(M,S){for(;M;){if(M==S)return!0;M=M.parentNode}return!1}function U(M,S){return M.indexOf(S)>-1}function N(M){return M.trim().split(/\s+/g)}function z(M,S,j){if(M.indexOf&&!j)return M.indexOf(S);for(var K=0;K<M.length;){if(j&&M[K][j]==S||!j&&M[K]===S)return K;K++}return-1}function Y(M){return Array.prototype.slice.call(M,0)}function Z(M,S,j){for(var K=[],k=[],et=0;et<M.length;){var ct=S?M[et][S]:M[et];z(k,ct)<0&&K.push(M[et]),k[et]=ct,et++}return j&&(S?K=K.sort(function(ht,pt){return ht[S]>pt[S]}):K=K.sort()),K}function F(M,S){for(var j,K,k=S[0].toUpperCase()+S.slice(1),et=0;et<O.length;){if(j=O[et],K=j?j+k:S,K in M)return K;et++}return v}var B=1;function P(){return B++}function i(M){var S=M.ownerDocument||M;return S.defaultView||S.parentWindow||L}var s=/mobile|tablet|ip(ad|hone|od)|android/i,R="ontouchstart"in L,f=F(L,"PointerEvent")!==v,C=R&&s.test(navigator.userAgent),A="touch",W="pen",G="mouse",V="kinect",Q=25,q=1,it=2,nt=4,tt=8,X=1,ot=2,J=4,at=8,rt=16,st=ot|J,ut=at|rt,lt=st|ut,Mt=["x","y"],Et=["clientX","clientY"];function dt(M,S){var j=this;this.manager=M,this.callback=S,this.element=M.element,this.target=M.options.inputTarget,this.domHandler=function(K){_(M.options.enable,[M])&&j.handler(K)},this.init()}dt.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(i(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(i(this.element),this.evWin,this.domHandler)}};function gt(M){var S,j=M.options.inputClass;return j?S=j:f?S=Kt:C?S=bt:R?S=zt:S=Lt,new S(M,Ot)}function Ot(M,S,j){var K=j.pointers.length,k=j.changedPointers.length,et=S&q&&K-k===0,ct=S&(nt|tt)&&K-k===0;j.isFirst=!!et,j.isFinal=!!ct,et&&(M.session={}),j.eventType=S,de(M,j),M.emit("hammer.input",j),M.recognize(j),M.session.prevInput=j}function de(M,S){var j=M.session,K=S.pointers,k=K.length;j.firstInput||(j.firstInput=Xt(S)),k>1&&!j.firstMultiple?j.firstMultiple=Xt(S):k===1&&(j.firstMultiple=!1);var et=j.firstInput,ct=j.firstMultiple,ft=ct?ct.center:et.center,ht=S.center=Jt(K);S.timeStamp=a(),S.deltaTime=S.timeStamp-et.timeStamp,S.angle=Ht(ft,ht),S.distance=At(ft,ht),pe(j,S),S.offsetDirection=qt(S.deltaX,S.deltaY);var pt=Qt(S.deltaTime,S.deltaX,S.deltaY);S.overallVelocityX=pt.x,S.overallVelocityY=pt.y,S.overallVelocity=c(pt.x)>c(pt.y)?pt.x:pt.y,S.scale=ct?me(ct.pointers,K):1,S.rotation=ct?ge(ct.pointers,K):0,S.maxPointers=j.prevInput?S.pointers.length>j.prevInput.maxPointers?S.pointers.length:j.prevInput.maxPointers:S.pointers.length,ve(j,S);var _t=M.element;w(S.srcEvent.target,_t)&&(_t=S.srcEvent.target),S.target=_t}function pe(M,S){var j=S.center,K=M.offsetDelta||{},k=M.prevDelta||{},et=M.prevInput||{};(S.eventType===q||et.eventType===nt)&&(k=M.prevDelta={x:et.deltaX||0,y:et.deltaY||0},K=M.offsetDelta={x:j.x,y:j.y}),S.deltaX=k.x+(j.x-K.x),S.deltaY=k.y+(j.y-K.y)}function ve(M,S){var j=M.lastInterval||S,K=S.timeStamp-j.timeStamp,k,et,ct,ft;if(S.eventType!=tt&&(K>Q||j.velocity===v)){var ht=S.deltaX-j.deltaX,pt=S.deltaY-j.deltaY,_t=Qt(K,ht,pt);et=_t.x,ct=_t.y,k=c(_t.x)>c(_t.y)?_t.x:_t.y,ft=qt(ht,pt),M.lastInterval=S}else k=j.velocity,et=j.velocityX,ct=j.velocityY,ft=j.direction;S.velocity=k,S.velocityX=et,S.velocityY=ct,S.direction=ft}function Xt(M){for(var S=[],j=0;j<M.pointers.length;)S[j]={clientX:T(M.pointers[j].clientX),clientY:T(M.pointers[j].clientY)},j++;return{timeStamp:a(),pointers:S,center:Jt(S),deltaX:M.deltaX,deltaY:M.deltaY}}function Jt(M){var S=M.length;if(S===1)return{x:T(M[0].clientX),y:T(M[0].clientY)};for(var j=0,K=0,k=0;k<S;)j+=M[k].clientX,K+=M[k].clientY,k++;return{x:T(j/S),y:T(K/S)}}function Qt(M,S,j){return{x:S/M||0,y:j/M||0}}function qt(M,S){return M===S?X:c(M)>=c(S)?M<0?ot:J:S<0?at:rt}function At(M,S,j){j||(j=Mt);var K=S[j[0]]-M[j[0]],k=S[j[1]]-M[j[1]];return Math.sqrt(K*K+k*k)}function Ht(M,S,j){j||(j=Mt);var K=S[j[0]]-M[j[0]],k=S[j[1]]-M[j[1]];return Math.atan2(k,K)*180/Math.PI}function ge(M,S){return Ht(S[1],S[0],Et)+Ht(M[1],M[0],Et)}function me(M,S){return At(S[0],S[1],Et)/At(M[0],M[1],Et)}var ye={mousedown:q,mousemove:it,mouseup:nt},_e="mousedown",Ee="mousemove mouseup";function Lt(){this.evEl=_e,this.evWin=Ee,this.pressed=!1,dt.apply(this,arguments)}n(Lt,dt,{handler:function(S){var j=ye[S.type];j&q&&S.button===0&&(this.pressed=!0),j&it&&S.which!==1&&(j=nt),this.pressed&&(j&nt&&(this.pressed=!1),this.callback(this.manager,j,{pointers:[S],changedPointers:[S],pointerType:G,srcEvent:S}))}});var xe={pointerdown:q,pointermove:it,pointerup:nt,pointercancel:tt,pointerout:tt},Te={2:A,3:W,4:G,5:V},te="pointerdown",ee="pointermove pointerup pointercancel";L.MSPointerEvent&&!L.PointerEvent&&(te="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel");function Kt(){this.evEl=te,this.evWin=ee,dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n(Kt,dt,{handler:function(S){var j=this.store,K=!1,k=S.type.toLowerCase().replace("ms",""),et=xe[k],ct=Te[S.pointerType]||S.pointerType,ft=ct==A,ht=z(j,S.pointerId,"pointerId");et&q&&(S.button===0||ft)?ht<0&&(j.push(S),ht=j.length-1):et&(nt|tt)&&(K=!0),!(ht<0)&&(j[ht]=S,this.callback(this.manager,et,{pointers:j,changedPointers:[S],pointerType:ct,srcEvent:S}),K&&j.splice(ht,1))}});var Pe={touchstart:q,touchmove:it,touchend:nt,touchcancel:tt},Me="touchstart",Oe="touchstart touchmove touchend touchcancel";function ne(){this.evTarget=Me,this.evWin=Oe,this.started=!1,dt.apply(this,arguments)}n(ne,dt,{handler:function(S){var j=Pe[S.type];if(j===q&&(this.started=!0),!!this.started){var K=Re.call(this,S,j);j&(nt|tt)&&K[0].length-K[1].length===0&&(this.started=!1),this.callback(this.manager,j,{pointers:K[0],changedPointers:K[1],pointerType:A,srcEvent:S})}}});function Re(M,S){var j=Y(M.touches),K=Y(M.changedTouches);return S&(nt|tt)&&(j=Z(j.concat(K),"identifier",!0)),[j,K]}var Ce={touchstart:q,touchmove:it,touchend:nt,touchcancel:tt},Se="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=Se,this.targetIds={},dt.apply(this,arguments)}n(bt,dt,{handler:function(S){var j=Ce[S.type],K=De.call(this,S,j);!K||this.callback(this.manager,j,{pointers:K[0],changedPointers:K[1],pointerType:A,srcEvent:S})}});function De(M,S){var j=Y(M.touches),K=this.targetIds;if(S&(q|it)&&j.length===1)return K[j[0].identifier]=!0,[j,j];var k,et,ct=Y(M.changedTouches),ft=[],ht=this.target;if(et=j.filter(function(pt){return w(pt.target,ht)}),S===q)for(k=0;k<et.length;)K[et[k].identifier]=!0,k++;for(k=0;k<ct.length;)K[ct[k].identifier]&&ft.push(ct[k]),S&(nt|tt)&&delete K[ct[k].identifier],k++;if(!!ft.length)return[Z(et.concat(ft),"identifier",!0),ft]}var Ie=2500,ie=25;function zt(){dt.apply(this,arguments);var M=l(this.handler,this);this.touch=new bt(this.manager,M),this.mouse=new Lt(this.manager,M),this.primaryTouch=null,this.lastTouches=[]}n(zt,dt,{handler:function(S,j,K){var k=K.pointerType==A,et=K.pointerType==G;if(!(et&&K.sourceCapabilities&&K.sourceCapabilities.firesTouchEvents)){if(k)we.call(this,j,K);else if(et&&Ae.call(this,K))return;this.callback(S,j,K)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function we(M,S){M&q?(this.primaryTouch=S.changedPointers[0].identifier,re.call(this,S)):M&(nt|tt)&&re.call(this,S)}function re(M){var S=M.changedPointers[0];if(S.identifier===this.primaryTouch){var j={x:S.clientX,y:S.clientY};this.lastTouches.push(j);var K=this.lastTouches,k=function(){var et=K.indexOf(j);et>-1&&K.splice(et,1)};setTimeout(k,Ie)}}function Ae(M){for(var S=M.srcEvent.clientX,j=M.srcEvent.clientY,K=0;K<this.lastTouches.length;K++){var k=this.lastTouches[K],et=Math.abs(S-k.x),ct=Math.abs(j-k.y);if(et<=ie&&ct<=ie)return!0}return!1}var oe=F(p.style,"touchAction"),ae=oe!==v,se="compute",ce="auto",Zt="manipulation",Rt="none",Dt="pan-x",It="pan-y",Ut=be();function Gt(M,S){this.manager=M,this.set(S)}Gt.prototype={set:function(M){M==se&&(M=this.compute()),ae&&this.manager.element.style&&Ut[M]&&(this.manager.element.style[oe]=M),this.actions=M.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var M=[];return t(this.manager.recognizers,function(S){_(S.options.enable,[S])&&(M=M.concat(S.getTouchAction()))}),Le(M.join(" "))},preventDefaults:function(M){var S=M.srcEvent,j=M.offsetDirection;if(this.manager.session.prevented){S.preventDefault();return}var K=this.actions,k=U(K,Rt)&&!Ut[Rt],et=U(K,It)&&!Ut[It],ct=U(K,Dt)&&!Ut[Dt];if(k){var ft=M.pointers.length===1,ht=M.distance<2,pt=M.deltaTime<250;if(ft&&ht&&pt)return}if(!(ct&&et)&&(k||et&&j&st||ct&&j&ut))return this.preventSrc(S)},preventSrc:function(M){this.manager.session.prevented=!0,M.preventDefault()}};function Le(M){if(U(M,Rt))return Rt;var S=U(M,Dt),j=U(M,It);return S&&j?Rt:S||j?S?Dt:It:U(M,Zt)?Zt:ce}function be(){if(!ae)return!1;var M={},S=L.CSS&&L.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(j){M[j]=S?L.CSS.supports("touch-action",j):!0}),M}var jt=1,vt=2,St=4,Pt=8,xt=Pt,wt=16,yt=32;function Tt(M){this.options=r({},this.defaults,M||{}),this.id=P(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=jt,this.simultaneous={},this.requireFail=[]}Tt.prototype={defaults:{},set:function(M){return r(this.options,M),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(M){if(g(M,"recognizeWith",this))return this;var S=this.simultaneous;return M=Wt(M,this),S[M.id]||(S[M.id]=M,M.recognizeWith(this)),this},dropRecognizeWith:function(M){return g(M,"dropRecognizeWith",this)?this:(M=Wt(M,this),delete this.simultaneous[M.id],this)},requireFailure:function(M){if(g(M,"requireFailure",this))return this;var S=this.requireFail;return M=Wt(M,this),z(S,M)===-1&&(S.push(M),M.requireFailure(this)),this},dropRequireFailure:function(M){if(g(M,"dropRequireFailure",this))return this;M=Wt(M,this);var S=z(this.requireFail,M);return S>-1&&this.requireFail.splice(S,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(M){return!!this.simultaneous[M.id]},emit:function(M){var S=this,j=this.state;function K(k){S.manager.emit(k,M)}j<Pt&&K(S.options.event+ue(j)),K(S.options.event),M.additionalEvent&&K(M.additionalEvent),j>=Pt&&K(S.options.event+ue(j))},tryEmit:function(M){if(this.canEmit())return this.emit(M);this.state=yt},canEmit:function(){for(var M=0;M<this.requireFail.length;){if(!(this.requireFail[M].state&(yt|jt)))return!1;M++}return!0},recognize:function(M){var S=r({},M);if(!_(this.options.enable,[this,S])){this.reset(),this.state=yt;return}this.state&(xt|wt|yt)&&(this.state=jt),this.state=this.process(S),this.state&(vt|St|Pt|wt)&&this.tryEmit(S)},process:function(M){},getTouchAction:function(){},reset:function(){}};function ue(M){return M&wt?"cancel":M&Pt?"end":M&St?"move":M&vt?"start":""}function le(M){return M==rt?"down":M==at?"up":M==ot?"left":M==J?"right":""}function Wt(M,S){var j=S.manager;return j?j.get(M):M}function mt(){Tt.apply(this,arguments)}n(mt,Tt,{defaults:{pointers:1},attrTest:function(M){var S=this.options.pointers;return S===0||M.pointers.length===S},process:function(M){var S=this.state,j=M.eventType,K=S&(vt|St),k=this.attrTest(M);return K&&(j&tt||!k)?S|wt:K||k?j&nt?S|Pt:S&vt?S|St:vt:yt}});function Bt(){mt.apply(this,arguments),this.pX=null,this.pY=null}n(Bt,mt,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var M=this.options.direction,S=[];return M&st&&S.push(It),M&ut&&S.push(Dt),S},directionTest:function(M){var S=this.options,j=!0,K=M.distance,k=M.direction,et=M.deltaX,ct=M.deltaY;return k&S.direction||(S.direction&st?(k=et===0?X:et<0?ot:J,j=et!=this.pX,K=Math.abs(M.deltaX)):(k=ct===0?X:ct<0?at:rt,j=ct!=this.pY,K=Math.abs(M.deltaY))),M.direction=k,j&&K>S.threshold&&k&S.direction},attrTest:function(M){return mt.prototype.attrTest.call(this,M)&&(this.state&vt||!(this.state&vt)&&this.directionTest(M))},emit:function(M){this.pX=M.deltaX,this.pY=M.deltaY;var S=le(M.direction);S&&(M.additionalEvent=this.options.event+S),this._super.emit.call(this,M)}});function Ft(){mt.apply(this,arguments)}n(Ft,mt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(M){return this._super.attrTest.call(this,M)&&(Math.abs(M.scale-1)>this.options.threshold||this.state&vt)},emit:function(M){if(M.scale!==1){var S=M.scale<1?"in":"out";M.additionalEvent=this.options.event+S}this._super.emit.call(this,M)}});function kt(){Tt.apply(this,arguments),this._timer=null,this._input=null}n(kt,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(M){var S=this.options,j=M.pointers.length===S.pointers,K=M.distance<S.threshold,k=M.deltaTime>S.time;if(this._input=M,!K||!j||M.eventType&(nt|tt)&&!k)this.reset();else if(M.eventType&q)this.reset(),this._timer=e(function(){this.state=xt,this.tryEmit()},S.time,this);else if(M.eventType&nt)return xt;return yt},reset:function(){clearTimeout(this._timer)},emit:function(M){this.state===xt&&(M&&M.eventType&nt?this.manager.emit(this.options.event+"up",M):(this._input.timeStamp=a(),this.manager.emit(this.options.event,this._input)))}});function Yt(){mt.apply(this,arguments)}n(Yt,mt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(M){return this._super.attrTest.call(this,M)&&(Math.abs(M.rotation)>this.options.threshold||this.state&vt)}});function Vt(){mt.apply(this,arguments)}n(Vt,mt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:st|ut,pointers:1},getTouchAction:function(){return Bt.prototype.getTouchAction.call(this)},attrTest:function(M){var S=this.options.direction,j;return S&(st|ut)?j=M.overallVelocity:S&st?j=M.overallVelocityX:S&ut&&(j=M.overallVelocityY),this._super.attrTest.call(this,M)&&S&M.offsetDirection&&M.distance>this.options.threshold&&M.maxPointers==this.options.pointers&&c(j)>this.options.velocity&&M.eventType&nt},emit:function(M){var S=le(M.offsetDirection);S&&this.manager.emit(this.options.event+S,M),this.manager.emit(this.options.event,M)}});function Nt(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}n(Nt,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zt]},process:function(M){var S=this.options,j=M.pointers.length===S.pointers,K=M.distance<S.threshold,k=M.deltaTime<S.time;if(this.reset(),M.eventType&q&&this.count===0)return this.failTimeout();if(K&&k&&j){if(M.eventType!=nt)return this.failTimeout();var et=this.pTime?M.timeStamp-this.pTime<S.interval:!0,ct=!this.pCenter||At(this.pCenter,M.center)<S.posThreshold;this.pTime=M.timeStamp,this.pCenter=M.center,!ct||!et?this.count=1:this.count+=1,this._input=M;var ft=this.count%S.taps;if(ft===0)return this.hasRequireFailures()?(this._timer=e(function(){this.state=xt,this.tryEmit()},S.interval,this),vt):xt}return yt},failTimeout:function(){return this._timer=e(function(){this.state=yt},this.options.interval,this),yt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ct(M,S){return S=S||{},S.recognizers=I(S.recognizers,Ct.defaults.preset),new $t(M,S)}Ct.VERSION="2.0.7",Ct.defaults={domEvents:!1,touchAction:se,enable:!0,inputTarget:null,inputClass:null,preset:[[Yt,{enable:!1}],[Ft,{enable:!1},["rotate"]],[Vt,{direction:st}],[Bt,{direction:st},["swipe"]],[Nt],[Nt,{event:"doubletap",taps:2},["tap"]],[kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ue=1,fe=2;function $t(M,S){this.options=r({},Ct.defaults,S||{}),this.options.inputTarget=this.options.inputTarget||M,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=M,this.input=gt(this),this.touchAction=new Gt(this,this.options.touchAction),he(this,!0),t(this.options.recognizers,function(j){var K=this.add(new j[0](j[1]));j[2]&&K.recognizeWith(j[2]),j[3]&&K.requireFailure(j[3])},this)}$t.prototype={set:function(M){return r(this.options,M),M.touchAction&&this.touchAction.update(),M.inputTarget&&(this.input.destroy(),this.input.target=M.inputTarget,this.input.init()),this},stop:function(M){this.session.stopped=M?fe:Ue},recognize:function(M){var S=this.session;if(!S.stopped){this.touchAction.preventDefaults(M);var j,K=this.recognizers,k=S.curRecognizer;(!k||k&&k.state&xt)&&(k=S.curRecognizer=null);for(var et=0;et<K.length;)j=K[et],S.stopped!==fe&&(!k||j==k||j.canRecognizeWith(k))?j.recognize(M):j.reset(),!k&&j.state&(vt|St|Pt)&&(k=S.curRecognizer=j),et++}},get:function(M){if(M instanceof Tt)return M;for(var S=this.recognizers,j=0;j<S.length;j++)if(S[j].options.event==M)return S[j];return null},add:function(M){if(g(M,"add",this))return this;var S=this.get(M.options.event);return S&&this.remove(S),this.recognizers.push(M),M.manager=this,this.touchAction.update(),M},remove:function(M){if(g(M,"remove",this))return this;if(M=this.get(M),M){var S=this.recognizers,j=z(S,M);j!==-1&&(S.splice(j,1),this.touchAction.update())}return this},on:function(M,S){if(M!==v&&S!==v){var j=this.handlers;return t(N(M),function(K){j[K]=j[K]||[],j[K].push(S)}),this}},off:function(M,S){if(M!==v){var j=this.handlers;return t(N(M),function(K){S?j[K]&&j[K].splice(z(j[K],S),1):delete j[K]}),this}},emit:function(M,S){this.options.domEvents&&je(M,S);var j=this.handlers[M]&&this.handlers[M].slice();if(!(!j||!j.length)){S.type=M,S.preventDefault=function(){S.srcEvent.preventDefault()};for(var K=0;K<j.length;)j[K](S),K++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function he(M,S){var j=M.element;if(!!j.style){var K;t(M.options.cssProps,function(k,et){K=F(j.style,et),S?(M.oldCssProps[K]=j.style[K],j.style[K]=k):j.style[K]=M.oldCssProps[K]||""}),S||(M.oldCssProps={})}}function je(M,S){var j=d.createEvent("Event");j.initEvent(M,!0,!0),j.gesture=S,S.target.dispatchEvent(j)}r(Ct,{INPUT_START:q,INPUT_MOVE:it,INPUT_END:nt,INPUT_CANCEL:tt,STATE_POSSIBLE:jt,STATE_BEGAN:vt,STATE_CHANGED:St,STATE_ENDED:Pt,STATE_RECOGNIZED:xt,STATE_CANCELLED:wt,STATE_FAILED:yt,DIRECTION_NONE:X,DIRECTION_LEFT:ot,DIRECTION_RIGHT:J,DIRECTION_UP:at,DIRECTION_DOWN:rt,DIRECTION_HORIZONTAL:st,DIRECTION_VERTICAL:ut,DIRECTION_ALL:lt,Manager:$t,Input:dt,TouchAction:Gt,TouchInput:bt,MouseInput:Lt,PointerEventInput:Kt,TouchMouseInput:zt,SingleTouchInput:ne,Recognizer:Tt,AttrRecognizer:mt,Tap:Nt,Pan:Bt,Swipe:Vt,Pinch:Ft,Rotate:Yt,Press:kt,on:D,off:b,each:t,merge:m,extend:y,assign:r,inherit:n,bindFn:l,prefixed:F});var We=typeof L<"u"?L:typeof self<"u"?self:{};We.Hammer=Ct,h=function(){return Ct}.call(H,u,H,$),h!==v&&($.exports=h)})(window,document,"Hammer")},19891:($,H,u)=>{$.exports=u(18627),$.exports.Collection=u(88508)},88508:$=>{function H(h,L,d,E){var v=d.inverse;return Object.defineProperty(h,"remove",{value:function(O){var p=this.indexOf(O);return p!==-1&&(this.splice(p,1),L.unset(O,v,E)),O}}),Object.defineProperty(h,"contains",{value:function(O){return this.indexOf(O)!==-1}}),Object.defineProperty(h,"add",{value:function(O,p){var x=this.indexOf(O);if(typeof p>"u"){if(x!==-1)return;p=this.length}x!==-1&&this.splice(x,1),this.splice(p,0,O),x===-1&&L.set(O,v,E)}}),Object.defineProperty(h,"__refs_collection",{value:!0}),h}function u(h){return h.__refs_collection===!0}$.exports.extend=H,$.exports.isExtended=u},18627:($,H,u)=>{var h=u(88508);function L(O,p){return Object.prototype.hasOwnProperty.call(O,p.name||p)}function d(O,p,x){var T=h.extend(x[p.name]||[],O,p,x);Object.defineProperty(x,p.name,{enumerable:p.enumerable,value:T}),T.length&&T.forEach(function(c){O.set(c,p.inverse,x)})}function E(O,p,x){var T=p.inverse,c=x[p.name];Object.defineProperty(x,p.name,{configurable:p.configurable,enumerable:p.enumerable,get:function(){return c},set:function(a){if(a!==c){var e=c;c=null,e&&O.unset(e,T,x),c=a,O.set(c,T,x)}}})}function v(O,p){if(!(this instanceof v))return new v(O,p);O.inverse=p,p.inverse=O,this.props={},this.props[O.name]=O,this.props[p.name]=p}v.prototype.bind=function(O,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?d(this,p,O):E(this,p,O)},v.prototype.ensureRefsCollection=function(O,p){var x=O[p.name];return h.isExtended(x)||d(this,p,O),x},v.prototype.ensureBound=function(O,p){L(O,p)||this.bind(O,p)},v.prototype.unset=function(O,p,x){O&&(this.ensureBound(O,p),p.collection?this.ensureRefsCollection(O,p).remove(x):O[p.name]=void 0)},v.prototype.set=function(O,p,x){O&&(this.ensureBound(O,p),p.collection?this.ensureRefsCollection(O,p).add(x):O[p.name]=x)},$.exports=v},27974:($,H,u)=>{u.d(H,{Z:()=>B});var h=/^class /;function L(P){return h.test(P.toString())}function d(P){return Object.prototype.toString.call(P)==="[object Array]"}function E(){var P=Array.prototype.slice.call(arguments);P.length===1&&d(P[0])&&(P=P[0]);var i=P.pop();return i.$inject=P,i}var v=/constructor\s*[^(]*\(\s*([^)]*)\)/m,O=/^function\s*[^(]*\(\s*([^)]*)\)/m,p=/\/\*([^*]*)\*\//m;function x(P){if(typeof P!="function")throw new Error('Cannot annotate "'+P+'". Expected a function!');var i=P.toString().match(L(P)?v:O);return i?i[1]&&i[1].split(",").map(function(s){return i=s.match(p),i?i[1].trim():s.trim()})||[]:[]}function T(){var P=[];this.factory=function(i,s){return P.push([i,"factory",s]),this},this.value=function(i,s){return P.push([i,"value",s]),this},this.type=function(i,s){return P.push([i,"type",s]),this},this.forEach=function(i){P.forEach(i)}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};function a(P){if(Array.isArray(P)){for(var i=0,s=Array(P.length);i<P.length;i++)s[i]=P[i];return s}else return Array.from(P)}function e(P,i){i=i||{get:function(X,ot){if(s.push(X),ot===!1)return null;throw A('No provider for "'+X+'"!')}};var s=[],R=this._providers=Object.create(i._providers||null),f=this._instances=Object.create(null),C=f.injector=this,A=function(X){var ot=s.join(" -> ");return s.length=0,new Error(ot?X+" (Resolving: "+ot+")":X)},W=function tt(X,ot){if(!R[X]&&X.indexOf(".")!==-1){for(var J=X.split("."),at=tt(J.shift());J.length;)at=at[J.shift()];return at}if(g(f,X))return f[X];if(g(R,X)){if(s.indexOf(X)!==-1)throw s.push(X),A("Cannot resolve circular dependency!");return s.push(X),f[X]=R[X][0](R[X][1]),s.pop(),f[X]}return i.get(X,ot)},G=function(X){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof X!="function")if(d(X))X=E(X.slice());else throw new Error('Cannot invoke "'+X+'". Expected a function!');var J=X.$inject||x(X),at=J.map(function(rt){return g(ot,rt)?ot[rt]:W(rt)});return{fn:X,dependencies:at}},V=function(X){var ot=G(X),J=ot.dependencies,at=ot.fn;return new(Function.prototype.bind.apply(at,[null].concat(a(J))))},Q=function(X,ot,J){var at=G(X,J),rt=at.dependencies,st=at.fn;return st.call.apply(st,[ot].concat(a(rt)))},q=function(X){return E(function(ot){return X.get(ot)})},it=function(X,ot){if(ot&&ot.length){var J=Object.create(null),at=Object.create(null),rt=[],st=[],ut=[],lt,Mt,Et,dt;for(var gt in R)lt=R[gt],ot.indexOf(gt)!==-1&&(lt[2]==="private"?(Mt=rt.indexOf(lt[3]),Mt===-1?(Et=lt[3].createChild([],ot),dt=q(Et),rt.push(lt[3]),st.push(Et),ut.push(dt),J[gt]=[dt,gt,"private",Et]):J[gt]=[ut[Mt],gt,"private",st[Mt]]):J[gt]=[lt[2],lt[1]],at[gt]=!0),(lt[2]==="factory"||lt[2]==="type")&&lt[1].$scope&&ot.forEach(function(Ot){lt[1].$scope.indexOf(Ot)!==-1&&(J[gt]=[lt[2],lt[1]],at[Ot]=!0)});ot.forEach(function(Ot){if(!at[Ot])throw new Error('No provider for "'+Ot+'". Cannot use provider from the parent!')}),X.unshift(J)}return new e(X,C)},nt={factory:Q,type:V,value:function(X){return X}};P.forEach(function(tt){function X(rt,st){return rt!=="value"&&d(st)&&(st=E(st.slice())),st}if(tt instanceof T)tt.forEach(function(rt){var st=rt[0],ut=rt[1],lt=rt[2];R[st]=[nt[ut],X(ut,lt),ut]});else if((typeof tt>"u"?"undefined":c(tt))==="object")if(tt.__exports__){var ot=Object.keys(tt).reduce(function(rt,st){return st.substring(0,2)!=="__"&&(rt[st]=tt[st]),rt},Object.create(null)),J=new e((tt.__modules__||[]).concat([ot]),C),at=E(function(rt){return J.get(rt)});tt.__exports__.forEach(function(rt){R[rt]=[at,rt,"private",J]})}else Object.keys(tt).forEach(function(rt){if(tt[rt][2]==="private"){R[rt]=tt[rt];return}var st=tt[rt][0],ut=tt[rt][1];R[rt]=[nt[st],X(st,ut),st]})}),this.get=W,this.invoke=Q,this.instantiate=V,this.createChild=it}function g(P,i){return Object.hasOwnProperty.call(P,i)}var t=u(59879),o=u.n(t),r=u(47595),y=u(7824),m=u(21537),n=u(64960),l=1;function _(P,i){r.Z.call(this,P,l),this.CONNECTION_STYLE=i.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=i.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=i.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}o()(_,r.Z),_.prototype.canRender=function(){return!0},_.prototype.drawShape=function(i,s){var R=(0,m.Ue)("rect");return(0,m.Lj)(R,{x:0,y:0,width:s.width||0,height:s.height||0}),(0,n.He)(s)?(0,m.Lj)(R,this.FRAME_STYLE):(0,m.Lj)(R,this.SHAPE_STYLE),(0,m.R3)(i,R),R},_.prototype.drawConnection=function(i,s){var R=(0,y.W5)(s.waypoints,this.CONNECTION_STYLE);return(0,m.R3)(i,R),R},_.prototype.getShapePath=function(i){var s=i.x,R=i.y,f=i.width,C=i.height,A=[["M",s,R],["l",f,0],["l",0,C],["l",-f,0],["z"]];return(0,y.KO)(A)},_.prototype.getConnectionPath=function(i){var s=i.waypoints,R,f,C=[];for(R=0;f=s[R];R++)f=f.original||f,C.push([R===0?"M":"L",f.x,f.y]);return(0,y.KO)(C)},_.$inject=["eventBus","styles"];var I=u(33112);const D={__init__:["defaultRenderer"],defaultRenderer:["type",_],styles:["type",I.Z]};var b=u(68302),w=u(89817),U=u(62565),N=u(27147),z=u(40296);const Y={__depends__:[D],__init__:["canvas"],canvas:["type",b.Z],elementRegistry:["type",w.Z],elementFactory:["type",U.Z],eventBus:["type",N.Z],graphicsFactory:["type",z.Z]};function Z(P){var i=[],s=[];function R(W){return i.indexOf(W)>=0}function f(W){i.push(W)}function C(W){R(W)||((W.__depends__||[]).forEach(C),!R(W)&&(f(W),(W.__init__||[]).forEach(function(G){s.push(G)})))}P.forEach(C);var A=new e(i);return s.forEach(function(W){try{A[typeof W=="string"?"get":"invoke"](W)}catch(G){throw console.error("Failed to instantiate component"),console.error(G.stack),G}}),A}function F(P){P=P||{};var i={config:["value",P]},s=[i,Y].concat(P.modules||[]);return Z(s)}function B(P,i){this.injector=i=i||F(P),this.get=i.get,this.invoke=i.invoke,this.get("eventBus").fire("diagram.init")}B.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},B.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},26019:($,H,u)=>{u.d(H,{Z:()=>d});var h=u(83612),L=u.n(h);function d(E,v){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=v,this._eventBus=E,this._uid=1,E.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}d.$inject=["eventBus","injector"],d.prototype.execute=function(E,v){if(!E)throw new Error("command required");var O={command:E,context:v};this._pushAction(O),this._internalExecute(O),this._popAction(O)},d.prototype.canExecute=function(E,v){var O={command:E,context:v},p=this._getHandler(E),x=this._fire(E,"canExecute",O);if(x===void 0){if(!p)return!1;p.canExecute&&(x=p.canExecute(v))}return x},d.prototype.clear=function(E){this._stack.length=0,this._stackIdx=-1,E!==!1&&this._fire("changed")},d.prototype.undo=function(){var E=this._getUndoAction(),v;if(E){for(this._pushAction(E);E&&(this._internalUndo(E),v=this._getUndoAction(),!(!v||v.id!==E.id));)E=v;this._popAction()}},d.prototype.redo=function(){var E=this._getRedoAction(),v;if(E){for(this._pushAction(E);E&&(this._internalExecute(E,!0),v=this._getRedoAction(),!(!v||v.id!==E.id));)E=v;this._popAction()}},d.prototype.register=function(E,v){this._setHandler(E,v)},d.prototype.registerHandler=function(E,v){if(!E||!v)throw new Error("command and handlerCls must be defined");var O=this._injector.instantiate(v);this.register(E,O)},d.prototype.canUndo=function(){return!!this._getUndoAction()},d.prototype.canRedo=function(){return!!this._getRedoAction()},d.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},d.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},d.prototype._internalUndo=function(E){var v=this,O=E.command,p=E.context,x=this._getHandler(O);this._atomicDo(function(){v._fire(O,"revert",E),x.revert&&v._markDirty(x.revert(p)),v._revertedAction(E),v._fire(O,"reverted",E)})},d.prototype._fire=function(E,v,O){arguments.length<3&&(O=v,v=null);var p=v?[E+"."+v,v]:[E],x,T,c;for(O=this._eventBus.createEvent(O),x=0;(T=p[x])&&(c=this._eventBus.fire("commandStack."+T,O),!O.cancelBubble);x++);return c},d.prototype._createId=function(){return this._uid++},d.prototype._atomicDo=function(E){var v=this._currentExecution;v.atomic=!0;try{E()}finally{v.atomic=!1}},d.prototype._internalExecute=function(E,v){var O=this,p=E.command,x=E.context,T=this._getHandler(p);if(!T)throw new Error("no command handler registered for <"+p+">");this._pushAction(E),v||(this._fire(p,"preExecute",E),T.preExecute&&T.preExecute(x),this._fire(p,"preExecuted",E)),this._atomicDo(function(){O._fire(p,"execute",E),T.execute&&O._markDirty(T.execute(x)),O._executedAction(E,v),O._fire(p,"executed",E)}),v||(this._fire(p,"postExecute",E),T.postExecute&&T.postExecute(x),this._fire(p,"postExecuted",E)),this._popAction(E)},d.prototype._pushAction=function(E){var v=this._currentExecution,O=v.actions,p=O[0];if(v.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+E.command+")");E.id||(E.id=p&&p.id||this._createId()),O.push(E)},d.prototype._popAction=function(){var E=this._currentExecution,v=E.actions,O=E.dirty;v.pop(),v.length||(this._eventBus.fire("elements.changed",{elements:(0,h.uniqueBy)("id",O.reverse())}),O.length=0,this._fire("changed"))},d.prototype._markDirty=function(E){var v=this._currentExecution;!E||(E=(0,h.isArray)(E)?E:[E],v.dirty=v.dirty.concat(E))},d.prototype._executedAction=function(E,v){var O=++this._stackIdx;v||this._stack.splice(O,this._stack.length,E)},d.prototype._revertedAction=function(E){this._stackIdx--},d.prototype._getHandler=function(E){return this._handlerMap[E]},d.prototype._setHandler=function(E,v){if(!E||!v)throw new Error("command and handler required");if(this._handlerMap[E])throw new Error("overriding handler for command <"+E+">");this._handlerMap[E]=v}},68302:($,H,u)=>{u.d(H,{Z:()=>e});var h=u(83612),L=u.n(h),d=u(91499),E=u(64960),v=u(21537);function O(t,o){return Math.round(t*o)/o}function p(t){return(0,h.isNumber)(t)?t+"px":t}function x(t){t=(0,h.assign)({},{width:"100%",height:"100%"},t);var o=t.container||document.body,r=document.createElement("div");return r.setAttribute("class","djs-container"),(0,h.assign)(r.style,{position:"relative",overflow:"hidden",width:p(t.width),height:p(t.height)}),o.appendChild(r),r}function T(t,o,r){var y=(0,v.Ue)("g");(0,v.Sh)(y).add(o);var m=r!==void 0?r:t.childNodes.length-1;return t.insertBefore(y,t.childNodes[m]||null),y}var c="base",a={shape:["x","y","width","height"],connection:["waypoints"]};function e(t,o,r,y){this._eventBus=o,this._elementRegistry=y,this._graphicsFactory=r,this._init(t||{})}e.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],e.prototype._init=function(t){var o=this._eventBus,r=this._container=x(t),y=this._svg=(0,v.Ue)("svg");(0,v.Lj)(y,{width:"100%",height:"100%"}),(0,v.R3)(r,y);var m=this._viewport=T(y,"viewport");this._layers={},t.deferUpdate!==!1&&(this._viewboxChanged=(0,h.debounce)((0,h.bind)(this._viewboxChanged,this),300)),o.on("diagram.init",function(){o.fire("canvas.init",{svg:y,viewport:m})},this),o.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),o.on("diagram.destroy",500,this._destroy,this),o.on("diagram.clear",500,this._clear,this)},e.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var o=this._container.parentNode;o&&o.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},e.prototype._clear=function(){var t=this,o=this._elementRegistry.getAll();o.forEach(function(r){var y=(0,E.oL)(r);y==="root"?t.setRootElement(null,!0):t._removeElement(r,y)}),delete this._cachedViewbox},e.prototype.getDefaultLayer=function(){return this.getLayer(c,0)},e.prototype.getLayer=function(t,o){if(!t)throw new Error("must specify a name");var r=this._layers[t];if(r||(r=this._layers[t]=this._createLayer(t,o)),typeof o<"u"&&r.index!==o)throw new Error("layer <"+t+"> already created at index <"+o+">");return r.group},e.prototype._createLayer=function(t,o){o||(o=0);var r=(0,h.reduce)(this._layers,function(y,m){return o>=m.index&&y++,y},0);return{group:T(this._viewport,"layer-"+t,r),index:o}},e.prototype.getContainer=function(){return this._container},e.prototype._updateMarker=function(t,o,r){var y;t.id||(t=this._elementRegistry.get(t)),y=this._elementRegistry._elements[t.id],y&&((0,h.forEach)([y.gfx,y.secondaryGfx],function(m){m&&(r?(0,v.Sh)(m).add(o):(0,v.Sh)(m).remove(o))}),this._eventBus.fire("element.marker.update",{element:t,gfx:y.gfx,marker:o,add:!!r}))},e.prototype.addMarker=function(t,o){this._updateMarker(t,o,!0)},e.prototype.removeMarker=function(t,o){this._updateMarker(t,o,!1)},e.prototype.hasMarker=function(t,o){t.id||(t=this._elementRegistry.get(t));var r=this.getGraphics(t);return(0,v.Sh)(r).has(o)},e.prototype.toggleMarker=function(t,o){this.hasMarker(t,o)?this.removeMarker(t,o):this.addMarker(t,o)},e.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},e.prototype.setRootElement=function(t,o){t&&this._ensureValid("root",t);var r=this._rootElement,y=this._elementRegistry,m=this._eventBus;if(r){if(!o)throw new Error("rootElement already set, need to specify override");m.fire("root.remove",{element:r}),m.fire("root.removed",{element:r}),y.remove(r)}if(t){var n=this.getDefaultLayer();m.fire("root.add",{element:t}),y.add(t,n,this._svg),m.fire("root.added",{element:t,gfx:n})}return this._rootElement=t,t},e.prototype._ensureValid=function(t,o){if(!o.id)throw new Error("element must have an id");if(this._elementRegistry.get(o.id))throw new Error("element with id "+o.id+" already exists");var r=a[t],y=(0,h.every)(r,function(m){return typeof o[m]<"u"});if(!y)throw new Error("must supply { "+r.join(", ")+" } with "+t)},e.prototype._setParent=function(t,o,r){(0,d.IH)(o.children,t,r),t.parent=o},e.prototype._addElement=function(t,o,r,y){r=r||this.getRootElement();var m=this._eventBus,n=this._graphicsFactory;this._ensureValid(t,o),m.fire(t+".add",{element:o,parent:r}),this._setParent(o,r,y);var l=n.create(t,o,y);return this._elementRegistry.add(o,l),n.update(t,o,l),m.fire(t+".added",{element:o,gfx:l}),o},e.prototype.addShape=function(t,o,r){return this._addElement("shape",t,o,r)},e.prototype.addConnection=function(t,o,r){return this._addElement("connection",t,o,r)},e.prototype._removeElement=function(t,o){var r=this._elementRegistry,y=this._graphicsFactory,m=this._eventBus;if(t=r.get(t.id||t),!!t)return m.fire(o+".remove",{element:t}),y.remove(t),(0,d.Od)(t.parent&&t.parent.children,t),t.parent=null,m.fire(o+".removed",{element:t}),r.remove(t),t},e.prototype.removeShape=function(t){return this._removeElement(t,"shape")},e.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},e.prototype.getGraphics=function(t,o){return this._elementRegistry.getGraphics(t,o)},e.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},e.prototype._viewboxChanged=function(){!this._container||this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},e.prototype.viewbox=function(t){if(t===void 0&&this._cachedViewbox)return this._cachedViewbox;var o=this._viewport,r,y=this.getSize(),m,n,l,_,I;if(t)this._changeViewbox(function(){l=Math.min(y.width/t.width,y.height/t.height);var D=this._svg.createSVGMatrix().scale(l).translate(-t.x,-t.y);(0,v.vs)(o,D)});else return r=this.getDefaultLayer().getBBox(),n=(0,v.vs)(o),m=n?n.matrix:(0,v.wz)(),l=O(m.a,1e3),_=O(-m.e||0,1e3),I=O(-m.f||0,1e3),t=this._cachedViewbox={x:_?_/l:0,y:I?I/l:0,width:y.width/l,height:y.height/l,scale:l,inner:{width:r.width,height:r.height,x:r.x,y:r.y},outer:y},t;return t},e.prototype.scroll=function(t){var o=this._viewport,r=o.getCTM();return t&&this._changeViewbox(function(){t=(0,h.assign)({dx:0,dy:0},t||{}),r=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(r),g(o,r)}),{x:r.e,y:r.f}},e.prototype.zoom=function(t,o){if(!t)return this.viewbox(t).scale;if(t==="fit-viewport")return this._fitViewport(o);var r,y;return this._changeViewbox(function(){typeof o!="object"&&(r=this.viewbox().outer,o={x:r.width/2,y:r.height/2}),y=this._setZoom(t,o)}),O(y.a,1e3)};function g(t,o){var r="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";t.setAttribute("transform",r)}e.prototype._fitViewport=function(t){var o=this.viewbox(),r=o.outer,y=o.inner,m,n;return y.x>=0&&y.y>=0&&y.x+y.width<=r.width&&y.y+y.height<=r.height&&!t?n={x:0,y:0,width:Math.max(y.width+y.x,r.width),height:Math.max(y.height+y.y,r.height)}:(m=Math.min(1,r.width/y.width,r.height/y.height),n={x:y.x+(t?y.width/2-r.width/m/2:0),y:y.y+(t?y.height/2-r.height/m/2:0),width:r.width/m,height:r.height/m}),this.viewbox(n),this.viewbox(!1).scale},e.prototype._setZoom=function(t,o){var r=this._svg,y=this._viewport,m=r.createSVGMatrix(),n=r.createSVGPoint(),l,_,I,D,b;I=y.getCTM();var w=I.a;return o?(l=(0,h.assign)(n,o),_=l.matrixTransform(I.inverse()),D=m.translate(_.x,_.y).scale(1/w*t).translate(-_.x,-_.y),b=I.multiply(D)):b=m.scale(t),g(this._viewport,b),b},e.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},e.prototype.getAbsoluteBBox=function(t){var o=this.viewbox(),r;if(t.waypoints){var y=this.getGraphics(t);r=y.getBBox()}else r=t;var m=r.x*o.scale-o.x*o.scale,n=r.y*o.scale-o.y*o.scale,l=r.width*o.scale,_=r.height*o.scale;return{x:m,y:n,width:l,height:_}},e.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},62565:($,H,u)=>{u.d(H,{Z:()=>E});var h=u(83962),L=u(83612),d=u.n(L);function E(){this._uid=12}E.prototype.createRoot=function(v){return this.create("root",v)},E.prototype.createLabel=function(v){return this.create("label",v)},E.prototype.createShape=function(v){return this.create("shape",v)},E.prototype.createConnection=function(v){return this.create("connection",v)},E.prototype.create=function(v,O){return O=(0,L.assign)({},O||{}),O.id||(O.id=v+"_"+this._uid++),(0,h.Ue)(v,O)}},89817:($,H,u)=>{u.d(H,{Z:()=>d});var h=u(21537),L="data-element-id";function d(E){this._elements={},this._eventBus=E}d.$inject=["eventBus"],d.prototype.add=function(E,v,O){var p=E.id;this._validateId(p),(0,h.Lj)(v,L,p),O&&(0,h.Lj)(O,L,p),this._elements[p]={element:E,gfx:v,secondaryGfx:O}},d.prototype.remove=function(E){var v=this._elements,O=E.id||E,p=O&&v[O];p&&((0,h.Lj)(p.gfx,L,""),p.secondaryGfx&&(0,h.Lj)(p.secondaryGfx,L,""),delete v[O])},d.prototype.updateId=function(E,v){this._validateId(v),typeof E=="string"&&(E=this.get(E)),this._eventBus.fire("element.updateId",{element:E,newId:v});var O=this.getGraphics(E),p=this.getGraphics(E,!0);this.remove(E),E.id=v,this.add(E,O,p)},d.prototype.get=function(E){var v;typeof E=="string"?v=E:v=E&&(0,h.Lj)(E,L);var O=this._elements[v];return O&&O.element},d.prototype.filter=function(E){var v=[];return this.forEach(function(O,p){E(O,p)&&v.push(O)}),v},d.prototype.getAll=function(){return this.filter(function(E){return E})},d.prototype.forEach=function(E){var v=this._elements;Object.keys(v).forEach(function(O){var p=v[O],x=p.element,T=p.gfx;return E(x,T)})},d.prototype.getGraphics=function(E,v){var O=E.id||E,p=this._elements[O];return p&&(v?p.secondaryGfx:p.gfx)},d.prototype._validateId=function(E){if(!E)throw new Error("element must have an id");if(this._elements[E])throw new Error("element with id "+E+" already added")}},27147:($,H,u)=>{u.d(H,{Z:()=>O});var h=u(83612),L=u.n(h),d="__fn",E=1e3,v=Array.prototype.slice;function O(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}O.prototype.on=function(T,c,a,e){if(T=(0,h.isArray)(T)?T:[T],(0,h.isFunction)(c)&&(e=a,a=c,c=E),!(0,h.isNumber)(c))throw new Error("priority must be a number");var g=a;e&&(g=(0,h.bind)(a,e),g[d]=a[d]||a);var t=this;T.forEach(function(o){t._addListener(o,{priority:c,callback:g,next:null})})},O.prototype.once=function(T,c,a,e){var g=this;if((0,h.isFunction)(c)&&(e=a,a=c,c=E),!(0,h.isNumber)(c))throw new Error("priority must be a number");function t(){var o=a.apply(e,arguments);return g.off(T,t),o}t[d]=a,this.on(T,c,t)},O.prototype.off=function(T,c){T=(0,h.isArray)(T)?T:[T];var a=this;T.forEach(function(e){a._removeListener(e,c)})},O.prototype.createEvent=function(T){var c=new p;return c.init(T),c},O.prototype.fire=function(T,c){var a,e,g,t;if(t=v.call(arguments),typeof T=="object"&&(c=T,T=c.type),!T)throw new Error("no event type specified");if(e=this._listeners[T],!!e){c instanceof p?a=c:a=this.createEvent(c),t[0]=a;var o=a.type;T!==o&&(a.type=T);try{g=this._invokeListeners(a,t,e)}finally{T!==o&&(a.type=o)}return g===void 0&&a.defaultPrevented&&(g=!1),g}},O.prototype.handleError=function(T){return this.fire("error",{error:T})===!1},O.prototype._destroy=function(){this._listeners={}},O.prototype._invokeListeners=function(T,c,a){for(var e;a&&!T.cancelBubble;)e=this._invokeListener(T,c,a),a=a.next;return e},O.prototype._invokeListener=function(T,c,a){var e;try{e=x(a.callback,c),e!==void 0&&(T.returnValue=e,T.stopPropagation()),e===!1&&T.preventDefault()}catch(g){if(!this.handleError(g))throw console.error("unhandled error in event listener"),console.error(g.stack),g}return e},O.prototype._addListener=function(T,c){var a=this._getListeners(T),e;if(!a){this._setListeners(T,c);return}for(;a;){if(a.priority<c.priority){c.next=a,e?e.next=c:this._setListeners(T,c);return}e=a,a=a.next}e.next=c},O.prototype._getListeners=function(T){return this._listeners[T]},O.prototype._setListeners=function(T,c){this._listeners[T]=c},O.prototype._removeListener=function(T,c){var a=this._getListeners(T),e,g,t;if(!c){this._setListeners(T,null);return}for(;a;)e=a.next,t=a.callback,(t===c||t[d]===c)&&(g?g.next=e:this._setListeners(T,e)),g=a,a=e};function p(){}p.prototype.stopPropagation=function(){this.cancelBubble=!0},p.prototype.preventDefault=function(){this.defaultPrevented=!0},p.prototype.init=function(T){(0,h.assign)(this,T||{})};function x(T,c){return T.apply(null,c)}},47595:($,H,u)=>{u.d(H,{Z:()=>L});var h=1e3;function L(d,E){var v=this;E=E||h,d.on(["render.shape","render.connection"],E,function(O,p){var x=O.type,T=p.element,c=p.gfx;if(v.canRender(T))return x==="render.shape"?v.drawShape(c,T):v.drawConnection(c,T)}),d.on(["render.getShapePath","render.getConnectionPath"],E,function(O,p){if(v.canRender(p))return O.type==="render.getShapePath"?v.getShapePath(p):v.getConnectionPath(p)})}L.prototype.canRender=function(){},L.prototype.drawShape=function(){},L.prototype.drawConnection=function(){},L.prototype.getShapePath=function(){},L.prototype.getConnectionPath=function(){}},22586:($,H,u)=>{u.d(H,{Z:()=>p});var h=u(83612);function L(x){return x&&x[x.length-1]}function d(x){return x.y}function E(x){return x.x}var v={left:E,center:E,right:function(x){return x.x+x.width},top:d,middle:d,bottom:function(x){return x.y+x.height}};function O(x){this._modeling=x}O.$inject=["modeling"],O.prototype._getOrientationDetails=function(x){var T=["top","bottom","middle"],c="x",a="width";return T.indexOf(x)!==-1&&(c="y",a="height"),{axis:c,dimension:a}},O.prototype._isType=function(x,T){return T.indexOf(x)!==-1},O.prototype._alignmentPosition=function(x,T){var c=this._getOrientationDetails(x),a=c.axis,e=c.dimension,g={},t={},o=!1,r,y,m;function n(l,_){return Math.round((l[a]+_[a]+_[e])/2)}if(this._isType(x,["left","top"]))g[x]=T[0][a];else if(this._isType(x,["right","bottom"]))m=L(T),g[x]=m[a]+m[e];else if(this._isType(x,["center","middle"])){if((0,h.forEach)(T,function(l){var _=l[a]+Math.round(l[e]/2);t[_]?t[_].elements.push(l):t[_]={elements:[l],center:_}}),r=(0,h.sortBy)(t,function(l){return l.elements.length>1&&(o=!0),l.elements.length}),o)return g[x]=L(r).center,g;y=T[0],T=(0,h.sortBy)(T,function(l){return l[a]+l[e]}),m=L(T),g[x]=n(y,m)}return g},O.prototype.trigger=function(x,T){var c=this._modeling,a=(0,h.filter)(x,function(o){return!(o.waypoints||o.host||o.labelTarget)}),e=v[T],g=(0,h.sortBy)(a,e),t=this._alignmentPosition(T,g);c.alignElements(g,t)};const p={__init__:["alignElements"],alignElements:["type",O]}},9237:($,H,u)=>{u.d(H,{Z:()=>c});var h=u(59879),L=u.n(h),d=u(64960),E=u(86463),v=u(83612),O=u(91658);function p(a,e,g,t){O.Z.call(this,a),this._elementRegistry=e,this._modeling=g,this._rules=t;var o=this;this.postExecuted(["shape.create"],function(r){var y=r.context,m=y.hints||{},n=y.shape,l=y.parent||y.newParent;m.autoResize!==!1&&o._expand([n],l)}),this.postExecuted(["elements.move"],function(r){var y=r.context,m=(0,v.flatten)((0,v.values)(y.closure.topLevel)),n=y.hints,l=n?n.autoResize:!0;if(l!==!1){var _=(0,v.groupBy)(m,function(I){return I.parent.id});(0,v.forEach)(_,function(I,D){(0,v.isArray)(l)&&(I=I.filter(function(b){return(0,v.find)(l,(0,v.matchPattern)({id:b.id}))})),o._expand(I,D)})}}),this.postExecuted(["shape.toggleCollapse"],function(r){var y=r.context,m=y.hints,n=y.shape;m&&m.autoResize===!1||n.collapsed||o._expand(n.children||[],n)}),this.postExecuted(["shape.resize"],function(r){var y=r.context,m=y.hints,n=y.shape,l=n.parent;m&&m.autoResize===!1||l&&o._expand([n],l)})}p.$inject=["eventBus","elementRegistry","modeling","rules"],L()(p,O.Z),p.prototype._getOptimalBounds=function(a,e){var g=this.getOffset(e),t=this.getPadding(e),o=(0,E.JA)((0,d.jY)(a)),r=(0,E.JA)(e),y={};return o.top-r.top<t.top&&(y.top=o.top-g.top),o.left-r.left<t.left&&(y.left=o.left-g.left),r.right-o.right<t.right&&(y.right=o.right+g.right),r.bottom-o.bottom<t.bottom&&(y.bottom=o.bottom+g.bottom),(0,E.z_)((0,v.assign)({},r,y))},p.prototype._expand=function(a,e){typeof e=="string"&&(e=this._elementRegistry.get(e));var g=this._rules.allowed("element.autoResize",{elements:a,target:e});if(!!g){var t=this._getOptimalBounds(a,e);if(!!x(t,e)){var o=T((0,v.pick)(e,["x","y","width","height"]),t);this.resize(e,t,{autoResize:o});var r=e.parent;r&&this._expand([e],r)}}},p.prototype.getOffset=function(a){return{top:60,bottom:60,left:100,right:100}},p.prototype.getPadding=function(a){return{top:2,bottom:2,left:15,right:15}},p.prototype.resize=function(a,e,g){this._modeling.resizeShape(a,e,null,g)};function x(a,e){return a.x!==e.x||a.y!==e.y||a.width!==e.width||a.height!==e.height}function T(a,e){var g="";return a=(0,E.JA)(a),e=(0,E.JA)(e),a.top>e.top&&(g=g.concat("n")),a.right<e.right&&(g=g.concat("w")),a.bottom<e.bottom&&(g=g.concat("s")),a.left>e.left&&(g=g.concat("e")),g}const c={__init__:["autoResize"],autoResize:["type",p]}},68077:($,H,u)=>{u.d(H,{lo:()=>o,MY:()=>r,wZ:()=>n,zG:()=>_,bg:()=>I,s4:()=>m});var h=u(46534),L=u(41741),d=u(21537),E=u(18872),v=u(7502),O=u.n(v),p=Math.round,x=Math.max;function T(b,w){var U=b.x,N=b.y;return[["M",U,N],["m",0,-w],["a",w,w,0,1,1,0,2*w],["a",w,w,0,1,1,0,-2*w],["z"]]}function c(b){var w=[];return b.forEach(function(U,N){w.push([N===0?"M":"L",U.x,U.y])}),w}var a=10;function e(b,w){var U,N;for(U=0;N=b[U];U++)if((0,L.tW)(N,w)<=a)return{point:b[U],bendpoint:!0,index:U};return null}function g(b,w){var U=O()(T(w,a),c(b)),N=U[0],z=U[U.length-1],Y;return N?N!==z?N.segment2!==z.segment2?(Y=x(N.segment2,z.segment2)-1,{point:b[Y],bendpoint:!0,index:Y}):{point:{x:p(N.x+z.x)/2,y:p(N.y+z.y)/2},index:N.segment2}:{point:{x:p(N.x),y:p(N.y)},index:N.segment2}:null}function t(b,w){return e(b,w)||g(b,w)}var o="djs-bendpoint",r="djs-segment-dragger";function y(b,w){var U=(0,h.jt)(w),N=b._container.getBoundingClientRect(),z;z={x:N.left,y:N.top};var Y=b.viewbox();return{x:Y.x+(U.x-z.x)/Y.scale,y:Y.y+(U.y-z.y)/Y.scale}}function m(b,w,U){var N=y(b,U),z=t(w,N);return z}function n(b,w){var U=(0,d.Ue)("g");(0,d.Sh)(U).add(o),(0,d.R3)(b,U);var N=(0,d.Ue)("circle");(0,d.Lj)(N,{cx:0,cy:0,r:4}),(0,d.Sh)(N).add("djs-visual"),(0,d.R3)(U,N);var z=(0,d.Ue)("circle");return(0,d.Lj)(z,{cx:0,cy:0,r:10}),(0,d.Sh)(z).add("djs-hit"),(0,d.R3)(U,z),w&&(0,d.Sh)(U).add(w),U}function l(b,w,U,N){var z=(0,d.Ue)("g");(0,d.R3)(b,z);var Y=14,Z=3,F=6,B=D(w,U,N),P=Z+F,i=(0,d.Ue)("rect");(0,d.Lj)(i,{x:-Y/2,y:-Z/2,width:Y,height:Z}),(0,d.Sh)(i).add("djs-visual"),(0,d.R3)(z,i);var s=(0,d.Ue)("rect");return(0,d.Lj)(s,{x:-B/2,y:-P/2,width:B,height:P}),(0,d.Sh)(s).add("djs-hit"),(0,d.R3)(z,s),(0,E.U1)(z,N==="v"?90:0,0,0),z}function _(b,w,U){var N=(0,d.Ue)("g"),z=(0,L.SO)(w,U),Y=(0,L.Or)(w,U);return(0,d.R3)(b,N),l(N,w,U,Y),(0,d.Sh)(N).add(r),(0,d.Sh)(N).add(Y==="h"?"horizontal":"vertical"),(0,E.Iu)(N,z.x,z.y),N}function I(b){return Math.abs(Math.round(b*2/3))}function D(b,w,U){var N=w.x-b.x,z=w.y-b.y;return I(U==="h"?N:z)}},71878:($,H,u)=>{u.d(H,{Z:()=>a});var h=u(83612),L=u.n(h),d=u(24706),E=u.n(d),v=u(68077),O=u(33185),p=u.n(O),x=u(41741),T=u(21537),c=u(18872);function a(g,t,o,r,y){var m=this;function n(P,i,s){var R=P.index,f=P.point,C,A,W,G,V,Q;return R<=0||P.bendpoint?!1:(C=i[R-1],A=i[R],W=(0,x.SO)(C,A),G=(0,x.Or)(C,A),V=Math.abs(f.x-W.x),Q=Math.abs(f.y-W.y),G&&V<=s&&Q<=s)}function l(P,i){var s=P.waypoints,R,f,C,A;return i.index<=0||i.bendpoint||(R={start:s[i.index-1],end:s[i.index]},f=(0,x.Or)(R.start,R.end),!f)?null:(f==="h"?C=R.end.x-R.start.x:C=R.end.y-R.start.y,A=(0,v.bg)(C)/2,A)}function _(P,i){var s=i.waypoints,R=(0,v.s4)(t,s,P),f;if(!!R)return f=l(i,R),n(R,s,f)?y.start(P,i,R.index):r.start(P,i,R.index,!R.bendpoint),!0}function I(P,i,s){d.event.bind(P,i,function(R){o.triggerMouseEvent(i,R,s),R.stopPropagation()})}function D(P,i){var s=t.getLayer("overlays"),R=(0,d.query)('.djs-bendpoints[data-element-id="'+p()(P.id)+'"]',s);return!R&&i&&(R=(0,T.Ue)("g"),(0,T.Lj)(R,{"data-element-id":P.id}),(0,T.Sh)(R).add("djs-bendpoints"),(0,T.R3)(s,R),I(R,"mousedown",P),I(R,"click",P),I(R,"dblclick",P)),R}function b(P,i){return(0,d.query)('.djs-segment-dragger[data-segment-idx="'+P+'"]',i)}function w(P,i){i.waypoints.filter(m.getConnectionBendpointsFilter).forEach(function(s,R){var f=(0,v.wZ)(P);(0,T.R3)(P,f),(0,c.Iu)(f,s.x,s.y)}),(0,v.wZ)(P,"floating")}function U(P,i){for(var s=i.waypoints,R,f,C,A=1;A<s.length;A++)R=s[A-1],f=s[A],(0,x.Or)(R,f)&&(C=(0,v.zG)(P,R,f),(0,T.Lj)(C,{"data-segment-idx":A}),I(C,"mousemove",i))}function N(P){(0,h.forEach)((0,d.queryAll)("."+v.lo,P),function(i){(0,T.Od)(i)})}function z(P){(0,h.forEach)((0,d.queryAll)("."+v.MY,P),function(i){(0,T.Od)(i)})}function Y(P){var i=D(P);return i||(i=D(P,!0),w(i,P),U(i,P)),i}function Z(P){var i=D(P);i&&(z(i),N(i),U(i,P),w(i,P))}function F(P,i){var s=(0,d.query)(".floating",P),R=i.point;!s||(0,c.Iu)(s,R.x,R.y)}function B(P,i,s){var R=b(i.index,P),f=s[i.index-1],C=s[i.index],A=i.point,W=(0,x.SO)(f,C),G=(0,x.Or)(f,C),V,Q;!R||(V=e(R),Q={x:A.x-W.x,y:A.y-W.y},G==="v"&&(Q={x:Q.y,y:Q.x}),(0,c.Iu)(V,Q.x,Q.y))}g.on("connection.changed",function(P){Z(P.element)}),g.on("connection.remove",function(P){var i=D(P.element);i&&(0,T.Od)(i)}),g.on("element.marker.update",function(P){var i=P.element,s;!i.waypoints||(s=Y(i),P.add?(0,T.Sh)(s).add(P.marker):(0,T.Sh)(s).remove(P.marker))}),g.on("element.mousemove",function(P){var i=P.element,s=i.waypoints,R,f;if(s){if(R=D(i,!0),f=(0,v.s4)(t,s,P.originalEvent),!f)return;F(R,f),f.bendpoint||B(R,f,s)}}),g.on("element.mousedown",function(P){var i=P.originalEvent,s=P.element,R=s.waypoints;if(!!R)return _(i,s)}),g.on("selection.changed",function(P){var i=P.newSelection,s=i[0];s&&s.waypoints&&Y(s)}),g.on("element.hover",function(P){var i=P.element;i.waypoints&&(Y(i),o.registerEvent(P.gfx,"mousemove","element.mousemove"))}),g.on("element.out",function(P){o.unregisterEvent(P.gfx,"mousemove","element.mousemove")}),g.on("element.updateId",function(P){var i=P.element,s=P.newId;if(i.waypoints){var R=D(i);R&&(0,T.Lj)(R,{"data-element-id":s})}}),this.addHandles=Y,this.updateHandles=Z,this.getBendpointsContainer=D,this.getSegmentDragger=b}a.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function e(g){return(0,d.query)(".djs-visual",g)}a.prototype.getConnectionBendpointsFilter=function(g,t,o){return!0}},42508:($,H,u)=>{u.d(H,{Z:()=>g});var h=u(41741),L=u(68077),d=u(86463),E=u(21537),v=u(18872),O="connect-hover",p="djs-updating";function x(t,o,r){return T(t,o,t[o]+r)}function T(t,o,r){return{x:o==="x"?r:t.x,y:o==="y"?r:t.y}}function c(t,o,r,y){var m=Math.max(o[y],r[y]),n=Math.min(o[y],r[y]),l=20,_=Math.min(Math.max(n+l,t[y]),m-l);return T(o,y,_)}function a(t){return t==="x"?"y":"x"}function e(t,o,r){var y,m;return t.original?t.original:(y=(0,d.wS)(o),m=a(r),T(t,m,y[m]))}function g(t,o,r,y,m,n){var l=t.get("connectionDocking",!1);this.start=function(w,U,N){var z,Y=r.getGraphics(U),Z=N-1,F=N,B=U.waypoints,P=B[Z],i=B[F],s=(0,L.s4)(r,B,w),R,f,C;R=(0,h.Or)(P,i),R&&(f=R==="v"?"x":"y",Z===0&&(P=e(P,U.source,f)),F===B.length-1&&(i=e(i,U.target,f)),s?C=s.point:C={x:(P.x+i.x)/2,y:(P.y+i.y)/2},z={connection:U,segmentStartIndex:Z,segmentEndIndex:F,segmentStart:P,segmentEnd:i,axis:f,dragPosition:C},y.init(w,C,"connectionSegment.move",{cursor:f==="x"?"resize-ew":"resize-ns",data:{connection:U,connectionGfx:Y,context:z}}))};function _(w,U){if(!l)return U;var N=w.waypoints,z;return w.waypoints=U,z=l.getCroppedWaypoints(w),w.waypoints=N,z}function I(w){m.update("connection",w.connection,w.connectionGfx)}function D(w,U,N){var z=w.newWaypoints,Y=w.segmentStartIndex+U,Z=z[Y],F=w.segmentEndIndex+U,B=z[F],P=a(w.axis),i=c(N,Z,B,P);(0,v.Iu)(w.draggerGfx,i.x,i.y)}function b(w,U){var N=0,z=w.filter(function(Y,Z){return(0,h.ZS)(w[Z-1],w[Z+1],Y)?(N=Z<=U?N-1:N,!1):!0});return{waypoints:z,segmentOffset:N}}o.on("connectionSegment.move.start",function(w){var U=w.context,N=w.connection,z=r.getLayer("overlays");U.originalWaypoints=N.waypoints.slice(),U.draggerGfx=(0,L.zG)(z,U.segmentStart,U.segmentEnd),(0,E.Sh)(U.draggerGfx).add("djs-dragging"),r.addMarker(N,p)}),o.on("connectionSegment.move.move",function(w){var U=w.context,N=U.connection,z=U.segmentStartIndex,Y=U.segmentEndIndex,Z=U.segmentStart,F=U.segmentEnd,B=U.axis,P=U.originalWaypoints.slice(),i=x(Z,B,w["d"+B]),s=x(F,B,w["d"+B]),R=P.length,f=0;P[z]=i,P[Y]=s;var C,A;z<2&&(C=(0,d.T8)(N.source,i),z===1?C==="intersect"&&(P.shift(),P[0]=i,f--):C!=="intersect"&&(P.unshift(Z),f++)),Y>R-3&&(A=(0,d.T8)(N.target,s),Y===R-2?A==="intersect"&&(P.pop(),P[P.length-1]=s):A!=="intersect"&&P.push(F)),U.newWaypoints=N.waypoints=_(N,P),D(U,f,w),U.newSegmentStartIndex=z+f,I(w)}),o.on("connectionSegment.move.hover",function(w){w.context.hover=w.hover,r.addMarker(w.hover,O)}),o.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(w){var U=w.context.hover;U&&r.removeMarker(U,O)}),o.on("connectionSegment.move.cleanup",function(w){var U=w.context,N=U.connection;U.draggerGfx&&(0,E.Od)(U.draggerGfx),r.removeMarker(N,p)}),o.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(w){var U=w.context,N=U.connection;N.waypoints=U.originalWaypoints,I(w)}),o.on("connectionSegment.move.end",function(w){var U=w.context,N=U.connection,z=U.newWaypoints,Y=U.newSegmentStartIndex;z=z.map(function(s){var R={x:Math.round(s.x),y:Math.round(s.y)};return s.original&&(R.original=s.original),R});var Z=b(z,Y),F=Z.waypoints,B=_(N,F),P=Z.segmentOffset,i={segmentMove:{segmentStartIndex:U.segmentStartIndex,newSegmentStartIndex:Y+P}};n.updateWaypoints(N,B,i)})}g.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"]},27521:($,H,u)=>{u.d(H,{Z:()=>F});var h=u(13203),L=u(67989),d=u(71878),E=u(86463),v=Math.round,O="reconnectStart",p="reconnectEnd",x="updateWaypoints";function T(B,P,i,s,R,f){this._injector=B,this.start=function(C,A,W,G){var V=i.getGraphics(A),Q=A.source,q=A.target,it=A.waypoints,nt;!G&&W===0?nt=O:!G&&W===it.length-1?nt=p:nt=x;var tt=nt===x?"connection.updateWaypoints":"connection.reconnect",X=R.allowed(tt,{connection:A,source:Q,target:q});X===!1&&(X=R.allowed(tt,{connection:A,source:q,target:Q})),X!==!1&&s.init(C,"bendpoint.move",{data:{connection:A,connectionGfx:V,context:{allowed:X,bendpointIndex:W,connection:A,source:Q,target:q,insert:G,type:nt}}})},P.on("bendpoint.move.hover",function(C){var A=C.context,W=A.connection,G=W.source,V=W.target,Q=C.hover,q=A.type;A.hover=Q;var it;if(!!Q){var nt=q===x?"connection.updateWaypoints":"connection.reconnect";if(it=A.allowed=R.allowed(nt,{connection:W,source:q===O?Q:G,target:q===p?Q:V,type:q}),it){A.source=q===O?Q:G,A.target=q===p?Q:V;return}it===!1&&(it=A.allowed=R.allowed(nt,{connection:W,source:q===p?Q:V,target:q===O?Q:G,type:q})),it&&(A.source=q===p?Q:V,A.target=q===O?Q:G)}}),P.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(C){var A=C.context;A.hover=null,A.source=null,A.target=null,A.allowed=!1}),P.on("bendpoint.move.end",function(C){var A=C.context,W=A.allowed,G=A.bendpointIndex,V=A.connection,Q=A.insert,q=V.waypoints.slice(),it=A.source,nt=A.target,tt=A.type,X={},ot={x:v(C.x),y:v(C.y)};if(!W)return!1;tt===x?(Q?q.splice(G,0,ot):q[G]=ot,X={bendpointMove:{insert:Q,bendpointIndex:G}},q=this.cropWaypoints(V,q),f.updateWaypoints(V,(0,E.Re)(q),X)):(tt===O?(X.docking="source",c(A)&&(X.docking="target",X.newWaypoints=q.reverse())):tt===p&&(X.docking="target",c(A)&&(X.docking="source",X.newWaypoints=q.reverse())),f.reconnect(V,it,nt,ot,X))},this)}T.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],T.prototype.cropWaypoints=function(B,P){var i=this._injector.get("connectionDocking",!1);if(!i)return P;var s=B.waypoints;return B.waypoints=P,B.waypoints=i.getCroppedWaypoints(B),P=B.waypoints,B.waypoints=s,P};function c(B){var P=B.hover,i=B.source,s=B.target,R=B.type;if(R===O)return P&&s&&P===s&&i!==s;if(R===p)return P&&i&&P===i&&i!==s}var a=u(21537),e=u(68077),g=u(18872),t="reconnectStart",o="reconnectEnd",r="updateWaypoints",y="connect-ok",m="connect-not-ok",n="connect-hover",l="djs-updating",_="djs-element-hidden",I=1100;function D(B,P,i,s){this._injector=P;var R=P.get("connectionPreview",!1);i.on("bendpoint.move.start",function(f){var C=f.context,A=C.bendpointIndex,W=C.connection,G=C.insert,V=W.waypoints,Q=V.slice();C.waypoints=V,G&&Q.splice(A,0,{x:f.x,y:f.y}),W.waypoints=Q;var q=C.draggerGfx=(0,e.wZ)(s.getLayer("overlays"));(0,a.Sh)(q).add("djs-dragging"),s.addMarker(W,_),s.addMarker(W,l)}),i.on("bendpoint.move.hover",function(f){var C=f.context,A=C.allowed,W=C.hover,G=C.type;if(W){if(s.addMarker(W,n),G===r)return;A?(s.removeMarker(W,m),s.addMarker(W,y)):A===!1&&(s.removeMarker(W,y),s.addMarker(W,m))}}),i.on(["bendpoint.move.out","bendpoint.move.cleanup"],I,function(f){var C=f.context,A=C.hover,W=C.target;A&&(s.removeMarker(A,n),s.removeMarker(A,W?y:m))}),i.on("bendpoint.move.move",function(f){var C=f.context,A=C.allowed,W=C.bendpointIndex,G=C.draggerGfx,V=C.hover,Q=C.type,q=C.connection,it=q.source,nt=q.target,tt=q.waypoints.slice(),X=tt.slice().reverse(),ot={x:f.x,y:f.y},J;R&&(J={source:it,target:nt},Q===t?c(C)?(J.connectionEnd=ot,J.source=nt,J.target=V||it,tt=X):(J.connectionStart=ot,J.source=V||it):Q===o?c(C)?(J.connectionStart=ot,J.target=it,J.source=V||nt,tt=X):(J.connectionEnd=ot,J.target=V||nt):(J.noCropping=!0,J.noLayout=!0,tt[W]=ot),Q===r&&(tt=B.cropWaypoints(q,tt)),J.waypoints=tt,R.drawPreview(C,A,J)),(0,g.Iu)(G,f.x,f.y)},this),i.on(["bendpoint.move.end","bendpoint.move.cancel"],I,function(f){var C=f.context,A=C.connection,W=C.draggerGfx,G=C.hover,V=C.target,Q=C.waypoints;A.waypoints=Q,(0,a.Od)(W),s.removeMarker(A,l),s.removeMarker(A,_),G&&(s.removeMarker(G,y),s.removeMarker(G,V?y:m)),R&&R.cleanUp(C)})}D.$inject=["bendpointMove","injector","eventBus","canvas"];var b=u(42508),w=u(83612),U=u(44610),N=Math.abs,z=Math.round,Y=10;function Z(B){function P(f,C){if((0,w.isArray)(f)){for(var A=f.length;A--;)if(N(f[A]-C)<=Y)return f[A]}else{f=+f;var W=C%f;if(W<Y)return C-W;if(W>f-Y)return C-W+f}return C}function i(f){if(f.width)return{x:z(f.width/2+f.x),y:z(f.height/2+f.y)}}function s(f){var C=f.snapPoints,A=f.connection,W=A.waypoints,G=f.segmentStart,V=f.segmentStartIndex,Q=f.segmentEnd,q=f.segmentEndIndex,it=f.axis;if(C)return C;var nt=[W[V-1],G,Q,W[q+1]];return V<2&&nt.unshift(i(A.source)),q>W.length-3&&nt.unshift(i(A.target)),f.snapPoints=C={horizontal:[],vertical:[]},(0,w.forEach)(nt,function(tt){tt&&(tt=tt.original||tt,it==="y"&&C.horizontal.push(tt.y),it==="x"&&C.vertical.push(tt.x))}),C}B.on("connectionSegment.move.move",1500,function(f){var C=f.context,A=s(C),W=f.x,G=f.y,V,Q;if(!!A){V=P(A.vertical,W),Q=P(A.horizontal,G);var q=W-V,it=G-Q;(0,w.assign)(f,{dx:f.dx-q,dy:f.dy-it,x:V,y:Q}),(q||A.vertical.indexOf(W)!==-1)&&(0,U.U)(f,"x",V),(it||A.horizontal.indexOf(G)!==-1)&&(0,U.U)(f,"y",Q)}});function R(f){var C=f.snapPoints,A=f.connection.waypoints,W=f.bendpointIndex;if(C)return C;var G=[A[W-1],A[W+1]];return f.snapPoints=C={horizontal:[],vertical:[]},(0,w.forEach)(G,function(V){V&&(V=V.original||V,C.horizontal.push(V.y),C.vertical.push(V.x))}),C}B.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(f){var C=f.context,A=R(C),W=C.hover,G=W&&i(W),V=f.x,Q=f.y,q,it;if(!!A){q=P(G?A.vertical.concat([G.x]):A.vertical,V),it=P(G?A.horizontal.concat([G.y]):A.horizontal,Q);var nt=V-q,tt=Q-it;(0,w.assign)(f,{dx:f.dx-nt,dy:f.dy-tt,x:f.x-nt,y:f.y-tt}),(nt||A.vertical.indexOf(V)!==-1)&&(0,U.U)(f,"x",q),(tt||A.horizontal.indexOf(Q)!==-1)&&(0,U.U)(f,"y",it)}})}Z.$inject=["eventBus"];const F={__depends__:[h.Z,L.Z],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",d.Z],bendpointMove:["type",T],bendpointMovePreview:["type",D],connectionSegmentMove:["type",b.Z],bendpointSnapping:["type",Z]}},98192:($,H,u)=>{u.d(H,{Z:()=>d});var h=u(64960);function L(E,v,O,p){E.on("element.changed",function(x){var T=x.element;(T.parent||T===v.getRootElement())&&(x.gfx=O.getGraphics(T)),x.gfx&&E.fire((0,h.oL)(T)+".changed",x)}),E.on("elements.changed",function(x){var T=x.elements;T.forEach(function(c){E.fire("element.changed",{element:c})}),p.updateContainments(T)}),E.on("shape.changed",function(x){p.update("shape",x.element,x.gfx)}),E.on("connection.changed",function(x){p.update("connection",x.element,x.gfx)})}L.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const d={__init__:["changeSupport"],changeSupport:["type",L]}},45193:($,H,u)=>{u.d(H,{Z:()=>g});var h=u(42226),L=u(67989),d=u(13203),E=u(86463),v=u(83612);function O(t,o,r,y){function m(l,_){return y.allowed("connection.create",{source:l,target:_})}function n(l,_){return m(_,l)}t.on("connect.hover",function(l){var _=l.context,I=_.start,D=l.hover,b;if(_.hover=D,b=_.canExecute=m(I,D),!(0,v.isNil)(b)){if(b!==!1){_.source=I,_.target=D;return}b=_.canExecute=n(I,D),!(0,v.isNil)(b)&&b!==!1&&(_.source=D,_.target=I)}}),t.on(["connect.out","connect.cleanup"],function(l){var _=l.context;_.hover=null,_.source=null,_.target=null,_.canExecute=!1}),t.on("connect.end",function(l){var _=l.context,I=_.canExecute,D=_.connectionStart,b={x:l.x,y:l.y},w=_.source,U=_.target;if(!I)return!1;var N=null,z={connectionStart:p(_)?b:D,connectionEnd:p(_)?D:b};(0,v.isObject)(I)&&(N=I);var Y=r.connect(w,U,N,z);l.context.connection=Y}),this.start=function(l,_,I,D){(0,v.isObject)(I)||(D=I,I=(0,E.wS)(_)),o.init(l,"connect",{autoActivate:D,data:{shape:_,context:{start:_,connectionStart:I}}})}}O.$inject=["eventBus","dragging","modeling","rules"];function p(t){var o=t.hover,r=t.source,y=t.target;return o&&r&&o===r&&r!==y}var x=1100,T=900,c="connect-ok",a="connect-not-ok";function e(t,o,r){var y=t.get("connectionPreview",!1);y&&o.on("connect.move",function(m){var n=m.context,l=n.canExecute,_=n.hover,I=n.source,D=n.start,b=n.startPosition,w=n.target,U=p(n)?{x:m.x,y:m.y}:b,N=p(n)?b:{x:m.x,y:m.y};y.drawPreview(n,l,{source:I||D,target:w||_,connectionStart:U,connectionEnd:N})}),o.on("connect.hover",T,function(m){var n=m.context,l=m.hover,_=n.canExecute;_!==null&&r.addMarker(l,_?c:a)}),o.on(["connect.out","connect.cleanup"],x,function(m){var n=m.hover;n&&(r.removeMarker(n,c),r.removeMarker(n,a))}),y&&o.on("connect.cleanup",function(m){y.cleanUp(m.context)})}e.$inject=["injector","eventBus","canvas"];const g={__depends__:[h.Z,L.Z,d.Z],__init__:["connectPreview"],connect:["type",O],connectPreview:["type",e]}},9572:($,H,u)=>{u.d(H,{Z:()=>O});var h=u(21537),L=u(83612),d=u.n(L),E=u(86463),v="djs-connection-preview";function O(T,c,a,e){this._canvas=c,this._graphicsFactory=a,this._elementFactory=e,this._connectionDocking=T.get("connectionDocking",!1),this._layouter=T.get("layouter",!1)}O.$inject=["injector","canvas","graphicsFactory","elementFactory"],O.prototype.drawPreview=function(T,c,a){a=a||{};var e=T.connectionPreviewGfx,g=T.getConnection,t=a.source,o=a.target,r=a.waypoints,y=a.connectionStart,m=a.connectionEnd,n=a.noLayout,l=a.noCropping,_=a.noNoop,I,D=this;if(e||(e=T.connectionPreviewGfx=this.createConnectionPreviewGfx()),(0,h.ZH)(e),g||(g=T.getConnection=p(function(b,w,U){return D.getConnection(b,w,U)})),c&&(I=g(c,t,o)),!I){!_&&this.drawNoopPreview(e,a);return}I.waypoints=r||[],this._layouter&&!n&&(I.waypoints=this._layouter.layoutConnection(I,{source:t,target:o,connectionStart:y,connectionEnd:m,waypoints:a.waypoints||I.waypoints})),(!I.waypoints||!I.waypoints.length)&&(I.waypoints=[t?(0,E.wS)(t):y,o?(0,E.wS)(o):m]),this._connectionDocking&&(t||o)&&!l&&(I.waypoints=this._connectionDocking.getCroppedWaypoints(I,t,o)),this._graphicsFactory.drawConnection(e,I)},O.prototype.drawNoopPreview=function(T,c){var a=c.source,e=c.target,g=c.connectionStart||(0,E.wS)(a),t=c.connectionEnd||(0,E.wS)(e),o=this.cropWaypoints(g,t,a,e),r=this.createNoopConnection(o[0],o[1]);(0,h.R3)(T,r)},O.prototype.cropWaypoints=function(T,c,a,e){var g=this._graphicsFactory,t=a&&g.getShapePath(a),o=e&&g.getShapePath(e),r=g.getConnectionPath({waypoints:[T,c]});return T=a&&(0,E.Hz)(t,r,!0)||T,c=e&&(0,E.Hz)(o,r,!1)||c,[T,c]},O.prototype.cleanUp=function(T){T&&T.connectionPreviewGfx&&(0,h.Od)(T.connectionPreviewGfx)},O.prototype.getConnection=function(T){var c=x(T);return this._elementFactory.createConnection(c)},O.prototype.createConnectionPreviewGfx=function(){var T=(0,h.Ue)("g");return(0,h.Lj)(T,{pointerEvents:"none"}),(0,h.Sh)(T).add(v),(0,h.R3)(this._canvas.getDefaultLayer(),T),T},O.prototype.createNoopConnection=function(T,c){var a=(0,h.Ue)("polyline");return(0,h.Lj)(a,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),(0,h.Lj)(a,{points:[T.x,T.y,c.x,c.y]}),a};function p(T){var c={};return function(a){var e=JSON.stringify(a),g=c[e];return g||(g=c[e]=T.apply(null,arguments)),g}}function x(T){return(0,L.isObject)(T)?T:{}}},17722:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(9572);const L={__init__:["connectionPreview"],connectionPreview:["type",h.Z]}},43190:($,H,u)=>{u.d(H,{Z:()=>m});var h=u(85637),L=u(83612),d=u(24706),E=u(64960),v=u(50296),O=new v.Z("ov"),p=500;function x(n,l,_,I){this._eventBus=l,this._canvas=_,this._elementRegistry=I,this._ids=O,this._overlayDefaults=(0,L.assign)({show:null,scale:!0},n&&n.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=T(_.getContainer()),this._init()}x.$inject=["config.overlays","eventBus","canvas","elementRegistry"],x.prototype.get=function(n){if((0,L.isString)(n)&&(n={id:n}),(0,L.isString)(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var l=this._getOverlayContainer(n.element,!0);return l?n.type?(0,L.filter)(l.overlays,(0,L.matchPattern)({type:n.type})):l.overlays.slice():[]}else return n.type?(0,L.filter)(this._overlays,(0,L.matchPattern)({type:n.type})):n.id?this._overlays[n.id]:null},x.prototype.add=function(n,l,_){if((0,L.isObject)(l)&&(_=l,l=null),n.id||(n=this._elementRegistry.get(n)),!_.position)throw new Error("must specifiy overlay position");if(!_.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var I=this._ids.next();return _=(0,L.assign)({},this._overlayDefaults,_,{id:I,type:l,element:n,html:_.html}),this._addOverlay(_),I},x.prototype.remove=function(n){var l=this.get(n)||[];(0,L.isArray)(l)||(l=[l]);var _=this;(0,L.forEach)(l,function(I){var D=_._getOverlayContainer(I.element,!0);if(I&&((0,d.remove)(I.html),(0,d.remove)(I.htmlContainer),delete I.htmlContainer,delete I.element,delete _._overlays[I.id]),D){var b=D.overlays.indexOf(I);b!==-1&&D.overlays.splice(b,1)}})},x.prototype.show=function(){a(this._overlayRoot)},x.prototype.hide=function(){a(this._overlayRoot,!1)},x.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,d.clear)(this._overlayRoot)},x.prototype._updateOverlayContainer=function(n){var l=n.element,_=n.html,I=l.x,D=l.y;if(l.waypoints){var b=(0,E.jY)(l);I=b.x,D=b.y}c(_,I,D),(0,d.attr)(n.html,"data-container-id",l.id)},x.prototype._updateOverlay=function(n){var l=n.position,_=n.htmlContainer,I=n.element,D=l.left,b=l.top;if(l.right!==void 0){var w;I.waypoints?w=(0,E.jY)(I).width:w=I.width,D=l.right*-1+w}if(l.bottom!==void 0){var U;I.waypoints?U=(0,E.jY)(I).height:U=I.height,b=l.bottom*-1+U}c(_,D||0,b||0)},x.prototype._createOverlayContainer=function(n){var l=(0,d.domify)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(l);var _={html:l,element:n,overlays:[]};return this._updateOverlayContainer(_),this._overlayContainers.push(_),_},x.prototype._updateRoot=function(n){var l=n.scale||1,_="matrix("+[l,0,0,l,-1*n.x*l,-1*n.y*l].join(",")+")";e(this._overlayRoot,_)},x.prototype._getOverlayContainer=function(n,l){var _=(0,L.find)(this._overlayContainers,function(I){return I.element===n});return!_&&!l?this._createOverlayContainer(n):_},x.prototype._addOverlay=function(n){var l=n.id,_=n.element,I=n.html,D,b;I.get&&I.constructor.prototype.jquery&&(I=I.get(0)),(0,L.isString)(I)&&(I=(0,d.domify)(I)),b=this._getOverlayContainer(_),D=(0,d.domify)('<div class="djs-overlay" data-overlay-id="'+l+'" style="position: absolute">'),D.appendChild(I),n.type&&(0,d.classes)(D).add("djs-overlay-"+n.type),n.htmlContainer=D,b.overlays.push(n),b.html.appendChild(D),this._overlays[l]=n,this._updateOverlay(n),this._updateOverlayVisibilty(n,this._canvas.viewbox())},x.prototype._updateOverlayVisibilty=function(n,l){var _=n.show,I=_&&_.minZoom,D=_&&_.maxZoom,b=n.htmlContainer,w=!0;_&&(((0,L.isDefined)(I)&&I>l.scale||(0,L.isDefined)(D)&&D<l.scale)&&(w=!1),a(b,w)),this._updateOverlayScale(n,l)},x.prototype._updateOverlayScale=function(n,l){var _=n.scale,I,D,b=n.htmlContainer,w,U="";_!==!0&&(_===!1?(I=1,D=1):(I=_.min,D=_.max),(0,L.isDefined)(I)&&l.scale<I&&(w=(1/l.scale||1)*I),(0,L.isDefined)(D)&&l.scale>D&&(w=(1/l.scale||1)*D)),(0,L.isDefined)(w)&&(U="scale("+w+","+w+")"),e(b,U)},x.prototype._updateOverlaysVisibilty=function(n){var l=this;(0,L.forEach)(this._overlays,function(_){l._updateOverlayVisibilty(_,n)})},x.prototype._init=function(){var n=this._eventBus,l=this;function _(I){l._updateRoot(I),l._updateOverlaysVisibilty(I),l.show()}n.on("canvas.viewbox.changing",function(I){l.hide()}),n.on("canvas.viewbox.changed",function(I){_(I.viewbox)}),n.on(["shape.remove","connection.remove"],function(I){var D=I.element,b=l.get({element:D});(0,L.forEach)(b,function(N){l.remove(N.id)});var w=l._getOverlayContainer(D);if(w){(0,d.remove)(w.html);var U=l._overlayContainers.indexOf(w);U!==-1&&l._overlayContainers.splice(U,1)}}),n.on("element.changed",p,function(I){var D=I.element,b=l._getOverlayContainer(D,!0);b&&((0,L.forEach)(b.overlays,function(w){l._updateOverlay(w)}),l._updateOverlayContainer(b))}),n.on("element.marker.update",function(I){var D=l._getOverlayContainer(I.element,!0);D&&(0,d.classes)(D.html)[I.add?"add":"remove"](I.marker)}),n.on("diagram.clear",this.clear,this)};function T(n){var l=(0,d.domify)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return n.insertBefore(l,n.firstChild),l}function c(n,l,_){(0,L.assign)(n.style,{left:l+"px",top:_+"px"})}function a(n,l){n.style.display=l===!1?"none":""}function e(n,l){n.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(_){n.style[_+"transform"]=l})}const g={__init__:["overlays"],overlays:["type",x]};var t=".entry",o=1e3;function r(n,l,_){this._eventBus=l,this._overlays=_;var I=(0,L.isDefined)(n&&n.scale)?n.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:I},this._current=null,this._init()}r.$inject=["config.contextPad","eventBus","overlays"],r.prototype._init=function(){var n=this._eventBus,l=this;n.on("selection.changed",function(_){var I=_.newSelection;I.length===1?l.open(I[0]):l.close()}),n.on("elements.delete",function(_){var I=_.elements;(0,L.forEach)(I,function(D){l.isOpen(D)&&l.close()})}),n.on("element.changed",function(_){var I=_.element,D=l._current;D&&D.element===I&&l.open(I,!0)})},r.prototype.registerProvider=function(n,l){l||(l=n,n=o),this._eventBus.on("contextPad.getProviders",n,function(_){_.providers.push(l)})},r.prototype.getEntries=function(n){var l=this._getProviders(),_={};return(0,L.forEach)(l,function(I){var D=I.getContextPadEntries(n);(0,L.isFunction)(D)?_=D(_):(0,L.forEach)(D,function(b,w){_[w]=b})}),_},r.prototype.trigger=function(n,l,_){var I=this._current.element,D=this._current.entries,b,w,U,N=l.delegateTarget||l.target;if(!N)return l.preventDefault();if(b=D[(0,d.attr)(N,"data-action")],w=b.action,U=l.originalEvent||l,(0,L.isFunction)(w)){if(n==="click")return w(U,I,_)}else if(w[n])return w[n](U,I,_);l.preventDefault()},r.prototype.open=function(n,l){!l&&this.isOpen(n)||(this.close(),this._updateAndOpen(n))},r.prototype._getProviders=function(n){var l=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(l),l.providers},r.prototype._updateAndOpen=function(n){var l=this.getEntries(n),_=this.getPad(n),I=_.html;(0,L.forEach)(l,function(D,b){var w=D.group||"default",U=(0,d.domify)(D.html||'<div class="entry" draggable="true"></div>'),N;(0,d.attr)(U,"data-action",b),N=(0,d.query)("[data-group="+w+"]",I),N||(N=(0,d.domify)('<div class="group" data-group="'+w+'"></div>'),I.appendChild(N)),N.appendChild(U),D.className&&y(U,D.className),D.title&&(0,d.attr)(U,"title",D.title),D.imageUrl&&U.appendChild((0,d.domify)('<img src="'+D.imageUrl+'">'))}),(0,d.classes)(I).add("open"),this._current={element:n,pad:_,entries:l},this._eventBus.fire("contextPad.open",{current:this._current})},r.prototype.getPad=function(n){if(this.isOpen())return this._current.pad;var l=this,_=this._overlays,I=(0,d.domify)('<div class="djs-context-pad"></div>'),D=(0,L.assign)({html:I},this._overlaysConfig);d.delegate.bind(I,t,"click",function(w){l.trigger("click",w)}),d.delegate.bind(I,t,"dragstart",function(w){l.trigger("dragstart",w)}),d.event.bind(I,"mousedown",function(w){w.stopPropagation()}),this._overlayId=_.add(n,"context-pad",D);var b=_.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:n,pad:b}),b},r.prototype.close=function(){!this.isOpen()||(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},r.prototype.isOpen=function(n){return!!this._current&&(n?this._current.element===n:!0)};function y(n,l){var _=(0,d.classes)(n),I=(0,L.isArray)(l)?l:l.split(/\s+/g);I.forEach(function(D){_.add(D)})}const m={__depends__:[h.Z,g],contextPad:["type",r]}},26327:($,H,u)=>{u.d(H,{Z:()=>a});var h=u(83612),L=u.n(h),d=u(64960);function E(e,g,t,o,r,y,m,n){this._canvas=e,this._create=g,this._clipboard=t,this._elementFactory=o,this._eventBus=r,this._modeling=y,this._mouse=m,this._rules=n,r.on("copyPaste.copyElement",function(l){var _=l.descriptor,I=l.element,D=l.elements;_.priority=1,_.id=I.id;var b=(0,h.find)(D,function(w){return w===I.parent});b&&(_.parent=I.parent.id),v(I)&&(_.priority=2,_.host=I.host.id),O(I)&&(_.priority=3,_.source=I.source.id,_.target=I.target.id,_.waypoints=x(I)),p(I)&&(_.priority=4,_.labelTarget=I.labelTarget.id),(0,h.forEach)(["x","y","width","height"],function(w){(0,h.isNumber)(I[w])&&(_[w]=I[w])}),_.hidden=I.hidden,_.collapsed=I.collapsed}),r.on("copyPaste.pasteElements",function(l){var _=l.hints;(0,h.assign)(_,{createElementsBehavior:!1})})}E.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],E.prototype.copy=function(e){var g,t;return(0,h.isArray)(e)||(e=e?[e]:[]),g=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),g===!1?t={}:t=this.createTree((0,h.isArray)(g)?g:e),this._clipboard.set(t),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:t}),t},E.prototype.paste=function(e){var g=this._clipboard.get();if(!this._clipboard.isEmpty()){var t=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:t});var o=this._createElements(g);if(e&&e.element&&e.point)return this._paste(o,e.element,e.point,t);this._create.start(this._mouse.getLastMoveEvent(),o,{hints:t})}},E.prototype._paste=function(e,g,t,o){(0,h.forEach)(e,function(y){(0,h.isNumber)(y.x)||(y.x=0),(0,h.isNumber)(y.y)||(y.y=0)});var r=(0,d.jY)(e);return(0,h.forEach)(e,function(y){O(y)&&(y.waypoints=(0,h.map)(y.waypoints,function(m){return{x:m.x-r.x-r.width/2,y:m.y-r.y-r.height/2}})),(0,h.assign)(y,{x:y.x-r.x-r.width/2,y:y.y-r.y-r.height/2})}),this._modeling.createElements(e,t,g,(0,h.assign)({},o))},E.prototype._createElements=function(e){var g=this,t=this._eventBus,o={},r=[];return(0,h.forEach)(e,function(y,m){m=parseInt(m,10),y=(0,h.sortBy)(y,"priority"),(0,h.forEach)(y,function(n){var l=(0,h.assign)({},(0,h.omit)(n,["priority"]));o[n.parent]?l.parent=o[n.parent]:delete l.parent,t.fire("copyPaste.pasteElement",{cache:o,descriptor:l});var _;if(O(l)){l.source=o[n.source],l.target=o[n.target],_=o[n.id]=g.createConnection(l),r.push(_);return}if(p(l)){l.labelTarget=o[l.labelTarget],_=o[n.id]=g.createLabel(l),r.push(_);return}l.host&&(l.host=o[l.host]),_=o[n.id]=g.createShape(l),r.push(_)})}),r},E.prototype.createConnection=function(e){var g=this._elementFactory.createConnection((0,h.omit)(e,["id"]));return g},E.prototype.createLabel=function(e){var g=this._elementFactory.createLabel((0,h.omit)(e,["id"]));return g},E.prototype.createShape=function(e){var g=this._elementFactory.createShape((0,h.omit)(e,["id"]));return g},E.prototype.hasRelations=function(e,g){var t,o,r;return!(O(e)&&(o=(0,h.find)(g,(0,h.matchPattern)({id:e.source.id})),r=(0,h.find)(g,(0,h.matchPattern)({id:e.target.id})),!o||!r)||p(e)&&(t=(0,h.find)(g,(0,h.matchPattern)({id:e.labelTarget.id})),!t))},E.prototype.createTree=function(e){var g=this._rules,t=this,o={},r=[],y=(0,d.cd)(e);function m(_,I){return g.allowed("element.copy",{element:_,elements:I})}function n(_,I){var D=(0,h.find)(r,function(b){return _===b.element});if(!D){r.push({element:_,depth:I});return}D.depth<I&&(r=l(D,r),r.push({element:D.element,depth:I}))}function l(_,I){var D=I.indexOf(_);return D!==-1&&I.splice(D,1),I}return(0,d.om)(y,function(_,I,D){if(p(_))return;(0,h.forEach)(_.labels,function(w){n(w,D)});function b(w){w&&w.length&&(0,h.forEach)(w,function(U){(0,h.forEach)(U.labels,function(N){n(N,D)}),n(U,D)})}return(0,h.forEach)([_.attachers,_.incoming,_.outgoing],b),n(_,D),_.children}),e=(0,h.map)(r,function(_){return _.element}),r=(0,h.map)(r,function(_){return _.descriptor={},t._eventBus.fire("copyPaste.copyElement",{descriptor:_.descriptor,element:_.element,elements:e}),_}),r=(0,h.sortBy)(r,function(_){return _.descriptor.priority}),e=(0,h.map)(r,function(_){return _.element}),(0,h.forEach)(r,function(_){var I=_.depth;if(!t.hasRelations(_.element,e)){c(_.element,e);return}if(!m(_.element,e)){c(_.element,e);return}o[I]||(o[I]=[]),o[I].push(_.descriptor)}),o};function v(e){return!!e.host}function O(e){return!!e.waypoints}function p(e){return!!e.labelTarget}function x(e){return(0,h.map)(e.waypoints,function(g){return g=T(g),g.original&&(g.original=T(g.original)),g})}function T(e){return(0,h.assign)({},e)}function c(e,g){var t=g.indexOf(e);return t===-1?g:g.splice(t,1)}const a=E},98059:($,H,u)=>{u.d(H,{Z:()=>T});function h(){}h.prototype.get=function(){return this._data},h.prototype.set=function(c){this._data=c},h.prototype.clear=function(){var c=this._data;return delete this._data,c},h.prototype.isEmpty=function(){return!this._data};const L={clipboard:["type",h]};var d=u(7984);function E(c){var a=this;this._lastMoveEvent=null;function e(g){a._lastMoveEvent=g}c.on("canvas.init",function(g){var t=a._svg=g.svg;t.addEventListener("mousemove",e)}),c.on("canvas.destroy",function(){a._lastMouseEvent=null,a._svg.removeEventListener("mousemove",e)})}E.$inject=["eventBus"],E.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||v(0,0)};function v(c,a){var e=document.createEvent("MouseEvent"),g=c,t=a,o=c,r=a;return e.initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,g,t,o,r,!1,!1,!1,!1,0,null),e}const O={__init__:["mouse"],mouse:["type",E]};var p=u(67989),x=u(26327);const T={__depends__:[L,d.Z,O,p.Z],__init__:["copyPaste"],copyPaste:["type",x.Z]}},7984:($,H,u)=>{u.d(H,{Z:()=>D});var h=u(13203),L=u(10009),d=u(67989),E=u(42226),v=u(83612),O=u(64960),p="drop-ok",x="drop-not-ok",T="attach-ok",c="new-parent",a="create",e=2e3;function g(b,w,U,N,z){function Y(B,P,i,s){if(!P)return!1;B=(0,v.filter)(B,function(W){var G=W.labelTarget;return!W.parent&&!(y(W)&&B.indexOf(G)!==-1)});var R=(0,v.find)(B,function(W){return!o(W)}),f=!1,C=!1,A=!1;return r(B)&&(f=z.allowed("shape.attach",{position:i,shape:R,target:P})),f||(r(B)?A=z.allowed("shape.create",{position:i,shape:R,source:s,target:P}):A=z.allowed("elements.create",{elements:B,position:i,target:P})),A||f?(R&&s&&(C=z.allowed("connection.create",{source:s,target:R,hints:{targetParent:P,targetAttach:f}})),{attach:f,connect:C}):A===null||f===null?null:!1}function Z(B,P){[T,p,x,c].forEach(function(i){i===P?b.addMarker(B,i):b.removeMarker(B,i)})}U.on(["create.move","create.hover"],function(B){var P=B.context,i=P.elements,s=B.hover,R=P.source;if(!s){P.canExecute=!1,P.target=null;return}t(B);var f={x:B.x,y:B.y},C=P.canExecute=s&&Y(i,s,f,R);s&&C!==null&&(P.target=s,C&&C.attach?Z(s,T):Z(s,C?c:x))}),U.on(["create.end","create.out","create.cleanup"],function(B){var P=B.hover;P&&Z(P,null)}),U.on("create.end",function(B){var P=B.context,i=P.source,s=P.shape,R=P.elements,f=P.target,C=P.hints,A=P.canExecute,W=A&&A.attach,G=A&&A.connect;if(A===!1||!f)return!1;t(B);var V={x:B.x,y:B.y};G?s=N.appendShape(i,s,V,f,{attach:W,connection:G===!0?{}:G}):(R=N.createElements(R,V,f,(0,v.assign)({},C,{attach:W})),s=(0,v.find)(R,function(Q){return!o(Q)})),(0,v.assign)(P,{elements:R,shape:s}),(0,v.assign)(B,{elements:R,shape:s})});function F(){var B=w.context();B&&B.prefix===a&&w.cancel()}U.on("create.init",function(){U.on("elements.changed",F),U.once(["create.cancel","create.end"],e,function(){U.off("elements.changed",F)})}),this.start=function(B,P,i){(0,v.isArray)(P)||(P=[P]);var s=(0,v.find)(P,function(f){return!o(f)});if(!!s){i=(0,v.assign)({elements:P,hints:{},shape:s},i||{}),(0,v.forEach)(P,function(f){(0,v.isNumber)(f.x)||(f.x=0),(0,v.isNumber)(f.y)||(f.y=0)});var R=(0,O.jY)(P);(0,v.forEach)(P,function(f){o(f)&&(f.waypoints=(0,v.map)(f.waypoints,function(C){return{x:C.x-R.x-Math.round(R.width/2),y:C.y-R.y-Math.round(R.height/2)}})),(0,v.assign)(f,{x:f.x-R.x-Math.round(R.width/2),y:f.y-R.y-Math.round(R.height/2)})}),w.init(B,a,{cursor:"grabbing",autoActivate:!0,data:{shape:s,elements:P,context:i}})}}}g.$inject=["canvas","dragging","eventBus","modeling","rules"];function t(b){var w=b.context,U=w.createConstraints;!U||(U.left&&(b.x=Math.max(b.x,U.left)),U.right&&(b.x=Math.min(b.x,U.right)),U.top&&(b.y=Math.max(b.y,U.top)),U.bottom&&(b.y=Math.min(b.y,U.bottom)))}function o(b){return!!b.waypoints}function r(b){return b&&b.length===1&&!o(b[0])}function y(b){return!!b.labelTarget}var m=u(18872),n=u(64790),l=u(21537),_=750;function I(b,w,U,N,z){function Y(Z){var F=(0,l.Ue)("g");(0,l.Lj)(F,z.cls("djs-drag-group",["no-events"]));var B=(0,l.Ue)("g");return Z.forEach(function(P){var i;(0,l.Lj)(F,{"data-element-id":P.id}),!P.hidden&&(P.waypoints?(i=U._createContainer("connection",B),U.drawConnection((0,n.s)(i),P)):(i=U._createContainer("shape",B),U.drawShape((0,n.s)(i),P),(0,m.Iu)(i,P.x,P.y)),N.addDragger(P,F,i))}),F}w.on("create.move",_,function(Z){var F=Z.hover,B=Z.context,P=B.elements,i=B.dragGroup;i||(i=B.dragGroup=Y(P));var s;F?(i.parentNode||(s=b.getDefaultLayer(),(0,l.R3)(s,i)),(0,m.Iu)(i,Z.x,Z.y)):(0,l.Od)(i)}),w.on("create.cleanup",function(Z){var F=Z.context,B=F.dragGroup;B&&(0,l.Od)(B)})}I.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const D={__depends__:[h.Z,L.Z,d.Z,E.Z],__init__:["create","createPreview"],create:["type",g],createPreview:["type",I]}},13203:($,H,u)=>{u.d(H,{Z:()=>y});var h=u(42226),L=u(83612),d=u(24706),E=u(46534),v=u(63253),O=u(19863),p=u(43273),x=Math.round,T="djs-drag-active";function c(m){m.preventDefault()}function a(m){return typeof TouchEvent<"u"&&m instanceof TouchEvent}function e(m){return Math.sqrt(Math.pow(m.x,2)+Math.pow(m.y,2))}function g(m,n,l,_){var I={threshold:5,trapClick:!0},D;function b(f){var C=n.viewbox(),A=n._container.getBoundingClientRect();return{x:C.x+(f.x-A.left)/C.scale,y:C.y+(f.y-A.top)/C.scale}}function w(f,C){C=C||D;var A=m.createEvent((0,L.assign)({},C.payload,C.data,{isTouch:C.isTouch}));return m.fire("drag."+f,A)===!1?!1:m.fire(C.prefix+"."+f,A)}function U(f){var C=f.filter(function(A){return _.get(A.id)});C.length&&l.select(C)}function N(f,C){var A=D.payload,W=D.displacement,G=D.globalStart,V=(0,E.jt)(f),Q=(0,p.p)(V,G),q=D.localStart,it=b(V),nt=(0,p.p)(it,q);if(!D.active&&(C||e(Q)>D.threshold)){if((0,L.assign)(A,{x:x(q.x+W.x),y:x(q.y+W.y),dx:0,dy:0},{originalEvent:f}),w("start")===!1)return i();D.active=!0,D.keepSelection||(A.previousSelection=l.get(),l.select(null)),D.cursor&&(0,v.t8)(D.cursor),n.addMarker(n.getRootElement(),T)}(0,E.UW)(f),D.active&&((0,L.assign)(A,{x:x(it.x+W.x),y:x(it.y+W.y),dx:x(nt.x),dy:x(nt.y)},{originalEvent:f}),w("move"))}function z(f){var C,A=!0;D.active&&(f&&(D.payload.originalEvent=f,(0,E.UW)(f)),A=w("end")),A===!1&&w("rejected"),C=s(A!==!0),w("ended",C)}function Y(f){f.which===27&&(c(f),i())}function Z(f){var C;D.active&&(C=(0,O.N)(m),setTimeout(C,400),c(f)),z(f)}function F(f){N(f)}function B(f){var C=D.payload;C.hoverGfx=f.gfx,C.hover=f.element,w("hover")}function P(f){w("out");var C=D.payload;C.hoverGfx=null,C.hover=null}function i(f){var C;if(!!D){var A=D.active;A&&w("cancel"),C=s(f),A&&w("canceled",C)}}function s(f){var C,A;w("cleanup"),(0,v.zN)(),D.trapClick?A=Z:A=z,d.event.unbind(document,"mousemove",N),d.event.unbind(document,"dragstart",c),d.event.unbind(document,"selectstart",c),d.event.unbind(document,"mousedown",A,!0),d.event.unbind(document,"mouseup",A,!0),d.event.unbind(document,"keyup",Y),d.event.unbind(document,"touchstart",F,!0),d.event.unbind(document,"touchcancel",i,!0),d.event.unbind(document,"touchmove",N,!0),d.event.unbind(document,"touchend",z,!0),m.off("element.hover",B),m.off("element.out",P),n.removeMarker(n.getRootElement(),T);var W=D.payload.previousSelection;return f!==!1&&W&&!l.get().length&&U(W),C=D,D=null,C}function R(f,C,A,W){D&&i(!1),typeof C=="string"&&(W=A,A=C,C=null),W=(0,L.assign)({},I,W||{});var G=W.data||{},V,Q,q,it,nt;W.trapClick?it=Z:it=z,f?(V=(0,E.Ku)(f)||f,Q=(0,E.jt)(f),(0,E.UW)(f),V.type==="dragstart"&&c(V)):(V=null,Q={x:0,y:0}),q=b(Q),C||(C=q),nt=a(V),D=(0,L.assign)({prefix:A,data:G,payload:{},globalStart:Q,displacement:(0,p.p)(C,q),localStart:q,isTouch:nt},W),W.manual||(nt?(d.event.bind(document,"touchstart",F,!0),d.event.bind(document,"touchcancel",i,!0),d.event.bind(document,"touchmove",N,!0),d.event.bind(document,"touchend",z,!0)):(d.event.bind(document,"mousemove",N),d.event.bind(document,"dragstart",c),d.event.bind(document,"selectstart",c),d.event.bind(document,"mousedown",it,!0),d.event.bind(document,"mouseup",it,!0)),d.event.bind(document,"keyup",Y),m.on("element.hover",B),m.on("element.out",P)),w("init"),W.autoActivate&&N(f,!0)}m.on("diagram.destroy",i),this.init=R,this.move=N,this.hover=B,this.out=P,this.end=z,this.cancel=i,this.context=function(){return D},this.setOptions=function(f){(0,L.assign)(I,f)}}g.$inject=["eventBus","canvas","selection","elementRegistry"];var t=1500;function o(m,n,l){var _=this;function I(D){if(!D.hover){var b=D.originalEvent,w=_._findTargetGfx(b),U=w&&l.get(w);w&&U&&(D.stopPropagation(),n.hover({element:U,gfx:w}),n.move(b))}}m.on("drag.start",function(D){m.once("drag.move",t,function(b){I(b)})}),m.on("drag.init",function(){var D,b;function w(z){D=z.hover,b=z.hoverGfx}function U(){D=null,b=null}function N(){if(!!D){var z=D,Y=b;D=null,b=null,n.out({element:z,gfx:Y})}}m.on("drag.hover",w),m.on("element.out",U),m.on("element.hover",t,N),m.once("drag.cleanup",function(){m.off("drag.hover",w),m.off("element.out",U),m.off("element.hover",N)})}),this._findTargetGfx=function(D){var b,w;if(D instanceof MouseEvent)return b=(0,E.jt)(D),w=document.elementFromPoint(b.x,b.y),r(w)}}o.$inject=["eventBus","dragging","elementRegistry"];function r(m){return(0,d.closest)(m,"svg, .djs-element",!0)}const y={__init__:["hoverFix"],__depends__:[h.Z],dragging:["type",g],hoverFix:["type",o]}},73906:($,H,u)=>{u.d(H,{Z:()=>v});var h=u(83612),L=u.n(h),d="is not a registered action",E="is already registered";function v(p,x){this._actions={};var T=this;p.on("diagram.init",function(){T._registerDefaultActions(x),p.fire("editorActions.init",{editorActions:T})})}v.$inject=["eventBus","injector"],v.prototype._registerDefaultActions=function(p){var x=p.get("commandStack",!1),T=p.get("modeling",!1),c=p.get("selection",!1),a=p.get("zoomScroll",!1),e=p.get("copyPaste",!1),g=p.get("canvas",!1),t=p.get("rules",!1),o=p.get("keyboardMove",!1),r=p.get("keyboardMoveSelection",!1);x&&(this.register("undo",function(){x.undo()}),this.register("redo",function(){x.redo()})),e&&c&&this.register("copy",function(){var y=c.get();e.copy(y)}),e&&this.register("paste",function(){e.paste()}),a&&this.register("stepZoom",function(y){a.stepZoom(y.value)}),g&&this.register("zoom",function(y){g.zoom(y.value)}),T&&c&&t&&this.register("removeSelection",function(){var y=c.get();if(!!y.length){var m=t.allowed("elements.delete",{elements:y}),n;m!==!1&&((0,h.isArray)(m)?n=m:n=y,n.length&&T.removeElements(n.slice()))}}),o&&this.register("moveCanvas",function(y){o.moveCanvas(y)}),r&&this.register("moveSelection",function(y){r.moveSelection(y.direction,y.accelerated)})},v.prototype.trigger=function(p,x){if(!this._actions[p])throw O(p,d);return this._actions[p](x)},v.prototype.register=function(p,x){var T=this;if(typeof p=="string")return this._registerAction(p,x);(0,h.forEach)(p,function(c,a){T._registerAction(a,c)})},v.prototype._registerAction=function(p,x){if(this.isRegistered(p))throw O(p,E);this._actions[p]=x},v.prototype.unregister=function(p){if(!this.isRegistered(p))throw O(p,d);this._actions[p]=void 0},v.prototype.getActions=function(){return Object.keys(this._actions)},v.prototype.isRegistered=function(p){return!!this._actions[p]};function O(p,x){return new Error(p+" "+x)}},85960:($,H,u)=>{u.d(H,{Z:()=>v});var h=u(98827),L=u(28229),d=1500,E="grab";function v(p,x,T,c,a){this._dragging=T;var e=this,g=c.get("keyboard",!1);a.registerTool("hand",{tool:"hand",dragging:"hand.move"}),p.on("element.mousedown",d,function(t){if((0,h.RJ)(t))return this.activateMove(t.originalEvent),!1},this),g&&g.addListener(d,function(t){if(!O(t.keyEvent)||e.isActive())return;function o(y){e.activateMove(y),window.removeEventListener("mousemove",o)}window.addEventListener("mousemove",o);function r(y){!O(y.keyEvent)||(window.removeEventListener("mousemove",o),g.removeListener(r,"keyboard.keyup"),T.cancel())}g.addListener(d,r,"keyboard.keyup")},"keyboard.keydown"),p.on("hand.end",function(t){var o=t.originalEvent.target;if(!t.hover&&!(o instanceof SVGElement))return!1;p.once("hand.ended",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this),p.on("hand.move.move",function(t){var o=x.viewbox().scale;x.scroll({dx:t.dx*o,dy:t.dy*o})}),p.on("hand.move.end",function(t){var o=t.context,r=o.reactivate;return!(0,h.RJ)(t)&&r&&p.once("hand.move.ended",function(y){this.activateHand(y.originalEvent,!0,!0)},this),!1},this)}v.$inject=["eventBus","canvas","dragging","injector","toolManager"],v.prototype.activateMove=function(p,x,T){typeof x=="object"&&(T=x,x=!1),this._dragging.init(p,"hand.move",{autoActivate:x,cursor:E,data:{context:T||{}}})},v.prototype.activateHand=function(p,x,T){this._dragging.init(p,"hand",{trapClick:!1,autoActivate:x,cursor:E,data:{context:{reactivate:T}}})},v.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},v.prototype.isActive=function(){var p=this._dragging.context();return p?/^(hand|hand\.move)$/.test(p.prefix):!1};function O(p){return(0,L.ot)(" ",p)}},85637:($,H,u)=>{u.d(H,{Z:()=>T});var h=u(83612),L=u(24706),d=u(98827),E=u(21537),v=u(7824);function O(c){return!0}var p=500;function x(c,a,e){var g=this;function t(P,i,s){if(!y(P,i)){var R,f,C;s?f=a.getGraphics(s):(R=i.delegateTarget||i.target,R&&(f=R,s=a.get(f))),!(!f||!s)&&(C=c.fire(P,{element:s,gfx:f,originalEvent:i}),C===!1&&(i.stopPropagation(),i.preventDefault()))}}var o={};function r(P){return o[P]}function y(P,i){var s=n[P]||d.Id;return!s(i)}var m={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},n={"element.contextmenu":O};function l(P,i,s){var R=m[P];if(!R)throw new Error("unmapped DOM event name <"+P+">");return t(R,i,s)}var _="svg, .djs-element";function I(P,i,s,R){var f=o[s]=function(C){t(s,C)};R&&(n[s]=R),f.$delegate=L.delegate.bind(P,_,i,f)}function D(P,i,s){var R=r(s);!R||L.delegate.unbind(P,i,R.$delegate)}function b(P){(0,h.forEach)(m,function(i,s){I(P,s,i)})}function w(P){(0,h.forEach)(m,function(i,s){D(P,s,i)})}c.on("canvas.destroy",function(P){w(P.svg)}),c.on("canvas.init",function(P){b(P.svg)}),c.on(["shape.added","connection.added"],function(P){var i=P.element,s=P.gfx;c.fire("interactionEvents.createHit",{element:i,gfx:s})}),c.on(["shape.changed","connection.changed"],p,function(P){var i=P.element,s=P.gfx;c.fire("interactionEvents.updateHit",{element:i,gfx:s})}),c.on("interactionEvents.createHit",p,function(P){var i=P.element,s=P.gfx;g.createDefaultHit(i,s)}),c.on("interactionEvents.updateHit",function(P){var i=P.element,s=P.gfx;g.updateDefaultHit(i,s)});var U=Z("djs-hit djs-hit-stroke"),N=Z("djs-hit djs-hit-click-stroke"),z=Z("djs-hit djs-hit-all"),Y={all:z,"click-stroke":N,stroke:U};function Z(P,i){return i=(0,h.assign)({stroke:"white",strokeWidth:15},i||{}),e.cls(P,["no-fill","no-border"],i)}function F(P,i){var s=Y[i];if(!s)throw new Error("invalid hit type <"+i+">");return(0,E.Lj)(P,s),P}function B(P,i){(0,E.R3)(P,i)}this.removeHits=function(P){var i=(0,L.queryAll)(".djs-hit",P);(0,h.forEach)(i,E.Od)},this.createDefaultHit=function(P,i){var s=P.waypoints,R=P.isFrame,f;return s?this.createWaypointsHit(i,s):(f=R?"stroke":"all",this.createBoxHit(i,f,{width:P.width,height:P.height}))},this.createWaypointsHit=function(P,i){var s=(0,v.W5)(i);return F(s,"stroke"),B(P,s),s},this.createBoxHit=function(P,i,s){s=(0,h.assign)({x:0,y:0},s);var R=(0,E.Ue)("rect");return F(R,i),(0,E.Lj)(R,s),B(P,R),R},this.updateDefaultHit=function(P,i){var s=(0,L.query)(".djs-hit",i);if(!!s)return P.waypoints?(0,v.cq)(s,P.waypoints):(0,E.Lj)(s,{width:P.width,height:P.height}),s},this.fire=t,this.triggerMouseEvent=l,this.mouseHandler=r,this.registerEvent=I,this.unregisterEvent=D}x.$inject=["eventBus","elementRegistry","styles"];const T={__init__:["interactionEvents"],interactionEvents:["type",x]}},91112:($,H,u)=>{u.d(H,{Z:()=>d});var h=u(28229),L=500;function d(E,v){var O=this;E.on("editorActions.init",L,function(p){var x=p.editorActions;O.registerBindings(v,x)})}d.$inject=["eventBus","keyboard"],d.prototype.registerBindings=function(E,v){function O(p,x){v.isRegistered(p)&&E.addListener(x)}O("undo",function(p){var x=p.keyEvent;if((0,h.JS)(x)&&!(0,h.cY)(x)&&(0,h.ot)(["z","Z"],x))return v.trigger("undo"),!0}),O("redo",function(p){var x=p.keyEvent;if((0,h.JS)(x)&&((0,h.ot)(["y","Y"],x)||(0,h.ot)(["z","Z"],x)&&(0,h.cY)(x)))return v.trigger("redo"),!0}),O("copy",function(p){var x=p.keyEvent;if((0,h.JS)(x)&&(0,h.ot)(["c","C"],x))return v.trigger("copy"),!0}),O("paste",function(p){var x=p.keyEvent;if((0,h.JS)(x)&&(0,h.ot)(["v","V"],x))return v.trigger("paste"),!0}),O("stepZoom",function(p){var x=p.keyEvent;if((0,h.ot)(["+","Add"],x)&&(0,h.JS)(x))return v.trigger("stepZoom",{value:1}),!0}),O("stepZoom",function(p){var x=p.keyEvent;if((0,h.ot)(["-","Subtract"],x)&&(0,h.JS)(x))return v.trigger("stepZoom",{value:-1}),!0}),O("zoom",function(p){var x=p.keyEvent;if((0,h.ot)("0",x)&&(0,h.JS)(x))return v.trigger("zoom",{value:1}),!0}),O("removeSelection",function(p){var x=p.keyEvent;if((0,h.ot)(["Delete","Del"],x))return v.trigger("removeSelection"),!0})}},20677:($,H,u)=>{u.d(H,{Z:()=>c});var h=u(83612),L=u(24706),d=u(28229),E="keyboard.keydown",v="keyboard.keyup",O=1e3;function p(a,e){var g=this;this._config=a||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){g._fire("destroy"),g.unbind()}),e.on("diagram.init",function(){g._fire("init")}),e.on("attach",function(){a&&a.bindTo&&g.bind(a.bindTo)}),e.on("detach",function(){g.unbind()})}p.$inject=["config.keyboard","eventBus"],p.prototype._keydownHandler=function(a){this._keyHandler(a,E)},p.prototype._keyupHandler=function(a){this._keyHandler(a,v)},p.prototype._keyHandler=function(a,e){var g=a.target,t;if(!x(g)){var o={keyEvent:a};t=this._eventBus.fire(e||E,o),!(a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.keyCode===67)&&t&&a.preventDefault()}},p.prototype.bind=function(a){this.unbind(),this._node=a,L.event.bind(a,"keydown",this._keydownHandler,!0),L.event.bind(a,"keyup",this._keyupHandler,!0),this._fire("bind")},p.prototype.getBinding=function(){return this._node},p.prototype.unbind=function(){var a=this._node;a&&(this._fire("unbind"),L.event.unbind(a,"keydown",this._keydownHandler,!0),L.event.unbind(a,"keyup",this._keyupHandler,!0)),this._node=null},p.prototype._fire=function(a){this._eventBus.fire("keyboard."+a,{node:this._node})},p.prototype.addListener=function(a,e,g){(0,h.isFunction)(a)&&(g=e,e=a,a=O),this._eventBus.on(g||E,a,e)},p.prototype.removeListener=function(a,e){this._eventBus.off(e||E,a)},p.prototype.hasModifier=d.aw,p.prototype.isCmd=d.JS,p.prototype.isShift=d.cY,p.prototype.isKey=d.ot;function x(a){return a&&((0,L.matches)(a,"input, textarea")||a.contentEditable==="true")}var T=u(91112);const c={__init__:["keyboard","keyboardBindings"],keyboard:["type",p],keyboardBindings:["type",T.Z]}},13463:($,H,u)=>{u.d(H,{Z:()=>c});var h=u(83612),L=u.n(h),d=u(59879),E=u.n(d),v=u(91499),O=u(80352),p=u(91658),x=250,T=1400;function c(e,g,t){p.Z.call(this,g);var o=e.get("movePreview",!1);g.on("shape.move.start",T,function(r){var y=r.context,m=y.shapes,n=y.validatedShapes;y.shapes=a(m),y.validatedShapes=a(n)}),o&&g.on("shape.move.start",x,function(r){var y=r.context,m=y.shapes,n=[];(0,h.forEach)(m,function(l){(0,h.forEach)(l.labels,function(_){!_.hidden&&y.shapes.indexOf(_)===-1&&n.push(_),l.labelTarget&&n.push(l)})}),(0,h.forEach)(n,function(l){o.makeDraggable(y,l,!0)})}),this.preExecuted("elements.move",T,function(r){var y=r.context,m=y.closure,n=m.enclosedElements,l=[];(0,h.forEach)(n,function(_){(0,h.forEach)(_.labels,function(I){n[I.id]||l.push(I)})}),m.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(r){var y=r.context,m=y.connection||y.shape;(0,O.r)(m.labels,function(n){t.removeShape(n,{nested:!0})})}),this.execute("shape.delete",function(r){var y=r.context,m=y.shape,n=m.labelTarget;n&&(y.labelTargetIndex=(0,v.cq)(n.labels,m),y.labelTarget=n,m.labelTarget=null)}),this.revert("shape.delete",function(r){var y=r.context,m=y.shape,n=y.labelTarget,l=y.labelTargetIndex;n&&((0,v.IH)(n.labels,m,l),m.labelTarget=n)})}E()(c,p.Z),c.$inject=["injector","eventBus","modeling"];function a(e){return(0,h.filter)(e,function(g){return e.indexOf(g.labelTarget)===-1})}},43801:($,H,u)=>{u.d(H,{Z:()=>p});var h=u(83612),L=u.n(h),d=u(64960),E=u(98827),v=u(21537),O="crosshair";function p(T,c,a,e,g,t){this._selection=g,this._dragging=a;var o=this,r={create:function(y){var m=c.getDefaultLayer(),n;n=y.frame=(0,v.Ue)("rect"),(0,v.Lj)(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),(0,v.R3)(m,n)},update:function(y){var m=y.frame,n=y.bbox;(0,v.Lj)(m,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(y){y.frame&&(0,v.Od)(y.frame)}};t.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),T.on("lasso.selection.end",function(y){var m=y.originalEvent.target;!y.hover&&!(m instanceof SVGElement)||T.once("lasso.selection.ended",function(){o.activateLasso(y.originalEvent,!0)})}),T.on("lasso.end",function(y){var m=x(y),n=e.filter(function(l){return l});o.select(n,m)}),T.on("lasso.start",function(y){var m=y.context;m.bbox=x(y),r.create(m)}),T.on("lasso.move",function(y){var m=y.context;m.bbox=x(y),r.update(m)}),T.on("lasso.cleanup",function(y){var m=y.context;r.remove(m)}),T.on("element.mousedown",1500,function(y){if((0,E.Dw)(y))return o.activateLasso(y.originalEvent),!0})}p.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],p.prototype.activateLasso=function(T,c){this._dragging.init(T,"lasso",{autoActivate:c,cursor:O,data:{context:{}}})},p.prototype.activateSelection=function(T){this._dragging.init(T,"lasso.selection",{trapClick:!1,cursor:O,data:{context:{}}})},p.prototype.select=function(T,c){var a=(0,d.RH)(T,c);this._selection.select((0,h.values)(a))},p.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},p.prototype.isActive=function(){var T=this._dragging.context();return T&&/^lasso/.test(T.prefix)};function x(T){var c={x:T.x-T.dx,y:T.y-T.dy},a={x:T.x,y:T.y},e;return c.x<=a.x&&c.y<a.y||c.x<a.x&&c.y<=a.y?e={x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}:c.x>=a.x&&c.y<a.y||c.x>a.x&&c.y<=a.y?e={x:a.x,y:c.y,width:c.x-a.x,height:a.y-c.y}:c.x<=a.x&&c.y>a.y||c.x<a.x&&c.y>=a.y?e={x:c.x,y:a.y,width:a.x-c.x,height:c.y-a.y}:c.x>=a.x&&c.y>a.y||c.x>a.x&&c.y>=a.y?e={x:a.x,y:a.y,width:c.x-a.x,height:c.y-a.y}:e={x:a.x,y:a.y,width:0,height:0},e}},40549:($,H,u)=>{u.d(H,{Z:()=>x});var h=u(13203),L=u(83612),d=u(24706),E=250;function v(T,c){this._eventBus=T,this._dragging=c,this._tools=[],this._active=null}v.$inject=["eventBus","dragging"],v.prototype.registerTool=function(T,c){var a=this._tools;if(!c)throw new Error(`A tool has to be registered with it's "events"`);a.push(T),this.bindEvents(T,c)},v.prototype.isActive=function(T){return T&&this._active===T},v.prototype.length=function(T){return this._tools.length},v.prototype.setActive=function(T){var c=this._eventBus;this._active!==T&&(this._active=T,c.fire("tool-manager.update",{tool:T}))},v.prototype.bindEvents=function(T,c){var a=this._eventBus,e=this._dragging,g=[];a.on(c.tool+".init",function(t){var o=t.context;if(!o.reactivate&&this.isActive(T)){this.setActive(null),e.cancel();return}this.setActive(T)},this),(0,L.forEach)(c,function(t){g.push(t+".ended"),g.push(t+".canceled")}),a.on(g,E,function(t){var o=t.originalEvent;!this._active||o&&(0,d.closest)(o.target,'.group[data-group="tools"]')||this.setActive(null)},this)};const O={__depends__:[h.Z],__init__:["toolManager"],toolManager:["type",v]};var p=u(43801);const x={__depends__:[O],__init__:["lassoTool"],lassoTool:["type",p.Z]}},8644:($,H,u)=>{u.d(H,{Z:()=>P});var h=u(83612),L=u(83962);function d(i,s){this._modeling=i,this._canvas=s}d.$inject=["modeling","canvas"],d.prototype.preExecute=function(i){var s=this._modeling,R=i.elements,f=i.alignment;(0,h.forEach)(R,function(C){var A={x:0,y:0};f.left?A.x=f.left-C.x:f.right?A.x=f.right-C.width-C.x:f.center?A.x=f.center-Math.round(C.width/2)-C.x:f.top?A.y=f.top-C.y:f.bottom?A.y=f.bottom-C.height-C.y:f.middle&&(A.y=f.middle-Math.round(C.height/2)-C.y),s.moveElements([C],A,C.parent)})},d.prototype.postExecute=function(i){};function E(i){this._modeling=i}E.$inject=["modeling"],E.prototype.preExecute=function(i){var s=i.source;if(!s)throw new Error("source required");var R=i.target||s.parent,f=i.shape;f=i.shape=this._modeling.createShape(f,i.position,R,{attach:i.attach}),i.shape=f},E.prototype.postExecute=function(i){var s=i.connectionParent||i.shape.parent;v(i.source,i.shape)||this._modeling.connect(i.source,i.shape,i.connection,s)};function v(i,s){return(0,h.some)(i.outgoing,function(R){return R.target===s})}function O(i,s){this._canvas=i,this._layouter=s}O.$inject=["canvas","layouter"],O.prototype.execute=function(i){var s=i.connection,R=i.source,f=i.target,C=i.parent,A=i.parentIndex,W=i.hints;if(!R||!f)throw new Error("source and target required");if(!C)throw new Error("parent required");return s.source=R,s.target=f,s.waypoints||(s.waypoints=this._layouter.layoutConnection(s,W)),this._canvas.addConnection(s,C,A),s},O.prototype.revert=function(i){var s=i.connection;return this._canvas.removeConnection(s),s.source=null,s.target=null,s};var p=u(27879),x=u(86534),T=u(28158),c=u(91499);function a(i,s){this._canvas=i,this._modeling=s}a.$inject=["canvas","modeling"],a.prototype.execute=function(i){var s=i.connection,R=s.parent;return i.parent=R,i.parentIndex=(0,c.cq)(R.children,s),i.source=s.source,i.target=s.target,this._canvas.removeConnection(s),s.source=null,s.target=null,s},a.prototype.revert=function(i){var s=i.connection,R=i.parent,f=i.parentIndex;return s.source=i.source,s.target=i.target,(0,c.IH)(R.children,s,f),this._canvas.addConnection(s,R),s};function e(i,s){this._modeling=i,this._elementRegistry=s}e.$inject=["modeling","elementRegistry"],e.prototype.postExecute=function(i){var s=this._modeling,R=this._elementRegistry,f=i.elements;(0,h.forEach)(f,function(C){!R.get(C.id)||(C.waypoints?s.removeConnection(C):s.removeShape(C))})};var g=u(1680);function t(i){this._modeling=i}t.$inject=["modeling"];var o={x:"y",y:"x"};t.prototype.preExecute=function(i){var s=this._modeling,R=i.groups,f=i.axis,C=i.dimension;function A(J,at){J.range.min=Math.min(at[f],J.range.min),J.range.max=Math.max(at[f]+at[C],J.range.max)}function W(J){return J[f]+J[C]/2}function G(J){return J.length-1}function V(J){return J.max-J.min}function Q(J,at){var rt={y:0};rt[f]=J-W(at),rt[f]&&(rt[o[f]]=0,s.moveElements([at],rt,at.parent))}var q=R[0],it=G(R),nt=R[it],tt,X,ot=0;(0,h.forEach)(R,function(J,at){var rt,st,ut;if(J.elements.length<2){at&&at!==R.length-1&&(A(J,J.elements[0]),ot+=V(J.range));return}rt=(0,h.sortBy)(J.elements,f),st=rt[0],at===it&&(st=rt[G(rt)]),ut=W(st),J.range=null,(0,h.forEach)(rt,function(lt){if(Q(ut,lt),J.range===null){J.range={min:lt[f],max:lt[f]+lt[C]};return}A(J,lt)}),at&&at!==R.length-1&&(ot+=V(J.range))}),X=Math.abs(nt.range.min-q.range.max),tt=Math.round((X-ot)/(R.length-1)),!(tt<R.length-1)&&(0,h.forEach)(R,function(J,at){var rt={},st;J===q||J===nt||(st=R[at-1],J.range.max=0,(0,h.forEach)(J.elements,function(ut,lt){rt[o[f]]=0,rt[f]=st.range.max-ut[f]+tt,J.range.min!==ut[f]&&(rt[f]+=ut[f]-J.range.min),rt[f]&&s.moveElements([ut],rt,ut.parent),J.range.max=Math.max(ut[f]+ut[C],lt?J.range.max:0)}))})},t.prototype.postExecute=function(i){};function r(i,s){this._layouter=i,this._canvas=s}r.$inject=["layouter","canvas"],r.prototype.execute=function(i){var s=i.connection,R=s.waypoints;return(0,h.assign)(i,{oldWaypoints:R}),s.waypoints=this._layouter.layoutConnection(s,i.hints),s},r.prototype.revert=function(i){var s=i.connection;return s.waypoints=i.oldWaypoints,s};function y(){}y.prototype.execute=function(i){var s=i.connection,R=i.delta,f=i.newParent||s.parent,C=i.newParentIndex,A=s.parent;return i.oldParent=A,i.oldParentIndex=(0,c.Od)(A.children,s),(0,c.IH)(f.children,s,C),s.parent=f,(0,h.forEach)(s.waypoints,function(W){W.x+=R.x,W.y+=R.y,W.original&&(W.original.x+=R.x,W.original.y+=R.y)}),s},y.prototype.revert=function(i){var s=i.connection,R=s.parent,f=i.oldParent,C=i.oldParentIndex,A=i.delta;return(0,c.Od)(R.children,s),(0,c.IH)(f.children,s,C),s.parent=f,(0,h.forEach)(s.waypoints,function(W){W.x-=A.x,W.y-=A.y,W.original&&(W.original.x-=A.x,W.original.y-=A.y)}),s};var m=u(60415),n=u(78542),l=u(39229),_=u(37227);function I(i,s){this._modeling=i,this._rules=s}I.$inject=["modeling","rules"],I.prototype.preExecute=function(i){var s=this,R=this._modeling,f=this._rules,C=i.oldShape,A=i.newData,W=i.hints||{},G;function V(X,ot,J){return f.allowed("connection.reconnect",{connection:J,source:X,target:ot})}var Q={x:A.x,y:A.y},q={x:C.x,y:C.y,width:C.width,height:C.height};G=i.newShape=i.newShape||s.createShape(A,Q,C.parent,W),C.host&&R.updateAttachment(G,C.host);var it;W.moveChildren!==!1&&(it=C.children.slice(),R.moveElements(it,{x:0,y:0},G,W));var nt=C.incoming.slice(),tt=C.outgoing.slice();(0,h.forEach)(nt,function(X){var ot=X.source,J=V(ot,G,X);J&&s.reconnectEnd(X,G,(0,_.Qd)(X,G,q),W)}),(0,h.forEach)(tt,function(X){var ot=X.target,J=V(G,ot,X);J&&s.reconnectStart(X,G,(0,_.SL)(X,G,q),W)})},I.prototype.postExecute=function(i){var s=i.oldShape;this._modeling.removeShape(s)},I.prototype.execute=function(i){},I.prototype.revert=function(i){},I.prototype.createShape=function(i,s,R,f){return this._modeling.createShape(i,s,R,f)},I.prototype.reconnectStart=function(i,s,R,f){this._modeling.reconnectStart(i,s,R,f)},I.prototype.reconnectEnd=function(i,s,R,f){this._modeling.reconnectEnd(i,s,R,f)};var D=u(77010),b=u(64053);function w(i){this._modeling=i}w.$inject=["modeling"],w.prototype.execute=function(i){var s=i.shape,R=s.children;i.oldChildrenVisibility=U(R),s.collapsed=!s.collapsed;var f=N(R,s.collapsed);return[s].concat(f)},w.prototype.revert=function(i){var s=i.shape,R=i.oldChildrenVisibility,f=s.children,C=z(f,R);return s.collapsed=!s.collapsed,[s].concat(C)};function U(i){var s={};return(0,h.forEach)(i,function(R){s[R.id]=R.hidden,R.children&&(s=(0,h.assign)({},s,U(R.children)))}),s}function N(i,s){var R=[];return(0,h.forEach)(i,function(f){f.hidden=s,R=R.concat(f),f.children&&(R=R.concat(N(f.children,f.collapsed||s)))}),R}function z(i,s){var R=[];return(0,h.forEach)(i,function(f){f.hidden=s[f.id],R=R.concat(f),f.children&&(R=R.concat(z(f.children,s)))}),R}function Y(i){this._modeling=i}Y.$inject=["modeling"],Y.prototype.execute=function(i){var s=i.shape,R=i.newHost,f=s.host;return i.oldHost=f,i.attacherIdx=Z(f,s),F(R,s),s.host=R,s},Y.prototype.revert=function(i){var s=i.shape,R=i.newHost,f=i.oldHost,C=i.attacherIdx;return s.host=f,Z(R,s),F(f,s,C),s};function Z(i,s){return(0,c.Od)(i&&i.attachers,s)}function F(i,s,R){if(!!i){var f=i.attachers;f||(i.attachers=f=[]),(0,c.IH)(f,s,R)}}function B(){}B.prototype.execute=function(i){var s=i.connection,R=i.newWaypoints;return i.oldWaypoints=s.waypoints,s.waypoints=R,s},B.prototype.revert=function(i){var s=i.connection,R=i.oldWaypoints;return s.waypoints=R,s};function P(i,s,R){this._eventBus=i,this._elementFactory=s,this._commandStack=R;var f=this;i.on("diagram.init",function(){f.registerHandlers(R)})}P.$inject=["eventBus","elementFactory","commandStack"],P.prototype.getHandlers=function(){return{"shape.append":E,"shape.create":T.Z,"shape.delete":g.Z,"shape.move":n.Z,"shape.resize":D.Z,"shape.replace":I,"shape.toggleCollapse":w,spaceTool:b.Z,"label.create":x.Z,"connection.create":O,"connection.delete":a,"connection.move":y,"connection.layout":r,"connection.updateWaypoints":B,"connection.reconnect":l.Z,"elements.create":p.Z,"elements.move":m.Z,"elements.delete":e,"elements.distribute":t,"elements.align":d,"element.updateAttachment":Y}},P.prototype.registerHandlers=function(i){(0,h.forEach)(this.getHandlers(),function(s,R){i.registerHandler(R,s)})},P.prototype.moveShape=function(i,s,R,f,C){typeof f=="object"&&(C=f,f=null);var A={shape:i,delta:s,newParent:R,newParentIndex:f,hints:C||{}};this._commandStack.execute("shape.move",A)},P.prototype.updateAttachment=function(i,s){var R={shape:i,newHost:s};this._commandStack.execute("element.updateAttachment",R)},P.prototype.moveElements=function(i,s,R,f){f=f||{};var C=f.attach,A=R,W;C===!0?(W=R,A=R.parent):C===!1&&(W=null);var G={shapes:i,delta:s,newParent:A,newHost:W,hints:f};this._commandStack.execute("elements.move",G)},P.prototype.moveConnection=function(i,s,R,f,C){typeof f=="object"&&(C=f,f=void 0);var A={connection:i,delta:s,newParent:R,newParentIndex:f,hints:C||{}};this._commandStack.execute("connection.move",A)},P.prototype.layoutConnection=function(i,s){var R={connection:i,hints:s||{}};this._commandStack.execute("connection.layout",R)},P.prototype.createConnection=function(i,s,R,f,C,A){typeof R=="object"&&(A=C,C=f,f=R,R=void 0),f=this._create("connection",f);var W={source:i,target:s,parent:C,parentIndex:R,connection:f,hints:A};return this._commandStack.execute("connection.create",W),W.connection},P.prototype.createShape=function(i,s,R,f,C){typeof f!="number"&&(C=f,f=void 0),C=C||{};var A=C.attach,W,G;i=this._create("shape",i),A?(W=R.parent,G=R):W=R;var V={position:s,shape:i,parent:W,parentIndex:f,host:G,hints:C};return this._commandStack.execute("shape.create",V),V.shape},P.prototype.createElements=function(i,s,R,f,C){(0,h.isArray)(i)||(i=[i]),typeof f!="number"&&(C=f,f=void 0),C=C||{};var A={position:s,elements:i,parent:R,parentIndex:f,hints:C};return this._commandStack.execute("elements.create",A),A.elements},P.prototype.createLabel=function(i,s,R,f){R=this._create("label",R);var C={labelTarget:i,position:s,parent:f||i.parent,shape:R};return this._commandStack.execute("label.create",C),C.shape},P.prototype.appendShape=function(i,s,R,f,C){C=C||{},s=this._create("shape",s);var A={source:i,position:R,target:f,shape:s,connection:C.connection,connectionParent:C.connectionParent,attach:C.attach};return this._commandStack.execute("shape.append",A),A.shape},P.prototype.removeElements=function(i){var s={elements:i};this._commandStack.execute("elements.delete",s)},P.prototype.distributeElements=function(i,s,R){var f={groups:i,axis:s,dimension:R};this._commandStack.execute("elements.distribute",f)},P.prototype.removeShape=function(i,s){var R={shape:i,hints:s||{}};this._commandStack.execute("shape.delete",R)},P.prototype.removeConnection=function(i,s){var R={connection:i,hints:s||{}};this._commandStack.execute("connection.delete",R)},P.prototype.replaceShape=function(i,s,R){var f={oldShape:i,newData:s,hints:R||{}};return this._commandStack.execute("shape.replace",f),f.newShape},P.prototype.alignElements=function(i,s){var R={elements:i,alignment:s};this._commandStack.execute("elements.align",R)},P.prototype.resizeShape=function(i,s,R,f){var C={shape:i,newBounds:s,minBounds:R,hints:f};this._commandStack.execute("shape.resize",C)},P.prototype.createSpace=function(i,s,R,f,C){var A={delta:R,direction:f,movingShapes:i,resizingShapes:s,start:C};this._commandStack.execute("spaceTool",A)},P.prototype.updateWaypoints=function(i,s,R){var f={connection:i,newWaypoints:s,hints:R||{}};this._commandStack.execute("connection.updateWaypoints",f)},P.prototype.reconnect=function(i,s,R,f,C){var A={connection:i,newSource:s,newTarget:R,dockingOrPoints:f,hints:C||{}};this._commandStack.execute("connection.reconnect",A)},P.prototype.reconnectStart=function(i,s,R,f){f||(f={}),this.reconnect(i,s,i.target,R,(0,h.assign)(f,{docking:"source"}))},P.prototype.reconnectEnd=function(i,s,R,f){f||(f={}),this.reconnect(i,i.source,s,R,(0,h.assign)(f,{docking:"target"}))},P.prototype.connect=function(i,s,R,f){return this.createConnection(i,s,R||{},i.parent,f)},P.prototype._create=function(i,s){return s instanceof L.XY?s:this._elementFactory.create(i,s)},P.prototype.toggleCollapse=function(i,s){var R={shape:i,hints:s||{}};this._commandStack.execute("shape.toggleCollapse",R)}},27879:($,H,u)=>{u.d(H,{Z:()=>v});var h=u(83612),L=u.n(h),d=u(64960),E=Math.round;function v(p){this._modeling=p}v.$inject=["modeling"],v.prototype.preExecute=function(p){var x=p.elements,T=p.parent,c=p.parentIndex,a=p.position,e=p.hints,g=this._modeling;(0,h.forEach)(x,function(m){(0,h.isNumber)(m.x)||(m.x=0),(0,h.isNumber)(m.y)||(m.y=0)});var t=(0,d.jY)(x);(0,h.forEach)(x,function(m){O(m)&&(m.waypoints=(0,h.map)(m.waypoints,function(n){return{x:n.x-t.x-E(t.width/2)+a.x,y:n.y-t.y-E(t.height/2)+a.y}})),(0,h.assign)(m,{x:m.x-t.x-E(t.width/2)+a.x,y:m.y-t.y-E(t.height/2)+a.y})});var o=(0,d.cd)(x),r={},y=this;(0,h.forEach)(x,function(m){if(O(m)){r[m.id]=(0,h.isNumber)(c)?g.createConnection(r[m.source.id],r[m.target.id],c,m,m.parent||T,e):g.createConnection(r[m.source.id],r[m.target.id],m,m.parent||T,e);return}var n=(0,h.assign)({},e);o.indexOf(m)===-1&&(n.autoResize=!1),r[m.id]=(0,h.isNumber)(c)?g.createShape(m,(0,h.pick)(m,["x","y","width","height"]),y.getParent(m,p),c,n):g.createShape(m,(0,h.pick)(m,["x","y","width","height"]),y.getParent(m,p),n)}),p.elements=(0,h.values)(r)},v.prototype.getParent=function(p,x){return p.parent||x.parent};function O(p){return!!p.waypoints}},86534:($,H,u)=>{u.d(H,{Z:()=>E});var h=u(59879),L=u.n(h),d=u(28158);function E(x){d.Z.call(this,x)}L()(E,d.Z),E.$inject=["canvas"];var v=d.Z.prototype.execute;E.prototype.execute=function(x){var T=x.shape;return p(T),T.labelTarget=x.labelTarget,v.call(this,x)};var O=d.Z.prototype.revert;E.prototype.revert=function(x){return x.shape.labelTarget=null,O.call(this,x)};function p(x){["width","height"].forEach(function(T){typeof x[T]>"u"&&(x[T]=0)})}},28158:($,H,u)=>{u.d(H,{Z:()=>E});var h=u(83612),L=u.n(h),d=Math.round;function E(v){this._canvas=v}E.$inject=["canvas"],E.prototype.execute=function(v){var O=v.shape,p=v.position,x=v.parent,T=v.parentIndex;if(!x)throw new Error("parent required");if(!p)throw new Error("position required");return p.width!==void 0?(0,h.assign)(O,p):(0,h.assign)(O,{x:p.x-d(O.width/2),y:p.y-d(O.height/2)}),this._canvas.addShape(O,x,T),O},E.prototype.revert=function(v){var O=v.shape;return this._canvas.removeShape(O),O}},1680:($,H,u)=>{u.d(H,{Z:()=>d});var h=u(91499),L=u(80352);function d(v,O){this._canvas=v,this._modeling=O}d.$inject=["canvas","modeling"],d.prototype.preExecute=function(v){var O=this._modeling,p=v.shape;(0,L.r)(p.incoming,function(x){O.removeConnection(x,{nested:!0})}),(0,L.r)(p.outgoing,function(x){O.removeConnection(x,{nested:!0})}),(0,L.r)(p.children,function(x){E(x)?O.removeConnection(x,{nested:!0}):O.removeShape(x,{nested:!0})})},d.prototype.execute=function(v){var O=this._canvas,p=v.shape,x=p.parent;return v.oldParent=x,v.oldParentIndex=(0,h.cq)(x.children,p),O.removeShape(p),p},d.prototype.revert=function(v){var O=this._canvas,p=v.shape,x=v.oldParent,T=v.oldParentIndex;return(0,h.IH)(x.children,p,T),O.addShape(p,x),p};function E(v){return v.waypoints}},60415:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(64482);function L(d){this._helper=new h.Z(d)}L.$inject=["modeling"],L.prototype.preExecute=function(d){d.closure=this._helper.getClosure(d.shapes)},L.prototype.postExecute=function(d){var E=d.hints,v;E&&E.primaryShape&&(v=E.primaryShape,E.oldParent=v.parent),this._helper.moveClosure(d.closure,d.delta,d.newParent,d.newHost,v)}},64053:($,H,u)=>{u.d(H,{Z:()=>E});var h=u(83612),L=u.n(h),d=u(26737);function E(T){this._modeling=T}E.$inject=["modeling"],E.prototype.preExecute=function(T){var c=T.delta,a=T.direction,e=T.movingShapes,g=T.resizingShapes,t=T.start;this.moveShapes(e,c),this.resizeShapes(g,c,a),this.updateConnectionWaypoints((0,d.wb)(e,g),c,a,t,e,g)},E.prototype.execute=function(){},E.prototype.revert=function(){},E.prototype.moveShapes=function(T,c){var a=this;(0,h.forEach)(T,function(e){a._modeling.moveShape(e,c,null,{autoResize:!1,layout:!1,recurse:!1})})},E.prototype.resizeShapes=function(T,c,a){var e=this;(0,h.forEach)(T,function(g){var t=(0,d.zY)(g,a,c);e._modeling.resizeShape(g,t,null,{attachSupport:!1,autoResize:!1,layout:!1})})},E.prototype.updateConnectionWaypoints=function(T,c,a,e,g,t){var o=this;(0,h.forEach)(T,function(r){var y=r.source,m=r.target,n=O(r),l=p(a);n=(0,h.map)(n,function(_,I){var D=I===0,b=I===n.length-1;return D&&!x(g.concat(t),y)||b&&!x(g.concat(t),m)||((_[l]>e&&/e|s/.test(a)||_[l]<e&&/n|w/.test(a))&&(_[l]=_[l]+c[l]),_.original&&(_.original[l]>e&&/e|s/.test(a)||_.original[l]<e&&/n|w/.test(a))&&(_.original[l]=_.original[l]+c[l])),_}),o._modeling.updateWaypoints(r,n,{labelBehavior:!1})})};function v(T){return(0,h.assign)({},T)}function O(T){return(0,h.map)(T.waypoints,function(c){return c=v(c),c.original&&(c.original=v(c.original)),c})}function p(T){switch(T){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function x(T,c){return T.indexOf(c)!==-1}},88848:($,H,u)=>{u.d(H,{Z:()=>x});var h=u(26019);const L={commandStack:["type",h.Z]};var d=u(98192),E=u(42226),v=u(67989),O=u(8644),p=u(279);const x={__depends__:[L,d.Z,E.Z,v.Z],__init__:["modeling"],modeling:["type",O.Z],layouter:["type",p.Z]}},23430:($,H,u)=>{u.d(H,{Z:()=>Y});var h=u(85637),L=u(42226),d=u(4828),E=u(67989),v=u(13203),O=u(10009),p=u(83612),x=u(46534),T=500,c=1250,a=1500,e=Math.round;function g(Z){return{x:Z.x+e(Z.width/2),y:Z.y+e(Z.height/2)}}function t(Z,F,B,P,i){function s(f,C,A,W){return i.allowed("elements.move",{shapes:f,delta:C,position:A,target:W})}Z.on("shape.move.start",a,function(f){var C=f.context,A=f.shape,W=P.get().slice();W.indexOf(A)===-1&&(W=[A]),W=o(W),(0,p.assign)(C,{shapes:W,validatedShapes:W,shape:A})}),Z.on("shape.move.start",c,function(f){var C=f.context,A=C.validatedShapes,W;if(W=C.canExecute=s(A),!W)return!1}),Z.on("shape.move.move",T,function(f){var C=f.context,A=C.validatedShapes,W=f.hover,G={x:f.dx,y:f.dy},V={x:f.x,y:f.y},Q;if(Q=s(A,G,V,W),C.delta=G,C.canExecute=Q,Q===null){C.target=null;return}C.target=W}),Z.on("shape.move.end",function(f){var C=f.context,A=C.delta,W=C.canExecute,G=W==="attach",V=C.shapes;if(W===!1)return!1;A.x=e(A.x),A.y=e(A.y),!(A.x===0&&A.y===0)&&B.moveElements(V,A,C.target,{primaryShape:C.shape,attach:G})}),Z.on("element.mousedown",function(f){var C=(0,x.Ku)(f);if(!C)throw new Error("must supply DOM mousedown event");return R(C,f.element)});function R(f,C,A,W){if((0,p.isObject)(A)&&(W=A,A=!1),!(C.waypoints||!C.parent)){var G=g(C);return F.init(f,G,"shape.move",{cursor:"grabbing",autoActivate:A,data:{shape:C,context:W||{}}}),!0}}this.start=R}t.$inject=["eventBus","dragging","modeling","selection","rules"];function o(Z){var F=(0,p.groupBy)(Z,"id");return(0,p.filter)(Z,function(B){for(;B=B.parent;)if(F[B.id])return!1;return!0})}var r=u(64960),y=u(21537),m=u(18872),n=499,l="djs-dragging",_="drop-ok",I="drop-not-ok",D="new-parent",b="attach-ok";function w(Z,F,B,P){function i(C){var A=s(C),W=U(A);return W}function s(C){var A=(0,r.PB)(C,!0),W=(0,p.map)(A,function(G){return(G.incoming||[]).concat(G.outgoing||[])});return(0,p.flatten)(A.concat(W))}function R(C,A){[b,_,I,D].forEach(function(W){W===A?F.addMarker(C,W):F.removeMarker(C,W)})}function f(C,A,W){P.addDragger(A,C.dragGroup),W&&F.addMarker(A,l),C.allDraggedElements?C.allDraggedElements.push(A):C.allDraggedElements=[A]}Z.on("shape.move.start",n,function(C){var A=C.context,W=A.shapes,G=A.allDraggedElements,V=i(W);if(!A.dragGroup){var Q=(0,y.Ue)("g");(0,y.Lj)(Q,B.cls("djs-drag-group",["no-events"]));var q=F.getDefaultLayer();(0,y.R3)(q,Q),A.dragGroup=Q}V.forEach(function(it){P.addDragger(it,A.dragGroup)}),G?G=(0,p.flatten)([G,s(W)]):G=s(W),(0,p.forEach)(G,function(it){F.addMarker(it,l)}),A.allDraggedElements=G,A.differentParents=N(W)}),Z.on("shape.move.move",n,function(C){var A=C.context,W=A.dragGroup,G=A.target,V=A.shape.parent,Q=A.canExecute;G&&(Q==="attach"?R(G,b):A.canExecute&&G&&G.id!==V.id?R(G,D):R(G,A.canExecute?_:I)),(0,m.Iu)(W,C.dx,C.dy)}),Z.on(["shape.move.out","shape.move.cleanup"],function(C){var A=C.context,W=A.target;W&&R(W,null)}),Z.on("shape.move.cleanup",function(C){var A=C.context,W=A.allDraggedElements,G=A.dragGroup;(0,p.forEach)(W,function(V){F.removeMarker(V,l)}),G&&(0,y.Od)(G)}),this.makeDraggable=f}w.$inject=["eventBus","canvas","styles","previewSupport"];function U(Z){var F=(0,p.filter)(Z,function(B){return z(B)?(0,p.find)(Z,(0,p.matchPattern)({id:B.source.id}))&&(0,p.find)(Z,(0,p.matchPattern)({id:B.target.id})):!0});return F}function N(Z){return(0,p.size)((0,p.groupBy)(Z,function(F){return F.parent&&F.parent.id}))!==1}function z(Z){return Z.waypoints}const Y={__depends__:[h.Z,L.Z,d.Z,E.Z,v.Z,O.Z],__init__:["move","movePreview"],move:["type",t],movePreview:["type",w]}},4828:($,H,u)=>{u.d(H,{Z:()=>p});var h=u(64960),L=u(21537),d=u(24706),E=u(83612),v=500;function O(x,T,c){this.offset=6;var a=T.cls("djs-outline",["no-fill"]),e=this;function g(t,o){var r=(0,L.Ue)("rect");return(0,L.Lj)(r,(0,E.assign)({x:10,y:10,width:100,height:100},a)),(0,L.R3)(t,r),r}x.on(["shape.added","shape.changed"],v,function(t){var o=t.element,r=t.gfx,y=(0,d.query)(".djs-outline",r);y||(y=g(r,o)),e.updateShapeOutline(y,o)}),x.on(["connection.added","connection.changed"],function(t){var o=t.element,r=t.gfx,y=(0,d.query)(".djs-outline",r);y||(y=g(r,o)),e.updateConnectionOutline(y,o)})}O.prototype.updateShapeOutline=function(x,T){(0,L.Lj)(x,{x:-this.offset,y:-this.offset,width:T.width+this.offset*2,height:T.height+this.offset*2})},O.prototype.updateConnectionOutline=function(x,T){var c=(0,h.jY)(T);(0,L.Lj)(x,{x:c.x-this.offset,y:c.y-this.offset,width:c.width+this.offset*2,height:c.height+this.offset*2})},O.$inject=["eventBus","styles","elementRegistry"];const p={__init__:["outline"],outline:["type",O]}},42890:($,H,u)=>{u.d(H,{Z:()=>a});var h=u(83612),L=u.n(h),d=u(24706),E=u.n(d),v=".djs-palette-toggle",O=".entry",p=v+", "+O,x="open",T="two-column",c=1e3;function a(t,o){this._eventBus=t,this._canvas=o;var r=this;t.on("tool-manager.update",function(y){var m=y.tool;r.updateToolHighlight(m)}),t.on("i18n.changed",function(){r._update()}),t.on("diagram.init",function(){r._diagramInitialized=!0,r._rebuild()})}a.$inject=["eventBus","canvas"],a.prototype.registerProvider=function(t,o){o||(o=t,t=c),this._eventBus.on("palette.getProviders",t,function(r){r.providers.push(o)}),this._rebuild()},a.prototype.getEntries=function(){var t=this._getProviders();return t.reduce(g,{})},a.prototype._rebuild=function(){if(!!this._diagramInitialized){var t=this._getProviders();!t.length||(this._container||this._init(),this._update())}},a.prototype._init=function(){var t=this,o=this._eventBus,r=this._getParentContainer(),y=this._container=(0,d.domify)(a.HTML_MARKUP);r.appendChild(y),d.delegate.bind(y,p,"click",function(m){var n=m.delegateTarget;if((0,d.matches)(n,v))return t.toggle();t.trigger("click",m)}),d.event.bind(y,"mousedown",function(m){m.stopPropagation()}),d.delegate.bind(y,O,"dragstart",function(m){t.trigger("dragstart",m)}),o.on("canvas.resized",this._layoutChanged,this),o.fire("palette.create",{container:y})},a.prototype._getProviders=function(t){var o=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(o),o.providers},a.prototype._toggleState=function(t){t=t||{};var o=this._getParentContainer(),r=this._container,y=this._eventBus,m,n=(0,d.classes)(r);"twoColumn"in t?m=t.twoColumn:m=this._needsCollapse(o.clientHeight,this._entries||{}),n.toggle(T,m),"open"in t&&n.toggle(x,t.open),y.fire("palette.changed",{twoColumn:m,open:this.isOpen()})},a.prototype._update=function(){var t=(0,d.query)(".djs-palette-entries",this._container),o=this._entries=this.getEntries();(0,d.clear)(t),(0,h.forEach)(o,function(r,y){var m=r.group||"default",n=(0,d.query)("[data-group="+m+"]",t);n||(n=(0,d.domify)('<div class="group" data-group="'+m+'"></div>'),t.appendChild(n));var l=r.html||(r.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),_=(0,d.domify)(l);n.appendChild(_),r.separator||((0,d.attr)(_,"data-action",y),r.title&&(0,d.attr)(_,"title",r.title),r.className&&e(_,r.className),r.imageUrl&&_.appendChild((0,d.domify)('<img src="'+r.imageUrl+'">')))}),this.open()},a.prototype.trigger=function(t,o,r){var y=this._entries,m,n,l,_=o.delegateTarget||o.target;if(!_)return o.preventDefault();m=y[(0,d.attr)(_,"data-action")],m&&(n=m.action,l=o.originalEvent||o,(0,h.isFunction)(n)?t==="click"&&n(l,r):n[t]&&n[t](l,r),o.preventDefault())},a.prototype._layoutChanged=function(){this._toggleState({})},a.prototype._needsCollapse=function(t,o){var r=50,y=Object.keys(o).length*46;return t<y+r},a.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},a.prototype.open=function(){this._toggleState({open:!0})},a.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},a.prototype.isActiveTool=function(t){return t&&this._activeTool===t},a.prototype.updateToolHighlight=function(t){var o,r;this._toolsContainer||(o=(0,d.query)(".djs-palette-entries",this._container),this._toolsContainer=(0,d.query)("[data-group=tools]",o)),r=this._toolsContainer,(0,h.forEach)(r.children,function(y){var m=y.getAttribute("data-action");if(!!m){var n=(0,d.classes)(y);m=m.replace("-tool",""),n.contains("entry")&&m===t?n.add("highlighted-entry"):n.remove("highlighted-entry")}})},a.prototype.isOpen=function(){return(0,d.classes)(this._container).has(x)},a.prototype._getParentContainer=function(){return this._canvas.getContainer()},a.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function e(t,o){var r=(0,d.classes)(t),y=(0,h.isArray)(o)?o:o.split(/\s+/g);y.forEach(function(m){r.add(m)})}function g(t,o){var r=o.getPaletteEntries();return(0,h.isFunction)(r)?r(t):((0,h.forEach)(r,function(y,m){t[m]=y}),t)}},82032:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(42890);const L={__init__:["palette"],palette:["type",h.Z]}},41525:($,H,u)=>{u.d(H,{Z:()=>x});var h=u(83612),L=u.n(h),d=u(24706),E=u.n(d),v="data-id",O=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],p=1e3;function x(c,a,e){var g=(0,h.isDefined)(c&&c.scale)?c.scale:{min:1,max:1.5};this._config={scale:g},this._eventBus=a,this._canvas=e,this._providers={},this._current={}}x.$inject=["config.popupMenu","eventBus","canvas"],x.prototype.registerProvider=function(c,a,e){e||(e=a,a=p),this._eventBus.on("popupMenu.getProviders."+c,a,function(g){g.providers.push(e)})},x.prototype.isEmpty=function(c,a){if(!c)throw new Error("element parameter is missing");if(!a)throw new Error("providerId parameter is missing");var e=this._getProviders(a);if(!e)return!0;var g=this._getEntries(c,e),t=this._getHeaderEntries(c,e),o=(0,h.size)(g)>0,r=t&&(0,h.size)(t)>0;return!o&&!r},x.prototype.open=function(c,a,e){var g=this._getProviders(a);if(!c)throw new Error("Element is missing");if(!g||!g.length)throw new Error("No registered providers for: "+a);if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var t=this._current={className:a,element:c,position:e},o=this._getEntries(c,g),r=this._getHeaderEntries(c,g);t.entries=(0,h.assign)({},o,r),t.container=this._createContainer(),(0,h.size)(r)&&t.container.appendChild(this._createEntries(r,"djs-popup-header")),(0,h.size)(o)&&t.container.appendChild(this._createEntries(o,"djs-popup-body"));var y=this._canvas,m=y.getContainer();this._attachContainer(t.container,m,e.cursor),this._bindAutoClose()},x.prototype.close=function(){!this.isOpen()||(this._emit("close"),this._unbindAutoClose(),(0,d.remove)(this._current.container),this._current.container=null)},x.prototype.isOpen=function(){return!!this._current.container},x.prototype.trigger=function(c){c.preventDefault();var a=c.delegateTarget||c.target,e=(0,d.attr)(a,v),g=this._getEntry(e);if(g.action)return g.action.call(null,c,g)},x.prototype._getProviders=function(c){var a=this._eventBus.createEvent({type:"popupMenu.getProviders."+c,providers:[]});return this._eventBus.fire(a),a.providers},x.prototype._getEntries=function(c,a){var e={};return(0,h.forEach)(a,function(g){if(!g.getPopupMenuEntries){(0,h.forEach)(g.getEntries(c),function(o){var r=o.id;if(!r)throw new Error("every entry must have the id property set");e[r]=(0,h.omit)(o,["id"])});return}var t=g.getPopupMenuEntries(c);(0,h.isFunction)(t)?e=t(e):(0,h.forEach)(t,function(o,r){e[r]=o})}),e},x.prototype._getHeaderEntries=function(c,a){var e={};return(0,h.forEach)(a,function(g){if(!g.getPopupMenuHeaderEntries){if(!g.getHeaderEntries)return;(0,h.forEach)(g.getHeaderEntries(c),function(o){var r=o.id;if(!r)throw new Error("every entry must have the id property set");e[r]=(0,h.omit)(o,["id"])});return}var t=g.getPopupMenuHeaderEntries(c);(0,h.isFunction)(t)?e=t(e):(0,h.forEach)(t,function(o,r){e[r]=o})}),e},x.prototype._getEntry=function(c){var a=this._current.entries[c];if(!a)throw new Error("entry not found");return a},x.prototype._emit=function(c){this._eventBus.fire("popupMenu."+c)},x.prototype._createContainer=function(){var c=(0,d.domify)('<div class="djs-popup">'),a=this._current.position,e=this._current.className;return(0,h.assign)(c.style,{position:"absolute",left:a.x+"px",top:a.y+"px",visibility:"hidden"}),(0,d.classes)(c).add(e),c},x.prototype._attachContainer=function(c,a,e){var g=this;d.delegate.bind(c,".entry","click",function(t){g.trigger(t)}),this._updateScale(c),a.appendChild(c),e&&this._assureIsInbounds(c,e)},x.prototype._updateScale=function(c){var a=this._canvas.zoom(),e=this._config.scale,g,t,o=a;e!==!0&&(e===!1?(g=1,t=1):(g=e.min,t=e.max),(0,h.isDefined)(g)&&a<g&&(o=g),(0,h.isDefined)(t)&&a>t&&(o=t)),T(c,"scale("+o+")")},x.prototype._assureIsInbounds=function(c,a){var e=this._canvas,g=e._container.getBoundingClientRect(),t=c.offsetLeft,o=c.offsetTop,r=c.scrollWidth,y=c.scrollHeight,m={},n,l,_={x:a.x-g.left,y:a.y-g.top};t+r>g.width&&(m.x=!0),o+y>g.height&&(m.y=!0),m.x&&m.y?(n=_.x-r+"px",l=_.y-y+"px"):m.x?(n=_.x-r+"px",l=_.y+"px"):m.y&&_.y<y?(n=_.x+"px",l=10+"px"):m.y&&(n=_.x+"px",l=_.y-y+"px"),(0,h.assign)(c.style,{left:n,top:l},{visibility:"visible","z-index":1e3})},x.prototype._createEntries=function(c,a){var e=(0,d.domify)("<div>"),g=this;return(0,d.classes)(e).add(a),(0,h.forEach)(c,function(t,o){var r=g._createEntry(t,o);e.appendChild(r)}),e},x.prototype._createEntry=function(c,a){var e=(0,d.domify)("<div>"),g=(0,d.classes)(e);if(g.add("entry"),c.className&&c.className.split(" ").forEach(function(o){g.add(o)}),(0,d.attr)(e,v,a),c.label){var t=(0,d.domify)("<span>");t.textContent=c.label,e.appendChild(t)}return c.imageUrl&&e.appendChild((0,d.domify)('<img src="'+c.imageUrl+'" />')),c.active===!0&&g.add("active"),c.disabled===!0&&g.add("disabled"),c.title&&(e.title=c.title),e},x.prototype._bindAutoClose=function(){this._eventBus.once(O,this.close,this)},x.prototype._unbindAutoClose=function(){this._eventBus.off(O,this.close,this)};function T(c,a){c.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){c.style[e+"transform"]=a})}},42776:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(41525);const L={__init__:["popupMenu"],popupMenu:["type",h.Z]}},40222:($,H,u)=>{u.d(H,{Z:()=>T});var h=u(83612),L=u.n(h),d=u(21537),E=u(24706),v=u.n(E),O=u(64790),p=["marker-start","marker-mid","marker-end"],x=["circle","ellipse","line","path","polygon","polyline","rect"];function T(t,o,r,y){this._elementRegistry=t,this._canvas=r,this._styles=y,this._clonedMarkers={};var m=this;o.on("drag.cleanup",function(){(0,h.forEach)(m._clonedMarkers,function(n){(0,d.Od)(n)}),m._clonedMarkers={}})}T.$inject=["elementRegistry","eventBus","canvas","styles"],T.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},T.prototype.addDragger=function(t,o,r){r=r||this.getGfx(t);var y=(0,d.d9)(r),m=r.getBoundingClientRect();return this._cloneMarkers((0,O.s)(y)),(0,d.Lj)(y,this._styles.cls("djs-dragger",[],{x:m.top,y:m.left})),(0,d.R3)(o,y),y},T.prototype.addFrame=function(t,o){var r=(0,d.Ue)("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return(0,d.R3)(o,r),r},T.prototype._cloneMarkers=function(t){var o=this;if(t.childNodes)for(var r=0;r<t.childNodes.length;r++)o._cloneMarkers(t.childNodes[r]);!g(t)||p.forEach(function(y){if((0,d.Lj)(t,y)){var m=c(t,y,o._canvas.getContainer());o._cloneMarker(t,m,y)}})},T.prototype._cloneMarker=function(t,o,r){var y=o.id,m=this._clonedMarkers[y];if(!m){m=(0,d.d9)(o);var n=y+"-clone";m.id=n,(0,d.Sh)(m).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[y]=m;var l=(0,E.query)("defs",this._canvas._svg);l||(l=(0,d.Ue)("defs"),(0,d.R3)(this._canvas._svg,l)),(0,d.R3)(l,m)}var _=e(this._clonedMarkers[y].id);(0,d.Lj)(t,r,_)};function c(t,o,r){var y=a((0,d.Lj)(t,o));return(0,E.query)("marker#"+y,r||document)}function a(t){return t.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function e(t){return"url(#"+t+")"}function g(t){return x.indexOf(t.nodeName)!==-1}},10009:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(40222);const L={__init__:["previewSupport"],previewSupport:["type",h.Z]}},85081:($,H,u)=>{u.d(H,{Z:()=>O,e:()=>x});var h=u(83612),L=u.n(h),d=u(29337),E=u(86463),v=10;function O(c,a,e,g){this._dragging=g,this._rules=a;var t=this;function o(m,n){var l=m.shape,_=m.direction,I=m.resizeConstraints,D;m.delta=n,D=(0,d.zY)(l,_,n),m.newBounds=(0,d.QG)(D,I),m.canExecute=t.canResize(m)}function r(m){var n=m.resizeConstraints,l=m.minBounds;n===void 0&&(l===void 0&&(l=t.computeMinResizeBox(m)),m.resizeConstraints={min:(0,E.JA)(l)})}function y(m){var n=m.shape,l=m.canExecute,_=m.newBounds;if(l){if(_=(0,E.aR)(_),!p(n,_))return;e.resizeShape(n,_)}}c.on("resize.start",function(m){r(m.context)}),c.on("resize.move",function(m){var n={x:m.dx,y:m.dy};o(m.context,n)}),c.on("resize.end",function(m){y(m.context)})}O.prototype.canResize=function(c){var a=this._rules,e=(0,h.pick)(c,["newBounds","shape","delta","direction"]);return a.allowed("shape.resize",e)},O.prototype.activate=function(c,a,e){var g=this._dragging,t,o;if(typeof e=="string"&&(e={direction:e}),t=(0,h.assign)({shape:a},e),o=t.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");g.init(c,x(a,o),"resize",{autoActivate:!0,cursor:T(o),data:{shape:a,context:t}})},O.prototype.computeMinResizeBox=function(c){var a=c.shape,e=c.direction,g,t;return g=c.minDimensions||{width:v,height:v},t=(0,d.gE)(a,c.childrenBoxPadding),(0,d.oN)(e,a,g,t)},O.$inject=["eventBus","rules","modeling","dragging"];function p(c,a){return c.x!==a.x||c.y!==a.y||c.width!==a.width||c.height!==a.height}function x(c,a){var e=(0,E.wS)(c),g=(0,E.JA)(c),t={x:e.x,y:e.y};return a.indexOf("n")!==-1?t.y=g.top:a.indexOf("s")!==-1&&(t.y=g.bottom),a.indexOf("e")!==-1?t.x=g.right:a.indexOf("w")!==-1&&(t.x=g.left),t}function T(c){var a="resize-";return c==="n"||c==="s"?a+"ns":c==="e"||c==="w"?a+"ew":c==="nw"||c==="se"?a+"nwse":a+"nesw"}},63343:($,H,u)=>{u.d(H,{Z:()=>t});var h=u(83612),L=u.n(h),d=u(21537),E=u(24706),v=u.n(E),O=u(98827),p=u(18872),x=u(85081),T=-6,c=4,a=20,e="djs-resizer",g=["n","w","s","e","nw","ne","se","sw"];function t(r,y,m,n){this._resize=n,this._canvas=y;var l=this;r.on("selection.changed",function(_){var I=_.newSelection;l.removeResizers(),I.length===1&&(0,h.forEach)(I,(0,h.bind)(l.addResizer,l))}),r.on("shape.changed",function(_){var I=_.element;m.isSelected(I)&&(l.removeResizers(),l.addResizer(I))})}t.prototype.makeDraggable=function(r,y,m){var n=this._resize;function l(_){(0,O.Id)(_)&&n.activate(_,r,m)}E.event.bind(y,"mousedown",l),E.event.bind(y,"touchstart",l)},t.prototype._createResizer=function(r,y,m,n){var l=this._getResizersParent(),_=o(n),I=(0,d.Ue)("g");(0,d.Sh)(I).add(e),(0,d.Sh)(I).add(e+"-"+r.id),(0,d.Sh)(I).add(e+"-"+n),(0,d.R3)(l,I);var D=(0,d.Ue)("rect");(0,d.Lj)(D,{x:-c/2+_.x,y:-c/2+_.y,width:c,height:c}),(0,d.Sh)(D).add(e+"-visual"),(0,d.R3)(I,D);var b=(0,d.Ue)("rect");return(0,d.Lj)(b,{x:-a/2+_.x,y:-a/2+_.y,width:a,height:a}),(0,d.Sh)(b).add(e+"-hit"),(0,d.R3)(I,b),(0,p.vs)(I,y,m),I},t.prototype.createResizer=function(r,y){var m=(0,x.e)(r,y),n=this._createResizer(r,m.x,m.y,y);this.makeDraggable(r,n,y)},t.prototype.addResizer=function(r){var y=this,m=this._resize;!m.canResize({shape:r})||(0,h.forEach)(g,function(n){y.createResizer(r,n)})},t.prototype.removeResizers=function(){var r=this._getResizersParent();(0,d.ZH)(r)},t.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},t.$inject=["eventBus","canvas","selection","resize"];function o(r){var y={x:0,y:0};return r.indexOf("e")!==-1?y.x=-T:r.indexOf("w")!==-1&&(y.x=T),r.indexOf("s")!==-1?y.y=-T:r.indexOf("n")!==-1&&(y.y=T),y}},76795:($,H,u)=>{u.d(H,{Z:()=>v});var h=u(21537),L="djs-resizing",d="resize-not-ok",E=500;function v(O,p,x){function T(a){var e=a.shape,g=a.newBounds,t=a.frame;t||(t=a.frame=x.addFrame(e,p.getDefaultLayer()),p.addMarker(e,L)),g.width>5&&(0,h.Lj)(t,{x:g.x,width:g.width}),g.height>5&&(0,h.Lj)(t,{y:g.y,height:g.height}),a.canExecute?(0,h.Sh)(t).remove(d):(0,h.Sh)(t).add(d)}function c(a){var e=a.shape,g=a.frame;g&&(0,h.Od)(a.frame),p.removeMarker(e,L)}O.on("resize.move",E,function(a){T(a.context)}),O.on("resize.cleanup",function(a){c(a.context)})}v.$inject=["eventBus","canvas","previewSupport"]},29337:($,H,u)=>{u.d(H,{QG:()=>g,gE:()=>m,oN:()=>t,zY:()=>T});var h=u(83612),L=u.n(h),d=u(64960),E=u(86463),v=Math.max,O=Math.min,p=20;function x(n,l){return{top:n.top-l.top,right:n.right-l.right,bottom:n.bottom-l.bottom,left:n.left-l.left}}function T(n,l,_){var I=_.x,D=_.y,b={x:n.x,y:n.y,width:n.width,height:n.height};return l.indexOf("n")!==-1?(b.y=n.y+D,b.height=n.height-D):l.indexOf("s")!==-1&&(b.height=n.height+D),l.indexOf("e")!==-1?b.width=n.width+I:l.indexOf("w")!==-1&&(b.x=n.x+I,b.width=n.width-I),b}function c(n,l){return{x:n.x+(l.left||0),y:n.y+(l.top||0),width:n.width-(l.left||0)+(l.right||0),height:n.height-(l.top||0)+(l.bottom||0)}}function a(n,l,_){var I=n.width/l.width,D=n.height/l.height;return{x:Math.round(l.x+l.width/2)-Math.floor((n.x+n.width/2-_.x)/I),y:Math.round(l.y+l.height/2)-Math.floor((n.y+n.height/2-_.y)/D)}}function e(n,l,_){var I=l[n],D=_.min&&_.min[n],b=_.max&&_.max[n];return(0,h.isNumber)(D)&&(I=(/top|left/.test(n)?O:v)(I,D)),(0,h.isNumber)(b)&&(I=(/top|left/.test(n)?v:O)(I,b)),I}function g(n,l){if(!l)return n;var _=(0,E.JA)(n);return(0,E.z_)({top:e("top",_,l),right:e("right",_,l),bottom:e("bottom",_,l),left:e("left",_,l)})}function t(n,l,_,I){var D=(0,E.JA)(l),b={top:/n/.test(n)?D.bottom-_.height:D.top,left:/w/.test(n)?D.right-_.width:D.left,bottom:/s/.test(n)?D.top+_.height:D.bottom,right:/e/.test(n)?D.left+_.width:D.right},w=I?(0,E.JA)(I):b,U={top:O(b.top,w.top),left:O(b.left,w.left),bottom:v(b.bottom,w.bottom),right:v(b.right,w.right)};return(0,E.z_)(U)}function o(n,l){return typeof n<"u"?n:p}function r(n,l){var _,I,D,b;return typeof l=="object"?(_=o(l.left),I=o(l.right),D=o(l.top),b=o(l.bottom)):_=I=D=b=o(l),{x:n.x-_,y:n.y-D,width:n.width+_+I,height:n.height+D+b}}function y(n){return!(n.waypoints||n.type==="label")}function m(n,l){var _;if(n.length===void 0?_=(0,h.filter)(n.children,y):_=n,_.length)return r((0,d.jY)(_),l)}},61788:($,H,u)=>{u.d(H,{Z:()=>E});var h=u(59879),L=u.n(h),d=u(91658);function E(v){d.Z.call(this,v),this.init()}E.$inject=["eventBus"],L()(E,d.Z),E.prototype.addRule=function(v,O,p){var x=this;typeof v=="string"&&(v=[v]),v.forEach(function(T){x.canExecute(T,O,function(c,a,e){return p(c)},!0)})},E.prototype.init=function(){}},67989:($,H,u)=>{u.d(H,{Z:()=>L});function h(d){this._commandStack=d.get("commandStack",!1)}h.$inject=["injector"],h.prototype.allowed=function(d,E){var v=!0,O=this._commandStack;return O&&(v=O.canExecute(d,E)),v===void 0?!0:v};const L={__init__:["rules"],rules:["type",h]}},42226:($,H,u)=>{u.d(H,{Z:()=>a});var h=u(85637),L=u(4828),d=u(42893),E=u(83612),v="hover",O="selected";function p(e,g,t,o){this._multiSelectionBox=null;function r(m,n){g.addMarker(m,n)}function y(m,n){g.removeMarker(m,n)}e.on("element.hover",function(m){r(m.element,v)}),e.on("element.out",function(m){y(m.element,v)}),e.on("selection.changed",function(m){function n(D){y(D,O)}function l(D){r(D,O)}var _=m.oldSelection,I=m.newSelection;(0,E.forEach)(_,function(D){I.indexOf(D)===-1&&n(D)}),(0,E.forEach)(I,function(D){_.indexOf(D)===-1&&l(D)})})}p.$inject=["eventBus","canvas","selection","styles"];var x=u(98827);function T(e,g,t,o){e.on("create.end",500,function(r){var y=r.context,m=y.canExecute,n=y.elements,l=y.hints||{},_=l.autoSelect;if(m){if(_===!1)return;(0,E.isArray)(_)?g.select(_):g.select(n.filter(c))}}),e.on("connect.end",500,function(r){r.context.canExecute&&r.context.connection&&g.select(r.context.connection)}),e.on("shape.move.end",500,function(r){var y=r.previousSelection||[],m=o.get(r.context.shape.id),n=(0,E.find)(y,function(l){return m.id===l.id});n||g.select(m)}),e.on("element.click",function(r){var y=r.element;y===t.getRootElement()&&(y=null);var m=g.isSelected(y),n=g.get().length>1,l=(0,x.RJ)(r);if(m&&n)return l?g.deselect(y):g.select(y);m||g.select(y,l)})}T.$inject=["eventBus","selection","canvas","elementRegistry"];function c(e){return!e.hidden}const a={__init__:["selectionVisuals","selectionBehavior"],__depends__:[h.Z,L.Z],selection:["type",d.Z],selectionVisuals:["type",p],selectionBehavior:["type",T]}},19304:($,H,u)=>{u.d(H,{Z:()=>r});var h=u(83612),L=u.n(h),d=u(86463),E=u(64960),v=u(26737),O=u(98827),p=u(63253),x=Math.abs,T=Math.round,c={x:"width",y:"height"},a="crosshair",e={n:"top",w:"left",s:"bottom",e:"right"},g=1500,t={n:"s",w:"e",s:"n",e:"w"},o=20;function r(D,b,w,U,N,z){this._canvas=D,this._dragging=b,this._eventBus=w,this._modeling=U,this._rules=N,this._toolManager=z;var Y=this;z.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),w.on("spaceTool.selection.end",function(Z){w.once("spaceTool.selection.ended",function(){Y.activateMakeSpace(Z.originalEvent)})}),w.on("spaceTool.move",g,function(Z){var F=Z.context,B=F.initialized;B||(B=F.initialized=Y.init(Z,F)),B&&m(Z)}),w.on("spaceTool.end",function(Z){var F=Z.context,B=F.direction,P=F.movingShapes,i=F.resizingShapes,s=F.start;if(!!F.initialized){m(Z);var R=Y.getDelta(Z);Y.makeSpace(P,i,R,B,s),w.once("spaceTool.ended",function(f){Y.activateSelection(f.originalEvent,!0,!0)})}})}r.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager"],r.prototype.activateSelection=function(D,b,w){this._dragging.init(D,"spaceTool.selection",{autoActivate:b,cursor:a,data:{context:{reactivate:w}},trapClick:!1})},r.prototype.activateMakeSpace=function(D){this._dragging.init(D,"spaceTool",{autoActivate:!0,cursor:a,data:{context:{}}})},r.prototype.makeSpace=function(D,b,w,U,N){return this._modeling.createSpace(D,b,w,U,N)},r.prototype.init=function(D,b){var w=x(D.dx)>x(D.dy)?"x":"y",U=D["d"+w],N=D[w]-U;if(x(U)<5)return!1;U<0&&(U*=-1),(0,O.RJ)(D)&&(U*=-1);var z=(0,v.Mg)(w,U),Y=this._canvas.getRootElement(),Z=(0,E.PB)(Y,!0),F=this.calculateAdjustments(Z,w,U,N),B=this._eventBus.fire("spaceTool.getMinDimensions",{shapes:F.resizingShapes}),P=n(F,w,z,N,B);return(0,h.assign)(b,F,{axis:w,direction:z,spaceToolConstraints:P,start:N}),(0,p.t8)("resize-"+(w==="x"?"ew":"ns")),!0},r.prototype.calculateAdjustments=function(D,b,w,U){var N=this._rules,z=[],Y=[];return(0,h.forEach)(D,function(Z){if(!(!Z.parent||_(Z))){var F=Z[b],B=F+Z[c[b]];if(w>0&&F>U||w<0&&B<U)return z.push(Z);if(F<U&&B>U&&N.allowed("shape.resize",{shape:Z}))return Y.push(Z)}}),{movingShapes:z,resizingShapes:Y}},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},r.prototype.isActive=function(){var D=this._dragging.context();return D&&/^spaceTool/.test(D.prefix)},r.prototype.getDelta=function(D){var b=D.context,w=b.axis,U={x:0,y:0};return U[w]=T(D["d"+w]),U};function y(D){return{top:D.top-o,right:D.right+o,bottom:D.bottom+o,left:D.left-o}}function m(D){var b=D.context,w=b.spaceToolConstraints;if(!!w){var U,N;(0,h.isNumber)(w.left)&&(U=Math.max(D.x,w.left),D.dx=D.dx+U-D.x,D.x=U),(0,h.isNumber)(w.right)&&(U=Math.min(D.x,w.right),D.dx=D.dx+U-D.x,D.x=U),(0,h.isNumber)(w.top)&&(N=Math.max(D.y,w.top),D.dy=D.dy+N-D.y,D.y=N),(0,h.isNumber)(w.bottom)&&(N=Math.min(D.y,w.bottom),D.dy=D.dy+N-D.y,D.y=N)}}function n(D,b,w,U,N){var z=D.movingShapes,Y=D.resizingShapes;if(!!Y.length){var Z={},F,B;return(0,h.forEach)(Y,function(P){var i=(0,d.JA)(P),s=(0,h.filter)(P.children,function(G){return!_(G)&&!I(G)&&!l(z,G)&&!l(Y,G)}),R=(0,h.filter)(P.children,function(G){return!_(G)&&!I(G)&&l(z,G)}),f,C,A;s.length&&(C=y((0,d.JA)((0,E.jY)(s))),f=U-i[e[w]]+C[e[w]],w==="n"?Z.bottom=B=(0,h.isNumber)(B)?Math.min(B,f):f:w==="w"?Z.right=B=(0,h.isNumber)(B)?Math.min(B,f):f:w==="s"?Z.top=F=(0,h.isNumber)(F)?Math.max(F,f):f:w==="e"&&(Z.left=F=(0,h.isNumber)(F)?Math.max(F,f):f)),R.length&&(A=y((0,d.JA)((0,E.jY)(R))),f=U-A[e[t[w]]]+i[e[t[w]]],w==="n"?Z.bottom=B=(0,h.isNumber)(B)?Math.min(B,f):f:w==="w"?Z.right=B=(0,h.isNumber)(B)?Math.min(B,f):f:w==="s"?Z.top=F=(0,h.isNumber)(F)?Math.max(F,f):f:w==="e"&&(Z.left=F=(0,h.isNumber)(F)?Math.max(F,f):f));var W=N&&N[P.id];W&&(w==="n"?(f=U+P[c[b]]-W[c[b]],Z.bottom=B=(0,h.isNumber)(B)?Math.min(B,f):f):w==="w"?(f=U+P[c[b]]-W[c[b]],Z.right=B=(0,h.isNumber)(B)?Math.min(B,f):f):w==="s"?(f=U-P[c[b]]+W[c[b]],Z.top=F=(0,h.isNumber)(F)?Math.max(F,f):f):w==="e"&&(f=U-P[c[b]]+W[c[b]],Z.left=F=(0,h.isNumber)(F)?Math.max(F,f):f))}),Z}}function l(D,b){return D.indexOf(b)!==-1}function _(D){return!!D.waypoints}function I(D){return!!D.labelTarget}},98080:($,H,u)=>{u.d(H,{Z:()=>T});var h=u(83612),L=u.n(h),d=u(21537),E=u(18872),v="djs-dragging",O="djs-resizing",p=250,x=Math.max;function T(a,e,g,t,o){var r=this;function y(m,n){(0,h.forEach)(m,function(l){o.addDragger(l,n),g.addMarker(l,v)})}a.on("spaceTool.selection.start",function(m){var n=g.getLayer("space"),l=m.context,_={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},I=(0,d.Ue)("g");(0,d.Lj)(I,t.cls("djs-crosshair-group",["no-events"])),(0,d.R3)(n,I);var D=(0,d.Ue)("path");(0,d.Lj)(D,"d",_.x),(0,d.Sh)(D).add("djs-crosshair"),(0,d.R3)(I,D);var b=(0,d.Ue)("path");(0,d.Lj)(b,"d",_.y),(0,d.Sh)(b).add("djs-crosshair"),(0,d.R3)(I,b),l.crosshairGroup=I}),a.on("spaceTool.selection.move",function(m){var n=m.context.crosshairGroup;(0,E.Iu)(n,m.x,m.y)}),a.on("spaceTool.selection.cleanup",function(m){var n=m.context,l=n.crosshairGroup;l&&(0,d.Od)(l)}),a.on("spaceTool.move",p,function(m){var n=m.context,l=n.line,_=n.axis,I=n.movingShapes,D=n.resizingShapes;if(!!n.initialized){if(!n.dragGroup){var b=g.getLayer("space");l=(0,d.Ue)("path"),(0,d.Lj)(l,"d","M0,0 L0,0"),(0,d.Sh)(l).add("djs-crosshair"),(0,d.R3)(b,l),n.line=l;var w=(0,d.Ue)("g");(0,d.Lj)(w,t.cls("djs-drag-group",["no-events"])),(0,d.R3)(g.getDefaultLayer(),w),y(I,w);var U=n.movingConnections=e.filter(function(F){var B=!1;(0,h.forEach)(I,function(R){(0,h.forEach)(R.outgoing,function(f){F===f&&(B=!0)})});var P=!1;(0,h.forEach)(I,function(R){(0,h.forEach)(R.incoming,function(f){F===f&&(P=!0)})});var i=!1;(0,h.forEach)(D,function(R){(0,h.forEach)(R.outgoing,function(f){F===f&&(i=!0)})});var s=!1;return(0,h.forEach)(D,function(R){(0,h.forEach)(R.incoming,function(f){F===f&&(s=!0)})}),c(F)&&(B||i)&&(P||s)});y(U,w),n.dragGroup=w}if(!n.frameGroup){var N=(0,d.Ue)("g");(0,d.Lj)(N,t.cls("djs-frame-group",["no-events"])),(0,d.R3)(g.getDefaultLayer(),N);var z=[];(0,h.forEach)(D,function(F){var B=o.addFrame(F,N),P=B.getBBox();z.push({element:B,initialBounds:P}),g.addMarker(F,O)}),n.frameGroup=N,n.frames=z}var Y={x:"M"+m.x+", -10000 L"+m.x+", 10000",y:"M -10000, "+m.y+" L 10000, "+m.y};(0,d.Lj)(l,{d:Y[_]});var Z=r.getDelta(m);(0,E.Iu)(n.dragGroup,Z.x,Z.y),(0,h.forEach)(n.frames,function(F){var B=F.element,P=F.initialBounds,i,s;n.direction==="e"?(0,d.Lj)(B,{width:x(P.width+Z.x,5)}):(i=x(P.width-Z.x,5),(0,d.Lj)(B,{width:i,x:P.x+P.width-i})),n.direction==="s"?(0,d.Lj)(B,{height:x(P.height+Z.y,5)}):(s=x(P.height-Z.y,5),(0,d.Lj)(B,{height:s,y:P.y+P.height-s}))})}}),a.on("spaceTool.cleanup",function(m){var n=m.context,l=n.movingShapes,_=n.movingConnections,I=n.resizingShapes,D=n.line,b=n.dragGroup,w=n.frameGroup;(0,h.forEach)(l,function(U){g.removeMarker(U,v)}),(0,h.forEach)(_,function(U){g.removeMarker(U,v)}),b&&((0,d.Od)(D),(0,d.Od)(b)),(0,h.forEach)(I,function(U){g.removeMarker(U,O)}),w&&(0,d.Od)(w)})}T.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];function c(a){return a.waypoints}T.prototype.getDelta=function(a){var e=a.context,g={x:"y",y:"x"},t={x:a.dx,y:a.dy};return t[g[e.axis]]=0,t}},26737:($,H,u)=>{u.d(H,{Mg:()=>d,wb:()=>E,zY:()=>O});var h=u(83612),L=u.n(h);function d(p,x){if(p==="x"){if(x>0)return"e";if(x<0)return"w"}if(p==="y"){if(x>0)return"s";if(x<0)return"n"}return null}function E(p,x){var T=[];return(0,h.forEach)(p,function(c){var a=c.incoming,e=c.outgoing;(0,h.forEach)(a.concat(e),function(g){var t=g.source,o=g.target;(v(p,t)||v(p,o)||v(x,t)||v(x,o))&&(v(T,g)||T.push(g))})}),T}function v(p,x){return p.indexOf(x)!==-1}function O(p,x,T){var c=p.x,a=p.y,e=p.width,g=p.height,t=T.x,o=T.y;switch(x){case"n":return{x:c,y:a+o,width:e,height:g-o};case"s":return{x:c,y:a,width:e,height:g+o};case"w":return{x:c+t,y:a,width:e-t,height:g};case"e":return{x:c,y:a,width:e+t,height:g};default:throw new Error("unknown direction: "+x)}}},83208:($,H,u)=>{u.d(H,{Z:()=>a});var h=u(83612),L=u(24706),d=u(50296),E=new d.Z("tt");function v(e){var g=(0,L.domify)('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(g,e.firstChild),g}function O(e,g,t){(0,h.assign)(e.style,{left:g+"px",top:t+"px"})}function p(e,g){e.style.display=g===!1?"none":""}var x="djs-tooltip",T="."+x;function c(e,g){this._eventBus=e,this._canvas=g,this._ids=E,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=v(g.getContainer());var t=this;L.delegate.bind(this._tooltipRoot,T,"mousedown",function(o){o.stopPropagation()}),L.delegate.bind(this._tooltipRoot,T,"mouseover",function(o){t.trigger("mouseover",o)}),L.delegate.bind(this._tooltipRoot,T,"mouseout",function(o){t.trigger("mouseout",o)}),this._init()}c.$inject=["eventBus","canvas"],c.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var g=this._ids.next();return e=(0,h.assign)({},this._tooltipDefaults,e,{id:g}),this._addTooltip(e),e.timeout&&this.setTimeout(e),g},c.prototype.trigger=function(e,g){var t=g.delegateTarget||g.target,o=this.get((0,L.attr)(t,"data-tooltip-id"));!o||(e==="mouseover"&&o.timeout&&this.clearTimeout(o),e==="mouseout"&&o.timeout&&(o.timeout=1e3,this.setTimeout(o)))},c.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]},c.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var g=e.removeTimer;g&&(clearTimeout(g),e.removeTimer=null)}},c.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var g=this;e.removeTimer=setTimeout(function(){g.remove(e)},e.timeout)}},c.prototype.remove=function(e){var g=this.get(e);g&&((0,L.remove)(g.html),(0,L.remove)(g.htmlContainer),delete g.htmlContainer,delete this._tooltips[g.id])},c.prototype.show=function(){p(this._tooltipRoot)},c.prototype.hide=function(){p(this._tooltipRoot,!1)},c.prototype._updateRoot=function(e){var g=e.scale||1,t=e.scale||1,o="matrix("+g+",0,0,"+t+","+-1*e.x*g+","+-1*e.y*t+")";this._tooltipRoot.style.transform=o,this._tooltipRoot.style["-ms-transform"]=o},c.prototype._addTooltip=function(e){var g=e.id,t=e.html,o,r=this._tooltipRoot;t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),(0,h.isString)(t)&&(t=(0,L.domify)(t)),o=(0,L.domify)('<div data-tooltip-id="'+g+'" class="'+x+'" style="position: absolute">'),o.appendChild(t),e.type&&(0,L.classes)(o).add("djs-tooltip-"+e.type),e.className&&(0,L.classes)(o).add(e.className),e.htmlContainer=o,r.appendChild(o),this._tooltips[g]=e,this._updateTooltip(e)},c.prototype._updateTooltip=function(e){var g=e.position,t=e.htmlContainer;O(t,g.x,g.y)},c.prototype._updateTooltipVisibilty=function(e){(0,h.forEach)(this._tooltips,function(g){var t=g.show,o=g.htmlContainer,r=!0;t&&((t.minZoom>e.scale||t.maxZoom<e.scale)&&(r=!1),p(o,r))})},c.prototype._init=function(){var e=this;function g(t){e._updateRoot(t),e._updateTooltipVisibilty(t),e.show()}this._eventBus.on("canvas.viewbox.changing",function(t){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(t){g(t.viewbox)})};const a={__init__:["tooltips"],tooltips:["type",c]}},279:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(86463);function L(){}L.prototype.layoutConnection=function(d,E){return E=E||{},[E.connectionStart||(0,h.wS)(E.source||d.source),E.connectionEnd||(0,h.wS)(E.target||d.target)]}},70734:($,H,u)=>{u.d(H,{Z:()=>v});var h=u(83612),L=u.n(h),d=u(86463);function E(O){return(0,h.assign)({original:O.point.original||O.point},O.actual)}function v(O,p){this._elementRegistry=O,this._graphicsFactory=p}v.$inject=["elementRegistry","graphicsFactory"],v.prototype.getCroppedWaypoints=function(O,p,x){p=p||O.source,x=x||O.target;var T=this.getDockingPoint(O,p,!0),c=this.getDockingPoint(O,x),a=O.waypoints.slice(T.idx+1,c.idx);return a.unshift(E(T)),a.push(E(c)),a},v.prototype.getDockingPoint=function(O,p,x){var T=O.waypoints,c,a,e;return c=x?0:T.length-1,a=T[c],e=this._getIntersection(p,O,x),{point:a,actual:e||a,idx:c}},v.prototype._getIntersection=function(O,p,x){var T=this._getShapePath(O),c=this._getConnectionPath(p);return(0,d.Hz)(T,c,x)},v.prototype._getConnectionPath=function(O){return this._graphicsFactory.getConnectionPath(O)},v.prototype._getShapePath=function(O){return this._graphicsFactory.getShapePath(O)},v.prototype._getGfx=function(O){return this._elementRegistry.getGraphics(O)}},83962:($,H,u)=>{u.d(H,{Ue:()=>m,XY:()=>e,fC:()=>t});var h=u(83612),L=u.n(h),d=u(59879),E=u.n(d),v=u(19891),O=u.n(v),p=new(O())({name:"children",enumerable:!0,collection:!0},{name:"parent"}),x=new(O())({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),T=new(O())({name:"attachers",collection:!0},{name:"host"}),c=new(O())({name:"outgoing",collection:!0},{name:"source"}),a=new(O())({name:"incoming",collection:!0},{name:"target"});function e(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(n){var l=this.label,_=this.labels;!n&&l?_.remove(l):_.add(n,0)}}),p.bind(this,"parent"),x.bind(this,"labels"),c.bind(this,"outgoing"),a.bind(this,"incoming")}function g(){e.call(this),p.bind(this,"children"),T.bind(this,"host"),T.bind(this,"attachers")}E()(g,e);function t(){g.call(this)}E()(t,g);function o(){g.call(this),x.bind(this,"labelTarget")}E()(o,g);function r(){e.call(this),c.bind(this,"source"),a.bind(this,"target")}E()(r,e);var y={connection:r,shape:g,label:o,root:t};function m(n,l){var _=y[n];if(!_)throw new Error("unknown type: <"+n+">");return(0,h.assign)(new _,l)}},67859:($,H,u)=>{u.d(H,{Z:()=>T});var h=u(63253),L=u(19863),d=u(43273),E=u(24706),v=u(46534),O=15;function p(c,a){var e;c.on("element.mousedown",500,function(r){return o(r.originalEvent)});function g(r){var y=e.start,m=(0,v.jt)(r),n=(0,d.p)(m,y);if(!e.dragging&&x(n)>O&&(e.dragging=!0,(0,L.N)(c),(0,h.t8)("grab")),e.dragging){var l=e.last||e.start;n=(0,d.p)(m,l),a.scroll({dx:n.x,dy:n.y}),e.last=m}r.preventDefault()}function t(r){E.event.unbind(document,"mousemove",g),E.event.unbind(document,"mouseup",t),e=null,(0,h.zN)()}function o(r){if(!(0,E.closest)(r.target,".djs-draggable")&&!(r.button||r.ctrlKey||r.shiftKey||r.altKey))return e={start:(0,v.jt)(r)},E.event.bind(document,"mousemove",g),E.event.bind(document,"mouseup",t),!0}}p.$inject=["eventBus","canvas"];function x(c){return Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2))}const T={__init__:["moveCanvas"],moveCanvas:["type",p]}},52232:($,H,u)=>{u.d(H,{Z:()=>m});var h=u(85637),L=u(83612),d=u(24706),E=u(11524),v=u.n(E),O=u(46534),p=.2,x=4,T=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function c(){}function a(n,l){return l.get(n,!1)}function e(n){n.preventDefault(),n.stopPropagation(),typeof n.stopImmediatePropagation=="function"&&n.stopImmediatePropagation()}function g(n){function l(z){(0,L.forEach)(T,function(Y){d.event.bind(n,Y,e,!0)})}function _(z){setTimeout(function(){(0,L.forEach)(T,function(Y){d.event.unbind(n,Y,e,!0)})},500)}d.event.bind(n,"touchstart",l,!0),d.event.bind(n,"touchend",_,!0),d.event.bind(n,"touchcancel",_,!0);var I=new(v()).Manager(n,{inputClass:v().TouchInput,recognizers:[]}),D=new(v()).Tap,b=new(v()).Pan({threshold:10}),w=new(v()).Press,U=new(v()).Pinch,N=new(v()).Tap({event:"doubletap",taps:2});return U.requireFailure(b),U.requireFailure(w),I.add([b,w,U,N,D]),I.reset=function(z){var Y=this.recognizers,Z=this.session;Z.stopped||(I.stop(z),setTimeout(function(){var F,B;for(F=0;B=Y[F];F++)B.reset(),B.state=8;Z.curRecognizer=null},0))},I.on("hammer.input",function(z){z.srcEvent.defaultPrevented&&I.reset(!0)}),I}function t(n,l,_,I,D){var b=a("dragging",n),w=a("move",n),U=a("contextPad",n),N=a("palette",n),z;function Y(B){return function(P){D.fire(B,P)}}function Z(B){var P=(0,d.closest)(B,"svg, .djs-element",!0);return P}function F(B){z=g(B),z.on("doubletap",Y("element.dblclick")),z.on("tap",Y("element.click"));function P(R){var f=0,C=0;function A(G){var V=G.deltaX-f,Q=G.deltaY-C;l.scroll({dx:V,dy:Q}),f=G.deltaX,C=G.deltaY}function W(G){z.off("panmove",A),z.off("panend",W),z.off("pancancel",W)}z.on("panmove",A),z.on("panend",W),z.on("pancancel",W)}function i(R){var f=Z(R.target),C=f&&I.get(f);if(w&&l.getRootElement()!==C)return w.start(R,C,!0);P(R)}function s(R){var f=l.zoom(),C=R.center;function A(G){var V=1-(1-G.scale)/1.5,Q=Math.max(p,Math.min(x,V*f));l.zoom(Q,C),e(G)}function W(G){z.off("pinchmove",A),z.off("pinchend",W),z.off("pinchcancel",W),z.reset(!0)}z.on("pinchmove",A),z.on("pinchend",W),z.on("pinchcancel",W)}z.on("panstart",i),z.on("press",i),z.on("pinchstart",s)}b&&_.on("drag.move",function(B){var P=B.originalEvent;if(!(!P||P instanceof MouseEvent)){var i=(0,O.jt)(P),s=document.elementFromPoint(i.x,i.y),R=Z(s),f=R&&I.get(R);f!==B.hover&&(B.hover&&b.out(B),f&&(b.hover({element:f,gfx:R}),B.hover=f,B.hoverGfx=R))}}),U&&_.on("contextPad.create",function(B){var P=B.pad.html,i=g(P);i.on("panstart",function(s){U.trigger("dragstart",s,!0)}),i.on("press",function(s){U.trigger("dragstart",s,!0)}),i.on("tap",function(s){U.trigger("click",s)})}),N&&_.on("palette.create",function(B){var P=B.container,i=g(P);i.on("panstart",function(s){N.trigger("dragstart",s,!0)}),i.on("press",function(s){N.trigger("dragstart",s,!0)}),i.on("tap",function(s){N.trigger("click",s)})}),_.on("canvas.init",function(B){F(B.svg)})}t.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var o=u(21537);function r(n,l){var _=this;l.on("canvas.init",function(I){_.addBBoxMarker(I.svg)})}r.$inject=["canvas","eventBus"],r.prototype.addBBoxMarker=function(n){var l={fill:"none",class:"outer-bound-marker"},_=(0,o.Ue)("rect");(0,o.Lj)(_,{x:-1e4,y:1e4,width:10,height:10}),(0,o.Lj)(_,l),(0,o.R3)(n,_);var I=(0,o.Ue)("rect");(0,o.Lj)(I,{x:1e4,y:1e4,width:10,height:10}),(0,o.Lj)(I,l),(0,o.R3)(n,I)};const m={__depends__:[{__depends__:[h.Z],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",t],touchFix:["type",r]}]}},89851:($,H,u)=>{u.d(H,{Z:()=>e});var h=u(24706),L=u.n(h),d=u(25128),E=u(26001),v=u(83612),O=u.n(v),p=Math.sign||function(g){return g>=0?1:-1},x={min:.2,max:4},T=10,c=.1,a=.75;function e(g,t,o){g=g||{},this._enabled=!1,this._canvas=o,this._container=o._container,this._handleWheel=(0,v.bind)(this._handleWheel,this),this._totalDelta=0,this._scale=g.scale||a;var r=this;t.on("canvas.init",function(y){r._init(g.enabled!==!1)})}e.$inject=["config.zoomScroll","eventBus","canvas"],e.prototype.scroll=function(t){this._canvas.scroll(t)},e.prototype.reset=function(){this._canvas.zoom("fit-viewport")},e.prototype.zoom=function(t,o){var r=(0,d.K)(x,T*2);this._totalDelta+=t,Math.abs(this._totalDelta)>c&&(this._zoom(t,o,r),this._totalDelta=0)},e.prototype._handleWheel=function(t){if(!(0,h.closest)(t.target,".djs-scrollable",!0)){var o=this._container;t.preventDefault();var r=t.ctrlKey,y=t.shiftKey,m=-1*this._scale,n;if(r?m*=t.deltaMode===0?.02:.32:m*=t.deltaMode===0?1:16,r){var l=o.getBoundingClientRect(),_={x:t.clientX-l.left,y:t.clientY-l.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*p(t.deltaY)*m,this.zoom(n,_)}else y?n={dx:m*t.deltaY,dy:0}:n={dx:m*t.deltaX,dy:m*t.deltaY},this.scroll(n)}},e.prototype.stepZoom=function(t,o){var r=(0,d.K)(x,T);this._zoom(t,o,r)},e.prototype._zoom=function(g,t,o){var r=this._canvas,y=g>0?1:-1,m=(0,E.m)(r.zoom()),n=Math.round(m/o)*o;n+=o*y;var l=Math.pow(10,n);r.zoom((0,d.T)(x,l),t)},e.prototype.toggle=function(t){var o=this._container,r=this._handleWheel,y=this._enabled;return typeof t>"u"&&(t=!y),y!==t&&h.event[t?"bind":"unbind"](o,"wheel",r,!1),this._enabled=t,t},e.prototype._init=function(g){this.toggle(g)}},25128:($,H,u)=>{u.d(H,{K:()=>L,T:()=>d});var h=u(26001);function L(E,v){var O=(0,h.m)(E.min),p=(0,h.m)(E.max),x=Math.abs(O)+Math.abs(p);return x/v}function d(E,v){return Math.max(E.min,Math.min(E.max,v))}},5206:($,H,u)=>{u.d(H,{Z:()=>L});var h=u(89851);const L={__init__:["zoomScroll"],zoomScroll:["type",h.Z]}},19863:($,H,u)=>{u.d(H,{N:()=>L});var h=5e3;function L(d,E){E=E||"element.click";function v(){return!1}return d.once(E,h,v),function(){d.off(E,v)}}},63253:($,H,u)=>{u.d(H,{t8:()=>E,zN:()=>v});var h=u(24706),L=u.n(h),d=/^djs-cursor-.*$/;function E(p){var x=(0,h.classes)(document.body);x.removeMatching(d),p&&x.add("djs-cursor-"+p)}function v(){E(null)}function O(p){var x=domClasses(document.body);return x.has("djs-cursor-"+p)}},46534:($,H,u)=>{u.d(H,{Ku:()=>L,UW:()=>d,jt:()=>E});function h(v){!v||typeof v.stopPropagation!="function"||v.stopPropagation()}function L(v){return v.originalEvent||v.srcEvent}function d(v,O){h(v,O),h(L(v),O)}function E(v){return v.pointers&&v.pointers.length&&(v=v.pointers[0]),v.touches&&v.touches.length&&(v=v.touches[0]),v?{x:v.clientX,y:v.clientY}:null}},50296:($,H,u)=>{u.d(H,{Z:()=>h});function h(L){this._counter=0,this._prefix=(L?L+"-":"")+Math.floor(Math.random()*1e9)+"-"}h.prototype.next=function(){return this._prefix+ ++this._counter}},26001:($,H,u)=>{u.d(H,{m:()=>h});function h(L){return Math.log(L)/Math.log(10)}},98827:($,H,u)=>{u.d(H,{RJ:()=>E,Dw:()=>v,Id:()=>d});var h=u(46534);function L(){return/mac/i.test(navigator.platform)}function d(O){return!((0,h.Ku)(O)||O).button}function E(O){var p=(0,h.Ku)(O)||O;return d(O)?L()?p.metaKey:p.ctrlKey:!1}function v(O){var p=(0,h.Ku)(O)||O;return d(O)&&p.shiftKey}},80352:($,H,u)=>{u.d(H,{r:()=>h});function h(L,d){if(typeof d!="function")throw new Error("removeFn iterator must be a function");if(!!L){for(var E;E=L[0];)d(E);return L}}},23583:($,H,u)=>{u.d(H,{Z:()=>t});var h=u(83612),L=u.n(h),d=u(21537),E=0,v={width:150,height:50};function O(r){var y=r.split("-");return{horizontal:y[0]||"center",vertical:y[1]||"top"}}function p(r){return(0,h.isObject)(r)?(0,h.assign)({top:0,left:0,right:0,bottom:0},r):{top:r,left:r,right:r,bottom:r}}function x(r,y){y.textContent=r;var m;try{var n,l=r==="";return y.textContent=l?"dummy":r,m=y.getBBox(),n={width:m.width+m.x*2,height:m.height},l&&(n.width=0),n}catch{return{width:0,height:0}}}function T(r,y,m){for(var n=r.shift(),l=n,_;;){if(_=x(l,m),_.width=l?_.width:0,l===" "||l===""||Math.round(_.width)<=Math.round(y)||l.length<2)return c(r,l,n,_);l=e(l,_.width,y)}}function c(r,y,m,n){if(y.length<m.length){var l=m.slice(y.length).trim();r.unshift(l)}return{width:n.width,height:n.height,text:y}}function a(r,y){var m=r.split(/(\s|-)/g),n,l=[],_=0;if(m.length>1)for(;n=m.shift();)if(n.length+_<y)l.push(n),_+=n.length;else{n==="-"&&l.pop();break}return l.join("")}function e(r,y,m){var n=Math.max(r.length*(m/y),1),l=a(r,n);return l||(l=r.slice(0,Math.max(Math.round(n-1),1))),l}function g(){var r=document.getElementById("helper-svg");return r||(r=(0,d.Ue)("svg"),(0,d.Lj)(r,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(r)),r}function t(r){this._config=(0,h.assign)({},{size:v,padding:E,style:{},align:"center-top"},r||{})}t.prototype.createText=function(r,y){return this.layoutText(r,y).element},t.prototype.getDimensions=function(r,y){return this.layoutText(r,y).dimensions},t.prototype.layoutText=function(r,y){var m=(0,h.assign)({},this._config.size,y.box),n=(0,h.assign)({},this._config.style,y.style),l=O(y.align||this._config.align),_=p(y.padding!==void 0?y.padding:this._config.padding),I=y.fitBox||!1,D=o(n),b=r.split(/\r?\n/g),w=[],U=m.width-_.left-_.right,N=(0,d.Ue)("text");(0,d.Lj)(N,{x:0,y:0}),(0,d.Lj)(N,n);var z=g();for((0,d.R3)(z,N);b.length;)w.push(T(b,U,N));l.vertical==="middle"&&(_.top=_.bottom=0);var Y=(0,h.reduce)(w,function(i,s,R){return i+(D||s.height)},0)+_.top+_.bottom,Z=(0,h.reduce)(w,function(i,s,R){return s.width>i?s.width:i},0),F=_.top;l.vertical==="middle"&&(F+=(m.height-Y)/2),F-=(D||w[0].height)/4;var B=(0,d.Ue)("text");(0,d.Lj)(B,n),(0,h.forEach)(w,function(i){var s;switch(F+=D||i.height,l.horizontal){case"left":s=_.left;break;case"right":s=(I?Z:U)-_.right-i.width;break;default:s=Math.max(((I?Z:U)-i.width)/2+_.left,0)}var R=(0,d.Ue)("tspan");(0,d.Lj)(R,{x:s,y:F}),R.textContent=i.text,(0,d.R3)(B,R)}),(0,d.Od)(N);var P={width:Z,height:Y};return{dimensions:P,element:B}};function o(r){if("fontSize"in r&&"lineHeight"in r)return r.lineHeight*parseInt(r.fontSize,10)}},8239:($,H,u)=>{u.d(H,{Z:()=>L});function h(d,E,v,O,p,x,T){try{var c=d[x](T),a=c.value}catch(e){v(e);return}c.done?E(a):Promise.resolve(a).then(O,p)}function L(d){return function(){var E=this,v=arguments;return new Promise(function(O,p){var x=d.apply(E,v);function T(a){h(x,O,p,T,c,"next",a)}function c(a){h(x,O,p,T,c,"throw",a)}T(void 0)})}}}}]);
