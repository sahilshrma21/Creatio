(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[5013,8239,5036,6118,7344,8160,1034,8056,1906,4501,1216,9256,9795,1006,7571,6025,9424,885,7709,3744],{55013:(A,C,n)=>{n.r(C),n.d(C,{AcademyHelpApiModule:()=>l,AcademyHelpLinkRequest:()=>v,AcademyHelpLinkRequestHandler:()=>x,AcademyService:()=>c});var d=n(74742),_=n(31134),r=n(75378),h=n(8239),p=n(33177),o=n(94450),m=n(49475),y=n(24709),u=n(21322),s=n(27049),i=n(8785);class c{get contextService(){return this._contextService===void 0&&(this._contextService=this._injector.get(m.CONTEXT_SERVICE_TOKEN,null)),this._contextService}constructor(e,t,a){this._modelGenerator=e,this._window=t,this._injector=a,this._schemaName="AcademyUrlData"}_createAcademyHelpUrlDataItem(e){return{configurationVersion:e.ConfigurationVersion,contextHelpCode:e.Code,contextHelpId:e.ContextHelpId,enableContextHelp:e.EnableContextHelp,lmsUrl:e.LMSUrl,productEdition:e.ProductEdition,useLmsDocumentation:e.UseLmsDocumentation}}_getSchemaColumns(){return["ContextHelpId","EnableContextHelp","Code","ProductEdition","ConfigurationVersion","UseLmsDocumentation","LMSUrl"]}_createDataSourceParameters(e){return[{type:r.ModelParameterType.Filter,value:this._getContextHelpCodeFilter(e)}]}_getContextHelpCodeFilter(e){return new r.CompareFilter(r.ComparisonType.Equal,new r.ColumnExpression({columnPath:"Code"}),new r.ParameterExpression({value:e}))}_getAcademyHelpUrlData(e){return this._modelGenerator.generateOne({type:"crt.EntityDataSource",config:{entitySchemaName:this._schemaName}},"").pipe((0,s.switchMap)(t=>t.load({attributes:this._getSchemaColumns(),parameters:e})),(0,s.map)(t=>t.length===1?this._createAcademyHelpUrlDataItem(t[0]):null))}_buildUrl(e){let t="#";return e&&(t=e.useLmsDocumentation?this._getLmsDocumentationUrl(e):i.String.empty),t}_getLmsDocumentationUrl(e){const t=[],a=e.productEdition;a&&t.push("product="+encodeURIComponent(a));const f=e.configurationVersion;f&&t.push("ver="+encodeURIComponent(f));const S=e.enableContextHelp,g=e.contextHelpId;return S&&g&&t.push("id="+encodeURIComponent(g)),`${e.lmsUrl}?${t.join("&")}`}getAcademyHelpUrl(e){if(e===i.String.empty)return(0,u.of)(i.String.empty);const t=this._createDataSourceParameters(e);return this._getAcademyHelpUrlData(t).pipe((0,s.map)(a=>a?this._buildUrl(a):i.String.empty))}openContextHelp(){const e=this.contextService;if(!e)throw new Error(`${m.CONTEXT_SERVICE_TOKEN.toString()} was not provided`);const t=e.getContextCode();this.getAcademyHelpUrl(t).subscribe(a=>{this._window.open(a)})}}c.\u0275fac=function(e){return new(e||c)(o.\u0275\u0275inject(y.ModelGenerator),o.\u0275\u0275inject(p.WINDOW_TOKEN),o.\u0275\u0275inject(o.Injector))},c.\u0275prov=o.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"});let v=class extends r.BaseRequest{};v=(0,d.__decorate)([(0,r.CrtRequest)({type:"crt.AcademyHelpLinkRequest"})],v);let x=class extends r.BaseRequestHandler{constructor(e,t){super(),this._window=e,this._academyHelpUrlService=t}_getAcademyHelpUrl(e){return this._academyHelpUrlService.getAcademyHelpUrl(e)}_openUrl(e){!e||this._window.open(e,"_blank")}handle(e){var t=this;return(0,h.Z)(function*(){const a=e.contextHelpCode;return a&&t._getAcademyHelpUrl(a).subscribe(f=>t._openUrl(f)),t.next?.handle(e)})()}};x=(0,d.__decorate)([(0,r.CrtRequestHandler)({type:"crt.AcademyHelpLinkRequestHandler",requestType:"crt.AcademyHelpLinkRequest"}),(0,d.__param)(0,(0,r.CrtInject)(p.WINDOW_TOKEN)),(0,d.__metadata)("design:paramtypes",[Window,c])],x);let l=class{};l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=o.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=o.\u0275\u0275defineInjector({imports:[_.CommonModule]}),l=(0,d.__decorate)([(0,r.CrtModule)({requestHandlers:[x]})],l),function(){(typeof ngJitMode>"u"||ngJitMode)&&o.\u0275\u0275setNgModuleScope(l,{imports:[_.CommonModule]})}()},8239:(A,C,n)=>{n.d(C,{Z:()=>_});function d(r,h,p,o,m,y,u){try{var s=r[y](u),i=s.value}catch(c){p(c);return}s.done?h(i):Promise.resolve(i).then(o,m)}function _(r){return function(){var h=this,p=arguments;return new Promise(function(o,m){var y=r.apply(h,p);function u(i){d(y,o,m,u,s,"next",i)}function s(i){d(y,o,m,u,s,"throw",i)}u(void 0)})}}}}]);
