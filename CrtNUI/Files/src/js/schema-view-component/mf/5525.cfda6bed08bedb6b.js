(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[5525,7819],{77819:(S,d,l)=>{l.r(d),l.d(d,{LocalStorageModule:()=>a,LocalStorageService:()=>n,\u0275a:()=>f});var s=l(94450),m=l.n(s),o=l(21322),w=l.n(o),p=l(27049),O=l.n(p);const f=new s.InjectionToken("LOCAL_STORAGE_SERVICE_CONFIG");class a{static forRoot(e={}){return{ngModule:a,providers:[{provide:f,useValue:e}]}}}a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=s.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=s.\u0275\u0275defineInjector({}),function(){(typeof ngDevMode>"u"||ngDevMode)&&s.\u0275setClassMetadata(a,[{type:s.NgModule}],null,null)}();const y="This function is deprecated.",u="LOCAL_STORAGE_NOT_SUPPORTED";class n{constructor(e={}){this.isSupported=!1,this.notifyOptions={setItem:!1,removeItem:!1},this.prefix="ls",this.storageType="localStorage",this.errors=new o.Subscriber,this.removeItems=new o.Subscriber,this.setItems=new o.Subscriber,this.warnings=new o.Subscriber;let{notifyOptions:t,prefix:r,storageType:h}=e;if(t!=null){let{setItem:i,removeItem:g}=t;this.setNotify(!!i,!!g)}r!=null&&this.setPrefix(r),h!=null&&this.setStorageType(h),this.errors$=new o.Observable(i=>this.errors=i).pipe((0,p.share)()),this.removeItems$=new o.Observable(i=>this.removeItems=i).pipe((0,p.share)()),this.setItems$=new o.Observable(i=>this.setItems=i).pipe((0,p.share)()),this.warnings$=new o.Observable(i=>this.warnings=i).pipe((0,p.share)()),this.isSupported=this.checkSupport()}add(e,t){return console&&console.warn&&(console.warn(y),console.warn("Use `LocalStorageService.set` instead.")),this.set(e,t)}clearAll(e){let t=this.prefix?new RegExp("^"+this.prefix):new RegExp(""),r=e?new RegExp(e):new RegExp("");if(!this.isSupported)return this.warnings.next(u),!1;let h=this.prefix.length;for(let i in this.webStorage)if(t.test(i)&&r.test(i.substr(h)))try{this.remove(i.substr(h))}catch(g){return this.errors.next(g.message),!1}return!0}deriveKey(e){return`${this.prefix}${e}`}get(e){if(!this.isSupported)return this.warnings.next(u),null;let t=this.webStorage?this.webStorage.getItem(this.deriveKey(e)):null;if(!t||t==="null")return null;try{return JSON.parse(t)}catch{return null}}getStorageType(){return this.storageType}keys(){if(!this.isSupported)return this.warnings.next(u),[];let e=this.prefix.length,t=[];for(let r in this.webStorage)if(r.substr(0,e)===this.prefix)try{t.push(r.substr(e))}catch(h){return this.errors.next(h.message),[]}return t}length(){let e=0,t=this.webStorage;for(let r=0;r<t.length;r++)t.key(r).indexOf(this.prefix)===0&&(e+=1);return e}remove(...e){let t=!0;return e.forEach(r=>{this.isSupported||(this.warnings.next(u),t=!1);try{this.webStorage.removeItem(this.deriveKey(r)),this.notifyOptions.removeItem&&this.removeItems.next({key:r,storageType:this.storageType})}catch(h){this.errors.next(h.message),t=!1}}),t}set(e,t){if(t===void 0?t=null:t=JSON.stringify(t),!this.isSupported)return this.warnings.next(u),!1;try{this.webStorage&&this.webStorage.setItem(this.deriveKey(e),t),this.notifyOptions.setItem&&this.setItems.next({key:e,newvalue:t,storageType:this.storageType})}catch(r){return this.errors.next(r.message),!1}return!0}checkSupport(){try{let e=this.storageType in window&&window[this.storageType]!==null;if(e){this.webStorage=window[this.storageType];let t=this.deriveKey(`__${Math.round(Math.random()*1e7)}`);this.webStorage.setItem(t,""),this.webStorage.removeItem(t)}return e}catch(e){return this.errors.next(e.message),!1}}setPrefix(e){this.prefix=e;const t=".";this.prefix&&!this.prefix.endsWith(t)&&(this.prefix=this.prefix?`${this.prefix}${t}`:"")}setStorageType(e){this.storageType=e}setNotify(e,t){e!=null&&(this.notifyOptions.setItem=e),t!=null&&(this.notifyOptions.removeItem=t)}}n.\u0275fac=function(e){return new(e||n)(s.\u0275\u0275inject(f,8))},n.\u0275prov=s.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n.ctorParameters=()=>[{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[f]}]}],n.ngInjectableDef=(0,s.defineInjectable)({factory:function(){return new n((0,s.inject)(f,8))},token:n,providedIn:"root"}),function(){(typeof ngDevMode>"u"||ngDevMode)&&s.\u0275setClassMetadata(n,[{type:s.Injectable,args:[{providedIn:"root"}]}],function(){return[{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[f]}]}]},null)}()}}]);
