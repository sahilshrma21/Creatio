(self.webpackChunkapp_studio_enterprise_omnichannel_messaging=self.webpackChunkapp_studio_enterprise_omnichannel_messaging||[]).push([[1088],{41088:(Xe,Q,E)=>{E.r(Q),E.d(Q,{DocInput:()=>F,HighlightStyle:()=>G,IndentContext:()=>X,LRLanguage:()=>w,Language:()=>k,LanguageDescription:()=>ne,LanguageSupport:()=>Ye,ParseContext:()=>I,StreamLanguage:()=>me,StringStream:()=>ge,TreeIndentContext:()=>Y,bidiIsolates:()=>zt,bracketMatching:()=>Bt,bracketMatchingHandle:()=>Je,codeFolding:()=>fe,continuedIndent:()=>ht,defaultHighlightStyle:()=>It,defineLanguageFacet:()=>H,delimitedIndent:()=>lt,ensureSyntaxTree:()=>y,flatIndent:()=>at,foldAll:()=>Oe,foldCode:()=>Ie,foldEffect:()=>U,foldGutter:()=>xt,foldInside:()=>ct,foldKeymap:()=>yt,foldNodeProp:()=>Ae,foldService:()=>Ce,foldState:()=>L,foldable:()=>W,foldedRanges:()=>gt,forceParsing:()=>v,getIndentUnit:()=>$,getIndentation:()=>oe,highlightingFor:()=>Ct,indentNodeProp:()=>xe,indentOnInput:()=>ut,indentRange:()=>et,indentService:()=>ie,indentString:()=>se,indentUnit:()=>re,language:()=>M,languageDataProp:()=>D,matchBrackets:()=>K,sublanguageProp:()=>b,syntaxHighlighting:()=>Pt,syntaxParserRunning:()=>N,syntaxTree:()=>g,syntaxTreeAvailable:()=>x,toggleFold:()=>bt,unfoldAll:()=>Me,unfoldCode:()=>Ee,unfoldEffect:()=>J});var d=E(82064),p=E(59292),u=E(63533),c=E(45133),Z=E(24069),V;const D=new d.md;function H(n){return p.Facet.define({combine:n?e=>e.concat(n):void 0})}const b=new d.md;class k{constructor(e,t,i=[],r=""){this.data=e,this.name=r,p.EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(p.EditorState.prototype,"tree",{get(){return g(this)}}),this.parser=t,this.extension=[M.of(this),p.EditorState.languageData.of((s,o,l)=>{let a=S(s,o,l),h=a.type.prop(D);if(!h)return[];let f=s.facet(h),m=a.type.prop(b);if(m){let P=a.resolve(o-a.from,l);for(let T of m)if(T.test(P,s)){let R=s.facet(T.facet);return T.type=="replace"?R:R.concat(f)}}return f})].concat(i)}isActiveAt(e,t,i=-1){return S(e,t,i).type.prop(D)==this.data}findRegions(e){let t=e.facet(M);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(D)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(d.md.mounted);if(l){if(l.tree.prop(D)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof d.mp&&r(h,s.positions[a]+o)}};return r(g(e),0),i}get allowsNesting(){return!0}}k.setState=p.StateEffect.define();function S(n,e,t){let i=n.facet(M),r=g(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,t,d.vj.ExcludeBuffers))s.type.isTop&&(r=s);return r}class w extends k{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=H(e.languageData);return new w(t,e.parser.configure({props:[D.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new w(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function g(n){let e=n.field(k.state,!1);return e?e.tree:d.mp.empty}function y(n,e,t=50){var i;let r=(i=n.field(k.state,!1))===null||i===void 0?void 0:i.context;if(!r)return null;let s=r.viewport;r.updateViewport({from:0,to:e});let o=r.isDone(e)||r.work(t,e)?r.tree:null;return r.updateViewport(s),o}function x(n,e=n.doc.length){var t;return((t=n.field(k.state,!1))===null||t===void 0?void 0:t.context.isDone(e))||!1}function v(n,e=n.viewport.to,t=100){let i=y(n.state,e,t);return i!=g(n.state)&&n.dispatch({}),!!i}function N(n){var e;return((e=n.plugin(ve))===null||e===void 0?void 0:e.isWorking())||!1}class F{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let A=null;class I{constructor(e,t,i=[],r,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new I(e,t,[],d.mp.empty,0,i,[],null)}startParse(){return this.parser.startParse(new F(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=d.mp.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(d.i9.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(d.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=A;A=this;try{return e()}finally{A=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=O(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,f,m,P)=>a.push({fromA:h,toA:f,fromB:m,toB:P})),i=d.i9.applyChanges(i,a),r=d.mp.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),m=e.mapPos(h.to,-1);f<m&&l.push({from:f,to:m})}}}return new I(this.parser,t,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=O(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends d._b{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=A;if(a){for(let h of r)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new d.mp(d.Jq.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return A}}function O(n,e,t){return d.i9.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class C{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new C(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=I.create(e.facet(M).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new C(i)}}k.state=p.StateField.define({create:C.init,update(n,e){for(let t of e.effects)if(t.is(k.setState))return t.value;return e.startState.facet(M)!=e.state.facet(M)?C.init(e.state):n.apply(e)}});let B=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(B=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const _=typeof navigator<"u"&&((V=navigator.scheduling)===null||V===void 0?void 0:V.isInputPending)?()=>navigator.scheduling.isInputPending():null,ve=u.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(k.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(k.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=B(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(k.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!_?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>_&&_()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:k.setState.of(new C(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>(0,u.logException)(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),M=p.Facet.define({combine(n){return n.length?n[0]:null},enables:n=>[k.state,ve,u.EditorView.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Ye{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class ne{constructor(e,t,i,r,s,o=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new ne(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let i=/\.([^.]+)$/.exec(t);if(i){for(let r of e)if(r.extensions.indexOf(i[1])>-1)return r}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(s=>s==t))return r;if(i)for(let r of e)for(let s of r.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return r}return null}}const ie=p.Facet.define(),re=p.Facet.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function $(n){let e=n.facet(re);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function se(n,e){let t="",i=n.tabSize,r=n.facet(re)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let s=0;s<e;s++)t+=r;return t}function oe(n,e){n instanceof p.EditorState&&(n=new X(n));for(let i of n.state.facet(ie)){let r=i(n,e);if(r!==void 0)return r}let t=g(n.state);return t.length>=e?tt(n,t,e):null}function et(n,e,t){let i=Object.create(null),r=new X(n,{overrideIndentation:o=>{var l;return(l=i[o])!==null&&l!==void 0?l:-1}}),s=[];for(let o=e;o<=t;){let l=n.doc.lineAt(o);o=l.to+1;let a=oe(r,l.from);if(a==null)continue;/\S/.test(l.text)||(a=0);let h=/^\s*/.exec(l.text)[0],f=se(n,a);h!=f&&(i[l.from]=a,s.push({from:l.from,to:l.from+h.length,insert:f}))}return n.changes(s)}class X{constructor(e,t={}){this.state=e,this.options=t,this.unit=$(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return(0,p.countColumn)(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const xe=new d.md;function tt(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Te(i,n,t)}function Te(n,e,t){for(let i=n;i;i=i.next){let r=it(i.node);if(r)return r(Y.create(e,t,i))}return 0}function nt(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function it(n){let e=n.type.prop(xe);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(d.md.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Pe(o,!0,1,void 0,s&&!nt(o)?r.from:void 0)}return n.parent==null?rt:null}function rt(){return 0}class Y extends X{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Y(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(st(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Te(this.context.next,this.base,this.pos)}}function st(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function ot(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function lt({closing:n,align:e=!0,units:t=1}){return i=>Pe(i,e,t,n)}function Pe(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==n.pos+o,a=e?ot(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const at=n=>n.baseIndent;function ht({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const ft=200;function ut(){return p.EditorState.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+ft)return n;let s=t.sliceString(r.from,i);if(!e.some(h=>h.test(s)))return n;let{state:o}=n,l=-1,a=[];for(let{head:h}of o.selection.ranges){let f=o.doc.lineAt(h);if(f.from==l)continue;l=f.from;let m=oe(o,f.from);if(m==null)continue;let P=/^\s*/.exec(f.text)[0],T=se(o,m);P!=T&&a.push({from:f.from,to:f.from+P.length,insert:T})}return a.length?[n,{changes:a,sequential:!0}]:n})}const Ce=p.Facet.define(),Ae=new d.md;function ct(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function dt(n,e,t){let i=g(n);if(i.length<t)return null;let r=i.resolveStack(t,1),s=null;for(let o=r;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let a=l.type.prop(Ae);if(a&&(l.to<i.length-50||i.length==n.doc.length||!pt(l))){let h=a(l,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function pt(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function W(n,e,t){for(let i of n.facet(Ce)){let r=i(n,e,t);if(r)return r}return dt(n,e,t)}function De(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const U=p.StateEffect.define({map:De}),J=p.StateEffect.define({map:De});function le(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const L=p.StateField.define({create(){return u.Decoration.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(U)&&!mt(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(he),r=i?u.Decoration.replace({widget:new St(i(e.state,t.value))}):Re;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(J)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,s)=>{r<i&&s>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return n},provide:n=>u.EditorView.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Re.range(i,r))}return u.Decoration.set(e,!0)}});function gt(n){return n.field(L,!1)||p.RangeSet.empty}function z(n,e,t){var i;let r=null;return(i=n.field(L,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function mt(n,e,t){let i=!1;return n.between(e,e,(r,s)=>{r==e&&s==t&&(i=!0)}),i}function ae(n,e){return n.field(L,!1)?e:e.concat(p.StateEffect.appendConfig.of(fe()))}const Ie=n=>{for(let e of le(n)){let t=W(n.state,e.from,e.to);if(t)return n.dispatch({effects:ae(n.state,[U.of(t),ee(n,t)])}),!0}return!1},Ee=n=>{if(!n.state.field(L,!1))return!1;let e=[];for(let t of le(n)){let i=z(n.state,t.from,t.to);i&&e.push(J.of(i),ee(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function ee(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return u.EditorView.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const Oe=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),s=W(e,r.from,r.to);s&&t.push(U.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return t.length&&n.dispatch({effects:ae(n.state,t)}),!!t.length},Me=n=>{let e=n.state.field(L,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(J.of({from:i,to:r}))}),n.dispatch({effects:t}),!0};function kt(n,e){for(let t=e;;){let i=W(n.state,t.from,t.to);if(i&&i.to>e.from)return i;if(!t.from)return null;t=n.lineBlockAt(t.from-1)}}const bt=n=>{let e=[];for(let t of le(n)){let i=z(n.state,t.from,t.to);if(i)e.push(J.of(i),ee(n,i,!1));else{let r=kt(n,t);r&&e.push(U.of(r),ee(n,r))}}return e.length>0&&n.dispatch({effects:ae(n.state,e)}),!!e.length},yt=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ie},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ee},{key:"Ctrl-Alt-[",run:Oe},{key:"Ctrl-Alt-]",run:Me}],wt={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},he=p.Facet.define({combine(n){return(0,p.combineConfig)(n,wt)}});function fe(n){let e=[L,Tt];return n&&e.push(he.of(n)),e}function Le(n,e){let{state:t}=n,i=t.facet(he),r=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),a=z(n.state,l.from,l.to);a&&n.dispatch({effects:J.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const Re=u.Decoration.replace({widget:new class extends u.WidgetType{toDOM(n){return Le(n,null)}}});class St extends u.WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Le(e,this.value)}}const vt={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ue extends u.GutterMarker{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function xt(n={}){let e=Object.assign(Object.assign({},vt),n),t=new ue(e,!0),i=new ue(e,!1),r=u.ViewPlugin.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(M)!=o.state.facet(M)||o.startState.field(L,!1)!=o.state.field(L,!1)||g(o.startState)!=g(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new p.RangeSetBuilder;for(let a of o.viewportLineBlocks){let h=z(o.state,a.from,a.to)?i:W(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[r,(0,u.gutter)({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||p.RangeSet.empty},initialSpacer(){return new ue(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=z(o.state,l.from,l.to);if(h)return o.dispatch({effects:J.of(h)}),!0;let f=W(o.state,l.from,l.to);return f?(o.dispatch({effects:U.of(f)}),!0):!1}})}),fe()]}const Tt=u.EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class G{constructor(e,t){this.specs=e;let i;function r(l){let a=Z.V.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof k?l=>l.prop(D)==o.data:o?l=>l==o:void 0,this.style=(0,c.QR)(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Z.V(i):null,this.themeType=t.themeType}static define(e,t){return new G(e,t||{})}}const ce=p.Facet.define(),Be=p.Facet.define({combine(n){return n.length?[n[0]]:null}});function te(n){let e=n.facet(ce);return e.length?e:n.facet(Be)}function Pt(n,e){let t=[Dt],i;return n instanceof G&&(n.module&&t.push(u.EditorView.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(Be.of(n)):i?t.push(ce.computeN([u.EditorView.darkTheme],r=>r.facet(u.EditorView.darkTheme)==(i=="dark")?[n]:[])):t.push(ce.of(n)),t}function Ct(n,e,t){let i=te(n),r=null;if(i){for(let s of i)if(!s.scope||t&&s.scope(t)){let o=s.style(e);o&&(r=r?r+" "+o:o)}}return r}class At{constructor(e){this.markCache=Object.create(null),this.tree=g(e.state),this.decorations=this.buildDeco(e,te(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=g(e.state),i=te(e.state),r=i!=te(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return u.Decoration.none;let i=new p.RangeSetBuilder;for(let{from:r,to:s}of e.visibleRanges)(0,c.bW)(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=u.Decoration.mark({class:a})))},r,s);return i.finish()}}const Dt=p.Prec.high(u.ViewPlugin.fromClass(At,{decorations:n=>n.decorations})),It=G.define([{tag:c.pJ.meta,color:"#404740"},{tag:c.pJ.link,textDecoration:"underline"},{tag:c.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:c.pJ.emphasis,fontStyle:"italic"},{tag:c.pJ.strong,fontWeight:"bold"},{tag:c.pJ.strikethrough,textDecoration:"line-through"},{tag:c.pJ.keyword,color:"#708"},{tag:[c.pJ.atom,c.pJ.bool,c.pJ.url,c.pJ.contentSeparator,c.pJ.labelName],color:"#219"},{tag:[c.pJ.literal,c.pJ.inserted],color:"#164"},{tag:[c.pJ.string,c.pJ.deleted],color:"#a11"},{tag:[c.pJ.regexp,c.pJ.escape,c.pJ.special(c.pJ.string)],color:"#e40"},{tag:c.pJ.definition(c.pJ.variableName),color:"#00f"},{tag:c.pJ.local(c.pJ.variableName),color:"#30a"},{tag:[c.pJ.typeName,c.pJ.namespace],color:"#085"},{tag:c.pJ.className,color:"#167"},{tag:[c.pJ.special(c.pJ.variableName),c.pJ.macroName],color:"#256"},{tag:c.pJ.definition(c.pJ.propertyName),color:"#00c"},{tag:c.pJ.comment,color:"#940"},{tag:c.pJ.invalid,color:"#f00"}]),Et=u.EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ne=1e4,Fe="()[]{}",_e=p.Facet.define({combine(n){return(0,p.combineConfig)(n,{afterCursor:!0,brackets:Fe,maxScanDistance:Ne,renderMatch:Lt})}}),Ot=u.Decoration.mark({class:"cm-matchingBracket"}),Mt=u.Decoration.mark({class:"cm-nonmatchingBracket"});function Lt(n){let e=[],t=n.matched?Ot:Mt;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Rt=[p.StateField.define({create(){return u.Decoration.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(_e);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=K(e.state,r.head,-1,i)||r.head>0&&K(e.state,r.head-1,1,i)||i.afterCursor&&(K(e.state,r.head,1,i)||r.head<e.state.doc.length&&K(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return u.Decoration.set(t,!0)},provide:n=>u.EditorView.decorations.from(n)}),Et];function Bt(n={}){return[_e.of(n),Rt]}const Je=new d.md;function de(n,e,t){let i=n.prop(e<0?d.md.openedBy:d.md.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function pe(n){let e=n.type.prop(Je);return e?e(n.node):n}function K(n,e,t,i={}){let r=i.maxScanDistance||Ne,s=i.brackets||Fe,o=g(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=de(a.type,t,s);if(h&&a.from<a.to){let f=pe(a);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return Nt(n,e,t,a,f,h,s)}}return Ft(n,e,t,o,l.type,r,s)}function Nt(n,e,t,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},h=0,f=l?.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(h==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let m=pe(f);return{start:a,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(de(f.type,t,o))h++;else if(de(f.type,-t,o)){if(h==0){let m=pe(f);return{start:a,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}h--}}while(t<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function Ft(n,e,t,i,r,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let P=0;!f.next().done&&P<=s;){let T=f.value;t<0&&(P+=T.length);let R=e+P*t;for(let j=t>0?0:T.length-1,Qt=t>0?T.length:-1;j!=Qt;j+=t){let Se=o.indexOf(T[j]);if(!(Se<0||i.resolveInner(R+j,1).type!=r))if(Se%2==0==t>0)m++;else{if(m==1)return{start:h,end:{from:R+j,to:R+j+1},matched:Se>>1==a>>1};m--}}t>0&&(P+=T.length)}return f.done?{start:h,matched:!1}:null}function Ve(n,e,t,i=0,r=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let s=r;for(let o=i;o<e;o++)n.charCodeAt(o)==9?s+=t-s%t:s++;return s}class ge{constructor(e,t,i,r){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ve(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Ve(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function _t(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||Jt,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||be}}function Jt(n){if(typeof n!="object")return n;let e={};for(let t in n){let i=n[t];e[t]=i instanceof Array?i.slice():i}return e}const We=new WeakMap;class me extends k{constructor(e){let t=H(e.languageData),i=_t(e),r,s=new class extends d._b{createParse(o,l,a){return new Wt(r,o,l,a)}};super(t,s,[ie.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=Ht(t),r=this,this.streamParser=i,this.stateAfter=new d.md({perNode:!0}),this.tokenTable=e.tokenTable?new Ge(i.tokenTable):jt}static define(e){return new me(e)}getIndent(e,t){let i=g(e.state),r=i.resolve(t);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=We.get(e.state),s!=null&&s<t-1e4&&(s=void 0));let l=ke(this,i,0,r.from,s??t),a,h;if(l?(h=l.state,a=l.pos+1):(h=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let m=e.state.doc.lineAt(a),P=Math.min(t,m.to);if(m.length){let T=o?o(m.from):-1,R=new ge(m.text,e.state.tabSize,e.unit,T<0?void 0:T);for(;R.pos<P-m.from;)je(this.streamParser.token,R,h)}else this.streamParser.blankLine(h,e.unit);if(P==t)break;a=m.to+1}let f=e.lineAt(t);return o&&s==null&&We.set(e.state,f.from),this.streamParser.indent(h,/^\s*(.*)/.exec(f.text)[1],e)}get allowsNesting(){return!1}}function ke(n,e,t,i,r){let s=t>=i&&t+e.length<=r&&e.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],h=l instanceof d.mp&&a<r&&ke(n,l,a,i,r);if(h)return h}return null}function Ue(n,e,t,i,r){if(r&&t<=0&&i>=e.length)return e;!r&&e.type==n.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<i&&l instanceof d.mp){if(!(a=Ue(n,l,t-o,i-o,r)))break;return r?new d.mp(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function Vt(n,e,t,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=t&&o>t&&ke(n,r.tree,0-r.offset,t,o),a;if(l&&(a=Ue(n,r.tree,t+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:n.streamParser.startState(i?$(i):4),tree:d.mp.empty}}class Wt{constructor(e,t,i,r){this.lang=e,this.input=t,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=I.get(),o=r[0].from,{state:l,tree:a}=Vt(e,i,o,s?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let h=0;h<a.children.length;h++)this.chunks.push(a.children[h]),this.chunkPos.push(a.positions[h]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState($(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=I.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(t=t.slice(0,s-(i-t.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);t+=l,i=o+l.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+t;if(i>0?r>s:r>=s)break;t+=this.ranges[++this.rangeIndex].from-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,t,i,r),s}parseLine(e){let{line:t,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new ge(t,e?e.state.tabSize:4,e?$(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=je(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=d.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ut,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new d.mp(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new d.mp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function je(n,e,t){e.start=e.pos;for(let i=0;i<10;i++){let r=n(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const be=Object.create(null),q=[d.Jq.none],Ut=new d.Lj(q),He=[],$e=Object.create(null),ze=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ze[n]=Ke(be,e);class Ge{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),ze)}resolve(e){return e?this.table[e]||(this.table[e]=Ke(this.extra,e)):0}}const jt=new Ge(be);function ye(n,e){He.indexOf(n)>-1||(He.push(n),console.warn(e))}function Ke(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let f=n[h]||c.pJ[h];f?typeof f=="function"?a.length?a=a.map(f):ye(h,`Modifier ${h} used at start of tag`):a.length?ye(h,`Tag ${h} used as modifier`):a=Array.isArray(f)?f:[f]:ye(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(l=>l.id),s=$e[r];if(s)return s.id;let o=$e[r]=d.Jq.define({id:q.length,name:i,props:[(0,c.Gv)({[i]:t})]});return q.push(o),o.id}function Ht(n){let e=d.Jq.define({id:q.length,name:"Document",props:[D.add(()=>n)],top:!0});return q.push(e),e}function qe(n){return n.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(n)}function Qe(n){for(let e=n.iter();!e.next().done;)if(qe(e.value))return!0;return!1}function $t(n){let e=!1;return n.iterChanges((t,i,r,s,o)=>{!e&&Qe(o)&&(e=!0)}),e}const we=p.Facet.define({combine:n=>n.some(e=>e)});function zt(n={}){let e=[Gt];return n.alwaysIsolate&&e.push(we.of(!0)),e}const Gt=u.ViewPlugin.fromClass(class{constructor(n){this.always=n.state.facet(we)||n.textDirection!=u.Direction.LTR||n.state.facet(u.EditorView.perLineTextDirection),this.hasRTL=!this.always&&Qe(n.state.doc),this.tree=g(n.state),this.decorations=this.always||this.hasRTL?Ze(n,this.tree,this.always):u.Decoration.none}update(n){let e=n.state.facet(we)||n.view.textDirection!=u.Direction.LTR||n.state.facet(u.EditorView.perLineTextDirection);if(!e&&!this.hasRTL&&$t(n.changes)&&(this.hasRTL=!0),!e&&!this.hasRTL)return;let t=g(n.state);(e!=this.always||t!=this.tree||n.docChanged||n.viewportChanged)&&(this.tree=t,this.always=e,this.decorations=Ze(n.view,t,e))}},{provide:n=>{function e(t){var i,r;return(r=(i=t.plugin(n))===null||i===void 0?void 0:i.decorations)!==null&&r!==void 0?r:u.Decoration.none}return[u.EditorView.outerDecorations.of(e),p.Prec.lowest(u.EditorView.bidiIsolatedRanges.of(e))]}});function Ze(n,e,t){let i=new p.RangeSetBuilder,r=n.visibleRanges;t||(r=Kt(r,n.state.doc));for(let{from:s,to:o}of r)e.iterate({enter:l=>{let a=l.type.prop(d.md.isolate);a&&i.add(l.from,l.to,qt[a])},from:s,to:o});return i.finish()}function Kt(n,e){let t=e.iter(),i=0,r=[],s=null;for(let{from:o,to:l}of n)for(o!=i&&(i<o&&t.next(o-i),i=o);;){let a=i,h=i+t.value.length;if(!t.lineBreak&&qe(t.value)&&(s&&s.to>a-10?s.to=Math.min(l,h):r.push(s={from:a,to:Math.min(l,h)})),i>=l)break;i=h,t.next()}return r}const qt={rtl:u.Decoration.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:u.Direction.RTL}),ltr:u.Decoration.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:u.Direction.LTR}),auto:u.Decoration.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}},24069:(Xe,Q,E)=>{E.d(Q,{V:()=>Z});const d="\u037C",p=typeof Symbol>"u"?"__"+d:Symbol.for(d),u=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Z{constructor(b,k){this.rules=[];let{finish:S}=k||{};function w(y){return/^@/.test(y)?[y]:y.split(/,\s*/)}function g(y,x,v,N){let F=[],A=/^@(\w+)\b/.exec(y[0]),I=A&&A[1]=="keyframes";if(A&&x==null)return v.push(y[0]+";");for(let O in x){let C=x[O];if(/&/.test(O))g(O.split(/,\s*/).map(B=>y.map(_=>B.replace(/&/,_))).reduce((B,_)=>B.concat(_)),C,v);else if(C&&typeof C=="object"){if(!A)throw new RangeError("The value of a property ("+O+") should be a primitive value.");g(w(O),C,F,I)}else C!=null&&F.push(O.replace(/_.*/,"").replace(/[A-Z]/g,B=>"-"+B.toLowerCase())+": "+C+";")}(F.length||I)&&v.push((S&&!A&&!N?y.map(S):y).join(", ")+" {"+F.join(" ")+"}")}for(let y in b)g(w(y),b[y],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let b=c[p]||1;return c[p]=b+1,d+b.toString(36)}static mount(b,k,S){let w=b[u],g=S&&S.nonce;w?g&&w.setNonce(g):w=new D(b,g),w.mount(Array.isArray(k)?k:[k],b)}}let V=new Map;class D{constructor(b,k){let S=b.ownerDocument||b,w=S.defaultView;if(!b.head&&b.adoptedStyleSheets&&w.CSSStyleSheet){let g=V.get(S);if(g)return b[u]=g;this.sheet=new w.CSSStyleSheet,V.set(S,this)}else this.styleTag=S.createElement("style"),k&&this.styleTag.setAttribute("nonce",k);this.modules=[],b[u]=this}mount(b,k){let S=this.sheet,w=0,g=0;for(let y=0;y<b.length;y++){let x=b[y],v=this.modules.indexOf(x);if(v<g&&v>-1&&(this.modules.splice(v,1),g--,v=-1),v==-1){if(this.modules.splice(g++,0,x),S)for(let N=0;N<x.rules.length;N++)S.insertRule(x.rules[N],w++)}else{for(;g<v;)w+=this.modules[g++].rules.length;w+=x.rules.length,g++}}if(S)k.adoptedStyleSheets.indexOf(this.sheet)<0&&(k.adoptedStyleSheets=[this.sheet,...k.adoptedStyleSheets]);else{let y="";for(let v=0;v<this.modules.length;v++)y+=this.modules[v].getRules()+`
`;this.styleTag.textContent=y;let x=k.head||k;this.styleTag.parentNode!=x&&x.insertBefore(this.styleTag,x.firstChild)}}setNonce(b){this.styleTag&&this.styleTag.getAttribute("nonce")!=b&&this.styleTag.setAttribute("nonce",b)}}}}]);
