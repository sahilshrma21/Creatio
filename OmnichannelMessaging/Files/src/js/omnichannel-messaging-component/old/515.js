"use strict";(self.webpackChunkapp_studio_enterprise_omnichannel_messaging=self.webpackChunkapp_studio_enterprise_omnichannel_messaging||[]).push([[515],{46515:(A,E,e)=>{e.r(E),e.d(E,{CodemirrorComponent:()=>h,CodemirrorModule:()=>p,LineSeparator:()=>f});var i=e(36599),F=e(20092),y=e(80530),o=e(98097),s=e(90730),n=e(75902),m=e(65366),l=e(19205),P=e(19204),v=e(17781),V=e(71610),S=e(96003),O=e(4546),g=e(2149),Y=e(51320),u=e(41088),c=e(32800),L=e(95828);class r{static lintCode(t,d,C={}){const M=[];return d===n.Y.Javascript?e.e(296).then(e.bind(e,43296)).then(({Linter:w})=>(0,v.d)(new w,C)(t)):([n.Y.Json,n.Y.Less,n.Y.Css,n.Y.Xml].includes(d)&&r.supportedLanguages[d].parser.parse(t.state.doc.toString()).iterate({enter:({type:Q,from:x,to:z,...R})=>{Q.isError&&M.push({from:x,to:z,severity:"warning",message:"Uncompleted condition"})}}),Promise.resolve(M))}}r.supportedLanguages={[n.Y.Markdown]:{lang:O.JH,parser:O.eg.parser},[n.Y.Javascript]:{lang:v.eJ,parser:v.Lz.parser},[n.Y.Less]:{lang:S.d9,parser:S.LN.parser},[n.Y.Css]:{lang:S.d9,parser:P.t$.parser},[n.Y.Sql]:{lang:g.i6,parser:g.Gz.language.parser},[n.Y.PgSql]:{lang:g.i6,parser:g.Gz.language.parser},[n.Y.SqlServer]:{lang:g.i6,parser:g.Gz.language.parser},[n.Y.Json]:{lang:V.AV,parser:V.bA.parser},[n.Y.Csharp]:{lang:L.lh,parser:L.vY.parser},[n.Y.Xml]:{lang:Y.Ls,parser:Y.Jl.parser},[n.Y.Http]:{lang:Y.Ls,parser:O.eg.parser}},r.onChangeExtension=a=>s.tk.updateListener.of(t=>{if(!t.docChanged)return;const d=t.state.doc.toString();a(d)}),r.defaultExtensions=()=>[(0,u.nF)(u.R_,{fallback:!0}),(0,y.Q2)(),(0,s.AE)(),(0,s.HQ)(),(0,s.ZO)(),(0,c.sW)(),(0,m.ys)(),(0,u.n$)(),(0,m.vQ)(),(0,u.mi)(),(0,s.Eu)(),(0,s.Zs)(),s.tk.lineWrapping,(0,l.m8)()],r.defaultKeyMaps=()=>[...y.Fv,...c.Lp,...l.f$,...l.wQ,...m.B1,l.oc,{key:"Alt-g",run:c.zo},{key:"Ctrl-Shift-f",run:c.K9},{key:"Ctrl-Shift-r",run:c.ko},{key:"Ctrl-Shift-z",run:l.KX},{key:"Ctrl-y",run:l.YE},{key:"Ctrl-Space",run:m.WA}];const J=["host"];var f,a;(a=f||(f={})).CR="\r",a.LF="\n",a.CRLF="\r\n";class h{constructor(){this._value="",this._language=n.Y.Javascript,this._languageCompartment=new o.F6,this._editable=!0,this._editableCompartment=new o.F6,this._readOnly=!1,this._readonlyCompartment=new o.F6,this._lineSeparator=f.LF,this._lineSeparatorCompartment=new o.F6,this.keyBinding=[],this.languageOptions={},this.valueChanged=new i.EventEmitter,this.onChange=t=>{},this.onTouched=()=>{}}set value(t){"string"==typeof t&&this._editorView?.state.doc.toString()!==t&&(this._value=t,this._editorView?.dispatch({changes:{from:0,to:this._editorView.state.doc.length,insert:this._value}}))}get value(){return this._value}get lineNumbers(){return this._editorView.state.doc.lines}set editable(t){this._editable!==t&&(this._editable=t,this._editorView?.dispatch({effects:this._editableCompartment.reconfigure(s.tk.editable.of(t))}))}set readOnly(t){this._readOnly!==t&&(this._readOnly=t,this._editorView?.dispatch({effects:this._readonlyCompartment.reconfigure(o.yy.readOnly.of(t))}))}set language(t){if(t||(t=n.Y.Markdown),this._language!==t){if(!r.supportedLanguages[t])throw new Error(`Unsupported language: ${t}`);this._language=t,this._editorView?.dispatch({effects:this._languageCompartment.reconfigure(r.supportedLanguages[t].lang())})}}set lineSeparator(t){this._lineSeparator!==t&&(this._lineSeparator=t,this._editorView?.dispatch({effects:this._lineSeparatorCompartment.reconfigure(o.yy.lineSeparator.of(this._lineSeparator))}))}_onEditorValueChanged(t){this.value=t,this.onChange(t),this.valueChanged.emit(t),this.onTouched()}_initEditorView(){return new s.tk({doc:this.value,extensions:[this._lineSeparatorCompartment.of(o.yy.lineSeparator.of(this._lineSeparator)),this._languageCompartment.of(r.supportedLanguages[this._language].lang()),this._editableCompartment.of(s.tk.editable.of(this._editable)),this._readonlyCompartment.of(o.yy.readOnly.of(this._readOnly)),(0,y.ir)(t=>r.lintCode(t,this._language,this.languageOptions)),r.onChangeExtension(this._onEditorValueChanged.bind(this)),...r.defaultExtensions(),s.$f.of([...r.defaultKeyMaps(),...this.keyBinding])],parent:this.hostContainer?.nativeElement})}ngAfterViewInit(){this._editorView=this._initEditorView()}ngOnDestroy(){this._editorView.destroy()}writeValue(t){"string"==typeof t&&(this.value=t.toString())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=i.\u0275\u0275defineComponent({type:h,selectors:[["ts-codemirror"]],viewQuery:function(t,d){if(1&t&&i.\u0275\u0275viewQuery(J,5),2&t){let C;i.\u0275\u0275queryRefresh(C=i.\u0275\u0275loadQuery())&&(d.hostContainer=C.first)}},inputs:{value:"value",editable:"editable",readOnly:"readOnly",language:"language",lineSeparator:"lineSeparator",keyBinding:"keyBinding",languageOptions:"languageOptions"},outputs:{valueChanged:"valueChanged"},features:[i.\u0275\u0275ProvidersFeature([{provide:F.JU,useExisting:(0,i.forwardRef)(()=>h),multi:!0}])],decls:3,vars:0,consts:[[1,"ts-codemirror"],[1,"ts-codemirror-container"],["host",""]],template:function(t,d){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"div",1,2),i.\u0275\u0275elementEnd())},styles:[".ts-codemirror[_ngcontent-%COMP%]{position:relative;background-color:#fff;height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor .cm-specialChar{display:none}"],changeDetection:0});class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=i.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=i.\u0275\u0275defineInjector({})}}]);