(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[4715],{87197:(h,ge,p)=>{var g={"./default-file-icon.svg":89743,"./file-excel.svg":22249,"./file-image.svg":8379,"./file-pdf.svg":96870,"./file-powerpoint.svg":77374,"./file-word.svg":74154};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=87197},20695:(h,ge,p)=>{var g={"./default-file-icon.svg":51868,"./file-excel.svg":79143,"./file-image.svg":68523,"./file-pdf.svg":76655,"./file-powerpoint.svg":13117,"./file-word.svg":1850,"./large/default-file-icon.svg":89743,"./large/file-excel.svg":22249,"./large/file-image.svg":8379,"./large/file-pdf.svg":96870,"./large/file-powerpoint.svg":77374,"./large/file-word.svg":74154};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=20695},20470:(h,ge,p)=>{var g={"./flex-column-icon.svg":80805,"./flex-row-icon.svg":15335};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=20470},83028:(h,ge,p)=>{var g={"./grid-area-1-icon.svg":85482,"./grid-column-1-icon.svg":96153,"./grid-column-2-icon.svg":38926,"./grid-column-3-icon.svg":73953,"./grid-column-4-icon.svg":39079};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=83028},38280:(h,ge,p)=>{var g={"./datetime-picker-calendar-icon.svg":54422};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=38280},86634:(h,ge,p)=>{var g={"./datetime-picker-toggle-date-icon.svg":21695,"./datetime-picker-toggle-time-icon.svg":89854};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=86634},71477:(h,ge,p)=>{var g={"./error-icon.svg":58796,"./warning-icon.svg":11342};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=71477},88395:(h,ge,p)=>{var g={"./collapse.svg":67525};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=88395},46377:(h,ge,p)=>{var g={"./arrow-down.svg":36141,"./full-screen-close.svg":15894,"./full-screen-open.svg":30360,"./info.svg":10761,"./settings.svg":22574,"./show-more-icon.svg":80507};function s(y){var x=c(y);return p(x)}function c(y){if(!p.o(g,y)){var x=new Error("Cannot find module '"+y+"'");throw x.code="MODULE_NOT_FOUND",x}return g[y]}s.keys=function(){return Object.keys(g)},s.resolve=c,h.exports=s,s.id=46377},34715:(h,ge,p)=>{p.r(ge),p.d(ge,{ActionsMenuComponent:()=>Ze,ActionsMenuDivider:()=>Eo,AdministratedObject:()=>gd,AlmPagesContainerComponent:()=>Qn,AlmPagesContainerModule:()=>Yn,AriaRequiredDirective:()=>ia,Attachment:()=>Hc,AutocompleteComponent:()=>rt,AutocompleteValidators:()=>bi,BaseActionsMenu:()=>En,BaseContainerComponent:()=>Y,BaseCustomComponent:()=>Qa,BaseEditPageComponent:()=>Ra,BaseEditableTableCellComponent:()=>ft,BaseFilter:()=>No,BaseLegacySectionComponent:()=>fr,BaseLegacyTableDetailComponent:()=>fa,BaseLookupService:()=>Wa,BaseMetaItemPropertiesService:()=>Si,BasePageComponent:()=>pn,BaseSectionComponent:()=>mn,BaseSectionProfileData:()=>hr,BaseTableCellComponent:()=>he,BaseTableColumnDataSchema:()=>vo,BaseTableDetailComponent:()=>ha,BlinkTabService:()=>dn,BooleanFilter:()=>pi,BooleanMetaItemPropertiesPageComponent:()=>nn,ButtonComponent:()=>Zt,CONTAINER_BASE_COLORS:()=>Ao,CONTAINER_COLOR_TRANSPARENT:()=>Cc,CONTAINER_DEFAULT_VALUES:()=>Fo,CONTAINER_PADDING_SIZE:()=>Ho,CONTAINER_VISIBLE_PADDING_PX:()=>Fd,CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR:()=>ii,CdkModule:()=>pt,ChangeBroadcastService:()=>Ct,Channel:()=>fi,ChannelEntityConverter:()=>zt,ChannelService:()=>tt,ChannelType:()=>Ke,ChatEntityConverter:()=>Rt,ChatMessage:()=>Gc,ChatOperator:()=>hi,ChatOperatorStatus:()=>Po,ChatQueueOperator:()=>Qc,ChatQueueOperatorEntityConverter:()=>jt,ChatQueueOperatorService:()=>ea,ChatStatus:()=>so,CheckOperationPermissionPipeModule:()=>$n,CheckboxColumnDataSchema:()=>ps,CheckboxComponent:()=>Wt,CheckboxTableCellComponent:()=>Qe,ClickOutsideDirective:()=>oa,CodeEditorComponent:()=>wn,CodeEditorLanguage:()=>Q,CodeEditorMockModule:()=>kn,CodeEditorModule:()=>Dn,CompactActionsMenuComponent:()=>Nn,ComponentListComponent:()=>ie,Contact:()=>Vo,ContactPhotoComponent:()=>Vt,ContactPhotoModule:()=>Xe,ContainsStringFilter:()=>za,ControlType:()=>N,CreateQueueAgentHandler:()=>go,CreateQueueAgentRequest:()=>Nd,CrtChatHistoryComponent:()=>ta,CrtChatMessagesComponent:()=>Ie,CrtHorizontalResizingModule:()=>on,CrtOmnichatModule:()=>ot,CultureApiService:()=>bn,CultureDialogModel:()=>Al,CultureLanguageModel:()=>ai,CultureModel:()=>ni,CustomComponent:()=>sa,CustomOverlayContainer:()=>Ca,DATA_SOURCE_STRUCTURE_EXPLORER_DATA_PROVIDER_NAME:()=>Di,DEFAULT_REST_ERROR_HANDLER:()=>ur,DEFAULT_REST_HANDLER:()=>gr,DataItemMarkerDirective:()=>_e,DataItemMarkerModule:()=>te,DataSourceStructureExplorerDataProviderService:()=>rn,DataSourceStructureExplorerModule:()=>ua,DataSourceStructureExplorerService:()=>pa,DatePickerFilterComponent:()=>Fn,DatePickerFilterModule:()=>Pn,DateRange:()=>Xo,DateRangeComponent:()=>un,DateTimeMetaItemPropertiesPageComponent:()=>tn,DatetimePickerModule:()=>ae,DefaultRestErrorHandler:()=>_t,DefaultRestHandler:()=>cn,DeleteButtonTableCellComponent:()=>St,DynamicControlModel:()=>zr,DynamicControlType:()=>xa,DynamicFieldsService:()=>st,DynamicFormComponent:()=>Kt,DynamicFormGridComponent:()=>It,DynamicFormGridModel:()=>So,DynamicFormModule:()=>Ge,DynamicFormUtils:()=>se,EntityBackwardReferenceService:()=>ma,EntityColumnValueInputModule:()=>Se,EntityDataViewComponent:()=>Nt,EntityDataViewLoaderService:()=>Rn,EntityDataViewModule:()=>oe,EntityOperation:()=>vd,EntityOperationGrantee:()=>yd,EntitySchemaColumnRight:()=>hd,EntitySchemaColumnRightLevel:()=>jo,EntitySchemaColumnRights:()=>fd,EntitySchemaOperationsRights:()=>Cd,EntitySchemaRecordDefRight:()=>_d,EntitySchemaRecordOperationRightLevel:()=>Na,EntityTableDataSchemaBuilder:()=>jn,ErrorTypeIconColumnSchema:()=>cs,ErrorTypeIconTableCellComponent:()=>Tt,ExpansionButtonModule:()=>Je,FIELD_CONFIG:()=>Go,FILE_ICONS:()=>vi,FLEX_DEFAULT_VALUES:()=>Ot,FacebookApiProvider:()=>Bt,FacebookChannelCreateRecordHandler:()=>po,FacebookChannelErrorDialogComponent:()=>Ht,FacebookProvider:()=>qn,FacebookRegistrationService:()=>Kn,FacebookSettingsService:()=>et,FieldContainers:()=>Le,FieldsGroupComponent:()=>lt,FileIconService:()=>Oa,FileTypeIcon:()=>T,FilterableListComponent:()=>ne,FilterableListModule:()=>We,FlexContainerComponent:()=>H,FormColumn:()=>Rr,FormDialogComponent:()=>Sn,FormDialogModel:()=>op,FormDropDownOptions:()=>Br,FormGroupBuilder:()=>ti,FormGroupComponent:()=>it,FormRow:()=>Vr,FormulaEditorComponent:()=>yn,FormulaEditorModule:()=>vn,FormulaItem:()=>xo,FormulaItemTemplate:()=>kr,FormulaItemType:()=>Ce,FormulaOperandItemComponent:()=>Ue,GRID_DEFAULT_VALUES:()=>Oo,GTM_MODULE_NAME:()=>Ko,GridContainerComponent:()=>G,GridContainerItemsLayoutService:()=>Pt,HORIZONTAL_RESIZING_CONFIG:()=>Wo,HeaderComponent:()=>B,HintOverlayModule:()=>$e,HorizontalResizingService:()=>an,IconColumnDataSchema:()=>Cs,IconPositionEnum:()=>k.IconPositionEnum,IconTableCellComponent:()=>kt,ImageInputComponent:()=>ve,ImageInputModule:()=>He,InputComponent:()=>Qt,LabelComponent:()=>me,ListComponent:()=>Ne,LocalizableDialogComponent:()=>xn,LocalizableTextComponent:()=>Yt,LocalizableTextInputComponent:()=>ye,LocalizableTextInputHarness:()=>oo,LocalizableTextMaxLengthValidator:()=>Nl,LocalizableTextMinLengthValidator:()=>Ll,LocalizableTextModule:()=>be,LocalizableTextRequiredValidator:()=>El,LocalizableTextValidators:()=>ao,LookupComponent:()=>la,LookupDialogModule:()=>xe,LookupDialogMultiselectResult:()=>Ns,LookupDialogResult:()=>Ls,LookupDialogService:()=>Lt,LookupFormComponent:()=>ra,LookupItemValidators:()=>xi,LookupMetaItemPropertiesPageComponent:()=>ca,LookupService:()=>da,MaterialModule:()=>ct,MessageDirection:()=>Ha,MessageType:()=>Jn,MetaItemPropertiesPageComponent:()=>Ae,MetaItemPropertiesPageDirective:()=>q,MetaItemPropertiesPageModule:()=>dt,MetaItemPropertiesService:()=>Fa,MetaItemValidators:()=>Zo,MetaItemWithDataValueTypePropertiesPageComponent:()=>Fe,MockCodeEditorComponent:()=>Tn,MultiselectDialogComponent:()=>Mn,NamedFolderTableCellComponent:()=>Dt,NumberInputComponent:()=>Re,NumberInputModule:()=>je,NumberMetaItemPropertiesPageComponent:()=>en,OVERLAY_COMPONENT_SELECTOR:()=>Yo,OVERLAY_CONTAINER_SELECTOR:()=>$o,ObjectFilterType:()=>gn,ObjectTypeFilterComponent:()=>hn,OmnichannelChat:()=>Uc,OmnichannelChatService:()=>re,OpenFacebookIntegrationPageRequestHandler:()=>Ro,PageableTableDataSource:()=>Ka,PanelContentAssetsService:()=>Ft,PanelContentComponent:()=>At,PanelContentModule:()=>Hn,PanelListComponent:()=>Un,PasswordValidationRuleProvider:()=>qo,PasswordValidationService:()=>ya,QuickEntityFilterComponent:()=>Vn,RESOURCES_CONFIG:()=>Mo,RadioButtonGroupComponent:()=>Jt,RegisterTelegramResponse:()=>Zc,RegisterWhatsAppResponse:()=>Wc,ResourcesConfig:()=>Jo,ResourcesService:()=>Ve,RightManagementService:()=>nt,SearchInputComponent:()=>ze,SearchInputModule:()=>X,SelectComponent:()=>$t,SelectEntitySchemaColumnDialogComponent:()=>fn,SelectSysAdminUnitDialogComponent:()=>aa,SimpleHintComponent:()=>Bn,SizeEnum:()=>k.SizeEnum,SyncReactiveStateDirective:()=>Za,SysAdminUnitTreeComponent:()=>na,SysAdminUnitTreeControl:()=>yi,TableAllRowsSelectState:()=>F,TableCellComponent:()=>De,TableColumnDataSchema:()=>sr,TableComponent:()=>Z,TableCustomColumnDataSchema:()=>Ja,TableDataSchema:()=>cr,TableDialogComponent:()=>Ln,TableModule:()=>W,TelegramChannelAttributeChangedHandler:()=>ho,TelegramChannelSaveHandler:()=>co,TelegramRegistrationService:()=>Ut,TextMetaItemPropertiesPageComponent:()=>Xt,TimeAgoComponent:()=>Ye,TimeAgoModule:()=>An,TitleService:()=>_a,TreeTableComponent:()=>sn,TreeTableDataSchema:()=>lr,ValidationErrorDialogComponent:()=>Ea,VerticalExpansionPanelComponent:()=>Wn,WhatsAppChannelSaveHandler:()=>mo,WhatsAppRegistrationService:()=>Xn,containerPaddingConverter:()=>rp,createCrtControlUsingFormControlArgs:()=>ap,fileTypeIconMap:()=>wi,getDateLocale:()=>Ii,isNumber:()=>lo,isSizeEnum:()=>k.isSizeEnum,syncReactiveStateProvider:()=>Od});var g=p(74742),s=p(31134),c=p(34560),y=p(66385),x=p(22317),ut=p(86146),ce=p(30955),v=p(72856),A=p(59837),w=p(14535),P=p(33569),M=p(75903),_=p(66868),D=p(30738),de=p(32820),Pa=p(51789),$=p(11667),j=p(7950),$a=p(93784),we=p(57186),l=p(75378),b=p(77207),I=p(99293),Oe=p(33177),K=p(14537),m=p(49475),k=p(52045),gt=p(24709),e=p(94450),z=p(91521),ht=p(72310),Qo=p(60317),ln=p(55770),Pe=p(30922),S=p(97600),ki=p.n(S);function Ei(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"th",11)(1,"mat-checkbox",12),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i?r.allRowsSelectToggle():null)}),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("visibility",n.showSelectAllButton&&!n.isEmpty()?"visible":"hidden"),e.\u0275\u0275property("checked",n.isAllRowsCheckboxChecked())("indeterminate",n.isAllRowsCheckboxIntermediate())}}function Ni(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ei,2,4,"th",10),e.\u0275\u0275elementContainerEnd())}function Li(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",13)(1,"mat-checkbox",14),e.\u0275\u0275listener("click",function(i){const d=e.\u0275\u0275restoreView(n).$implicit,f=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(f.onCheckboxClick(d,i))})("change",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.recordSelectToggle(r))}),e.\u0275\u0275elementEnd()()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",o.isRecordSelected(n))}}function Ai(a,t){a&1&&e.\u0275\u0275element(0,"th",16)}function Fi(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ai,1,0,"th",15),e.\u0275\u0275elementContainerEnd())}function Oi(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",17)(1,"button",18),e.\u0275\u0275listener("click",function(i){const d=e.\u0275\u0275restoreView(n).$implicit,f=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(f.toggleRowExpansion(d,i))}),e.\u0275\u0275element(2,"mat-icon",19),e.\u0275\u0275elementEnd()()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("@rowExpanderTrigger",o.isRecordExpanded(n)?"expanded":"collapsed"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","row-expander-icon "+(o.isRecordExpanded(n)?"expanded":"collapsed"))}}function Pi(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"th",22)(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext(3).$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!o.isColumnSortable(n))("ngClass",o.getColumnHeaderCssClass(n.valueType,n.span)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.caption)}}function Vi(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Pi,3,3,"th",21),e.\u0275\u0275elementContainerEnd())}function Ri(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",23)(1,"ts-table-cell-wrapper",24),e.\u0275\u0275listener("valueChange",function(i){const d=e.\u0275\u0275restoreView(n).$implicit,f=e.\u0275\u0275nextContext(2).$implicit,E=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(E.onCellValueChange(d,f,i))}),e.\u0275\u0275elementEnd()()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",r.getValueTypeCssClass(i.valueType)),e.\u0275\u0275advance(1),e.\u0275\u0275property("columnDataSchema",i)("record",n)("eventHandlers",r.eventHandlers&&r.eventHandlers[o])}}function ji(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0,2),e.\u0275\u0275template(1,Vi,2,0,"ng-container",3),e.\u0275\u0275template(2,Ri,2,4,"td",8),e.\u0275\u0275elementContainerEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("matColumnDef",n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.showHeader)}}function zi(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ji,3,2,"ng-container",20),e.\u0275\u0275elementContainerEnd()),a&2){const n=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.name)}}function Bi(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"td",23)(1,"div",25),e.\u0275\u0275element(2,"ts-table-cell-wrapper",26),e.\u0275\u0275elementEnd()()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass","expandable-cell-"+(o.isRecordExpanded(n)?"expanded":"collapsed")),e.\u0275\u0275attribute("colspan",o.columns.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("@expandableRowTrigger",o.isRecordExpanded(n)?"expanded":"collapsed"),e.\u0275\u0275advance(1),e.\u0275\u0275property("columnDataSchema",o.dataSchema.expandableRow)("record",n)("eventHandlers",o.eventHandlers&&o.eventHandlers[o.dataSchema.expandableRow.name])}}function Ui(a,t){a&1&&e.\u0275\u0275element(0,"tr",28)}function Hi(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ui,1,0,"tr",27),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("matHeaderRowDef",n.columns)("matHeaderRowDefSticky",n.headerSticky)}}function Gi(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",29),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onRowClick(r))})("dblclick",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onRowDoubleClick(r))}),e.\u0275\u0275elementEnd()}if(a&2){const n=t.$implicit,o=t.even,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",i.getRowCssClass(n,o))("cdkDragData",n)("cdkDragBoundary",i.dragBoundarySelector)("cdkDragDisabled",!i.enableOrdering)}}function Zi(a,t){a&1&&e.\u0275\u0275element(0,"tr",31)}const Wi=function(){return["expandableRow"]};function Qi(a,t){a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Zi,1,0,"tr",30),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",e.\u0275\u0275pureFunction0(1,Wi)))}function Yi(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"table",1),e.\u0275\u0275listener("matSortChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onSortChange(i))})("cdkDropListDropped",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onItemDrop(i))}),e.\u0275\u0275elementContainerStart(1,2),e.\u0275\u0275template(2,Ni,2,0,"ng-container",3),e.\u0275\u0275template(3,Li,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,2),e.\u0275\u0275template(5,Fi,2,0,"ng-container",3),e.\u0275\u0275template(6,Oi,3,2,"td",5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(7,zi,2,1,"ng-container",6),e.\u0275\u0275elementContainerStart(8,7),e.\u0275\u0275template(9,Bi,3,6,"td",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(10,Hi,2,2,"ng-container",3),e.\u0275\u0275template(11,Gi,1,4,"tr",9),e.\u0275\u0275template(12,Qi,2,2,"div",3),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("display",n.isEmpty()?"none":null),e.\u0275\u0275property("dataSource",n.dataSource)("matSortDirection",n.sortDirection)("matSortActive",n.sortColumn)("cdkDropListDisabled",!n.enableOrdering)("trackBy",n.trackByFunction),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("matColumnDef",n.getMultiSelectColumnName()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.showHeader),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matColumnDef",n.getRowExpanderColumnName()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.showHeader),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.dataSchema.columns),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.showHeader),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.columns),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.dataSchema.expandableRow)}}var F;(function(a){a.None="none",a.Intermediate="intermediate",a.All="all"})(F||(F={}));const $i=["headerSticky","selectMode","showHeader","showSelectAllButton","allRowsSelectState","allRowsSelectToggleHandler","sortable","sortColumn","sortDirection","selectedRowCssClass","evenRowCssClass","minWidthPerColumn"],Ji={selectMode:"none",headerSticky:!1,showHeader:!0,showSelectAllButton:!0,sortable:!0,sortColumn:"",sortDirection:"asc",selectedRowCssClass:"selected",evenRowCssClass:"even-row",minWidthPerColumn:120};class Z{get filteredData(){return this.dataSource?this.dataSource.filteredData:[]}get dataSchema(){return this._dataSchema}set dataSchema(t){this._dataSchema=t;const n={};t&&t.columns.forEach(o=>{n[o.name]=o}),this.columnsDataSchema=n,this.markForCheck()}get dataColumns(){const t=this.dataSchema;return!t||!t.columns?[]:t.columns.map(n=>n.name)}get columns(){const t=this.dataColumns;return this.selectMode==="multi"&&t.unshift(this.getMultiSelectColumnName()),this.dataSchema.expandableRow&&(this.rowExpanderPosition==="start"&&t.unshift(this.getRowExpanderColumnName()),this.rowExpanderPosition==="end"&&t.push(this.getRowExpanderColumnName())),t}get selected(){const t=this.selection.selected;return this.data.filter(n=>t.includes(this.trackRecord(n)))}set selected(t){this.deselectRedundant();const n=this.trackRecords(t);if(this.deselectExcluding(...n||[]),n){const o=this.trackRecordsAreInTable(n);this.selection.select(...o)}}get expanded(){const t=this.expansion.selected;return this.data.filter(n=>t.includes(this.trackRecord(n)))}set expanded(t){this.collapseRedundant();const n=this.trackRecords(t);if(this.collapseExcluding(...n||[]),n){const o=this.trackRecordsAreInTable(n);this.expansion.select(...o)}}set sort(t){t=t||{},this.sortColumn=t.columnName,this.sortDirection=t.direction}set matSort(t){this._matSort===t||!this._dataSource||!t||(this._matSort=t,this.dataSource.sort=t)}set data(t){t=t||[],this._dataSource||this.initDataSource(),this.dataSource.data=t}get data(){return this.dataSource&&this.dataSource.data||[]}set dataSource(t){this.initDataSource(t)}get dataSource(){return this._dataSource}get eventHandlers(){return this._eventHandlers}set eventHandlers(t){this._eventHandlers=t,this.markForCheck()}set config(t){t=t||{};const n=this._config;this._config=t,(0,S.isEqual)(t,n)||this._applyConfig(t)}constructor(t){this.changeDetectorRef=t,this.selection=new Qo.SelectionModel(!0,[]),this.expansion=new Qo.SelectionModel(!0,[]),this.dataValueType=l.DataValueType,this.cellValueChange=new e.EventEmitter,this.enableOrdering=!1,this.rowExpanderPosition="end",this.selectedChange=new e.EventEmitter,this.sortChange=new e.EventEmitter,this.expandedChange=new e.EventEmitter,this.recordPositionChange=new e.EventEmitter,this.rowDoubleClick=new e.EventEmitter,this.getColumnSortingAccessor=(n,o)=>{const i=this.columnsDataSchema[o],r=n&&n[o];if(!i)return r;if(i.sortingDataAccessor)return i.sortingDataAccessor(n);switch(i.valueType){case l.DataValueType.Lookup:const d=r;return d&&d.displayValue;default:return r}},this.getMultiSelectColumnName=()=>"_multiSelectColumn",this.getRowExpanderColumnName=()=>"_rowExpanderColumn",this.trackByFunction=(n,o)=>this.trackRecord(o),this.config=Ji}_applyConfig(t){$i.forEach(n=>{const o=n,i=n,r=t[o],d=this[i];r!==void 0&&!(0,S.isEqual)(r,d)&&(this[i]=t[o])})}trackRecord(t){return this._dataSchema?.trackBy?this._dataSchema.trackBy(t):t}trackRecords(t){return t?.map(n=>this.trackRecord(n))}isRecordInTable(t){return this.data.some(n=>this.trackRecord(n)===t)}deselectRedundant(){if(!this.dataSource)return null;const t=this.trackRecordsAreNotInTable(this.selection.selected);return t.length!==0&&this.selection.deselect(...t),t}collapseRedundant(){if(!this.dataSource)return null;const t=this.trackRecordsAreNotInTable(this.expansion.selected);return t.length!==0&&this.expansion.deselect(...t),t}deselectExcluding(...t){if(!this.data||!this.selection.hasValue())return;const o=this.trackRecordsExceptExcluded(t);this.selection.deselect(...o)}collapseExcluding(...t){const n=this.trackRecordsExceptExcluded(t);this.expansion.deselect(...n)}changeSelectionForRecords(t,n){t?this.selection.select(...n):this.selection.deselect(...n)}initDataSource(t){t=t||new z.MatLegacyTableDataSource,t.sortingDataAccessor=this.getColumnSortingAccessor,t.connect().subscribe(n=>{this.renderedDataTrackValues=this.trackRecords(n),this.deselectRedundant()?.length>0&&this.emitSelectionChange(),this.collapseRedundant()?.length>0&&this.emitExpandedChange(),this.markForCheck(),this.calculateMinWidth()}),this._dataSource=t}markForCheck(){this.changeDetectorRef.markForCheck()}emitSelectionChange(){this.selectedChange.emit(this.selected)}emitExpandedChange(){this.expandedChange.emit(this.expanded)}selectSingleRecord(t){this.deselectExcluding(t),this.selection.select(t),this.emitSelectionChange()}validateColumnEventHandlers(){const t=Object.keys(this.eventHandlers),n=this._dataSchema.expandableRow;let o=t.find(i=>!this.columnsDataSchema[i]);if(n&&o===n.name&&(o=null),o){const i=Object.keys(this.columnsDataSchema).join(", ");throw new Error(`Event handlers for column "${o}" can not be specified because the column was not defined in table data schema. Actual table columns: ${i}.`)}}changeSelectionForRange(t){if(!this.renderedDataTrackValues||!this.lastSelectToggledRecord||this.lastSelectToggledRecord===t)return!1;const n=this.renderedDataTrackValues.indexOf(this.lastSelectToggledRecord),o=this.renderedDataTrackValues.indexOf(t);if(n===-1||o===-1)return!1;const i=this.renderedDataTrackValues.slice(Math.min(n,o),Math.max(n,o)+1);return this.changeSelectionForRecords(!this.selection.isSelected(t),i),this.lastSelectToggledRecord=t,this.emitSelectionChange(),!0}trackRecordsAreInTable(t){return this.dataSource?t.filter(n=>this.isRecordInTable(n)):t}trackRecordsAreNotInTable(t){return this.dataSource?t.filter(n=>!this.isRecordInTable(n)):t}trackRecordsExceptExcluded(t){const n=this.trackRecords(this.data);return t?n.filter(o=>!t.includes(o)):n}calculateMinWidth(){const t=this.minWidthPerColumn,n=this.dataSchema?.columns?.length??0,o=!this.isEmpty()&&t>0&&n>0;this.minWidth=o?t*n+"px":""}getColumnSpanClass(t){return t>0&&t<=24?`ts-column-span-${t}`:""}allRecordsSelected(){return this.dataSource&&this.selection.hasValue()&&this.selection.selected.length>=this.filteredData.length&&this.filteredData.every(this.isRecordSelected.bind(this))}getAllRowsSelectState(){let t;return this.allRowsSelectState&&(t=this.allRowsSelectState())?t:this.allRecordsSelected()?F.All:this.isAnyRecordSelected()?F.Intermediate:F.None}ngOnChanges(){this.eventHandlers&&this.columnsDataSchema&&this.validateColumnEventHandlers(),this.calculateMinWidth()}isDataSchemaEmpty(){return!this.dataSchema||!this.dataSchema.columns||this.dataColumns.length===0}isEmpty(){return this.isDataSchemaEmpty()||!this.renderedDataTrackValues||this.renderedDataTrackValues.length===0}recordSelectToggle(t){const n=this.trackRecord(t);this.selection.toggle(n),this.lastSelectToggledRecord=n,this.emitSelectionChange()}onSortChange(t){const n={columnName:t.active,direction:t.direction};this.sort=n,this.sortChange.emit(n)}isAnyRecordSelected(){return this.selection.hasValue()}isRecordSelected(t){return this.selection.isSelected(this.trackRecord(t))}isRecordExpanded(t){return this.expansion.isSelected(this.trackRecord(t))}isAllRowsCheckboxChecked(){return this.getAllRowsSelectState()===F.All}isAllRowsCheckboxIntermediate(){return this.getAllRowsSelectState()===F.Intermediate}allRowsSelectToggle(){if(this.selectMode!=="multi")throw new RangeError("Multi-select mode should be enabled to select all records.");if(this.allRowsSelectToggleHandler)this.allRowsSelectToggleHandler();else{const t=!this.isAllRowsCheckboxChecked();this.changeSelectionForRecords(t,this.trackRecords(this.filteredData)),this.emitSelectionChange()}}onRowClick(t){this.selectMode==="single"&&this.selectSingleRecord(this.trackRecord(t))}onRowDoubleClick(t){this.rowDoubleClick.emit(t)}getValueTypeCssClass(t){return"ts-value-type-"+(t&&l.DataValueType[t].toString().toLowerCase())}getColumnHeaderCssClass(t,n){return[this.getValueTypeCssClass(t),this.getColumnSpanClass(n)].filter(o=>Boolean(o))}getRowCssClass(t,n){const o=[];n&&o.push(this.evenRowCssClass),this.selectMode==="single"&&this.isRecordSelected(t)&&o.push(this.selectedRowCssClass);const i=typeof this.dataSchema.rowCssClass=="function"?this.dataSchema.rowCssClass(t):this.dataSchema.rowCssClass;return i&&o.push(i),o}isColumnSortable(t){return!t.caption||this.enableOrdering?!1:this.sortable?t.sortable!==!1:t.sortable===!0}onCheckboxClick(t,n){const o=this.trackRecord(t);n.shiftKey&&this.changeSelectionForRange(o)&&n.preventDefault(),n.stopPropagation()}toggleRowExpansion(t,n){if(n.stopPropagation(),!this.dataSchema.expandableRow)throw new Error("An expandable cell must be set for this operation");this.expansion.toggle(this.trackRecord(t)),this.emitExpandedChange()}onCellValueChange(t,n,o){this.data=this.data,this.cellValueChange.emit({record:t,columnDataSchema:n,value:o})}onItemDrop(t){const n=this.data.indexOf(t.item.data);(0,ln.moveItemInArray)(this.data,n,t.currentIndex),this.data=this.data;const o={record:t.item.data,newIndex:t.currentIndex,prevIndex:n};this.recordPositionChange.emit(o)}}Z.\u0275fac=function(t){return new(t||Z)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},Z.\u0275cmp=e.\u0275\u0275defineComponent({type:Z,selectors:[["ts-table"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(Pe.MatSort,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.matSort=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&e.\u0275\u0275styleProp("min-width",n.minWidth)},inputs:{dataSchema:"dataSchema",selectMode:"selectMode",headerSticky:"headerSticky",showHeader:"showHeader",showSelectAllButton:"showSelectAllButton",sortable:"sortable",sortColumn:"sortColumn",sortDirection:"sortDirection",selectedRowCssClass:"selectedRowCssClass",evenRowCssClass:"evenRowCssClass",minWidthPerColumn:"minWidthPerColumn",enableOrdering:"enableOrdering",dragBoundarySelector:"dragBoundarySelector",rowExpanderPosition:"rowExpanderPosition",selected:"selected",expanded:"expanded",sort:"sort",data:"data",dataSource:"dataSource",eventHandlers:"eventHandlers",config:"config",allRowsSelectState:"allRowsSelectState",allRowsSelectToggleHandler:"allRowsSelectToggleHandler"},outputs:{cellValueChange:"cellValueChange",selectedChange:"selectedChange",sortChange:"sortChange",expandedChange:"expandedChange",recordPositionChange:"recordPositionChange",rowDoubleClick:"rowDoubleClick"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"display","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped"],[3,"matColumnDef"],[4,"ngIf"],["mat-cell","","class","multi-select-column",4,"matCellDef"],["mat-cell","","class","row-expander-column",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","expandableRow"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","class","multi-select-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"multi-select-column"],[3,"checked","indeterminate","change"],["mat-cell","",1,"multi-select-column"],[3,"checked","click","change"],["mat-header-cell","","class","row-expander-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"row-expander-column"],["mat-cell","",1,"row-expander-column"],[1,"trigger-button",3,"click"],[3,"ngClass"],[3,"matColumnDef",4,"ngIf"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass"],["mat-cell","",3,"ngClass"],[3,"columnDataSchema","record","eventHandlers","valueChange"],[1,"expandable-row-wrapper"],[3,"columnDataSchema","record","eventHandlers"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row",""],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick"],["mat-row","","class","expandable-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"expandable-row"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Yi,13,15,"table",0),t&2&&e.\u0275\u0275property("ngIf",!n.isDataSchemaEmpty())},styles:[`ts-table{display:inline-block;width:100%}ts-table table{width:100%}ts-table table tr.expandable-row{height:auto}ts-table table tr.expandable-row td.expandable-cell-collapsed{border-bottom:hidden}ts-table table tr td,ts-table table tr th{overflow:hidden}ts-table table tr td:not(.multi-select-column,.row-expander-column),ts-table table tr th:not(.multi-select-column,.row-expander-column){width:auto}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-1,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-1{width:4.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-2,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-2{width:8.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-3,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-3{width:12.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-4,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-4{width:16.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-5,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-5{width:20.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-6,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-6{width:25%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-7,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-7{width:29.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-8,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-8{width:33.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-9,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-9{width:37.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-10,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-10{width:41.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-11,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-11{width:45.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-12,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-12{width:50%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-13,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-13{width:54.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-14,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-14{width:58.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-15,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-15{width:62.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-16,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-16{width:66.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-17,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-17{width:70.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-18,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-18{width:75%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-19,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-19{width:79.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-20,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-20{width:83.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-21,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-21{width:87.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-22,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-22{width:91.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-23,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-23{width:95.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-24,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-24{width:100%}ts-table table tr td:not(:first-of-type),ts-table table tr th:not(:first-of-type){padding-left:5px}ts-table table tr td:not(:last-of-type),ts-table table tr th:not(:last-of-type){padding-right:5px}ts-table table tr td.multi-select-column,ts-table table tr th.multi-select-column{padding-right:10px;width:16px!important;text-align:center;overflow:visible!important}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple,ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple{overflow:visible;position:absolute;left:calc(50% - 16px);top:calc(50% - 16px);height:32px;width:32px}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple),ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple){display:none}ts-table table tr td.row-expander-column .trigger-button,ts-table table tr th.row-expander-column .trigger-button{background:none;border:none}ts-table table tr td.row-expander-column .trigger-button:focus,ts-table table tr th.row-expander-column .trigger-button:focus{background:none;border:none;outline:none}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon{background-image:url("data:image/svg+xml,%3Csvg id='Component_447' data-name='Component 447' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath id='Path_1315' data-name='Path 1315' d='M7,13,0,6.5,7,0' transform='translate(14.549 4.25) rotate(90)' fill='none' stroke='%23006ce0' stroke-width='1.1'/%3E%3Crect id='Rectangle_6725' data-name='Rectangle 6725' width='16' height='16' fill='none'/%3E%3C/svg%3E%0A");background-position:center}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon.collapsed,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon.collapsed{transform:rotate(-180deg)}ts-table table tr td .expandable-row-wrapper,ts-table table tr th .expandable-row-wrapper{display:flex}ts-table table tr td .expandable-row-wrapper ts-table-cell-wrapper,ts-table table tr th .expandable-row-wrapper ts-table-cell-wrapper{width:100%;margin:10px 0}ts-table table tr th.ts-value-type-boolean .mat-sort-header-container{justify-content:center;padding-left:21px}ts-table table tr td.ts-value-type-boolean{text-align:center}
`],encapsulation:2,data:{animation:[(0,ht.trigger)("expandableRowTrigger",[(0,ht.state)("collapsed",(0,ht.style)({height:"0px",minHeight:"0"})),(0,ht.state)("expanded",(0,ht.style)({height:"unset"}))]),(0,ht.trigger)("rowExpanderTrigger",[(0,ht.transition)("collapsed <=> expanded",[(0,ht.style)({transform:"rotate(180deg)",opacity:0})])])]},changeDetection:0});class he{constructor(){this.getRegisteredEvents=()=>[]}set eventHandlers(t){this._eventHandlers=t,this._validateEventHandlers()}get eventHandlers(){return this._eventHandlers}_stringify(t){const n=[()=>JSON.stringify(t),()=>t.toString()];for(let o=0;o<n.length;o++){const i=n[o];try{return i()}catch{}}return""}_checkEventCanBeHandled(t){const n=this.getRegisteredEvents();if(!n||n.some(r=>r.name===t))return;const o=n.map(r=>r.name).join(", ");let i=`Handler for event "${t}" can not be specified because the event was not registered in table cell class. Registered table column events to subscribe: ${o}.`;throw this.columnDataSchema&&(i+=` Column name: "${this.columnDataSchema.name}".`),new Error(i)}_checkHandlerIsFunction(t,n){if(typeof n!="function")throw new TypeError(`Handler for event with name "${t}" must be a function, but actual is"${this._stringify(n)}".`)}_validateEventHandlers(){if(!this.eventHandlers)return;Object.keys(this.eventHandlers).forEach(n=>{this._checkEventCanBeHandled(n),this._checkHandlerIsFunction(n,this.eventHandlers[n])})}_checkEventDataType(t,n){return t instanceof n||t.constructor===n}_validateFiringEvent(t,n){const o=this._registeredEvents.find(r=>r.name===t);if(!o)throw new Error(`Event with name "${t}" is not registered in the cell class and can not be fired.`);const i=o.dataType;if(n&&(!i||!this._checkEventDataType(n,i)))throw new TypeError(`Type of the data in the event "${t}" must be "${i}", but actual data is "${this._stringify(n)}".`)}_getValidEventHandler(t){const n=this.eventHandlers&&this.eventHandlers[t];if(!!n)return this._checkHandlerIsFunction(t,n),n}isEmpty(){return!(this.columnDataSchema&&this.record)}fireEvent(t,n){this._validateFiringEvent(t,n);const o=this._getValidEventHandler(t);return o&&o(this.record,n)}ngOnInit(){this._registeredEvents=this.getRegisteredEvents()}getValue(){const t=this.record[this.columnDataSchema.name],n=this.columnDataSchema.formatter;return n?n(t,this.record):t}}he.\u0275fac=function(t){return new(t||he)},he.\u0275dir=e.\u0275\u0275defineDirective({type:he,inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"}});function qi(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"a",7),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",i.getLinkUrl(n))("target",i.getLinkTarget(n)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(i.formatTextValue(o))}}function Ki(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",8),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.onLinkClick(i,r))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("href",i.getLinkUrl(n),e.\u0275\u0275sanitizeUrl)("target",i.getLinkTarget(n)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(i.formatTextValue(o))}}function Xi(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,qi,3,3,"ng-container",4),e.\u0275\u0275template(2,Ki,2,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.getIsRouterLink(n))("ngIfElse",o)}}function er(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2).$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.formatTextValue(n))}}function tr(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Xi,4,2,"ng-container",4),e.\u0275\u0275template(2,er,2,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.getLink(o.record))("ngIfElse",n)}}function nr(a,t){if(a&1&&e.\u0275\u0275element(0,"mat-checkbox",9),a&2){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("checked",!!n)}}function ar(a,t){if(a&1&&(e.\u0275\u0275template(0,tr,4,2,"ng-container",0),e.\u0275\u0275template(1,nr,1,1,"mat-checkbox",3)),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",n.isDisplayedAsText()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isDisplayedAsBoolean())}}const or=function(a){return{$implicit:a}};function ir(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ar,2,2,"ng-template",1,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,or,o.getValue()))("ngTemplateOutlet",n)}}class De extends he{constructor(t,n){super(),this.numberUtils=n,this._textValueTypes=[l.DataValueType.Guid].concat(m.DataValueTypeGroup.DateTime).concat(m.DataValueTypeGroup.Number).concat(m.DataValueTypeGroup.Text).concat(m.DataValueTypeGroup.Lookup),this.getRegisteredEvents=()=>[{name:"click"}],this.userCulture=t.cultureInfo.sysCultureName}getLink(t){return this.columnDataSchema.linkGenerator?this.columnDataSchema.linkGenerator(t):""}getLinkUrl(t){return typeof t=="string"?t:t.url}getLinkTarget(t){const n="_self";return typeof t=="string"?n:t.target||n}getIsRouterLink(t){return t?typeof t=="string"?!0:t.useRouterLink||!1:!1}onLinkClick(t,n){n&&typeof n!="string"&&n.preventDefaultClick===!0&&(t.preventDefault(),this.fireEvent("click"))}isDisplayedAsText(){return!this.columnDataSchema.valueType||this._textValueTypes.indexOf(this.columnDataSchema.valueType)!==-1}isDisplayedAsBoolean(){return this.columnDataSchema.valueType===l.DataValueType.Boolean}formatTextValue(t){if(t==null)return"";switch(this.columnDataSchema.valueType){case l.DataValueType.Date:return t.toLocaleDateString(this.userCulture);case l.DataValueType.Time:return t.toLocaleTimeString(this.userCulture);case l.DataValueType.DateTime:return t.toLocaleString(this.userCulture);case l.DataValueType.Integer:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:0}));case l.DataValueType.Float:case l.DataValueType.Money:return this.numberUtils.formatNumberValue(t);case l.DataValueType.FLOAT1:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:1}));case l.DataValueType.FLOAT2:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:2}));case l.DataValueType.FLOAT3:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:3}));case l.DataValueType.FLOAT4:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:4}));case l.DataValueType.FLOAT8:return this.numberUtils.formatNumberValue(t,new m.NumberFormatConfig({precision:8}));case l.DataValueType.IMAGELOOKUP:case l.DataValueType.Lookup:{const o=t;return o?.displayValue||o?.value}case l.DataValueType.LOCALIZABLE_STRING:{const o=t;return o&&o.getValue(this.userCulture)}default:return t}}}De.\u0275fac=function(t){return new(t||De)(e.\u0275\u0275directiveInject(m.UserInfo),e.\u0275\u0275directiveInject(m.NumberFormatUtility))},De.\u0275cmp=e.\u0275\u0275defineComponent({type:De,selectors:[["ts-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["t",""],["disabled","true",3,"checked",4,"ngIf"],[4,"ngIf","ngIfElse"],["textBlock",""],["hyperlinkBlock",""],[3,"routerLink","target"],[3,"href","target","click"],["disabled","true",3,"checked"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,ir,3,4,"ng-container",0),t&2&&e.\u0275\u0275property("ngIf",!n.isEmpty())},dependencies:[s.NgIf,s.NgTemplateOutlet,P.MatLegacyCheckbox,we.RouterLink],encapsulation:2});class ft extends he{constructor(){super(...arguments),this.valueChange=new e.EventEmitter}setRecordValue(t){this.record[this.columnDataSchema.name]=t}setValue(t){this.setRecordValue(t),this.valueChange.emit(t)}}ft.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(ft)))(n||ft)}}(),ft.\u0275dir=e.\u0275\u0275defineDirective({type:ft,outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275InheritDefinitionFeature]});var yo=p(70468);const rr=["angularTreeGrid"];class lr{}class sn{constructor(){this._config={id_field:"id",parent_id_field:"parent",parent_display_field:"name",data_loading_text:"",row_class_function:null,css:{expand_class:"right-arrow",collapse_class:"down-arrow"},columns:[]},this._notImplementedContracts=["sortable","valueType","linkGenerator","sortingDataAccessor"],this.data=[]}set primaryColumn(t){this._config.id_field=t}set parentColumn(t){this._config.parent_id_field=t}set primaryDisplayColumn(t){this._config.parent_display_field=t}get config(){return this._config}_validateTreeTableColumnContract(t){const n=Object.getOwnPropertyNames(t);this._notImplementedContracts.forEach(o=>{if(n.indexOf(o)!==-1)throw new Error(`Contract "${o}" in TreeTableColumnDataSchema not implemented.`)})}_rowLevelClassGenerator(t){return t.leaf?"leaf-level":"root-level"}_setColumnsConfig(t){const n=t.map(o=>(this._validateTreeTableColumnContract(o),{name:o.name,header:o.caption,css_class:"tree-table-column-"+o.name,renderer:o.formatter}));this._config.columns=n}_setRowCssClassGenerator(t){if(!this.dataSchema?.rowCssClass){this._config.row_class_function=this._rowLevelClassGenerator;return}const n=typeof this.dataSchema?.rowCssClass=="function"?this.dataSchema.rowCssClass:o=>this.dataSchema.rowCssClass;this._config.row_class_function=o=>[this._rowLevelClassGenerator(o),n(o)].join(" ")}get dataSchema(){return this._dataSchema}set dataSchema(t){this._dataSchema=t,t&&this._setColumnsConfig(t.columns),this._setRowCssClassGenerator(t)}collapseAll(){this.angularTreeGrid.collapseAll()}expandAll(){this.angularTreeGrid.expandAll()}}sn.\u0275fac=function(t){return new(t||sn)},sn.\u0275cmp=e.\u0275\u0275defineComponent({type:sn,selectors:[["ts-tree-table"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(rr,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.angularTreeGrid=o.first)}},inputs:{primaryColumn:"primaryColumn",parentColumn:"parentColumn",primaryDisplayColumn:"primaryDisplayColumn",data:"data",dataSchema:"dataSchema"},decls:2,vars:2,consts:[[1,"tree-table",3,"data","configs"],["angularTreeGrid",""]],template:function(t,n){t&1&&e.\u0275\u0275element(0,"db-angular-tree-grid",0,1),t&2&&e.\u0275\u0275property("data",n.data)("configs",n.config)},dependencies:[yo.AngularTreeGridComponent],styles:[`ts-tree-table .tree-table table.db-tree-view{border:0;width:100%}ts-tree-table .tree-table .db-tree-view thead tr th,ts-tree-table .tree-table .db-tree-view tbody tr td{border-left-width:0;border-right-width:0;border-top-width:0}ts-tree-table .tree-table .db-tree-view thead tr th{font:400 13px/17px Bpmonline Open Sans,Regular,sans-serif;color:#999;font-size:13px;text-align:left}ts-tree-table .tree-table .db-tree-view tbody tr{line-height:normal}ts-tree-table .tree-table .db-tree-view tbody tr td{font:400 14px/19px Bpmonline Open Sans,Regular,sans-serif;font-size:14px;color:#000000de}ts-tree-table .tree-table .db-tree-view .root-level td:first-child{padding-left:10px}ts-tree-table .tree-table .db-tree-view .leaf-level{background:#fcfcfc 0% 0% no-repeat padding-box}ts-tree-table .tree-table .db-tree-view .leaf-level td:first-child{padding-left:25px}ts-tree-table .tree-table .right-arrow:before{color:#006ce0;border-style:solid;border-width:1px 1px 0 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}ts-tree-table .tree-table .down-arrow:before{color:#006ce0;border-style:solid;border-width:0 1px 1px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}
`],encapsulation:2});class vo{constructor(t){Object.assign(this,t)}}class sr extends vo{constructor(t){super(t),this.externalLink=!1}}class Ja extends vo{}class cr{}const dr=["tableCell"];class ga{constructor(){this.valueChange=new e.EventEmitter}_generateTableCell(t){this.tableCell.clear();const n=this.tableCell.createComponent(t),o=n.instance;if(t!==De&&!(o instanceof he))throw new TypeError("Value of property `cellComponentClass` must be a component class inherited from `BaseTableCellComponent`");return n}_updateTableCell(){const t=this.columnDataSchema.cellComponentClass||De;(!this._cellComponentRef||!(this._cellComponentRef.instance instanceof t))&&(this._cellComponentRef=this._generateTableCell(t));const n=this._cellComponentRef.instance;n.columnDataSchema=this.columnDataSchema,n.record=this.record,n.eventHandlers=this.eventHandlers,n instanceof ft&&n.valueChange.subscribe(o=>this.valueChange.emit(o)),this._cellComponentRef.changeDetectorRef.detectChanges()}ngOnChanges(t){!this.record||!this.columnDataSchema||!(t.record||t.columnDataSchema||t.eventHandlers&&!(0,S.isEqual)(t.eventHandlers.previousValue,t.eventHandlers.currentValue))||this._updateTableCell()}}ga.\u0275fac=function(t){return new(t||ga)},ga.\u0275cmp=e.\u0275\u0275defineComponent({type:ga,selectors:[["ts-table-cell-wrapper"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(dr,7,e.ViewContainerRef),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.tableCell=o.first)}},inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"},outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["tableCell",""]],template:function(t,n){t&1&&e.\u0275\u0275element(0,"span",null,0)},encapsulation:2});class W{}W.\u0275fac=function(t){return new(t||W)},W.\u0275mod=e.\u0275\u0275defineNgModule({type:W}),W.\u0275inj=e.\u0275\u0275defineInjector({imports:[yo.AngularTreeGridModule,s.CommonModule,ln.DragDropModule,w.MatLegacyButtonModule,v.MatIconModule,P.MatLegacyCheckboxModule,Pe.MatSortModule,z.MatLegacyTableModule,we.RouterModule,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(W,{declarations:[sn,Z,De,ga],imports:[yo.AngularTreeGridModule,s.CommonModule,ln.DragDropModule,w.MatLegacyButtonModule,v.MatIconModule,P.MatLegacyCheckboxModule,Pe.MatSortModule,z.MatLegacyTableModule,we.RouterModule,b.TranslateModule],exports:[sn,Z,De]})}(),e.\u0275\u0275setComponentScope(Z,[s.NgClass,s.NgForOf,s.NgIf,ln.CdkDropList,ln.CdkDrag,v.MatIcon,P.MatLegacyCheckbox,Pe.MatSort,Pe.MatSortHeader,z.MatLegacyTable,z.MatLegacyHeaderCellDef,z.MatLegacyHeaderRowDef,z.MatLegacyColumnDef,z.MatLegacyCellDef,z.MatLegacyRowDef,z.MatLegacyHeaderCell,z.MatLegacyCell,z.MatLegacyHeaderRow,z.MatLegacyRow,ga],[]);const pr=["detailTableWrapper"];class ha{constructor(){this.tableEventHandlers={},this.dataChange=new e.EventEmitter,this.tableDataSource=this.createTableDataSource()}set data(t){t=t||[],this.tableDataSource.data=t,this.onDataSourceSet(t)}get data(){return this.tableDataSource.data}get readonly(){return this._readonly}set readonly(t){this._readonly!==t&&(this._readonly=t,this.onReadonlySet(t))}createTableDataSource(){return new z.MatLegacyTableDataSource}applyDataBinding(){const t=this.tableDataSource.data;this.tableDataSource.data=t}addRowSilent(t){this.data.push(t)}addRow(t){this.addRows(t)}addRows(...t){t.forEach(n=>this.addRowSilent(n)),this.applyDataBinding()}deleteRowSilent(t){const n=this.data,o=n.findIndex(i=>i===t);o!==-1&&n.splice(o,1)}deleteRow(t){this.deleteRows(t)}deleteRows(...t){t.forEach(n=>this.deleteRowSilent(n)),this.applyDataBinding()}onDataSourceSet(t){}checkTableIsNotEmpty(){if(!this.table)throw new Error("Table detail should contain an instance of `TableComponent`.")}onReadonlySet(t){}processRowsBeforeAdd(...t){return t}processRowsBeforeDelete(...t){return t}ngOnInit(){this.readonly=!1}fireChangeEvent(){this.dataChange.emit(this.data)}isEmpty(){return this.checkTableIsNotEmpty(),this.table.isEmpty()}onAddRow(t){this.onAddRows(t)}onAddRows(...t){if(this.readonly)return;const n=this.processRowsBeforeAdd(...t);this.addRows(...n),n?.length>0&&this.fireChangeEvent()}onDeleteRow(t){this.onDeleteRows(t)}onDeleteRows(...t){if(this.readonly)return;const n=this.processRowsBeforeDelete(...t);this.deleteRows(...n),n?.length>0&&this.fireChangeEvent()}onDeleteSelected(){this.checkTableIsNotEmpty(),this.onDeleteRows(...this.table.selected)}isDeleteSelectedButtonVisible(){return this.readonly?!1:(this.checkTableIsNotEmpty(),this.table.isAnyRecordSelected())}}ha.\u0275fac=function(t){return new(t||ha)},ha.\u0275dir=e.\u0275\u0275defineDirective({type:ha,viewQuery:function(t,n){if(t&1&&(e.\u0275\u0275viewQuery(Z,7),e.\u0275\u0275viewQuery(pr,7)),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.table=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.detailTableWrapper=o.first)}},inputs:{data:"data",isLoading:"isLoading",readonly:"readonly"},outputs:{dataChange:"dataChange"}});class fa extends ha{set sort(t){this._sort!==t&&(this._sort=t,this.tableDataSource&&t&&(this.tableDataSource.sort=t))}isEmpty(){const t=this.tableDataSource;return!this.isLoading&&(t.data.length===0||t.filteredData.length===0)}}fa.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(fa)))(n||fa)}}(),fa.\u0275dir=e.\u0275\u0275defineDirective({type:fa,viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(Pe.MatSort,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.sort=o.first)}},features:[e.\u0275\u0275InheritDefinitionFeature]});var u=p(27049),Va=p(31892),mr=p(67202);const Yo=new e.InjectionToken("Component selector in the shadow root of which overlay container will be injected"),$o=new e.InjectionToken("Selector of an element in the component into which the overlay container will be injected");class Ca extends Va.OverlayContainer{constructor(t,n,o="",i=""){super(t,n),this._platform=n,this._componentSelector=o,this._containerSelector=i}_getContainerRootElement(){const t=this._document.querySelector(this._componentSelector),n=t&&t.shadowRoot;return n&&n.querySelector(this._containerSelector)||this._document.body}getContainerElement(){const t=super.getContainerElement(),n=this._getContainerRootElement();return n.querySelector("."+t.className)||n.appendChild(t),t}}Ca.\u0275fac=function(t){return new(t||Ca)(e.\u0275\u0275inject(s.DOCUMENT),e.\u0275\u0275inject(mr.Platform),e.\u0275\u0275inject(Yo),e.\u0275\u0275inject($o))},Ca.\u0275prov=e.\u0275\u0275defineInjectable({token:Ca,factory:Ca.\u0275fac});const Mo=new e.InjectionToken("Represents a set of configuration properties for getting resources");class Jo{constructor(t,n,o){this._getResourcesEventName=t,this._setResourcesEventName=n,this._defaultResources=o}get defaultResources(){return this._defaultResources}get getResourcesEventName(){return l.ValidationUtilities.checkStringIsNotEmpty("getResourcesEventName",this._getResourcesEventName)}get setResourcesEventName(){return l.ValidationUtilities.checkStringIsNotEmpty("setResourcesEventName",this._setResourcesEventName)}}var C=p(21322);class Ve{constructor(t,n){this._customEventService=t,this._destroyed$=new C.Subject,this._defaultResources=this._getSafeResources(n.defaultResources),this._setResourcesEventName=n.setResourcesEventName,this._getResourcesEventName=n.getResourcesEventName}_getSafeResources(t){return t=t||{},t.localizableStrings=t.localizableStrings||{},t}getResources(){const t=new C.ReplaySubject;return this._customEventService.subscribe(this._setResourcesEventName).pipe((0,u.take)(1),(0,u.map)(n=>this._getSafeResources(n)),(0,u.map)(n=>(0,S.merge)(this._defaultResources,n)),(0,u.takeUntil)(this._destroyed$)).subscribe(n=>{t.next(n),t.complete()}),this._customEventService.createOutboundChannel(this._getResourcesEventName).next({}),t}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Ve.\u0275fac=function(t){return new(t||Ve)(e.\u0275\u0275inject(Oe.CustomEventService),e.\u0275\u0275inject(Mo))},Ve.\u0275prov=e.\u0275\u0275defineInjectable({token:Ve,factory:Ve.\u0275fac});class Ct{constructor(){this._eventEmitter=new e.EventEmitter(!1)}emit(t){this._eventEmitter.emit(t)}subscribe(t){return this._eventEmitter.subscribe(t)}}Ct.\u0275fac=function(t){return new(t||Ct)},Ct.\u0275prov=e.\u0275\u0275defineInjectable({token:Ct,factory:Ct.\u0275fac});class _t extends m.RestErrorHandler{processErrorMessage(t){this._dialogService.openInfoDialog(t)}constructor(t){super(),this._dialogService=t}}_t.\u0275fac=function(t){return new(t||_t)(e.\u0275\u0275inject(I.DialogService))},_t.\u0275prov=e.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac});const ur={provide:m.RestErrorHandler,useClass:_t};var qa=p(73455);class cn extends m.RestHandler{constructor(t,n,o){super(),this._snackBar=n,this._maskService=o,this._errorHandler=new _t(t)}_handleRequestSuccess(t,n){return t.pipe((0,u.tap)(o=>{const{success:i}=o||{};(i||i===void 0)&&n()}))}_handleRequestsSuccess(t,n){let o=0;const i=()=>o===t.length;return t.map(r=>this._handleRequestSuccess(r,()=>{o++,i()&&this.showSuccessMessage(n)}))}_handleRequestsFinished(t,n){const o=t.slice(),i=()=>o.length===0,r=d=>{const f=o.indexOf(d);f!==-1&&(o.splice(f,1),i()&&n())};return t.map(d=>d.pipe((0,u.tap)(()=>r(d)),(0,u.finalize)(()=>r(d))))}showSuccessMessage(t){this._snackBar.open(t,"",{duration:5e3})}handleError(t,n){return this._errorHandler.handleRequest(t,n)}handleSuccess(t,n){return this._handleRequestSuccess(t,()=>this.showSuccessMessage(n))}applyMask(t,n){this._maskService.showBodyMask({delay:n.maskDelay});let o=!1;return t.pipe((0,u.tap)(()=>{this._maskService.hideBodyMask(),o=!0}),(0,u.finalize)(()=>{o||this._maskService.hideBodyMask()}))}handleRequest(t,n={}){let o=this.handleError(t,n);return n.skipBodyMask||(o=this.applyMask(o,n)),n.successMessage&&(o=this.handleSuccess(o,n.successMessage)),o}handleRequests(t,n={}){let o=t.map(i=>this.handleError(i,n));return n.successMessage&&(o=this._handleRequestsSuccess(o,n.successMessage)),n.skipBodyMask||(this._maskService.showBodyMask({delay:n.maskDelay}),o=this._handleRequestsFinished(o,()=>this._maskService.hideBodyMask())),o}}cn.\u0275fac=function(t){return new(t||cn)(e.\u0275\u0275inject(I.DialogService),e.\u0275\u0275inject(qa.MatLegacySnackBar),e.\u0275\u0275inject(I.MaskService))},cn.\u0275prov=e.\u0275\u0275defineInjectable({token:cn,factory:cn.\u0275fac});const gr={provide:m.RestHandler,useClass:cn};class dn{constructor(t){this._window=t,this._defaultBlinkInterval=500,this._defaultBlinkPrefix="*"}_getBlinkConfig(t){const n=this._window.document,o=t?.title||n.title;return{title:o,blinkTitle:t?.blinkTitle||`${this._defaultBlinkPrefix}${o}`,blinkInterval:t?.blinkInterval||this._defaultBlinkInterval,blinkOnce:(t||{}).blinkOnce===!0}}_createSyncSubject(){const t=new C.Subject;return(0,C.fromEvent)(this._window,"mousemove").pipe((0,u.first)(),(0,u.map)(n=>null)).subscribe(t),t}blink(t){return(0,C.of)(null)}}dn.\u0275fac=function(t){return new(t||dn)(e.\u0275\u0275inject(Oe.WINDOW_TOKEN))},dn.\u0275prov=e.\u0275\u0275defineInjectable({token:dn,factory:dn.\u0275fac,providedIn:"root"});var O=p(8239),pe=p(54514);class _a{constructor(t,n){this._sysSettingsService=t,this._title=n,this._defaultProductName="Creatio",this._productNameSysSettingsCode="ProductName"}_getProductName(){var t=this;return(0,O.Z)(function*(){const n=yield t._sysSettingsService.getByCode(t._productNameSysSettingsCode);return n?n.value:t._defaultProductName})()}setTitleAsync(t=""){var n=this;return(0,O.Z)(function*(){const o=yield n._getProductName(),i=t?[t,o].join(" - "):o;n._title.setTitle(i)})()}setTitle(t=""){this.setTitleAsync(t).then()}}_a.\u0275fac=function(t){return new(t||_a)(e.\u0275\u0275inject(l.SysSettingsService),e.\u0275\u0275inject(pe.Title))},_a.\u0275prov=e.\u0275\u0275defineInjectable({token:_a,factory:_a.\u0275fac,providedIn:"root"});class qo{}class ya{constructor(t,n){this._translateService=t,this._passwordValidationRuleProvider=n,this._validationRules=[],this._initValidationRules()}_initValidationRules(){this._passwordValidationRuleProvider.getPasswordValidationRules().pipe((0,C.take)(1)).subscribe(t=>{this._validationRules=t})}validate(t){return this._validationRules.map(n=>({valid:n.pattern.test(t),caption:this._translateService.instant(n.message,n.interpolateParams)}))}getDefaultValidationRules(){return this._validationRules.map(t=>({valid:null,caption:this._translateService.instant(t.message,t.interpolateParams)}))}}ya.\u0275fac=function(t){return new(t||ya)(e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(qo))},ya.\u0275prov=e.\u0275\u0275defineInjectable({token:ya,factory:ya.\u0275fac,providedIn:"root"});var fe=p(41307);const Ko=new e.InjectionToken("GtmModuleName");class pn{set model(t){this._model!==t&&(this._model=t,this.onModelSet(t))}get model(){return this._model}constructor(t){this.injector=t,this._destroyedSubject=new C.Subject,this.destroyed$=this._destroyedSubject.asObservable(),this.hasLoadingError=!1,this.isLoading=!0,this.injectDependencies(),this._model=this.createEmptyModel()}injectDependencies(){this.dialogService=this.injector.get(I.DialogService),this.googleTagManagerService=this.injector.get(fe.GoogleTagManagerService),this.window=this.injector.get(Oe.WINDOW_TOKEN),this.gtmModuleName=this.injector.get(Ko,""),this._translateService=this.injector.get(b.TranslateService),this.scrollToBottomObserverFactory=this.injector.get(m.ScrollToBottomObserverFactory),this._restHandler=this.injector.get(m.RestHandler,null)}createEmptyModel(){return{}}onModelSet(t){}onPageLoadErrorDialogClosed(t){this.close()}onPageDataLoadError(t){this.dialogService.openInfoDialog(t.message).subscribe(n=>{this.onPageLoadErrorDialogClosed(n)})}applyPageLoadUnsuccessfulResponse(t){this.sendGtmAction(this.getPageOpenErrorGtmData()),this.model=this.createEmptyModel(),this.hideBodyMask(),this.hasLoadingError=!0,t&&t.errorInfo&&this.onPageDataLoadError(t.errorInfo)}applyPageLoadSuccessfulResponse(t){this.hasLoadingError=!1;const n=this.getModelFromLoadResponse(t);this.model=this.preProcessLoadedPageModel(n),this.sendGtmAction(this.getPageOpenGtmData())}applyPageLoadResponse(t){if(!t||!t.success){this.applyPageLoadUnsuccessfulResponse(t);return}this.applyPageLoadSuccessfulResponse(t)}beforeInitialPageDataLoading(){}beforePageDataReloading(){}beforePageDataLoading(){}afterInitialPageDataLoaded(){}afterPageDataReloaded(){}afterPageDataLoaded(){}executePageDataLoading(t){return this.beforePageDataLoading(),this.showBodyMask(),t().pipe((0,u.takeUntil)(this.destroyed$),(0,u.take)(1),(0,u.tap)(o=>{this.hideBodyMask(),o=this.preProcessPageLoadingResponse(o),this.applyPageLoadResponse(o),this.afterPageDataLoaded()}),(0,u.share)())}loadInitialPageData(){this.beforeInitialPageDataLoading();const t=this.executePageDataLoading(()=>this.requestInitialPageData());return t.subscribe(()=>this.afterInitialPageDataLoaded()),t}preProcessPageLoadingResponse(t){return t}preProcessLoadedPageModel(t){return t}requestInitialPageData(){return this.requestPageData()}requestPageDataOnReload(){return this.requestPageData()}getDefaultGtmData(){return{moduleName:this.gtmModuleName,schemaName:this.getGtmSchemaName()}}getPageOpenGtmData(){return{action:"PageOpen"}}getPageOpenErrorGtmData(){return{action:"PageOpenError"}}sendGtmAction(t){const n=this.getDefaultGtmData();t&&n&&n.moduleName&&n.schemaName&&this.googleTagManagerService.track((0,S.merge)(n,t))}hideBodyMask(){this.isLoading=!1}showBodyMask(){this.isLoading=!0}translateInstant(t,n){return n===void 0?this._translateService.instant(t):this._translateService.instant(t,n)}translateAsync(t,n){return n===void 0?this._translateService.get(t):this._translateService.get(t,n)}handleRequest(t,n){return this._restHandler.handleRequest(t,n)}reloadPageData(){this.beforePageDataReloading();const t=this.executePageDataLoading(()=>this.requestPageDataOnReload());return t.subscribe(()=>this.afterPageDataReloaded()),t}openDialog(t,n){return n=n||{},n.data=n.data||{},n.data.gtmData=(0,S.merge)(n.data.gtmData,this.getDefaultGtmData()),this.dialogService.open(t,n)}openInfoDialog(t){return this.dialogService.openInfoDialog(t).pipe((0,u.takeUntil)(this.destroyed$))}openConfirmationDialog(t,n,o){const i=this.dialogService.openConfirmationDialog(t).pipe((0,u.takeUntil)(this.destroyed$),(0,u.share)());return n&&i.pipe((0,u.filter)(r=>r===I.YesButton.result)).subscribe(n),o&&i.pipe((0,u.filter)(r=>r===I.NoButton.result)).subscribe(o),i}ngOnInit(){this.loadInitialPageData()}ngOnDestroy(){this._destroyedSubject.next(),this._destroyedSubject.complete()}closeButtonVisible(){return!0}}pn.\u0275fac=function(t){return new(t||pn)(e.\u0275\u0275directiveInject(e.Injector))},pn.\u0275dir=e.\u0275\u0275defineDirective({type:pn});class Ra extends pn{get isChanged(){return this._isChanged}set isChanged(t){this.setIsChanged(t)}preProcessLoadedPageModel(t){return this.modelSnap=this.cloneModel(super.preProcessLoadedPageModel(t)),t}loadModelFromSnap(){this.model=this.cloneModel(this.modelSnap)}injectDependencies(){super.injectDependencies(),this.location=this.injector.get(s.Location),this.activateRoute=this.injector.get(we.ActivatedRoute)}preProcessModelForSave(t){return t}createChangeBroadcastService(){return this.injector.get(Ct)}getDefaultSaveGtmData(){return{}}getSaveSuccessGtmData(){return(0,S.merge)(this.getDefaultSaveGtmData(),{action:"Save"})}getSaveErrorGtmData(){return(0,S.merge)(this.getDefaultSaveGtmData(),{action:"SaveError"})}preProcessSaveResponse(t){return t}canShowUnsuccessfulSaveMessage(){return!0}applySaveUnsuccessfulResponse(t,n){this.sendGtmAction(this.getSaveErrorGtmData()),this.hideBodyMask(),this.canShowUnsuccessfulSaveMessage()&&n&&n.errorInfo&&this.openInfoDialog(n.errorInfo.message)}applySaveSuccessfulResponse(t,n){this.sendGtmAction(this.getSaveSuccessGtmData()),this.modelSnap=this.cloneModel(t),this.isChanged=!1,this.changeBroadcastService&&this.changeBroadcastService.emit(this.model)}cloneModel(t){return(0,S.cloneDeep)(t)}applySaveResponse(t,n){if(!n||!n.success){this.applySaveUnsuccessfulResponse(t,n);return}this.applySaveSuccessfulResponse(t,n)}executeSave(){const t=this.preProcessModelForSave(this.model),n=this.savePageData(t).pipe((0,u.share)());return n.subscribe(o=>{o=this.preProcessSaveResponse(o),this.applySaveResponse(t,o)}),n}closeAfterSave(){this.goBackToSection()}recordSaved(t){t&&t.success&&this.closePageAfterSave&&this.closeAfterSave()}goBackToSection(){this.location.back()}isModelValid(){return Boolean(this.model)}constructor(t){super(t),this.closePageAfterSave=!0,this._isChanged=!1,this.changeBroadcastService=this.createChangeBroadcastService()}setIsChanged(t=!0){this._isChanged=t}cancel(){this.loadModelFromSnap(),this.isChanged=!1}save(){this.showBodyMask();const t=this.executeSave().pipe((0,u.share)());return t.subscribe(n=>{this.hideBodyMask(),this.recordSaved(n)}),t}saveButtonVisible(){return this.isChanged&&!this.hasLoadingError}saveButtonEnabled(){return this.isModelValid()}cancelButtonVisible(){return this.saveButtonVisible()}closeButtonVisible(){return super.closeButtonVisible()&&!this.saveButtonVisible()}close(){if(this.window.history.length===1){this.window.close();return}this.goBackToSection()}}Ra.\u0275fac=function(t){return new(t||Ra)(e.\u0275\u0275directiveInject(e.Injector))},Ra.\u0275dir=e.\u0275\u0275defineDirective({type:Ra,features:[e.\u0275\u0275InheritDefinitionFeature]});class Ka extends z.MatLegacyTableDataSource{constructor(t=[]){super(t),this._visibleContentSize=0,this._pageSize=40,this.resetVisibleContentSize()}resetVisibleContentSize(){this._visibleContentSize=this._pageSize}loadNext(){this._visibleContentSize+=this._pageSize,this._updateChangeSubscription()}_pageData(t){return this._visibleContentSize>=t.length?t:t.slice(0,this._visibleContentSize)}}class hr extends fe.BaseProfileData{}class mn extends pn{constructor(){super(...arguments),this._selected$=new C.Subject,this.searchKeyValue="",this.searchSettingsValue=this.getDefaultSearchSettings(),this.selected$=this._selected$.asObservable()}get tableDataSource(){return this._tableDataSource}set searchKey(t){this.searchKeyValue=t,this.onSearchKeySet(t)}get searchKey(){return this.searchKeyValue}set searchSettings(t){this.searchSettingsValue=t,this.onSearchSettingsSet(t)}get searchSettings(){return this.searchSettingsValue}set sort(t){this._sort!==t&&(this._sort=t,this.tableDataSource&&t&&(this.tableDataSource.sort=t))}get sort(){return this._sort}set dataSchema(t){this.checkTableIsNotEmpty(),this.table.dataSchema=t}get dataSchema(){return this.checkTableIsNotEmpty(),this.table.dataSchema}set selected(t){this.checkTableIsNotEmpty(),this.table.selected=t,this._selected$.next(t)}get selected(){return this.checkTableIsNotEmpty(),this.table.selected}set selectMode(t){this.checkTableIsNotEmpty(),this.table.selectMode=t}get selectMode(){return this.checkTableIsNotEmpty(),this.table.selectMode}_getSearchSettingsColumnSelectors(){const t=this.getSearchSettingsColumnDescriptors(),n=this.searchSettings.columns;return!t||!n?[]:t.filter(i=>n.includes(i.name)).map(i=>i.selector??i.name)}getDefaultSearchSettings(){return{searchStrategy:m.SearchStrategy.Contains,columns:[]}}getSearchSettingsColumnDescriptors(){return[]}createEmptyModel(){return[]}onModelSet(t){t=t||[],super.onModelSet(t),this.tableDataSource&&(this.tableDataSource.data=t),this.resetVisibleContent()}injectDependencies(){super.injectDependencies(),this.userProfileService=this.injector.get(fe.UserProfileService)}beforePageDataLoading(){this.tableDataSource.resetVisibleContentSize(),super.beforePageDataLoading()}createEqualityPredicate(){return(t,n)=>t===n}createSearchPredicate(){const t=this.getStaticSearchColumns();return(0,m.createSearchLowerCasePredicate)(t.concat(this._getSearchSettingsColumnSelectors()),this.searchSettings.searchStrategy)}createChangeBroadcastService(){return this.injector.get(Ct)}updateRecord(t,n){Object.assign(t,n)}applySearchSettings(){const t=this.createSearchPredicate();t&&this.tableDataSource&&(this.tableDataSource.filterPredicate=t)}initSelectedChange(){this.checkTableIsNotEmpty(),this.table.selectedChange.subscribe(t=>{this._selected$.next(t),this.onSelectedChanged(t)})}initTableComponent(){this.dataSchema=this.getDefaultDataSchema(),this.selectMode=this.getDefaultSelectMode(),this.initSelectedChange()}initTableDataSource(){this.setTableDataSource(new Ka(this.model)),this.applySearchSettings()}onSelectedChanged(t){}onRecordChanged(t,n){t&&this.updateRecord(t,n)}initChangeBroadcastSubscription(){const t=this.createEqualityPredicate();!t||(this.changeBroadcastService=this.createChangeBroadcastService(),this.changeBroadcastService.subscribe(n=>{const o=this.model.find(i=>t(i,n));this.onRecordChanged(o,n)}))}loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}getProfileData(){const t={searchKey:this.searchKey};return(0,S.isEqual)(this.searchSettings,this.getDefaultSearchSettings())||(t.searchSettings=this.searchSettings),t}applyProfileData(t){t.searchSettings&&(this.searchSettingsValue=t.searchSettings,this.applySearchSettings()),t.searchKey&&(this.searchKeyValue=t.searchKey,this.applySearchKey())}loadUserProfileData(){const t=this.userProfileService.getProfile(this.getProfileDataKey()).pipe((0,u.share)());return t.subscribe(n=>{n&&this.applyProfileData(n)}),t}saveUserProfileData(){const t=this.getProfileData(),n=this.userProfileService.saveProfile(this.getProfileDataKey(),t).pipe((0,u.share)());return n.subscribe(),n}resetVisibleContent(){!this.scrollPageToBottomObserver||!this.tableDataSource||(this.scrollPageToBottomObserver.resetScrollMaxPosition(),this.tableDataSource.resetVisibleContentSize())}applySearchKey(){this.tableDataSource.filter=this.searchKey&&this.searchKey.trim().toLowerCase()}onSearchKeySet(t){this.applySearchKey(),this.onSearchConditionsChanged()}onSearchSettingsSet(t){this.applySearchSettings(),this.applySearchKey(),this.onSearchConditionsChanged()}onSearchConditionsChanged(){this.resetVisibleContent(),this.saveUserProfileData()}initScrollToBottomObserver(){this.scrollPageToBottomObserver=this.scrollToBottomObserverFactory.createObserver(this.window,this.loadNextData.bind(this))}setTableDataSource(t){this.checkTableIsNotEmpty(),this.table.dataSource=t,this._tableDataSource=t}getSearchSettingsColumnCaption(t){let n=t.caption;if(!n&&this.dataSchema&&(n=this.dataSchema.columns.find(o=>o.name===t.name)?.caption),!n)throw new Error(`Caption used for search settings of column "${t.name}" is not specified. Please specify it in search columns descriptor or table data schema.`);return n}checkTableIsNotEmpty(){if(!this.table)throw new Error("Section page should contain an instance of `TableComponent`.")}ngOnInit(){this.initTableComponent(),this.initTableDataSource(),this.initChangeBroadcastSubscription(),this.loadUserProfileData().subscribe(()=>{super.ngOnInit()})}ngAfterViewInit(){this.initScrollToBottomObserver()}ngOnDestroy(){super.ngOnDestroy(),this.scrollPageToBottomObserver&&this.scrollPageToBottomObserver.destroy()}isEmpty(){return this.checkTableIsNotEmpty(),!this.isLoading&&this.table.isEmpty()}getSearchInputColumnConfigs(){return(this.getSearchSettingsColumnDescriptors()??[]).map(n=>({caption:this.getSearchSettingsColumnCaption(n),name:n.name}))}areFiltersEmpty(){return!this.searchKey}close(){const t=this.window.location.href;this.window.history.back(),setTimeout(()=>{this.window.location.href===t&&this.window.close()},200)}}mn.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(mn)))(n||mn)}}(),mn.\u0275dir=e.\u0275\u0275defineDirective({type:mn,viewQuery:function(t,n){if(t&1&&(e.\u0275\u0275viewQuery(Pe.MatSort,5),e.\u0275\u0275viewQuery(Z,7)),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.sort=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.table=o.first)}},features:[e.\u0275\u0275InheritDefinitionFeature]});class fr extends mn{get tableDataSource(){return this._internalTableDataSource}getDefaultSelectMode(){return"none"}setTableDataSource(t){this._internalTableDataSource=t}initTableComponent(){}getDefaultDataSchema(){return null}isEmpty(){const t=this.tableDataSource;return!this.isLoading&&(t.data.length===0||t.filteredData.length===0)}}var Cr=p(42378),yt=p.n(Cr);class Xo{}class un{constructor(){this._value=new Xo,this.valueChange=new e.EventEmitter}get startDate(){return this._startDate}set startDate(t){t.isSame(this._startDate)||(this._value.startDate=t.toDate(),this._startDate=t)}get endDate(){return this._endDate}set endDate(t){t.isSame(this._endDate)||(this._value.endDate=t.toDate(),this._endDate=t)}set value(t){const n={startDate:(0,m.startOfDay)(t.startDate),endDate:(0,m.endOfDay)(t.endDate)};this._value=n,this._startDate=yt()(n.startDate),this._endDate=yt()(n.endDate)}get value(){return this._value}onValueChanged(){this.value.endDate=(0,m.endOfDay)(this.value.endDate),this.valueChange.emit(this.value)}}un.\u0275fac=function(t){return new(t||un)},un.\u0275cmp=e.\u0275\u0275defineComponent({type:un,selectors:[["ts-date-range"]],inputs:{startDateRequired:"startDateRequired",endDateRequired:"endDateRequired",maxDate:"maxDate",value:"value"},outputs:{valueChange:"valueChange"},decls:15,vars:14,consts:[["floatLabel","never",1,"date-picker"],["matInput","",3,"max","matDatepicker","ngModel","disabled","ngModelChange","dateChange"],["matSuffix","",3,"for"],["svgIcon","start-date","matDatepickerToggleIcon","",1,"date-picker-icon"],["disabled","false"],["startDatePicker",""],[1,"period-separator"],["matInput","",3,"min","max","matDatepicker","ngModel","disabled","ngModelChange","dateChange"],["svgIcon","end-date","matDatepickerToggleIcon","",1,"date-picker-icon"],["endDatePicker",""]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"input",1),e.\u0275\u0275listener("ngModelChange",function(i){return n.startDate=i})("dateChange",function(){return n.onValueChanged()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"mat-datepicker-toggle",2),e.\u0275\u0275element(3,"mat-icon",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-datepicker",4,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",0)(10,"input",7),e.\u0275\u0275listener("ngModelChange",function(i){return n.endDate=i})("dateChange",function(){return n.onValueChanged()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-datepicker-toggle",2),e.\u0275\u0275element(12,"mat-icon",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"mat-datepicker",4,9),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(5),i=e.\u0275\u0275reference(14);e.\u0275\u0275advance(1),e.\u0275\u0275property("max",n.value.endDate)("matDatepicker",o)("ngModel",n.startDate)("disabled",n.startDateRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",o),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,12,"DateRange.To")),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",n.value.startDate)("max",n.maxDate)("matDatepicker",i)("ngModel",n.endDate)("disabled",n.endDateRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",i)}},dependencies:[c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,x.MatDatepicker,x.MatDatepickerInput,x.MatDatepickerToggle,x.MatDatepickerToggleIcon,_.MatLegacyFormField,_.MatLegacySuffix,v.MatIcon,D.MatLegacyInput,b.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .period-separator[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-top:5px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]{width:20px!important;height:20px;padding-bottom:4px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]     svg{width:20px;height:20px}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-1em}"]});function _r(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.title)}}const yr=[[["","header",""]],"*"],vr=["[header]","*"];class B{get logoLinkUrl(){return B._logoLinkUrl}get logoImageUrl(){return B._logoImageUrl}constructor(t,n){this._environment=t,this._runtimeUrlProvider=n}static setLogoLinkUrl(t){B._logoLinkUrl=t}static setLogoImageUrl(t){B._logoImageUrl=t}buildLogoImageUrl(){const t=Date.now().toString().slice(0,-5);return"img/terrasoft.axd?s=nui-binary-syssetting&r=MenuLogoImage&source_hash="+t}initDefaultLogoImageUrl(){B.setLogoImageUrl("assets/app-logo.svg")}ngOnInit(){if(!this.logoLinkUrl){const t=this._runtimeUrlProvider.getUrl();B.setLogoLinkUrl(t)}this.logoImageUrl||B.setLogoImageUrl(s.Location.joinWithSlash(this._environment.workspaceBaseUrl,this.buildLogoImageUrl()))}}B._logoLinkUrl="",B._logoImageUrl="",B.\u0275fac=function(t){return new(t||B)(e.\u0275\u0275directiveInject("environment"),e.\u0275\u0275directiveInject(m.RuntimeUrlProvider))},B.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["ts-header"]],inputs:{title:"title"},ngContentSelectors:vr,decls:10,vars:3,consts:[[1,"top-container"],[1,"left-container"],["class","title",4,"ngIf"],[1,"content-wrapper"],[1,"right-container"],[1,"logo-wrapper",3,"href"],["alt","logo image",1,"logo",3,"src","error"],[1,"content-wrapper","bottom-content-wrapper"],[1,"title"]],template:function(t,n){t&1&&(e.\u0275\u0275projectionDef(yr),e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,_r,2,1,"span",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275projection(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"a",5)(7,"img",6),e.\u0275\u0275listener("error",function(){return n.initDefaultLogoImageUrl()}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275projection(9,1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.title),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("href",n.logoLinkUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("src",n.logoImageUrl,e.\u0275\u0275sanitizeUrl))},dependencies:[s.NgIf],styles:["[_nghost-%COMP%]{display:block;padding:12px 22px 12px 21px}.top-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;overflow:hidden}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:Bpmonline Open Sans Light,serif;font-size:26px;height:26px}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]{display:block}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;max-height:28px;max-width:134px}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.content-wrapper[_ngcontent-%COMP%]:not(:empty).top-left-content-wrapper:not(:first-child){padding-left:15px}.content-wrapper[_ngcontent-%COMP%]:not(:empty).bottom-content-wrapper{margin:14px 0 0}"]});var Te=p(73539),gn;(function(a){a.All="0",a.Section="1",a.Lookup="2"})(gn||(gn={}));class hn{constructor(){this.value=gn.All,this.valueChange=new e.EventEmitter}onValueChanged(t){this.value=t.value,this.valueChange.emit(this.value)}}hn.\u0275fac=function(t){return new(t||hn)},hn.\u0275cmp=e.\u0275\u0275defineComponent({type:hn,selectors:[["ts-object-type-filter"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:22,vars:14,consts:[[1,"type-filter"],["disableOptionCentering","true",3,"value","valueChange","selectionChange"],["typeViewFilter",""],[1,"filter-type-caption"],["value","0",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-0"],["value","1",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-1"],["value","2",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-2"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-select",1,2),e.\u0275\u0275listener("valueChange",function(i){return n.value=i})("selectionChange",function(i){return n.onValueChanged(i)}),e.\u0275\u0275elementStart(3,"mat-select-trigger"),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"mat-option",4),e.\u0275\u0275element(8,"span",5),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"mat-option",6),e.\u0275\u0275element(13,"span",7),e.\u0275\u0275elementStart(14,"span"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"mat-option",8),e.\u0275\u0275element(18,"span",9),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()()()()),t&2){const o=e.\u0275\u0275reference(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("filter-type-icon filter-type-icon-",n.value,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.triggerValue),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,8,"ObjectTypeFilter.AllObjects")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,10,"ObjectTypeFilter.Sections")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,12,"ObjectTypeFilter.Lookups"))}},dependencies:[Te.MatLegacyOption,_.MatLegacyFormField,$.MatLegacySelect,$.MatLegacySelectTrigger,b.TranslatePipe],styles:["[_nghost-%COMP%]{line-height:16px;padding:4px 10px 0 0;min-width:100px}.filter-type-icon[_ngcontent-%COMP%]{width:16px;height:16px;background-repeat:no-repeat;margin-right:6px;display:inline-block}.filter-type-icon.filter-type-icon-0[_ngcontent-%COMP%]{background-image:url(filter_objects.svg)}.filter-type-icon.filter-type-icon-1[_ngcontent-%COMP%]{background-image:url(filter_sections.svg)}.filter-type-icon.filter-type-icon-2[_ngcontent-%COMP%]{background-image:url(filter_lookups.svg)}"]});function Mr(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.caption," ")}}class fn{constructor(t,n){this.entitySchemaService=t,this.data=n,this.isLoading=!1}_prepareEntityColumns(t){if(!t||!t.success){this.isLoading=!1;return}this.entitySchemaColumns=t.entitySchema.columns,this.entitySchemaColumns.sort((n,o)=>n.caption<o.caption?-1:1),this.data&&this.data.excludeFilter&&(this.entitySchemaColumns=this.entitySchemaColumns.filter(this.data.excludeFilter)),this.isLoading=!1}ngOnInit(){!this.data||!this.data.entitySchemaUId||(this.isLoading=!0,this.entitySchemaService.getEntitySchemaByUId(this.data.entitySchemaUId).subscribe(this._prepareEntityColumns.bind(this)))}onFilteredEntitySchemaColumnSelected(t){const n=t.option.value;this.selectedColumn=n}getEntitySchemaColumnCaption(t){return t&&t.caption}search(t){if(!t){this.filteredEntitySchemaColumns=this.entitySchemaColumns;return}t=t.toLowerCase(),this.filteredEntitySchemaColumns=this.entitySchemaColumns.filter(n=>n.caption.toLowerCase().indexOf(t)!==-1)}}fn.\u0275fac=function(t){return new(t||fn)(e.\u0275\u0275directiveInject(m.EntitySchemaService),e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},fn.\u0275cmp=e.\u0275\u0275defineComponent({type:fn,selectors:[["ts-select-entity-schema-column-dialog"]],decls:22,vars:17,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"mat-dialog-close","disabled"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],["floatLabel","never",1,"entity-schema-column"],["type","text","matInput","",3,"placeholder","matAutocomplete","input","focus"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275element(5,"mat-icon",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"button",4),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",5),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",6)(14,"mat-form-field",7)(15,"input",8),e.\u0275\u0275listener("input",function(i){return n.search(i.target.value)})("focus",function(){return n.search("")}),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",9),e.\u0275\u0275element(18,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"mat-autocomplete",11,12),e.\u0275\u0275listener("optionSelected",function(i){return n.onFilteredEntitySchemaColumnSelected(i)}),e.\u0275\u0275template(21,Mr,2,2,"mat-option",13),e.\u0275\u0275elementEnd()()),t&2){const o=e.\u0275\u0275reference(20);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,9,"SelectEntitySchemaColumnDialog.Title")),e.\u0275\u0275advance(5),e.\u0275\u0275property("mat-dialog-close",n.selectedColumn)("disabled",!n.selectedColumn),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,11,"SelectEntitySchemaColumnDialog.Select")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,13,"SelectEntitySchemaColumnDialog.Cancel")),e.\u0275\u0275advance(4),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(16,15,"SelectEntitySchemaColumnDialog.SelectFieldPlaceholder"))("matAutocomplete",o),e.\u0275\u0275advance(4),e.\u0275\u0275property("displayWith",n.getEntitySchemaColumnCaption),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.filteredEntitySchemaColumns)}},dependencies:[s.NgForOf,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,Te.MatLegacyOption,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,_.MatLegacyFormField,_.MatLegacySuffix,v.MatIcon,D.MatLegacyInput,b.TranslatePipe],styles:["[_nghost-%COMP%]{padding:4px 10px 0;min-width:420px;min-height:136px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:23px!important}[mat-dialog-content][_ngcontent-%COMP%]   .field-title[_ngcontent-%COMP%]{font-family:Bpmonline Open Sans,serif;color:#444;font-size:14px;line-height:18px;text-align:left}[mat-dialog-content][_ngcontent-%COMP%]   .entity-schema-column[_ngcontent-%COMP%]{width:100%;line-height:19px;font-size:14px}[mat-dialog-content][_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;line-height:18px!important}"]});var Xa=p(71689),eo=p(96308),Cn=p(99852);class Re extends I.BaseMaterialInput{set maxValue(t){this._maxValue=t}set selected(t){this._selected=t}get formattedValue(){return this._formattedValue}constructor(t,n,o,i,r,d){super(t,n,o),this._element=i,this._cdRef=r,this._formatUtility=d,this._formattedValue="",this._selected=!1,this._maxValue=99999999999e-2,this._maxLargeValue=999999999999,this.controlType="ts-number-input",this.isLargeNumberEnabled=!1,this.inputBlur=new e.EventEmitter,this.precision=2}_updateFormattedValue(){this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new m.NumberFormatConfig({precision:this.precision}))}_exceededMaxValue(t){const n=Math.abs(t),o=n%1;return this.isLargeNumberEnabled&&o===0?n>this._maxLargeValue:n>this._maxValue}ngAfterViewInit(){this._selected&&(this._element.nativeElement.lastElementChild.focus(),this._cdRef.detectChanges())}ngOnInit(){this._updateFormattedValue()}onInputValueChange(){this.callChangeHandler()}onInputFocus(){!this.innerValue||(this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new m.NumberFormatConfig({ignoreThousandSeparator:!0,precision:this.precision})))}writeValue(t){this.setInnerValueSilent(t),this._updateFormattedValue(),this.stateChanges.next(),this._cdRef.detectChanges()}onBlur(t){this._updateFormattedValue(),t&&(t.currentTarget.value=this._formattedValue),this.inputBlur.emit()}onInput(t){let n=t.currentTarget.value;if(n===""){this.setInnerValueSilent(0),this._formattedValue="";return}if(n=this._formatUtility.formatStringValue(n),this.precision===0){const i=this._formatUtility.getNumberFormatInfo().decimalSeparator;n=n.replace(new RegExp(`\\${i}$`),"")}t.currentTarget.value=n;let o=this._formatUtility.parseStringToNumber(n,this.precision);n==="-"&&(o=0),(isNaN(o)||this._exceededMaxValue(o))&&(o=this.innerValue,t.currentTarget.value=this._formatUtility.formatNumberValue(o,new m.NumberFormatConfig({ignoreThousandSeparator:!0,precision:this.precision}))),this.setInnerValueSilent(o)}}Re.\u0275fac=function(t){return new(t||Re)(e.\u0275\u0275directiveInject(c.NgControl,10),e.\u0275\u0275directiveInject(eo.AutofillMonitor),e.\u0275\u0275directiveInject(Xa.FocusMonitor),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.NumberFormatUtility))},Re.\u0275cmp=e.\u0275\u0275defineComponent({type:Re,selectors:[["ts-number-input"]],inputs:{isLargeNumberEnabled:"isLargeNumberEnabled",maxValue:"maxValue",selected:"selected",precision:"precision"},outputs:{inputBlur:"inputBlur"},features:[e.\u0275\u0275ProvidersFeature([{provide:_.MatLegacyFormFieldControl,useExisting:Re}]),e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["matInput","","dir","ltr",3,"value","disabled","required","change","blur","input","focus"],["input",""]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("change",function(){return n.onInputValueChange()})("blur",function(i){return n.onBlur(i)})("input",function(i){return n.onInput(i)})("focus",function(){return n.onInputFocus()}),e.\u0275\u0275elementEnd()),t&2&&e.\u0275\u0275property("value",n.formattedValue)("disabled",n.disabled)("required",n.required)},dependencies:[Cn.Dir,D.MatLegacyInput],styles:["input[_ngcontent-%COMP%]{text-align:left;border:0;height:100%;width:100%}input[_ngcontent-%COMP%]:focus{outline-style:none}"],changeDetection:0});class je{}je.\u0275fac=function(t){return new(t||je)},je.\u0275mod=e.\u0275\u0275defineNgModule({type:je}),je.\u0275inj=e.\u0275\u0275defineInjector({providers:[m.NumberFormatUtility],imports:[s.CommonModule,c.FormsModule,_.MatLegacyFormFieldModule,D.MatLegacyInputModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(je,{declarations:[Re],imports:[s.CommonModule,c.FormsModule,_.MatLegacyFormFieldModule,D.MatLegacyInputModule],exports:[Re]})}();var ke=p(88733),br=p(83676);class bo{constructor(t){this._overlayRef=t,this.afterClosed$=new C.Subject}_close(t){this._overlayRef.dispose(),this.afterClosed$.next(t),this.afterClosed$.complete()}close(t){this._close(t)}}var va=p(8785);function xr(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-checkbox",8),e.\u0275\u0275listener("change",function(i){const d=e.\u0275\u0275restoreView(n).$implicit,f=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(f.onColumnSelectedChange(d.name,i))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("checked",o.isColumnSelected(n.name)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.getColumnCheckboxCaption(n))}}function Sr(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,xr,2,2,"mat-checkbox",7),e.\u0275\u0275element(2,"mat-divider"),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.columnConfigs)}}function Ir(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-radio-button",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.caption," ")}}const ei=new e.InjectionToken("SEARCH_INPUT_SETTINGS_DATA");class Ma{constructor(t,n,o){this._settingsOverlayRef=t,this._translateService=n,this.searchStrategyOptions=[{value:m.SearchStrategy.StartsWith,caption:this._translateService.instant("SearchInput.Settings.StartsWith")},{value:m.SearchStrategy.Contains,caption:this._translateService.instant("SearchInput.Settings.Contains")},{value:m.SearchStrategy.Equals,caption:this._translateService.instant("SearchInput.Settings.Equals")}];const i=o?.settings||{};this.settings={searchStrategy:i.searchStrategy??m.SearchStrategy.Contains,columns:i.columns?.slice()??[]},this.columnConfigs=o?.columnConfigs??[]}_setColumnSelected(t,n){const o=this.settings.columns;if(n)o.includes(t)||o.push(t);else{const i=o.indexOf(t);i!==-1&&o.splice(i,1)}}close(){this._settingsOverlayRef.close(null)}apply(){this._settingsOverlayRef.close(this.settings)}isColumnSelected(t){return this.settings.columns.includes(t)}onColumnSelectedChange(t,n){this._setColumnSelected(t,n.checked)}getColumnCheckboxCaption(t){const n=t.caption,o=this._translateService.instant("SearchInput.Settings.SearchColumnTemplate");return va.String.Format(o,n)}}Ma.\u0275fac=function(t){return new(t||Ma)(e.\u0275\u0275directiveInject(bo),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(ei))},Ma.\u0275cmp=e.\u0275\u0275defineComponent({type:Ma,selectors:[["ts-search-input-settings"]],decls:11,vars:9,consts:[[1,"search-input-settings-container"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"bottom-actions"],["mat-button","",1,"",3,"click"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[3,"checked","change",4,"ngFor","ngForOf"],[3,"checked","change"],[3,"value"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Sr,3,1,"div",1),e.\u0275\u0275elementStart(2,"mat-radio-group",2),e.\u0275\u0275listener("ngModelChange",function(i){return n.settings.searchStrategy=i}),e.\u0275\u0275template(3,Ir,2,2,"mat-radio-button",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4)(5,"button",5),e.\u0275\u0275listener("click",function(){return n.close()}),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275listener("click",function(){return n.apply()}),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd()()()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.columnConfigs.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.settings.searchStrategy),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.searchStrategyOptions),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,5,"SearchInput.Settings.Cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,"SearchInput.Settings.Apply")))},dependencies:[s.NgForOf,s.NgIf,ke.MatLegacyRadioGroup,ke.MatLegacyRadioButton,c.NgControlStatus,c.NgModel,w.MatLegacyButton,P.MatLegacyCheckbox,ut.MatDivider,b.TranslatePipe],styles:[`.search-input-settings-container{background:#ffffff 0% 0% no-repeat padding-box;box-shadow:0 0 3px #0000001a;border:1px solid #e2e2e2;opacity:1;padding:11px;min-width:220px}.search-input-settings-container mat-checkbox{display:block}.search-input-settings-container mat-checkbox,.search-input-settings-container mat-radio-button{margin-left:4px;margin-right:4px}.search-input-settings-container mat-checkbox:not(:first-child),.search-input-settings-container mat-radio-button:not(:first-child){margin-top:8px}.search-input-settings-container mat-divider{margin:14px 0}.search-input-settings-container .bottom-actions{display:flex;justify-content:flex-end;margin:8px 0 4px}.search-input-settings-container .bottom-actions button:not(:first-child){margin-left:12px}
`],encapsulation:2});const wr={hasBackdrop:!0,backdropClass:"search-settings-backdrop",alignToElementRef:null,data:null};class _n{constructor(t,n){this._injector=t,this._overlay=n}_getOverlayConfig(t){const o=this._overlay.position().flexibleConnectedTo(t.alignToElementRef).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:6}]);return new Va.OverlayConfig({hasBackdrop:t.hasBackdrop,backdropClass:t.backdropClass,panelClass:t.panelClass,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:o})}_createOverlay(t){const n=this._getOverlayConfig(t);return this._overlay.create(n)}_createInjector(t,n){return e.Injector.create({providers:[{provide:bo,useValue:n},{provide:ei,useValue:t.data}]})}_attachContainerPortal(t,n,o){const i=this._createInjector(n,o),r=new br.ComponentPortal(Ma,null,i);return t.attach(r).instance}openSettingsMenu(t){const n={...wr,...t},o=this._createOverlay(n),i=new bo(o),r=this._attachContainerPortal(o,n,i);return o.backdropClick().subscribe(d=>{r.close()}),i.afterClosed$}}_n.\u0275fac=function(t){return new(t||_n)(e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(Va.Overlay))},_n.\u0275prov=e.\u0275\u0275defineInjectable({token:_n,factory:_n.\u0275fac});const Dr=["searchSettingsButton"];function Tr(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.openSettingsMenu())}),e.\u0275\u0275element(1,"div",7,8),e.\u0275\u0275elementEnd()}}class ze{set value(t){this._value=t,this._emittedValue=t}get value(){return this._value}_emitValueChange(t){this._emittedValue!==t&&(this._emittedValue=t,this.valueChange.emit(t))}_changeSettings(t){t&&!(0,S.isEqual)(t,this.settings)&&(this.settings=t,this.settingsChange.emit(t))}constructor(t,n){this._translateService=t,this._searchInputSettingsService=n,this._value="",this._valueChangeDebounceTime=500,this._emitValueChangeWithDebounce=(0,S.debounce)(o=>this._emitValueChange(o),this._valueChangeDebounceTime),this.showSettings=!1,this.settings={searchStrategy:m.SearchStrategy.Contains,columns:[]},this.settingsChange=new e.EventEmitter,this.valueChange=new e.EventEmitter,this.columnConfigs=[]}ngOnInit(){this.placeholder||(this.placeholder=this._translateService.instant("SearchInput.Placeholder"))}onValueChanged(t){t!==this._value&&(this._value=t,this._emitValueChangeWithDebounce(t))}onClear(){const t="";this._value=t,this._emitValueChangeWithDebounce.cancel(),this._emitValueChange(t)}openSettingsMenu(){this._searchInputSettingsService.openSettingsMenu({alignToElementRef:this.settingsButton,data:{settings:this.settings,columnConfigs:this.columnConfigs}}).subscribe(t=>this._changeSettings(t))}}ze.\u0275fac=function(t){return new(t||ze)(e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(_n))},ze.\u0275cmp=e.\u0275\u0275defineComponent({type:ze,selectors:[["ts-search-input"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(Dr,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.settingsButton=o.first)}},inputs:{showSettings:"showSettings",value:"value",placeholder:"placeholder",settings:"settings",columnConfigs:"columnConfigs"},outputs:{settingsChange:"settingsChange",valueChange:"valueChange"},decls:6,vars:5,consts:[["svgIcon","search",1,"search-icon"],["floatLabel","never"],["matInput","","type","text","spellcheck","false","autocomplete","off",1,"search-input-field",3,"placeholder","value","keyup"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close",3,"click"],["svgIcon","close"],["mat-icon-button","","matSuffix","","class","search-settings-button",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",1,"search-settings-button",3,"click"],[1,"search-settings-button-icon"],["searchSettingsButton",""]],template:function(t,n){t&1&&(e.\u0275\u0275element(0,"mat-icon",0),e.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"input",2),e.\u0275\u0275listener("keyup",function(i){return n.onValueChanged(i.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("click",function(){return n.onClear()}),e.\u0275\u0275element(4,"mat-icon",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Tr,3,0,"button",5),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",n.placeholder)("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("visibility",n.value?"inherit":"hidden"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.showSettings))},dependencies:[s.NgIf,w.MatLegacyButton,_.MatLegacyFormField,_.MatLegacySuffix,v.MatIcon,D.MatLegacyInput],styles:[`ts-search-input{display:flex}ts-search-input mat-icon[svgicon=search]{width:16px;height:16px;margin-inline-end:6px!important;padding-top:8px!important}ts-search-input mat-form-field{flex-grow:1}ts-search-input mat-form-field .mat-form-field-wrapper{margin-bottom:-1em}ts-search-input mat-form-field .mat-form-field-wrapper button.close,ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button{height:22px!important;width:22px!important;vertical-align:middle!important}ts-search-input mat-form-field .mat-form-field-wrapper button.close mat-icon{display:block;margin:auto}ts-search-input mat-form-field .mat-form-field-wrapper button.close:focus{border:1px solid #c8c8c8}ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button .search-settings-button-icon{background:url(settings.svg) no-repeat;width:16px;height:16px;margin:auto;display:block}ts-search-input mat-form-field.mat-focused .mat-form-field-label{opacity:0!important}
`],encapsulation:2});class X{}X.\u0275fac=function(t){return new(t||X)},X.\u0275mod=e.\u0275\u0275defineNgModule({type:X}),X.\u0275inj=e.\u0275\u0275defineInjector({providers:[_n],imports:[s.CommonModule,ke.MatLegacyRadioModule,c.FormsModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,M.MatLegacyDialogModule,ut.MatDividerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(X,{declarations:[ze,Ma],imports:[s.CommonModule,ke.MatLegacyRadioModule,c.FormsModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,M.MatLegacyDialogModule,ut.MatDividerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,b.TranslateModule],exports:[ze]})}();var Ce;(function(a){a[a.Number=0]="Number",a[a.ColumnOperand=1]="ColumnOperand",a[a.Operator=2]="Operator",a[a.Cursor=3]="Cursor",a[a.Function=4]="Function"})(Ce||(Ce={}));class Be{constructor(){this.formulaClick=new e.EventEmitter}set caption(t){this._caption=t}get caption(){return this._caption||this.value}set index(t){this._index=t}get index(){return this._index}set value(t){this._value=t}get value(){return this._value}}Be.\u0275fac=function(t){return new(t||Be)},Be.\u0275dir=e.\u0275\u0275defineDirective({type:Be,inputs:{caption:"caption",index:"index",value:"value"},outputs:{formulaClick:"formulaClick"}});class vt extends Be{constructor(){super()}validateInput(t){return null}getFormulaItemType(){return Ce.Cursor}}vt.\u0275fac=function(t){return new(t||vt)},vt.\u0275cmp=e.\u0275\u0275defineComponent({type:vt,selectors:[["ts-formula-cursor-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,consts:[[1,"formula-cursor"]],template:function(t,n){t&1&&e.\u0275\u0275element(0,"div",0)},styles:[`.formula-cursor,.formula-cursor-hidden{width:2px;height:21px;border-radius:2px;margin-left:-1px;margin-right:-1px;background-color:#84a3e3}.formula-input:focus .formula-cursor,.formula-input:focus .formula-cursor-hidden{animation:1s blink step-end infinite}.formula-cursor-hidden{background-color:transparent}@keyframes blink{0%{background-color:#84a3e3}50%{background-color:transparent}}
`],encapsulation:2});class Mt extends Be{constructor(){super()}getFormulaItemType(){return Ce.Function}validateInput(t){return!1}handleItemClick(t){this.formulaClick.emit(t)}}Mt.\u0275fac=function(t){return new(t||Mt)},Mt.\u0275cmp=e.\u0275\u0275defineComponent({type:Mt,selectors:[["ts-formula-function-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-function-item",3,"click"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"span",0),e.\u0275\u0275listener("click",function(i){return n.handleItemClick(i)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-function-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class bt extends Be{constructor(){super()}getFormulaItemType(){return Ce.Number}validateInput(t){return t.length===1&&t.match("[0-9.,]")!=null}handleItemClick(t){this.formulaClick.emit(t)}}bt.\u0275fac=function(t){return new(t||bt)},bt.\u0275cmp=e.\u0275\u0275defineComponent({type:bt,selectors:[["ts-formula-numeric-input-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-number-input-item",3,"click"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"span",0),e.\u0275\u0275listener("click",function(i){return n.handleItemClick(i)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-number-input-item[_ngcontent-%COMP%]{color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class Ue extends Be{constructor(){super()}getFormulaItemType(){return Ce.ColumnOperand}validateInput(t){return!1}handleItemClick(t){this.formulaClick.emit(t)}}Ue.\u0275fac=function(t){return new(t||Ue)},Ue.\u0275cmp=e.\u0275\u0275defineComponent({type:Ue,selectors:[["ts-formula-operand-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matTooltipPosition","below","matTooltipShowDelay","800",1,"formula-operand-item-wrap",3,"matTooltip","click"],[1,"formula-operand-item"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("click",function(i){return n.handleItemClick(i)}),e.\u0275\u0275elementStart(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275property("matTooltip",n.caption),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.caption))},dependencies:[j.MatLegacyTooltip],styles:[`.formula-operand-item-wrap{border-radius:20px;padding:0 16px;border:1px solid #b1b1b1;display:inline-block;margin:-1px 2px 4px}.formula-operand-item-wrap .formula-operand-item{font-size:14px;font-family:Bpmonline Open Sans;font-weight:400;color:#444;text-overflow:ellipsis;overflow:hidden;max-width:160px;white-space:nowrap;display:inline-block;margin-top:2px}.cdk-overlay-container .mat-tooltip{margin-top:4px;padding:10px;font-size:14px;line-height:19px;color:#444;background:#ffffff;word-break:break-word;box-shadow:#0000004d 0 0 .2em;border-radius:0;border-top:2px solid #22ac14;white-space:pre-line;text-overflow:clip}
`],encapsulation:2});class xt extends Be{constructor(){super(),this._allowedOperatorsList=["+","-","/","*","(",")"]}_createFormulaOperatorFilterRegExp(t){let n="";return t.forEach(o=>n+=o),`[${n}]`}getFormulaItemType(){return Ce.Operator}validateInput(t){const n=this._createFormulaOperatorFilterRegExp(this._allowedOperatorsList);return t.match(n)!=null}handleItemClick(t){this.formulaClick.emit(t)}}xt.\u0275fac=function(t){return new(t||xt)},xt.\u0275cmp=e.\u0275\u0275defineComponent({type:xt,selectors:[["ts-formula-operator-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-operator-item",3,"click"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"span",0),e.\u0275\u0275listener("click",function(i){return n.handleItemClick(i)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-operator-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class ba{constructor(){this._formulaItems=[Ue,vt,xt,bt,Mt]}get FormulaItemInstance(){return this._instances?this._instances:(this._instances=[],this._formulaItems.forEach(t=>{const n=this._createFormulaItem(t);this._instances.push(n)}),this._instances)}_createFormulaItem(t){return new t}getFormulaItemType(t){let n=null;return this.FormulaItemInstance.forEach(o=>{o.validateInput(t)&&(n=o.getFormulaItemType())}),n}createComponent(t,n){const o=this.FormulaItemInstance.find(r=>r.getFormulaItemType()===t);return n.createComponent(o.constructor).instance}}ba.\u0275fac=function(t){return new(t||ba)},ba.\u0275prov=e.\u0275\u0275defineInjectable({token:ba,factory:ba.\u0275fac,providedIn:"root"});class kr{constructor(t){Object.assign(this,t)}}class xo{constructor(t){Object.assign(this,t)}}function Er(a,t){}function Nr(a,t){a&1&&e.\u0275\u0275element(0,"div")}class yn{set formulaData(t){t&&!S.isEqual(t,this._formulaData)&&(this._viewClear(),this._formulaData=t,this._generateComponents(),this.focusFormulaInputOnFormulaDataChange&&setTimeout(()=>{this._focusFormulaInput()},0))}get formulaData(){return this._formulaData}constructor(t){this._formulaItemFactory=t,this._formulaData=[],this.focusFormulaInputOnFormulaDataChange=!1,this.itemsChanged=new e.EventEmitter}_viewClear(){const t=this.container&&this.container.viewContainerRef;t&&t.clear()}_insertFormulaItem(t,n){this.formulaData.splice(t,0,n),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_removeFormulaItem(t){this.formulaData.splice(t,1),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_addCursor(t=-1){t=t===-1?this._formulaData.length:t,this._insertFormulaItem(t,new xo({type:Ce.Cursor}))}_removeCursor(){let t=this._getCursorPosition();t===-1&&(t=this._formulaData.length),this._removeFormulaItem(t)}_removeCharBeforeCursor(){const t=this._getCursorPosition()-1;t>=0&&this._removeFormulaItem(t)}_removeCharAfterCursor(){const t=this._getCursorPosition()+1;t<this._formulaData.length&&this._removeFormulaItem(t)}_getCursorPosition(){return this._formulaData.findIndex(t=>t.type===Ce.Cursor)}_moveCursorForward(){const t=this._getCursorPosition();t<this._formulaData.length&&this._moveCursorOnPosition(t+1)}_moveCursorBackward(){const t=this._getCursorPosition()-1;t>=0&&this._moveCursorOnPosition(t)}_moveCursorOnPosition(t){t>this._formulaData.length||(this._removeCursor(),this._addCursor(t))}_focusFormulaInput(){this.container&&this.container.viewContainerRef.element.nativeElement.parentElement.focus()}_getPositionOutsideItems(t){let n=0;const o=t.currentTarget.children[0].clientWidth;return t.offsetX>=o&&(n=this._formulaData.length),n}_addCursorIfNotExists(){let t=this._getCursorPosition();t===-1&&(t=this.formulaData.length,this._addCursor(t))}_addItemsFromTemplate(t){let n=this._getCursorPosition();this.formulaData.splice(n,0,...t.items),S.isNumber(t.cursorPosition)&&(n+=t.cursorPosition,this._moveCursorOnPosition(n))}_generateComponents(){this._viewClear(),this._formulaData.forEach((t,n)=>{this._generateComponent(n,t)})}_generateComponent(t,n){t===0&&this._viewClear();const o=this._formulaItemFactory.createComponent(n.type,this.container.viewContainerRef);o.caption=n.caption,o.value=n.value,o.formulaClick.subscribe(i=>{this.handleItemClick(i,t)})}ngOnDestroy(){this._viewClear()}handleClick(t){const n=this._getPositionOutsideItems(t);this._getCursorPosition()===-1?this._addCursor(n):this._moveCursorOnPosition(n),t.stopPropagation()}handleItemClick(t,n){const i=t.currentTarget.getBoundingClientRect(),r=t.clientX,d=i.left+i.width/2,f=this._getCursorPosition();let E=n;r<d?f!==-1&&f<n&&(E-=1):(f===-1||f>n)&&(E+=1),this._moveCursorOnPosition(E),t.stopPropagation()}handleKeyDown(t){const n=t.key;switch(n){case"Backspace":this._removeCharBeforeCursor();break;case"Delete":this._removeCharAfterCursor();break;case"ArrowLeft":this._moveCursorBackward();break;case"ArrowRight":this._moveCursorForward();break;default:const o=this._getCursorPosition(),i=this._formulaItemFactory.getFormulaItemType(n);Object.values(Ce).includes(i)&&this._insertFormulaItem(o,new xo({type:i,caption:n,value:n}))}}addItem(t){this._addCursorIfNotExists(),S.isEmpty(t.template)||S.isEmpty(t.template.items)?this._insertFormulaItem(this._getCursorPosition(),t):this._addItemsFromTemplate(t.template),this._focusFormulaInput()}deletePreviousItem(){this._removeCharBeforeCursor()}}yn.\u0275fac=function(t){return new(t||yn)(e.\u0275\u0275directiveInject(ba))},yn.\u0275cmp=e.\u0275\u0275defineComponent({type:yn,selectors:[["ts-formula-editor"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(I.ViewContainerRefDirective,7),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.container=o.first)}},inputs:{formulaData:"formulaData",focusFormulaInputOnFormulaDataChange:"focusFormulaInputOnFormulaDataChange"},outputs:{itemsChanged:"itemsChanged"},decls:6,vars:1,consts:[["tabindex","0","dir","ltr",1,"formula-input",3,"click","keydown"],[1,"pre-formula-item"],["tsViewContainerRef",""],[4,"ngFor","ngForOf"],[1,"post-formula-item",3,"click"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("click",function(i){return n.handleClick(i)})("keydown",function(i){return n.handleKeyDown(i)}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275text(2,"="),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Er,0,0,"ng-template",2),e.\u0275\u0275template(4,Nr,1,0,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275listener("click",function(i){return n.deletePreviousItem(),i.stopPropagation()}),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.formulaData))},dependencies:[s.NgForOf,I.ViewContainerRefDirective,Cn.Dir],styles:[`.formula-input{-webkit-user-select:none;user-select:none;display:inline-flex;outline:none;flex-wrap:wrap;padding:0 .3em .2em;min-height:30px;border-bottom:1px solid #e7e7e7;width:100%;cursor:text}.pre-formula-item{font-size:14pt;width:20px;line-height:19px}.post-formula-item{margin-left:auto;-webkit-user-select:none;user-select:none;cursor:pointer;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KCS5zdDF7ZmlsbDojODE5NUIzO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cmVjdCBjbGFzcz0ic3QwIiB3aWR0aD0iMTgiIGhlaWdodD0iMTYiLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xOCwxNUg1LjhMMC40LDhsNS40LTdIMThMMTgsMTV6IE02LjIsMTRIMTdsMC0xMkg2LjJMMS42LDhMNi4yLDE0eiIvPgoJPC9nPgoJPGc+CgkJPHJlY3QgeD0iMTAuNSIgeT0iMy44IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0yLjQzNSAxMC4xMjEzKSIgY2xhc3M9InN0MSIgd2lkdGg9IjEiIGhlaWdodD0iOC41Ii8+Cgk8L2c+Cgk8Zz4KCQk8cmVjdCB4PSI2LjgiIHk9IjcuNSIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAtMi40MzUgMTAuMTIxMykiIGNsYXNzPSJzdDEiIHdpZHRoPSI4LjUiIGhlaWdodD0iMSIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=);width:18px;height:16px;margin-top:4px;margin-bottom:auto}
`],encapsulation:2});const cp=[Ue,vt,xt,bt,Mt];class vn{}vn.\u0275fac=function(t){return new(t||vn)},vn.\u0275mod=e.\u0275\u0275defineNgModule({type:vn}),vn.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,I.ViewContainerRefModule,j.MatLegacyTooltipModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(vn,{declarations:[Ue,vt,xt,bt,Mt,yn],imports:[s.CommonModule,I.ViewContainerRefModule,j.MatLegacyTooltipModule],exports:[Ue,vt,xt,bt,Mt,yn]})}();class St extends he{constructor(){super(...arguments),this.getRegisteredEvents=()=>[{name:"click"}]}}St.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(St)))(n||St)}}(),St.\u0275cmp=e.\u0275\u0275defineComponent({type:St,selectors:[["ts-delete-button-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["mat-icon-button","",1,"trash-icon",3,"matTooltip","click"],["svgIcon","trash"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275listener("click",function(){return n.fireEvent("click")}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"mat-icon",1),e.\u0275\u0275elementEnd()),t&2&&e.\u0275\u0275property("matTooltip",e.\u0275\u0275pipeBind1(1,1,"DeleteButtonTableCell.Tooltip"))},dependencies:[w.MatLegacyButton,v.MatIcon,j.MatLegacyTooltip,b.TranslatePipe],encapsulation:2});const Lr=["tableWrapper"];function Ar(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",15)(1,"span",16),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",17),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"MultiselectDialog.Selected")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.selectedValues.length,"")}}function Fr(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"MultiselectDialog.Blankslate")))}function Or(a,t){a&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"MultiselectDialog.BlankslateWithFilters")))}function Pr(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275template(1,Fr,4,3,"ng-container",19),e.\u0275\u0275template(2,Or,3,3,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.searchKey)("ngIfElse",n)}}class Mn{get searchKey(){return this.searchKeyValue}set searchKey(t){this.searchKeyValue=t,this.tableDataSource.filter=t&&t.trim().toLowerCase()}constructor(t,n,o){this._dialogData=t,this._scrollToBottomObserverFactory=n,this._dialogRef=o,this.searchColumns=[],this.tableData=[],this.searchKeyValue="",this.title="",this.selectedValues=[],this.tableDataSource=new Ka}initDataSource(){this.tableDataSource.data=this.tableData,this.tableDataSource.filterPredicate=(0,m.createSearchLowerCasePredicate)(this.searchColumns)}loadNextData(){this.tableDataSource.loadNext()}ngOnInit(){!this._dialogData||!this._dialogData.data||(this.tableData=this._dialogData.data,this.dataSchema=this._dialogData.dataSchema,this.sortDirection=this._dialogData.sortDirection||"asc",this.sortColumn=this._dialogData.sortColumn,this.title=this._dialogData.title||this.title,this.selectMode=this._dialogData.selectMode||"multi",this.showSelectAllButton=this._dialogData.showSelectAllButton!==void 0?this._dialogData.showSelectAllButton:!0,this.searchColumns=this._dialogData.searchColumns||[],this.initDataSource())}ngAfterViewInit(){const t=this.tableWrapper.nativeElement;t&&(this.scrollTableToBottomObserver=this._scrollToBottomObserverFactory.createObserver(t,this.loadNextData.bind(this)))}isEmpty(){return this.table.isEmpty()}closeWithSelection(t){this.selectMode==="single"&&this._dialogRef.close([t])}}Mn.\u0275fac=function(t){return new(t||Mn)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA),e.\u0275\u0275directiveInject(m.ScrollToBottomObserverFactory),e.\u0275\u0275directiveInject(M.MatLegacyDialogRef))},Mn.\u0275cmp=e.\u0275\u0275defineComponent({type:Mn,selectors:[["ts-multiselect-dialog"]],viewQuery:function(t,n){if(t&1&&(e.\u0275\u0275viewQuery(Lr,7),e.\u0275\u0275viewQuery(Z,7)),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.tableWrapper=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.table=o.first)}},decls:21,vars:21,consts:[["mat-dialog-title",""],[1,"title"],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"multiselect-dialog-top-panel"],[1,"dialog-filters"],[3,"value","valueChange"],["class","select-counter-container",4,"ngIf"],["mat-dialog-content",""],["tableWrapper",""],["headerSticky","true",3,"selectMode","dataSource","dataSchema","sortColumn","sortDirection","showSelectAllButton","selected","selectedChange","rowDoubleClick"],["class","multiselect-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close","disabled"],[1,"select-counter-container"],[1,"counter-label"],[1,"counter-value"],[1,"multiselect-dialog-blank-slate"],[4,"ngIf","ngIfElse"],["blankslateWithFilters",""]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275element(5,"mat-icon",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",4)(7,"div",5)(8,"ts-search-input",6),e.\u0275\u0275listener("valueChange",function(i){return n.searchKey=i}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,Ar,6,4,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8,9)(12,"ts-table",10),e.\u0275\u0275listener("selectedChange",function(i){return n.selectedValues=i})("rowDoubleClick",function(i){return n.closeWithSelection(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Pr,4,2,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",12)(15,"button",13),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"button",14),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,15,n.title||"MultiselectDialog.Select")),e.\u0275\u0275advance(6),e.\u0275\u0275property("value",n.searchKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.selectMode==="multi"),e.\u0275\u0275advance(3),e.\u0275\u0275property("selectMode",n.selectMode)("dataSource",n.tableDataSource)("dataSchema",n.dataSchema)("sortColumn",n.sortColumn)("sortDirection",n.sortDirection)("showSelectAllButton",n.showSelectAllButton)("selected",n.selectedValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isEmpty()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,17,"MultiselectDialog.Cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("mat-dialog-close",n.selectedValues)("disabled",n.selectedValues.length==0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,19,"MultiselectDialog.Select")))},dependencies:[s.NgIf,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,v.MatIcon,ze,Z,b.TranslatePipe],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}[mat-dialog-title][_ngcontent-%COMP%]{display:flex}[mat-dialog-title][_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:calc(100% - 20px);display:inline-block;overflow:hidden;text-overflow:ellipsis}.multiselect-dialog-top-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-family:Bpmonline Open Sans,serif;line-height:19px;margin-top:20px;margin-bottom:5px}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]{flex-grow:1}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]   ts-search-input[_ngcontent-%COMP%]{width:max(40%,300px)}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{padding-left:3px;font-size:14px;color:#444}[mat-dialog-content][_ngcontent-%COMP%]{overflow:auto!important;max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .multiselect-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]});class ti{static _getComponentValidators(t){const n=[].concat(t.validators);return t.required&&n.push(c.Validators.required),n}static _createComponent(t){const n=this._getComponentValidators(t);return new c.UntypedFormControl({value:t.value,disabled:t.isDisabled},n)}static _processRow(t,n){let o=0;t.rows.forEach(i=>{o=Math.max(0,i.columns.length),this._processColumns(i,n)}),t.maxCountColumns=o}static _processColumns(t,n){t.columns.forEach(o=>{this._processElements(o,n)})}static _processElements(t,n){t.formComponents.forEach(o=>{n[o.key]=this._createComponent(o)})}static toFormGroup(t){const n={};return this._processRow(t,n),new c.FormGroup(n)}}class So{constructor(){this.rows=[]}get isValid(){return this.formGroup.valid}get values(){return this.formGroup.value}static create(t){const n=new So;return n.rows=t,n.formGroup=ti.toFormGroup(n),n}applyChangesInModel(t){Object.keys(this.formGroup.value).forEach(o=>{const i=o.split("."),r=i.length;for(let d=0;d<r-1;d++){const f=i[d];!t[f]||(t=t[f])}t[i[r-1]]=this.formGroup.value[o]})}getFormValues(){return this.formGroup.getRawValue()}}class Vr{constructor(){this.columns=[]}}class Rr{constructor(){this.formComponents=[]}}var xa;(function(a){a[a.Unknown=0]="Unknown",a[a.TextBox=1]="TextBox",a[a.TextArea=2]="TextArea",a[a.DropDown=3]="DropDown",a[a.DateTime=4]="DateTime",a[a.LocalizableText=5]="LocalizableText",a[a.CheckBox=6]="CheckBox",a[a.ImageUploader=7]="ImageUploader",a[a.Autocomlete=8]="Autocomlete",a[a.LabelWithInnerLink=9]="LabelWithInnerLink"})(xa||(xa={}));const jr=2;class zr{constructor(t={}){this.options=[],this.changeValue=t.changeValue||null,this.value=t.value,this.key=t.key||"",this.label=t.label||"",this.required=!!t.required,this.isDisabled=!!t.isDisabled,this.controlType=t.controlType||xa.Unknown,this.validators=t.validators||[],this.options=t.options||[],this.areaRows=t.areaRows||jr,this.info=t.info,this.actionButton=t.actionButton}}class Br{}class _e{constructor(t,n){this.el=t,this.render=n}set dataItemMarker(t){this.render.setAttribute(this.el.nativeElement,"data-item-marker",t)}}_e.\u0275fac=function(t){return new(t||_e)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},_e.\u0275dir=e.\u0275\u0275defineDirective({type:_e,selectors:[["","tsDataItemMarker",""]],inputs:{dataItemMarker:["tsDataItemMarker","dataItemMarker"]}});var Ur=p(14340);class ni{}class ai extends ni{constructor(t){super(),Object.assign(this,t)}}var V=p(2876);class bn extends m.RootInjectorGuard{constructor(t){super(),this.httpClient=t,this._serviceEndpoint="/ServiceModel/CultureService.svc/"}getAllCultures(){if(!this._allCultures$){const t=this._serviceEndpoint+"GetAllCultures";this._allCultures$=this.httpClient.post(t,{}).pipe((0,u.map)(n=>n.cultures),(0,u.shareReplay)({bufferSize:1,refCount:!1}))}return this._allCultures$}}bn.\u0275fac=function(t){return new(t||bn)(e.\u0275\u0275inject(V.HttpClient))},bn.\u0275prov=e.\u0275\u0275defineInjectable({token:bn,factory:bn.\u0275fac,providedIn:"root"});function Hr(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",10)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"textarea",11),e.\u0275\u0275listener("ngModelChange",function(i){const d=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275resetView(d.value=i)}),e.\u0275\u0275text(5,"				"),e.\u0275\u0275elementEnd()()()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("data-item-marker",n.name),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("hideNonActiveItem",!n.isActive&&!o.showAll),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",o.dialogData.isDisabled)("rows",1)("ngModel",n.value)("tsDataItemMarker",o.dataQaAttribute(n.name))}}function Gr(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.showAll=!i.showAll)}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275element(4,"mat-icon",14),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("tsDataItemMarker","show_hide_languages_button"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,n.getIsActiveButtonTitle)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("svgIcon",n.getIsActiveButtonImage)}}class xn{constructor(t,n,o){this.dialogData=t,this._dialogRef=o,this._destroyed=new C.ReplaySubject,this._maskService=new l.MaskService,this.culturesData=[];const i=n.get(v.MatIconRegistry),r=n.get(pe.DomSanitizer);this._cultureApiService=n.get(bn),i.addSvgIconLiteral("up-arrows-icon",r.bypassSecurityTrustHtml(p(98728))),i.addSvgIconLiteral("close",r.bypassSecurityTrustHtml(p(63853))),i.addSvgIconLiteral("down-arrows-icon",r.bypassSecurityTrustHtml(p(83225)))}get getIsActiveButtonTitle(){return this.showAll?"LocalizableStringsDialog.HideInactiveLanguages":"LocalizableStringsDialog.ShowAllLanguages"}get getIsActiveButtonImage(){return this.showAll?"up-arrows-icon":"down-arrows-icon"}_getCultureValue(t){return this.dialogData.localizableStrings.getValue(t)}_getCultureLanguageModel(t){const n=new ai(t);return n.value=this._getCultureValue(t.name),n}_setNeedShowAllLanguagesButton(t){this.needShowAllLanguagesButton=t.some(n=>!n.isActive)}ngOnInit(){this._maskService.showBodyMask(),this._cultureApiService.getAllCultures().pipe((0,u.takeUntil)(this._destroyed),(0,u.catchError)(t=>(console.error(t),this._maskService.hideBodyMask(),(0,C.of)(null)))).subscribe(t=>{this._maskService.hideBodyMask(),this.culturesData=t.map(n=>this._getCultureLanguageModel(n)),this._setNeedShowAllLanguagesButton(t)}),this._dialogRef.keydownEvents().pipe((0,u.filter)(t=>t?.key===Ur.Key.Escape)).subscribe(()=>this._maskService.hideBodyMask())}dataQaAttribute(t){return t+"_input"}ngOnDestroy(){this._destroyed.next(!0),this._destroyed.complete()}}xn.\u0275fac=function(t){return new(t||xn)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(M.MatLegacyDialogRef))},xn.\u0275cmp=e.\u0275\u0275defineComponent({type:xn,selectors:[["ts-localizable-dialog"]],decls:17,vars:13,consts:[[1,"ts-localizable-dialog"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-content","",1,"dialog-content-wrapper"],[4,"ngFor","ngForOf"],["class","collapse-expand-language",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action-buttons"],["mat-button","","data-item-marker","localizable-dialog-cancel-button",1,"cancelBtn",3,"mat-dialog-close"],["mat-flat-button","","color","primary","data-item-marker","localizable-dialog-apply-button",1,"applyBtn",3,"disabled","mat-dialog-close"],["floatLabel","always",1,"example-full-width"],["matInput","",3,"disabled","rows","ngModel","tsDataItemMarker","ngModelChange"],[1,"collapse-expand-language"],["mat-button","",3,"tsDataItemMarker","click"],[1,"expandCollapsImg",3,"svgIcon"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",2),e.\u0275\u0275element(6,"mat-icon",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275template(8,Hr,6,8,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Gr,5,5,"div",6),e.\u0275\u0275elementStart(10,"div",7)(11,"button",8),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",9),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()()()),t&2&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,7,n.dialogData.title)," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.culturesData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.needShowAllLanguagesButton),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,9,n.dialogData.cancelBtnTitle)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.dialogData.isDisabled)("mat-dialog-close",n.culturesData),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,11,n.dialogData.okBtnTitle)," "))},dependencies:[s.NgForOf,s.NgIf,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,_.MatLegacyFormField,_.MatLegacyLabel,D.MatLegacyInput,w.MatLegacyButton,v.MatIcon,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,_e,b.TranslatePipe],styles:[".dialog-content-wrapper[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:17px;display:flex;flex-direction:column;justify-content:space-between;width:476px;height:100%;overflow:auto!important}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]{width:100%}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:18px}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[disabled][_ngcontent-%COMP%]{color:#000}.dialog-content-wrapper[_ngcontent-%COMP%]   .hideNonActiveItem[_ngcontent-%COMP%]{display:none}.dialog-content-wrapper[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px}[mat-dialog-actions][_ngcontent-%COMP%]{margin:9px 0!important;display:flex;flex-direction:row;justify-content:flex-end}.collapse-expand-language[_ngcontent-%COMP%]{text-align:center}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{text-transform:none}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]:focus{background-color:transparent!important}.collapse-expand-language[_ngcontent-%COMP%]   .expandCollapsImg[_ngcontent-%COMP%]{padding-left:5px;display:flex;box-sizing:content-box;width:16px;height:16px}"]});const Zr=["input"],Wr=["button"];function Qr(a,t){a&1&&(e.\u0275\u0275elementStart(0,"div",7)(1,"span",8),e.\u0275\u0275element(2,"mat-icon",9),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),a&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("crtTooltip",e.\u0275\u0275pipeBind1(3,1,"Input.Readonly")))}class ye extends I.BaseMaterialInput{constructor(t,n,o,i,r,d,f){super(t,n,o),this.translateService=i,this.dialogService=r,this.iconLineType="default",this.showLockIcon=!1,this.controlType="ts-localizable-string";const E=p(18435),L=p(6428);d.addSvgIconLiteral("localizable-strings",f.bypassSecurityTrustHtml(E)),d.addSvgIconLiteral("localizable-strings-bold",f.bypassSecurityTrustHtml(L))}get localizableStringsIcon(){return this.iconLineType==="bold"?"localizable-strings-bold":"localizable-strings"}set autofocus(t){if(t){const n=this.input.nativeElement;n.focus(),n.select()}}set stringValue(t){this.innerValue.setValueLocalizableString(this.translateService.currentLang,t),this.onChange(this.innerValue)}get stringValue(){return this.innerValue instanceof m.LocalizableStringArray?this.innerValue.getValue(this.translateService.currentLang):this.innerValue}dataQaAttribute(){return this.label.toLowerCase()+"_input"}showLanguageMiniCard(t){t.preventDefault(),this.dialogService.open(xn,{data:{title:this.label,cancelBtnTitle:"LocalizableStringsDialog.Cancel",okBtnTitle:"LocalizableStringsDialog.Apply",localizableStrings:this.innerValue,isDisabled:this.disabled},scrollStrategy:new Va.NoopScrollStrategy,panelClass:["dialog-top-border"]}).subscribe(n=>{n&&(n.forEach(o=>{this.innerValue.setValueLocalizableString(o.name,o.value)}),this.onChange(this.innerValue))})}writeValue(t){t||(t=new m.LocalizableStringArray),super.writeValue(t)}}ye.\u0275fac=function(t){return new(t||ye)(e.\u0275\u0275directiveInject(c.NgControl,10),e.\u0275\u0275directiveInject(eo.AutofillMonitor),e.\u0275\u0275directiveInject(Xa.FocusMonitor),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(I.DialogService),e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},ye.\u0275cmp=e.\u0275\u0275defineComponent({type:ye,selectors:[["ts-localizable-text-input"]],viewQuery:function(t,n){if(t&1&&(e.\u0275\u0275viewQuery(Zr,5),e.\u0275\u0275viewQuery(Wr,5,e.ElementRef)),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.input=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.button=o.first)}},inputs:{iconLineType:"iconLineType",showLockIcon:"showLockIcon",label:"label",autofocus:"autofocus",stringValue:"stringValue"},features:[e.\u0275\u0275ProvidersFeature([{provide:_.MatLegacyFormFieldControl,useExisting:ye}]),e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:[[1,"localizable-text-input-container"],["matInput","","autocomplete","off",1,"localizable-text-input-container-control",3,"ngModel","disabled","tsDataItemMarker","required","placeholder","ngModelChange"],["input",""],["class","icon-container",4,"ngIf"],["mat-icon-button","","type","button",1,"localizable-icon",3,"tsDataItemMarker","click"],["button",""],[1,"localizable-strings-icon",3,"svgIcon"],[1,"icon-container"],[1,"icon-baseline"],["matIconSuffix","","svgIcon","lock",1,"readonly-icon",3,"crtTooltip"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),e.\u0275\u0275listener("ngModelChange",function(i){return n.stringValue=i}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Qr,4,3,"div",3),e.\u0275\u0275elementStart(4,"button",4,5),e.\u0275\u0275listener("click",function(i){return n.showLanguageMiniCard(i)}),e.\u0275\u0275element(6,"mat-icon",6),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.stringValue)("disabled",n.disabled)("tsDataItemMarker",n.dataQaAttribute())("required",n.required)("placeholder",n.placeholder),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.showLockIcon&&n.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("tsDataItemMarker","localizable_button_"+n.label),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("svgIcon",n.localizableStringsIcon))},dependencies:[s.NgIf,c.DefaultValueAccessor,c.NgControlStatus,c.RequiredValidator,c.NgModel,D.MatLegacyInput,w.MatLegacyButton,v.MatIcon,_e,I.TooltipDirective,b.TranslatePipe],styles:[`.localizable-text-input-container{display:flex;flex-direction:row;align-items:center}.localizable-text-input-container .mat-input-element{padding-right:21px}.localizable-text-input-container .mat-icon-button.localizable-icon{height:1.5em;width:1.5em;position:absolute;right:0}.localizable-text-input-container .mat-icon.localizable-strings-icon{width:16px;height:16px;line-height:16px}.localizable-text-input-container .mat-button-wrapper{display:flex;justify-content:center}.localizable-text-input-container .mat-button-focus-overlay,.localizable-text-input-container .mat-button-ripple-round{height:21px}.localizable-text-input-container .readonly-icon{position:absolute;right:1.5em;top:50%;transform:translateY(-50%);width:16px;height:16px}.localizable-text-input-container .readonly-icon>svg{position:absolute}.localizable-text-input-container:not(:hover) .readonly-icon{display:none}
`],encapsulation:2});var Yr=p(69627);const $r=function(a){return{visible:a}},Jr=function(a,t){return{"add-image-button-icon":a,"add-disabled-image-button-icon":t}},oi=()=>{},ii={provide:c.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>ve),multi:!0};class ve extends K.CrtBaseComponent{set value(t){this._model=t,this.onChange(this._model),this.valueChange.emit(this._model)}get value(){return this._model}constructor(t){super(t),this.required=!1,this.clearButtonVisible=!1,this.label="",this.valueChange=new e.EventEmitter,this.disabled=!1,this.onChange=oi,this.onTouched=oi}get fileName(){return this._model?this._model.name:""}dataQaAttribute(){return this.label.toLowerCase()+"_input"}get isClearButtonVisible(){return this.clearButtonVisible&&Boolean(this._model)&&!this.disabled}onFilesSelected(t){t.length!==0&&(this.value=t[0])}clearFile(){this.value=null}writeValue(t){this._model=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}ve.\u0275fac=function(t){return new(t||ve)(e.\u0275\u0275directiveInject(e.Injector))},ve.\u0275cmp=e.\u0275\u0275defineComponent({type:ve,selectors:[["ts-image-input"]],inputs:{value:"value",required:"required",clearButtonVisible:"clearButtonVisible",label:"label",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275ProvidersFeature([ii]),e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:18,consts:[["floatLabel","always",1,"image-input",3,"hideRequiredMarker","ngStyle","ngClass"],["matInput","",1,"file-name-input",3,"ngModel","disabled","tsDataItemMarker","required"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close-button",3,"ngClass","click"],["svgIcon","close"],["mat-icon-button","","matSuffix","",1,"add-image-button",3,"disabled","tsDataItemMarker","click"],[3,"ngClass"],["addImageButton",""],["hidden","","type","file","accept","image/*",3,"change"],["fileInput",""]],template:function(t,n){if(t&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",1),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return n.clearFile()}),e.\u0275\u0275element(5,"mat-icon",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275reference(10);return e.\u0275\u0275resetView(r.click())}),e.\u0275\u0275element(7,"div",5,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",7,8),e.\u0275\u0275listener("change",function(r){return n.onFilesSelected(r.target.files)}),e.\u0275\u0275elementEnd()()}t&2&&(e.\u0275\u0275property("hideRequiredMarker",!0)("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.fileName)("disabled",!0)("tsDataItemMarker",n.dataQaAttribute())("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,$r,n.isClearButtonVisible)),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.disabled)("tsDataItemMarker","add_image_button_"+n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(15,Jr,!n.disabled,n.disabled)))},dependencies:[s.NgClass,s.NgStyle,c.DefaultValueAccessor,c.NgControlStatus,c.RequiredValidator,c.NgModel,_.MatLegacyFormField,_.MatLegacyLabel,_.MatLegacySuffix,D.MatLegacyInput,w.MatLegacyButton,v.MatIcon,_e],styles:[".add-image-button[_ngcontent-%COMP%]   .add-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.add-image-button[_ngcontent-%COMP%]   .add-disabled-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-disable-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.close-button[_ngcontent-%COMP%]{visibility:hidden}.image-input[_ngcontent-%COMP%]:hover   .visible[_ngcontent-%COMP%]{visibility:visible}.mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",File),(0,g.__metadata)("design:paramtypes",[File])],ve.prototype,"value",null),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],ve.prototype,"label",void 0);function qr(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",11)}function Kr(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.getErrorMessage," ")}}function Xr(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",8),e.\u0275\u0275template(4,qr,1,0,"mat-icon",9),e.\u0275\u0275template(5,Kr,2,1,"mat-error",10),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.formComponent.key)("tsDataItemMarker",n.dataQaAttribute(n.formComponent.key))("required",n.formComponent.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.formComponent.isDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isInvalidComponent)}}function el(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"textarea",12),e.\u0275\u0275text(4,"			"),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",n.formComponent.areaRows)("formControlName",n.formComponent.key)("tsDataItemMarker",n.dataQaAttribute(n.formComponent.key))("required",n.formComponent.required)}}function tl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n.key),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.value," ")}}function nl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.getErrorMessage," ")}}function al(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",13),e.\u0275\u0275listener("selectionChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.formComponent.changeValue?r.formComponent.changeValue(i,r.form):null)}),e.\u0275\u0275template(4,tl,2,2,"mat-option",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,nl,2,1,"mat-error",10),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.formComponent.key)("tsDataItemMarker",n.dataQaAttribute(n.formComponent.key))("required",n.formComponent.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.formComponent.options),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isInvalidComponent)}}function ol(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.value," ")}}function il(a,t){if(a&1&&e.\u0275\u0275element(0,"ts-info-tooltip-icon",24),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("message",n.formComponent.info)}}function rl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.getErrorMessage," ")}}function ll(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.actionButtonClick())}),e.\u0275\u0275element(1,"mat-icon",26),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("title",n.formComponent.actionButton.caption),e.\u0275\u0275advance(1),e.\u0275\u0275property("svgIcon",n.formComponent.actionButton.icon)}}function sl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"mat-form-field",7)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",17),e.\u0275\u0275elementStart(5,"div",18),e.\u0275\u0275element(6,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-autocomplete",20,21),e.\u0275\u0275listener("optionSelected",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.formComponent.changeValue?r.formComponent.changeValue(i,r.form):null)}),e.\u0275\u0275template(9,ol,2,2,"mat-option",14),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,il,1,1,"ts-info-tooltip-icon",22),e.\u0275\u0275template(12,rl,2,1,"mat-error",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,ll,2,2,"button",23),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275reference(8),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",o.formComponent.key)("matAutocomplete",n)("required",o.formComponent.required)("tsDataItemMarker",o.dataQaAttribute(o.formComponent.key)),e.\u0275\u0275advance(3),e.\u0275\u0275property("displayWith",o.getDisplayValueFormDropDownOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(10,10,o.filteredOptions)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.formComponent.info),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.isInvalidComponent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.formComponent.actionButton)}}function cl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",27)(4,"mat-datepicker-toggle",28)(5,"mat-datepicker",null,29),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("matDatepicker",n)("formControlName",o.formComponent.key)("tsDataItemMarker",o.dataQaAttribute(o.formComponent.key))("required",o.formComponent.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",n)}}function dl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"ts-localizable-text-input",30),e.\u0275\u0275elementStart(4,"mat-error"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.formComponent.key)("label",n.formComponent.label)("required",n.formComponent.required),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,5,"LocalizableStringsDialog.Validations.RequiredNameCaption")," ")}}function pl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31)(1,"mat-checkbox",32),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.formComponent.changeValue?r.formComponent.changeValue(i,r.form):null)}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.formComponent.key)("tsDataItemMarker",n.dataQaAttribute(n.formComponent.key))("required",n.formComponent.required),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.formComponent.label," ")}}function ml(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"ts-image-input",33),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("required",n.formComponent.required)("formControlName",n.formComponent.key)("label",n.formComponent.label)}}function ul(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",34)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",35),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("href",n.formComponent.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.formComponent.key),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formComponent.info)}}class Sa{constructor(t,n){this.typeControl=xa,t.addSvgIconLiteral("lock-icon",n.bypassSecurityTrustHtml(p(76974)))}get groupComponent(){return this.form.formGroup.get(this.formComponent.key)}get isInvalidComponent(){return this.groupComponent?this.groupComponent.invalid:!1}get getErrorMessage(){return this.groupComponent.errors.message}_getFilteredOptions(t){const n=t?.toLowerCase()||"";return this.formComponent.options.filter(o=>o.value?o.value.toLowerCase().indexOf(n)>-1:!1)}_autocompleteValueChangesHandlerInit(){this.formComponent.controlType===xa.Autocomlete&&(this.filteredOptions=this.groupComponent.valueChanges.pipe((0,u.startWith)(""),(0,u.map)(t=>typeof t=="string"?t:t?.value),(0,u.map)(t=>t?this._getFilteredOptions(t):this.formComponent.options)))}ngOnInit(){this._autocompleteValueChangesHandlerInit()}dataQaAttribute(t){return t+"_input"}getDisplayValueFormDropDownOptions(t){return t&&t.value?t.value:""}actionButtonClick(){this.formComponent.actionButton.clicked()}}Sa.\u0275fac=function(t){return new(t||Sa)(e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},Sa.\u0275cmp=e.\u0275\u0275defineComponent({type:Sa,selectors:[["ts-dynamic-element"]],inputs:{formComponent:"formComponent",form:"form"},decls:11,vars:11,consts:[[3,"formGroup"],[3,"ngSwitch"],["floatLabel","always",4,"ngSwitchCase"],["class","autocomplete-field",4,"ngSwitchCase"],["class","dynamic-checkbox",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","label-with-inner-link",4,"ngSwitchCase"],["floatLabel","always"],["matInput","","autocomplete","off",3,"formControlName","tsDataItemMarker","required"],["matSuffix","","class","lock-icon","svgIcon","lock-icon",4,"ngIf"],[4,"ngIf"],["matSuffix","","svgIcon","lock-icon",1,"lock-icon"],["matInput","",3,"rows","formControlName","tsDataItemMarker","required"],["disableOptionCentering","true",3,"formControlName","tsDataItemMarker","required","selectionChange"],["class","dynamic-element-select-option",3,"value",4,"ngFor","ngForOf"],[1,"dynamic-element-select-option",3,"value"],[1,"autocomplete-field"],["type","text","matInput","",3,"formControlName","matAutocomplete","required","tsDataItemMarker"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["disableOptionCentering","true",3,"displayWith","optionSelected"],["auto","matAutocomplete"],["class","info-icon","matSuffix","",3,"message",4,"ngIf"],["class","action-button","type","button","mat-icon-button","",3,"title","click",4,"ngIf"],["matSuffix","",1,"info-icon",3,"message"],["type","button","mat-icon-button","",1,"action-button",3,"title","click"],[1,"action-icon",3,"svgIcon"],["matInput","",3,"matDatepicker","formControlName","tsDataItemMarker","required"],["matSuffix","",3,"for"],["picker",""],[3,"formControlName","label","required"],[1,"dynamic-checkbox"],[3,"formControlName","tsDataItemMarker","required","change"],[3,"required","formControlName","label"],[1,"label-with-inner-link"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,Xr,6,6,"mat-form-field",2),e.\u0275\u0275template(3,el,5,5,"mat-form-field",2),e.\u0275\u0275template(4,al,6,6,"mat-form-field",2),e.\u0275\u0275template(5,sl,14,12,"div",3),e.\u0275\u0275template(6,cl,7,6,"mat-form-field",2),e.\u0275\u0275template(7,dl,7,7,"mat-form-field",2),e.\u0275\u0275template(8,pl,3,4,"div",4),e.\u0275\u0275template(9,ml,2,3,"div",5),e.\u0275\u0275template(10,ul,7,4,"div",6),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275property("formGroup",n.form.formGroup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",n.formComponent.controlType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.TextBox),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.TextArea),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.DropDown),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.Autocomlete),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.DateTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.LocalizableText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.CheckBox),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.ImageUploader),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.typeControl.LabelWithInnerLink))},dependencies:[s.NgForOf,s.NgIf,s.NgSwitch,s.NgSwitchCase,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,_e,ye,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,_.MatLegacySuffix,D.MatLegacyInput,$.MatLegacySelect,Te.MatLegacyOption,x.MatDatepicker,x.MatDatepickerInput,x.MatDatepickerToggle,w.MatLegacyButton,v.MatIcon,P.MatLegacyCheckbox,Yr.MatCheckboxRequiredValidator,ve,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,I.InfoTooltipIconComponent,s.AsyncPipe,b.TranslatePipe],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{width:16px;height:16px;display:none;overflow:visible}.mat-form-field[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:22px;height:22px;padding-left:8px;bottom:-3px}.mat-form-field[_ngcontent-%COMP%]:hover   .lock-icon[_ngcontent-%COMP%]{display:block}ts-localizable-text[_ngcontent-%COMP%], ts-image-input[_ngcontent-%COMP%]{width:100%}.dynamic-checkbox[_ngcontent-%COMP%]{padding-top:7px;overflow:hidden}.label-with-inner-link[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-style:normal;font-weight:400;font-size:12px;line-height:17px;color:#444;padding-top:8px;padding-bottom:24px}  .mat-checkbox-label{font-size:14px}.autocomplete-field[_ngcontent-%COMP%]{display:flex;align-items:center}.action-button[_ngcontent-%COMP%]{height:32px;width:32px;line-height:1;margin-bottom:8px}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--crt-palette-primary-50)}.action-button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:16px;height:16px;vertical-align:baseline;color:#8095b3}"]});function gl(a,t){if(a&1&&e.\u0275\u0275element(0,"ts-dynamic-element",1),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("formComponent",n)("form",o.dynamicForm)}}class Ia{}Ia.\u0275fac=function(t){return new(t||Ia)},Ia.\u0275cmp=e.\u0275\u0275defineComponent({type:Ia,selectors:[["ts-dynamic-column"]],inputs:{formColumn:"formColumn",dynamicForm:"dynamicForm"},decls:1,vars:1,consts:[[3,"formComponent","form",4,"ngFor","ngForOf"],[3,"formComponent","form"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,gl,1,2,"ts-dynamic-element",0),t&2&&e.\u0275\u0275property("ngForOf",n.formColumn.formComponents)},dependencies:[s.NgForOf,Sa]});function hl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.expandRow=!i.expandRow)}),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.GetButtonIcon)}}function fl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",2)(1,"label",3),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,hl,3,1,"button",4),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.formRow.rowSectionName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.formRow.expandableRow)}}function Cl(a,t){if(a&1&&e.\u0275\u0275element(0,"ts-dynamic-column",6),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicForm",o.dynamicForm)("formColumn",n)}}class wa{get GetButtonIcon(){return this.expandRow?"keyboard_arrow_down":"keyboard_arrow_up"}}wa.\u0275fac=function(t){return new(t||wa)},wa.\u0275cmp=e.\u0275\u0275defineComponent({type:wa,selectors:[["ts-dynamic-row"]],inputs:{formRow:"formRow",dynamicForm:"dynamicForm"},decls:3,vars:4,consts:[["class","section-row",4,"ngIf"],["class","column-flex",3,"dynamicForm","formColumn",4,"ngFor","ngForOf"],[1,"section-row"],[1,"section-name"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"column-flex",3,"dynamicForm","formColumn"]],template:function(t,n){t&1&&(e.\u0275\u0275template(0,fl,4,2,"div",0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275template(2,Cl,1,2,"ts-dynamic-column",1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("ngIf",n.formRow.rowSectionName),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("display",n.expandRow?"none":"flex"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.formRow.columns))},dependencies:[s.NgForOf,s.NgIf,w.MatLegacyButton,v.MatIcon,Ia],styles:[".section-row[_ngcontent-%COMP%]{justify-content:space-between;display:flex}.section-row[_ngcontent-%COMP%]   .section-name[_ngcontent-%COMP%]{font-size:20px;color:#00b2f2}.column-flex[_ngcontent-%COMP%]{flex:1}"]});function _l(a,t){if(a&1&&e.\u0275\u0275element(0,"ts-dynamic-row",5),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("dynamicForm",o.dynamicForm)("formRow",n)}}function yl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275template(1,_l,1,2,"ts-dynamic-row",4),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",n.dynamicForm.formGroup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.dynamicForm.rows)}}function vl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,yl,2,2,"form",2),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.dynamicForm.formGroup)}}class It{}It.\u0275fac=function(t){return new(t||It)},It.\u0275cmp=e.\u0275\u0275defineComponent({type:It,selectors:[["ts-dynamic-form-grid"]],inputs:{dynamicForm:"dynamicForm"},decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[3,"dynamicForm","formRow",4,"ngFor","ngForOf"],[3,"dynamicForm","formRow"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,vl,2,1,"div",0),t&2&&e.\u0275\u0275property("ngIf",n.dynamicForm)},dependencies:[s.NgForOf,s.NgIf,c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,wa]});function Ml(a,t){if(a&1&&e.\u0275\u0275element(0,"ts-dynamic-form-grid",10),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("dynamicForm",n.formDialog.dynamicForm)}}function bl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,n.formDialog.cancelBtnTitle)," ")}}function xl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!n.isValid&&n.formDialog.useValidation)("mat-dialog-close",n.formDialog.dynamicForm),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,n.formDialog.okBtnTitle)," ")}}function Sl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275element(6,"mat-icon",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275template(8,Ml,1,1,"ts-dynamic-form-grid",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275template(10,bl,3,3,"button",8),e.\u0275\u0275template(11,xl,3,5,"button",9),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,n.formDialog.title)," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.formDialog.dynamicForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.formDialog.cancelBtnTitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.formDialog.okBtnTitle)}}class Sn{constructor(t){this.formDialog=t}get isValid(){return this.formDialog.dynamicForm.isValid}}Sn.\u0275fac=function(t){return new(t||Sn)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},Sn.\u0275cmp=e.\u0275\u0275defineComponent({type:Sn,selectors:[["ts-form-dialog"]],decls:1,vars:1,consts:[["class","form-dialog",4,"ngIf"],[1,"form-dialog"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-content","",1,"dialog-content-wrapper"],[3,"dynamicForm",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action-buttons"],["mat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","mat-dialog-close",4,"ngIf"],[3,"dynamicForm"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"disabled","mat-dialog-close"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Sl,12,6,"div",0),t&2&&e.\u0275\u0275property("ngIf",n.formDialog)},dependencies:[s.NgIf,It,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,v.MatIcon,b.TranslatePipe],styles:[".form-dialog[_ngcontent-%COMP%]   .dialog-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:356px;height:100%;overflow:auto!important}[mat-dialog-actions][_ngcontent-%COMP%]{margin:0 0 9px!important;display:flex;flex-direction:row;justify-content:flex-end}"]});var dp=p(26544),pp=p(21929),mp=p(32633),up=p(7161),gp=p(68358),hp=p(40267),fp=p(55837),Cp=p(40132),_p=p(97715),yp=p(50889),vp=p(23274),Mp=p(73324),bp=p(97947),xp=p(50765),Sp=p(45204),Ip=p(85450),wp=p(63067),Dp=p(7525),Tp=p(87878),kp=p(75271),Ep=p(68259),Np=p(66241),Lp=p(26384),Il=p(43317),Io=p(42827),Q;(function(a){a.Csharp="text/x-csharp",a.Javascript="text/javascript",a.Json="application/ld+json",a.Css="text/css",a.Less="text/x-less",a.Sql="text/x-sql",a.SqlServer="text/x-mssql",a.PgSql="text/x-pgsql",a.Xml="application/xml",a.Http="message/http",a.Markdown="text/x-markdown"})(Q||(Q={}));var wo=p(38993),wt=p(59292),Me=p(63533),to=p(78412),Da=p(57960),Do=p(85430),ri=p(8035),li=p(59428),si=p(81742),ci=p(44098),no=p(90212),ja=p(53176),di=p(47679);class ee{static lintCode(t,n,o={}){const i=[];return n===Q.Javascript?p.e(4301).then(p.t.bind(p,4301,23)).then(({Linter:r})=>(0,Do.esLint)(new r,o)(t)):([Q.Json,Q.Less].includes(n)&&ee.supportedLanguages[n].parser.parse(t.state.doc.toString()).iterate({enter:({type:f,from:E,to:L,...mt})=>{f.isError&&i.push({from:E,to:L,severity:"warning",message:"Uncompleted condition"})}}),Promise.resolve(i))}}ee.supportedLanguages={[Q.Markdown]:{lang:si.markdown,parser:si.markdownLanguage.parser},[Q.Javascript]:{lang:Do.javascript,parser:Do.javascriptLanguage.parser},[Q.Less]:{lang:li.less,parser:li.lessLanguage.parser},[Q.Sql]:{lang:ci.sql,parser:ci.StandardSQL.language.parser},[Q.Json]:{lang:ri.json,parser:ri.jsonLanguage.parser},[Q.Csharp]:{lang:di.csharp,parser:di.csharpLanguage.parser}},ee.onChangeExtension=a=>Me.EditorView.updateListener.of(t=>{if(!t.docChanged)return;const n=t.state.doc.toString();a(n)}),ee.defaultExtensions=()=>[(0,no.syntaxHighlighting)(no.defaultHighlightStyle,{fallback:!0}),(0,wo.lintGutter)(),(0,Me.highlightSpecialChars)(),(0,Me.highlightActiveLineGutter)(),(0,Me.highlightActiveLine)(),(0,ja.highlightSelectionMatches)(),(0,to.autocompletion)(),(0,no.bracketMatching)(),(0,to.closeBrackets)(),(0,no.foldGutter)(),(0,Me.lineNumbers)(),(0,Me.rectangularSelection)(),Me.EditorView.lineWrapping,(0,Da.history)()],ee.defaultKeyMaps=()=>[...wo.lintKeymap,...ja.searchKeymap,...Da.historyKeymap,...Da.defaultKeymap,...to.completionKeymap,Da.indentWithTab,{key:"Alt-g",run:ja.gotoLine},{key:"Ctrl-Shift-f",run:ja.replaceNext},{key:"Ctrl-Shift-r",run:ja.replaceAll},{key:"Ctrl-Shift-z",run:Da.redo},{key:"Ctrl-y",run:Da.deleteLine},{key:"Ctrl-Space",run:to.startCompletion}];const wl=["host"];var To;(function(a){a.CR="\r",a.LF=`
`,a.CRLF=`\r
`})(To||(To={}));class In{constructor(){this._value="",this._language=Q.Javascript,this._languageCompartment=new wt.Compartment,this._editable=!0,this._editableCompartment=new wt.Compartment,this._readOnly=!1,this._readonlyCompartment=new wt.Compartment,this._lineSeparator=To.LF,this._lineSeparatorCompartment=new wt.Compartment,this.keyBinding=[],this.languageOptions={},this.valueChanged=new e.EventEmitter,this.onChange=t=>{},this.onTouched=()=>{}}set value(t){typeof t=="string"&&this._editorView?.state.doc.toString()!==t&&(this._value=t,this._editorView?.dispatch({changes:{from:0,to:this._editorView.state.doc.length,insert:this._value}}))}get value(){return this._value}get lineNumbers(){return this._editorView.state.doc.lines}set editable(t){this._editable!==t&&(this._editable=t,this._editorView?.dispatch({effects:this._editableCompartment.reconfigure(Me.EditorView.editable.of(t))}))}set readOnly(t){this._readOnly!==t&&(this._readOnly=t,this._editorView?.dispatch({effects:this._readonlyCompartment.reconfigure(wt.EditorState.readOnly.of(t))}))}set language(t){if(t||(t=Q.Markdown),this._language!==t){if(!ee.supportedLanguages[t])throw new Error(`Unsupported language: ${t}`);this._language=t,this._editorView?.dispatch({effects:this._languageCompartment.reconfigure(ee.supportedLanguages[t].lang())})}}set lineSeparator(t){this._lineSeparator!==t&&(this._lineSeparator=t,this._editorView?.dispatch({effects:this._lineSeparatorCompartment.reconfigure(wt.EditorState.lineSeparator.of(this._lineSeparator))}))}_onEditorValueChanged(t){this.value=t,this.onChange(t),this.valueChanged.emit(t),this.onTouched()}_initEditorView(){return new Me.EditorView({doc:this.value,extensions:[this._lineSeparatorCompartment.of(wt.EditorState.lineSeparator.of(this._lineSeparator)),this._languageCompartment.of(ee.supportedLanguages[this._language].lang()),this._editableCompartment.of(Me.EditorView.editable.of(this._editable)),this._readonlyCompartment.of(wt.EditorState.readOnly.of(this._readOnly)),(0,wo.linter)(t=>ee.lintCode(t,this._language,this.languageOptions)),ee.onChangeExtension(this._onEditorValueChanged.bind(this)),...ee.defaultExtensions(),Me.keymap.of([...ee.defaultKeyMaps(),...this.keyBinding])],parent:this.hostContainer?.nativeElement})}ngAfterViewInit(){this._editorView=this._initEditorView()}ngOnDestroy(){this._editorView.destroy()}writeValue(t){typeof t=="string"&&(this.value=t.toString())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}In.\u0275fac=function(t){return new(t||In)},In.\u0275cmp=e.\u0275\u0275defineComponent({type:In,selectors:[["ts-codemirror"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(wl,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.hostContainer=o.first)}},inputs:{value:"value",editable:"editable",readOnly:"readOnly",language:"language",lineSeparator:"lineSeparator",keyBinding:"keyBinding",languageOptions:"languageOptions"},outputs:{valueChanged:"valueChanged"},features:[e.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>In),multi:!0}])],decls:3,vars:0,consts:[[1,"ts-codemirror"],[1,"ts-codemirror-container"],["host",""]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"div",1,2),e.\u0275\u0275elementEnd())},styles:[".ts-codemirror[_ngcontent-%COMP%]{position:relative;background-color:#fff;height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor .cm-specialChar{display:none}"],changeDetection:0});function Dl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275element(1,"ts-info-tooltip-icon",5),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("message",n.tooltipMessage)}}function Tl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-codemirror",6),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.code=i)})("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onTextChange(i))}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",n.code)("options",n.options)}}function kl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-codemirror",7),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.code=i)})("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onTextChange(i))}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",n.code)("language",n.language)("languageOptions",n.languageOptions)("readOnly",n.readOnly)("keyBinding",n.keyBinding)}}class wn{constructor(t,n,o){this._translateService=t,this._changeDetector=n,this._featureValues=o,this._tooltipKeys=["CodeMirror.HotkeysDescription","CodeMirror.SelectAll","CodeMirror.Undo","CodeMirror.Redo","CodeMirror.Find","CodeMirror.FindNext","CodeMirror.FindPrev","CodeMirror.Replace","CodeMirror.ReplaceAll","CodeMirror.DeleteLine","CodeMirror.GoLineStart","CodeMirror.GoLineEnd","CodeMirror.JmpToLine","CodeMirror.Fullscreen","CodeMirror.FullscreenExit","CodeMirror.Autocomplete"],this.readOnly=!1,this.hideTooltip=!1,this.languagesOptions=new Map([[Q.Javascript,{parserOptions:{ecmaVersion:2020},rules:{semi:["warn"]}}]]),this.textChange=new e.EventEmitter,this.isFullScreen=!1,this.keyBinding=[{key:"F11",run:function(i){return this.toggleFullScreenMode(),!0}.bind(this)},{key:"Escape",run:function(i){return this.escapeFullScreenMode(),!0}.bind(this)}]}get tooltipMessage(){return this._tooltipKeys.map(t=>this._translateService.instant(t)).join(`\r
`)}get languageOptions(){return this.languagesOptions.get(this.language)}get useCodemirror5(){return this._featureValues.UseCodemirror5}set text(t){this.code=t,this.innerCode=t}get options(){return{autoCloseBrackets:!0,dragDrop:!0,autofocus:!1,readOnly:this.readOnly,lineWrapping:!0,lineNumbers:!0,theme:"neat",lint:!0,foldGutter:!0,indentWithTabs:!0,indentUnit:4,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"],mode:this.language,extraKeys:{F11:function(){this.toggleFullScreenMode()}.bind(this),Esc:function(){this.escapeFullScreenMode()}.bind(this),"Ctrl-Space":"autocomplete",F3:"findNext","Shift-F3":"findPrev","Ctrl-Y":"deleteLine","Ctrl-F":"findPersistent"}}}escapeFullScreenMode(){!this.isFullScreen||this.toggleFullScreenMode()}toggleFullScreenMode(){this.isFullScreen=!this.isFullScreen,this._changeDetector.detectChanges()}onTextChange(t){t!==this.innerCode&&this.textChange.emit(t)}}wn.\u0275fac=function(t){return new(t||wn)(e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.FEATURE_VALUES))},wn.\u0275cmp=e.\u0275\u0275defineComponent({type:wn,selectors:[["ts-code-editor"]],inputs:{language:"language",readOnly:"readOnly",hideTooltip:"hideTooltip",languagesOptions:"languagesOptions",text:"text"},outputs:{textChange:"textChange"},decls:4,vars:4,consts:[["class","CodeMirror-hotkeys-tooltip-infoButton",4,"ngIf"],[3,"className"],[3,"ngModel","options","ngModelChange",4,"ngIf"],["ngDefaultControl","",3,"ngModel","language","languageOptions","readOnly","keyBinding","ngModelChange",4,"ngIf"],[1,"CodeMirror-hotkeys-tooltip-infoButton"],[1,"field-tooltip",3,"message"],[3,"ngModel","options","ngModelChange"],["ngDefaultControl","",3,"ngModel","language","languageOptions","readOnly","keyBinding","ngModelChange"]],template:function(t,n){t&1&&(e.\u0275\u0275template(0,Dl,2,1,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,Tl,1,2,"ngx-codemirror",2),e.\u0275\u0275template(3,kl,1,5,"ts-codemirror",3),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("ngIf",!n.hideTooltip),e.\u0275\u0275advance(1),e.\u0275\u0275property("className",n.isFullScreen?"CodeMirror-Wrapper-Full-Screen":"CodeMirror-Wrapper"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.useCodemirror5),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.useCodemirror5))},dependencies:[Io.CodemirrorComponent,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,s.NgIf,I.InfoTooltipIconComponent,In],styles:[`.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{padding:0 4px}.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid black;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:#14ff1480;animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;border:0;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;inset:-50px 0 0;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3,.cm-s-default .cm-type{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error,.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:white}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-50px;margin-right:-50px;padding-bottom:50px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:50px solid transparent}.CodeMirror-vscrollbar,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{position:absolute;z-index:6;display:none;outline:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-50px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;font-variant-ligatures:contextual}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;inset:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors,.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:#ff06}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}.CodeMirror-lint-markers{width:16px}.CodeMirror-lint-tooltip{background-color:#ffd;border:1px solid black;border-radius:4px;color:#000;font-family:monospace;font-size:10pt;overflow:hidden;padding:2px 5px;position:fixed;white-space:pre;white-space:pre-wrap;z-index:100;max-width:600px;opacity:0;transition:opacity .4s;-moz-transition:opacity .4s;-webkit-transition:opacity .4s;-o-transition:opacity .4s;-ms-transition:opacity .4s}.CodeMirror-lint-mark{background-position:left bottom;background-repeat:repeat-x}.CodeMirror-lint-mark-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=)}.CodeMirror-lint-mark-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==)}.CodeMirror-lint-marker{background-position:center center;background-repeat:no-repeat;cursor:pointer;display:inline-block;height:16px;width:16px;vertical-align:middle;position:relative}.CodeMirror-lint-message{padding-left:18px;background-position:top left;background-repeat:no-repeat}.CodeMirror-lint-marker-warning,.CodeMirror-lint-message-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=)}.CodeMirror-lint-marker-error,.CodeMirror-lint-message-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=)}.CodeMirror-lint-marker-multiple{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:right bottom;width:100%;height:100%}.CodeMirror-lint-tooltip{z-index:900}.CodeMirror-hotkeys-tooltip-infoButton{display:flex;justify-content:flex-end;position:sticky;top:0;margin-top:-22px;transform:translate(-10px,10px);pointer-events:none;z-index:99}.CodeMirror-hotkeys-tooltip-infoButton .field-tooltip{pointer-events:auto}
`],encapsulation:2});class Dn{}Dn.\u0275fac=function(t){return new(t||Dn)},Dn.\u0275mod=e.\u0275\u0275defineNgModule({type:Dn}),Dn.\u0275inj=e.\u0275\u0275defineInjector({providers:[b.TranslateService],imports:[Io.CodemirrorModule,c.FormsModule,s.CommonModule,I.TooltipModule,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Dn,{declarations:[wn,In],imports:[Io.CodemirrorModule,c.FormsModule,s.CommonModule,I.TooltipModule,b.TranslateModule],exports:[wn]})}();class Tn{constructor(){this.readOnly=!1,this.textChange=new e.EventEmitter}}Tn.\u0275fac=function(t){return new(t||Tn)},Tn.\u0275cmp=e.\u0275\u0275defineComponent({type:Tn,selectors:[["ts-code-editor"]],inputs:{language:"language",readOnly:"readOnly",text:"text"},outputs:{textChange:"textChange"},decls:1,vars:0,template:function(t,n){t&1&&e.\u0275\u0275element(0,"div")},encapsulation:2});class kn{}kn.\u0275fac=function(t){return new(t||kn)},kn.\u0275mod=e.\u0275\u0275defineNgModule({type:kn}),kn.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(kn,{declarations:[Tn],imports:[s.CommonModule],exports:[Tn]})}(),window.JSHINT=Il.JSHINT;class te{}te.\u0275fac=function(t){return new(t||te)},te.\u0275mod=e.\u0275\u0275defineNgModule({type:te}),te.\u0275inj=e.\u0275\u0275defineInjector({}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(te,{declarations:[_e],exports:[_e]})}();class He{}He.\u0275fac=function(t){return new(t||He)},He.\u0275mod=e.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.FormsModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,v.MatIconModule,te]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(He,{declarations:[ve],imports:[s.CommonModule,c.FormsModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,v.MatIconModule,te],exports:[ve]})}();class be{}be.\u0275fac=function(t){return new(t||be)},be.\u0275mod=e.\u0275\u0275defineNgModule({type:be}),be.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.FormsModule,b.TranslateModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,v.MatIconModule,M.MatLegacyDialogModule,te,I.DialogModule,I.TooltipModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(be,{declarations:[xn,ye],imports:[s.CommonModule,c.FormsModule,b.TranslateModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,v.MatIconModule,M.MatLegacyDialogModule,te,I.DialogModule,I.TooltipModule],exports:[ye]})}();class Ge{}Ge.\u0275fac=function(t){return new(t||Ge)},Ge.\u0275mod=e.\u0275\u0275defineNgModule({type:Ge}),Ge.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.ReactiveFormsModule,c.FormsModule,te,be,D.MatLegacyInputModule,$.MatLegacySelectModule,x.MatDatepickerModule,y.MatNativeDateModule,w.MatLegacyButtonModule,j.MatLegacyTooltipModule,v.MatIconModule,P.MatLegacyCheckboxModule,He,b.TranslateModule,A.MatLegacyAutocompleteModule,I.TooltipModule,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Ge,{declarations:[It,Ia,wa,Sa],imports:[s.CommonModule,c.ReactiveFormsModule,c.FormsModule,te,be,D.MatLegacyInputModule,$.MatLegacySelectModule,x.MatDatepickerModule,y.MatNativeDateModule,w.MatLegacyButtonModule,j.MatLegacyTooltipModule,v.MatIconModule,P.MatLegacyCheckboxModule,He,b.TranslateModule,A.MatLegacyAutocompleteModule,I.TooltipModule],exports:[It,b.TranslateModule]})}();class ao{static required(t){return n=>n.value?.getValue(t)?null:{required:!0}}static maxLength(t,n){return o=>o.value?.getValue(t).length>n?{maxlength:!0}:null}}function ko(a,t,n){const i=a.value?.getValue(t.currentLang);return n({value:i},t)}class El extends gt.RequiredValidator{validate(t,n){return ko(t,n,o=>super.validate(o,n))}}class Nl extends gt.MaxLengthValidator{validate(t,n){return ko(t,n,o=>super.validate(o,n))}}class Ll extends gt.MinLengthValidator{validate(t,n){return ko(t,n,o=>super.validate(o,n))}}class Al{}var Fl=p(21936);class oo extends I.CrtComponentHarness{constructor(){super(...arguments),this.input=this.locatorFor(".localizable-text-input-container-control")}static with(t){return new Fl.HarnessPredicate(oo,t)}getValue(){var t=this;return(0,O.Z)(function*(){return(yield t.input()).getProperty("value")})()}setValue(t){var n=this;return(0,O.Z)(function*(){const o=yield n.input();yield o.clear(),t&&(yield o.sendKeys(t)),yield o.setInputValue(t)})()}}oo.hostSelector="ts-localizable-text-input";function Ol(a,t){if(a&1&&e.\u0275\u0275element(0,"mat-icon",10),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("svgIcon",n.config.trigger.svgIconName)}}function Pl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.config.trigger.caption)}}function Vl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("menuOpened",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onMenuOpened())}),e.\u0275\u0275template(1,Ol,1,1,"mat-icon",6),e.\u0275\u0275template(2,Pl,2,1,"span",7),e.\u0275\u0275elementStart(3,"div",8),e.\u0275\u0275element(4,"div",9),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(4);e.\u0275\u0275property("matMenuTriggerFor",o)("disabled",n.config.trigger.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.config.trigger.svgIconName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.config.trigger.caption)}}function Rl(a,t){if(a&1&&e.\u0275\u0275element(0,"mat-divider"),a&2){const n=e.\u0275\u0275nextContext().index;e.\u0275\u0275styleProp("visibility",n===0?"hidden":"visible")}}function jl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.caption)}}function zl(a,t){if(a&1&&e.\u0275\u0275element(0,"mat-icon",23),a&2){const n=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275property("svgIcon",n.svgIconName)}}function Bl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275template(1,zl,1,1,"mat-icon",22),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.svgIconName)}}const Ul=function(a){return{"actions-menu-button-with-icon":a}};function Hl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onMenuItemContainerClick(i,r))}),e.\u0275\u0275elementStart(1,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onMenuItemClick(i))}),e.\u0275\u0275elementStart(2,"div",18),e.\u0275\u0275template(3,Bl,2,1,"span",19),e.\u0275\u0275elementStart(4,"span",20),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()()}if(a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",o.isMenuItemDisabled(n))("ngClass",e.\u0275\u0275pureFunction1(4,Ul,o.hasIcons())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.hasIcons()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.caption)}}function Gl(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Rl,1,2,"mat-divider",12),e.\u0275\u0275template(2,jl,2,1,"div",13),e.\u0275\u0275template(3,Hl,6,6,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.code===i.dividerItemCode)("ngIfElse",o),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.code===i.dividerItemCode&&n.caption)}}const Zl=["*"],Eo={code:"__divider",caption:null};Object.freeze(Eo);class En{constructor(){this.menuItemClick=new e.EventEmitter}}En.\u0275fac=function(t){return new(t||En)},En.\u0275dir=e.\u0275\u0275defineDirective({type:En,outputs:{menuItemClick:"menuItemClick"}});class Ze extends En{constructor(){super(...arguments),this.dividerItemCode=Eo.code}isMenuItemDisabled(t){return t.disabled===!0}onMenuItemClick(t){t.handler&&t.handler(),this.menuItemClick.emit(t.code)}onMenuItemContainerClick(t,n){this.isMenuItemDisabled(n)&&t.stopPropagation()}hasIcons(){return this.config?.menuItems?.some(t=>t.svgIconName)}trackByCode(t,n){return n.code}onMenuOpened(){this.visibleMenuItems=this.config?.menuItems?.filter(t=>!t.hidden)??[]}}Ze.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Ze)))(n||Ze)}}(),Ze.\u0275cmp=e.\u0275\u0275defineComponent({type:Ze,selectors:[["ts-actions-menu"]],inputs:{config:"config"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Zl,decls:6,vars:7,consts:[[1,"actions-menu-trigger-wrapper",3,"matMenuTriggerFor","menuOpened"],["mat-button","","class","actions-menu-trigger default",3,"matMenuTriggerFor","disabled","menuOpened",4,"ngIf"],[1,"actions-menu-panel",3,"overlapTrigger"],["menu","matMenu"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","",1,"actions-menu-trigger","default",3,"matMenuTriggerFor","disabled","menuOpened"],["class","actions-menu-trigger-icon",3,"svgIcon",4,"ngIf"],["class","actions-menu-trigger-caption",4,"ngIf"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[1,"actions-menu-trigger-icon",3,"svgIcon"],[1,"actions-menu-trigger-caption"],[3,"visibility",4,"ngIf","ngIfElse"],["class","menu-divider-caption",4,"ngIf"],["menuItem",""],[1,"menu-divider-caption"],[3,"click"],["mat-menu-item","",3,"disabled","ngClass","click"],[1,"actions-menu-item-button-content"],["class","actions-menu-item-icon-wrapper",4,"ngIf"],[1,"actions-menu-item-text"],[1,"actions-menu-item-icon-wrapper"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(t,n){if(t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("menuOpened",function(){return n.onMenuOpened()}),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Vl,5,4,"button",1),e.\u0275\u0275elementStart(3,"mat-menu",2,3),e.\u0275\u0275template(5,Gl,5,3,"ng-container",4),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(4);e.\u0275\u0275property("matMenuTriggerFor",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.config==null?null:n.config.trigger),e.\u0275\u0275advance(1),e.\u0275\u0275classMap(n.config==null?null:n.config.cssClasses),e.\u0275\u0275property("overlapTrigger",n.config==null?null:n.config.overlapTrigger),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.visibleMenuItems)("ngForTrackBy",n.trackByCode)}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,w.MatLegacyButton,ut.MatDivider,v.MatIcon,de.MatLegacyMenu,de.MatLegacyMenuItem,de.MatLegacyMenuTrigger],styles:[`ts-actions-menu .actions-menu-trigger-wrapper{display:flex;align-items:center}.mat-menu-content .menu-divider-caption{padding:0 16px;text-transform:uppercase;font-size:14px;color:#4b7fc7;height:33px;line-height:33px}.actions-menu-panel{max-width:500px!important}.actions-menu-panel button.mat-menu-item{height:33px!important;line-height:33px!important;padding-right:30px}.actions-menu-panel button.mat-menu-item.actions-menu-button-with-icon{padding-left:12px!important}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content{display:flex;flex-direction:row;align-items:center}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper{width:16px;height:16px;padding-right:8px;line-height:16px}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper mat-icon{width:16px;height:16px;margin:0!important}.actions-menu-panel mat-divider{margin:5px 12px}
`],encapsulation:2,changeDetection:0});const Wl=function(a,t,n){return{menuItems:a,overlapTrigger:t,cssClasses:n}};class Nn extends En{constructor(t,n){super(),this._matIconRegistry=t,this._domSanitizer=n,this.menuItems=[],this.cssClasses="",this.overlapTrigger=!0,this._registerIcons()}_registerIcons(){this._matIconRegistry.addSvgIconLiteral("vertical-dots",this._domSanitizer.bypassSecurityTrustHtml(p(53409)))}}Nn.\u0275fac=function(t){return new(t||Nn)(e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},Nn.\u0275cmp=e.\u0275\u0275defineComponent({type:Nn,selectors:[["ts-compact-actions-menu"]],inputs:{menuItems:"menuItems",cssClasses:"cssClasses",overlapTrigger:"overlapTrigger"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:5,consts:[[3,"config","menuItemClick"],["svgIcon","vertical-dots"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"ts-actions-menu",0),e.\u0275\u0275listener("menuItemClick",function(i){return n.menuItemClick.emit(i)}),e.\u0275\u0275element(1,"mat-icon",1),e.\u0275\u0275elementEnd()),t&2&&e.\u0275\u0275property("config",e.\u0275\u0275pureFunction3(1,Wl,n.menuItems,n.overlapTrigger,n.cssClasses))},dependencies:[v.MatIcon,Ze],styles:["[_nghost-%COMP%]{display:block}mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}"],changeDetection:0});function Ql(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"a",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(i.formatTextValue(o,i.columnDataSchema.valueType))}}function Yl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2).$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.formatTextValue(n,o.columnDataSchema.valueType))}}function $l(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ql,2,2,"a",4),e.\u0275\u0275template(2,Yl,2,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.columnDataSchema.linkGenerator&&o.columnDataSchema.linkGenerator(o.record))("ngIfElse",n)}}function Jl(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"span",2),e.\u0275\u0275template(2,$l,4,2,"ng-container",3),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isDisplayedAsText())}}class Dt extends De{getValue(){if(!this.isDisplayedAsText())throw new l.ArgumentOutOfRangeException("Only text columns can be displayed via NamedFolderTableCellComponent.");return super.getValue()}}Dt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Dt)))(n||Dt)}}(),Dt.\u0275cmp=e.\u0275\u0275defineComponent({type:Dt,selectors:[["ts-named-folder-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","named-folder-cell-wrapper",4,"ngIf"],[1,"named-folder-cell-wrapper"],[1,"folder-icon"],[4,"ngIf"],[3,"routerLink",4,"ngIf","ngIfElse"],["elseBlock",""],[3,"routerLink"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Jl,3,1,"div",0),t&2&&e.\u0275\u0275property("ngIf",!n.isEmpty()&&n.getValue())},dependencies:[s.NgIf,we.RouterLink],styles:[".named-folder-cell-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.named-folder-cell-wrapper[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-right:8px;background:url(folder-icon.svg) no-repeat}"]});var io=p(59972);class No{constructor(t,n){this._value=t,this._property=n}get property(){return this._property}get value(){return this._value}canMatchItem(t){if(!t)return!1;const n=t[this.property],o=n!=null,i=typeof n===this._value.constructor.name.toLowerCase();return o&&i}isItemMatch(t){return this.canMatchItem(t)&&this.isValueMatch(t[this.property])}}class za extends No{constructor(t,n){super(t,n||za.DEFAULT_PROPERTY)}isValueMatch(t){const n=t.toLowerCase(),o=this.value.toLowerCase(),i=(0,S.compact)(n.split(" "));return(0,S.compact)(o.split(" ")).every(d=>i.find(f=>f.includes(d)))}}za.DEFAULT_PROPERTY="caption";class pi extends No{isValueMatch(t){return t===this.value}}class Ta{_isFilterNotFalsy(t){return t&&t.value!==null&&t.value!==void 0}transform(t,n){if(!t)return[];if(!n)return t;let o=[...t];return n.filter(this._isFilterNotFalsy).forEach(r=>{o=o.filter(d=>r.isItemMatch(d))}),o}}Ta.\u0275fac=function(t){return new(t||Ta)},Ta.\u0275pipe=e.\u0275\u0275definePipe({name:"filter",type:Ta,pure:!0});function ql(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.filteringValue="")}),e.\u0275\u0275element(1,"mat-icon",10),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();let o;e.\u0275\u0275advance(1),e.\u0275\u0275property("title",(o=e.\u0275\u0275pipeBind1(2,1,n.localizableStrings$))==null?null:o.ClearButtonTitle)}}function Kl(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",11)}function Xl(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-list-item",16),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.onItemSelected(r))}),e.\u0275\u0275elementStart(1,"button",17),e.\u0275\u0275listener("click",function(i){const d=e.\u0275\u0275restoreView(n).$implicit,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.toggleFavorite(d,i))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",18),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);let i;e.\u0275\u0275classProp("active",n.isActive),e.\u0275\u0275attribute("data-qa",n.caption),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.isFavorite?o.favoriteCssClass:o.regularCssClass)("title",n.isFavorite?(i=e.\u0275\u0275pipeBind1(2,6,o.localizableStrings$))==null?null:i.RemoveFromFavoriteButtonTitle:(i=e.\u0275\u0275pipeBind1(3,8,o.localizableStrings$))==null?null:i.AddToFavoriteButtonTitle),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.caption," ")}}function es(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,Xl,6,10,"mat-list-item",15),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n)}}function ts(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275element(1,"div",20),e.\u0275\u0275elementStart(2,"div",21),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext(2);let o;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",(o=e.\u0275\u0275pipeBind1(4,1,n.localizableStrings$))==null?null:o.NoDataPlaceholder," ")}}function ns(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-action-list"),e.\u0275\u0275template(1,es,2,1,"div",12),e.\u0275\u0275template(2,ts,5,3,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),a&2){const n=t.ngIf,o=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.length>0)("ngIfElse",o)}}let ne=class extends K.CrtBaseComponent{constructor(t,n,o){super(o),this._resourcesService=t,this._changeDetector=n,this._filters=[],this.regularCssClass="regular",this.favoriteCssClass="favorite",this.filteringValue="",this.displayOnlyFavorites=!1,this.items=[],this.itemSelected=new e.EventEmitter,this.favoriteStateChanged=new e.EventEmitter}get _searchFilter(){return new za(this.filteringValue)}get _favoritesFilter(){return new pi(this.displayOnlyFavorites,"isFavorite")}get filters(){return this._filters=[this._searchFilter],this.displayOnlyFavorites&&this._filters.push(this._favoritesFilter),this._filters}get localizableStrings$(){return this._resources$.pipe((0,u.map)(t=>t.localizableStrings))}ngOnInit(){this._resources$=this._resourcesService.getResources()}onItemSelected(t){const n={id:t.id};this.itemSelected.emit(n)}toggleFavorite(t,n){n.stopPropagation();const{id:o,isFavorite:i}=t,r={id:o,isFavorite:!i};this.favoriteStateChanged.emit(r)}onFilteringValueChanged(t){this.filteringValue=t,this._changeDetector.detectChanges()}toggleDisplayOnlyFavorites(){this.displayOnlyFavorites=!this.displayOnlyFavorites,this._changeDetector.detectChanges()}};ne.\u0275fac=function(t){return new(t||ne)(e.\u0275\u0275directiveInject(Ve),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Injector))},ne.\u0275cmp=e.\u0275\u0275defineComponent({type:ne,selectors:[["ts-filterable-list"]],inputs:{items:"items"},outputs:{itemSelected:"itemSelected",favoriteStateChanged:"favoriteStateChanged"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:17,consts:[[1,"filterable-list-container",3,"ngStyle","ngClass"],[1,"filter-input-container"],[1,"display-only-favorites-button-container"],["mat-icon-button","","data-qa","filter-favorite-btn",3,"ngClass","title","click"],["floatLabel","never"],["matInput","","type","text","spellcheck","false","autocomplete","off","data-qa","search-input",3,"value","placeholder","input"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click",4,"ngIf","ngIfElse"],["searchIcon",""],[4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click"],["matSuffix","",1,"clear-icon",3,"title"],["matSuffix","",1,"search-icon"],["class","items-list",4,"ngIf","ngIfElse"],["noData",""],[1,"items-list"],["disableRipple","",3,"active","click",4,"ngFor","ngForOf"],["disableRipple","",3,"click"],["mat-icon-button","","data-qa","favorite-btn",3,"ngClass","title","click"],[1,"item-caption"],["data-qa","blank-slate",1,"blank-slate"],["data-qa","blank-slate-icon",1,"icon"],["data-qa","blank-slate-label",1,"label"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"button",3),e.\u0275\u0275listener("click",function(){return n.toggleDisplayOnlyFavorites()}),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"mat-form-field",4)(7,"input",5),e.\u0275\u0275listener("input",function(i){return n.onFilteringValueChanged(i.target.value)}),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,ql,3,3,"button",6),e.\u0275\u0275template(10,Kl,1,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(12,ns,4,2,"mat-action-list",8),e.\u0275\u0275pipe(13,"filter"),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(11);let i,r;e.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",n.displayOnlyFavorites?n.favoriteCssClass:n.regularCssClass)("title",(i=e.\u0275\u0275pipeBind1(5,10,n.localizableStrings$))==null?null:i.FilterFavoriteTitle),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",n.filteringValue)("placeholder",(r=e.\u0275\u0275pipeBind1(8,12,n.localizableStrings$))==null?null:r.SearchPlaceholder),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.filteringValue)("ngIfElse",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(13,14,n.items,n.filters))}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgStyle,_.MatLegacyFormField,_.MatLegacySuffix,v.MatIcon,D.MatLegacyInput,io.MatLegacyList,io.MatLegacyListItem,w.MatLegacyButton,s.AsyncPipe,Ta],styles:[`.filterable-list-container{display:flex;flex-direction:column;height:100%;min-height:inherit;max-height:inherit}.filterable-list-container .display-only-favorites-button-container .mat-icon-button{height:32px;width:32px}.filterable-list-container .items-list{margin-top:8px}.filterable-list-container .blank-slate{display:flex;flex-direction:column;align-items:center}.filterable-list-container .blank-slate .label{color:#757575;font-size:12px;font-family:Open Sans,Regular,sans-serif;margin-top:16px}.filterable-list-container .blank-slate .icon{width:100px;height:104px;margin-top:24px;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iaWNvbl9zZWFyY2hfYmlnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTA0IiB2aWV3Qm94PSIwIDAgMTAwIDEwNCI+DQogIDxnIGlkPSJQYXRoXzc0NTciIGRhdGEtbmFtZT0iUGF0aCA3NDU3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcxNC44MTggLTY0OS41MTIpIiBmaWxsPSJyZ2JhKDEwMCwxODQsMjIzLDAuMSkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+DQogICAgPHBhdGggZD0iTSAxNzE4LjYwMTY4NDU3MDMxMyA3NTIuNTA1ODU5Mzc1IEMgMTcyMS41NjE2NDU1MDc4MTMgNzUwLjM3MDQyMjM2MzI4MTMgMTcyNC4zMTk3MDIxNDg0MzggNzQ3LjEzMzIzOTc0NjA5MzggMTcyNi44MzQ1OTQ3MjY1NjMgNzQyLjgzNTgxNTQyOTY4NzUgQyAxNzI5LjQyMTI2NDY0ODQzOCA3MzguNDE1NTg4Mzc4OTA2MyAxNzMwLjc1NTM3MTA5Mzc1IDczNC41MjIwMzM2OTE0MDYzIDE3MzAuODEwOTEzMDg1OTM4IDczNC4zNTgzOTg0Mzc1IEwgMTczMS4wMDY1OTE3OTY4NzUgNzMzLjc4MTkyMTM4NjcxODggTCAxNzMwLjU4NDM1MDU4NTkzOCA3MzMuMzQzMzIyNzUzOTA2MyBDIDE3MjYuMjg1NTIyNDYwOTM4IDcyOC44NzkzMzM0OTYwOTM4IDE3MjIuOTE0MzA2NjQwNjI1IDcyMy43MTg5MzMxMDU0Njg4IDE3MjAuNTY0MzMxMDU0Njg4IDcxOC4wMDUzNzEwOTM3NSBDIDE3MTguMTI5NTE2NjAxNTYzIDcxMi4wODU1NzEyODkwNjI1IDE3MTYuODk1MDE5NTMxMjUgNzA1LjgwNzY3ODIyMjY1NjMgMTcxNi44OTUwMTk1MzEyNSA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE3MTYuODk1MDE5NTMxMjUgNjkyLjc1MTk1MzEyNSAxNzE4LjE3NjUxMzY3MTg3NSA2ODYuMzU1NzczOTI1NzgxMyAxNzIwLjcwMzczNTM1MTU2MyA2ODAuMzM1MjY2MTEzMjgxMyBDIDE3MjMuMTQ0ODk3NDYwOTM4IDY3NC41MTk5NTg0OTYwOTM4IDE3MjYuNjM5NzcwNTA3ODEzIDY2OS4yOTczMDIyNDYwOTM4IDE3MzEuMDkxMTg2NTIzNDM4IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTczNS41NDIxMTQyNTc4MTMgNjYwLjMyNzgxOTgyNDIxODggMTc0MC43MjQ4NTM1MTU2MjUgNjU2LjgwNzEyODkwNjI1IDE3NDYuNDk1MzYxMzI4MTI1IDY1NC4zNDgwODM0OTYwOTM4IEMgMTc1Mi40Njg3NSA2NTEuODAyNjczMzM5ODQzOCAxNzU4LjgxNDY5NzI2NTYyNSA2NTAuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTAuNTEyMDIzOTI1NzgxMyBDIDE3NzEuODk5MTY5OTIxODc1IDY1MC41MTIwMjM5MjU3ODEzIDE3NzguMjQ0ODczMDQ2ODc1IDY1MS44MDI2NzMzMzk4NDM4IDE3ODQuMjE4MjYxNzE4NzUgNjU0LjM0ODA4MzQ5NjA5MzggQyAxNzg5Ljk4ODc2OTUzMTI1IDY1Ni44MDcxMjg5MDYyNSAxNzk1LjE3MTUwODc4OTA2MyA2NjAuMzI3ODE5ODI0MjE4OCAxNzk5LjYyMjU1ODU5Mzc1IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTgwNC4wNzM5NzQ2MDkzNzUgNjY5LjI5NzM2MzI4MTI1IDE4MDcuNTY4ODQ3NjU2MjUgNjc0LjUyMDAxOTUzMTI1IDE4MTAuMDEwMTMxODM1OTM4IDY4MC4zMzUyNjYxMTMyODEzIEMgMTgxMi41Mzc0NzU1ODU5MzggNjg2LjM1NTgzNDk2MDkzNzUgMTgxMy44MTg5Njk3MjY1NjMgNjkyLjc1MTk1MzEyNSAxODEzLjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTMuODE4OTY5NzI2NTYzIDcwNS45Mzk4MTkzMzU5Mzc1IDE4MTIuNTM3NDc1NTg1OTM4IDcxMi4zMzU3NTQzOTQ1MzEzIDE4MTAuMDEwMTMxODM1OTM4IDcxOC4zNTYxNDAxMzY3MTg4IEMgMTgwNy41Njg4NDc2NTYyNSA3MjQuMTcxMjY0NjQ4NDM3NSAxODA0LjA3Mzk3NDYwOTM3NSA3MjkuMzkzODU5ODYzMjgxMyAxNzk5LjYyMjU1ODU5Mzc1IDczMy44Nzg3ODQxNzk2ODc1IEMgMTc5NS4xNzE1MDg3ODkwNjMgNzM4LjM2MzI4MTI1IDE3ODkuOTg4NzY5NTMxMjUgNzQxLjg4MzkxMTEzMjgxMjUgMTc4NC4yMTgyNjE3MTg3NSA3NDQuMzQyOTU2NTQyOTY4OCBDIDE3NzguMjQ0ODczMDQ2ODc1IDc0Ni44ODgzNjY2OTkyMTg4IDE3NzEuODk5MDQ3ODUxNTYzIDc0OC4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OC4xNzkwMTYxMTMyODEzIEMgMTc1OS42MDc1NDM5NDUzMTMgNzQ4LjE3OTAxNjExMzI4MTMgMTc1My45Nzk4NTgzOTg0MzggNzQ3LjE3MzUyMjk0OTIxODggMTc0OC42MzA2MTUyMzQzNzUgNzQ1LjE5MDM2ODY1MjM0MzggTCAxNzQ4LjA3MDQzNDU3MDMxMyA3NDQuOTgyNjY2MDE1NjI1IEwgMTc0Ny42MjIwNzAzMTI1IDc0NS4zNzc1MDI0NDE0MDYzIEMgMTc0Ny4yODQ3OTAwMzkwNjMgNzQ1LjY3NDQ5OTUxMTcxODggMTc0Ni45NDcxNDM1NTQ2ODggNzQ1LjkyMTgxMzk2NDg0MzggMTc0Ni41NTkzMjYxNzE4NzUgNzQ2LjE1NTgyMjc1MzkwNjMgQyAxNzM3LjA4NTQ0OTIxODc1IDc1MS44ODMxNzg3MTA5Mzc1IDE3MjkuNjYxNzQzMTY0MDYzIDc1Mi40NDk4MjkxMDE1NjI1IDE3MTguNjAxNjg0NTcwMzEzIDc1Mi41MDU4NTkzNzUgWiIgc3Ryb2tlPSJub25lIi8+DQogICAgPHBhdGggZD0iTSAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBDIDE3NTguOTUwMTk1MzEyNSA2NTEuNTEyMDIzOTI1NzgxMyAxNzUyLjczNjIwNjA1NDY4OCA2NTIuNzc1NzU2ODM1OTM3NSAxNzQ2Ljg4NzQ1MTE3MTg3NSA2NTUuMjY4MDY2NDA2MjUgQyAxNzQxLjIzNjIwNjA1NDY4OCA2NTcuNjc2MjA4NDk2MDkzOCAxNzM2LjE2MDQwMDM5MDYyNSA2NjEuMTI0Mzg5NjQ4NDM3NSAxNzMxLjgwMDkwMzMyMDMxMyA2NjUuNTE2Nzg0NjY3OTY4OCBDIDE3MjcuNDQwNDI5Njg3NSA2NjkuOTEwMTU2MjUgMTcyNC4wMTY5Njc3NzM0MzggNjc1LjAyNjA2MjAxMTcxODggMTcyMS42MjU4NTQ0OTIxODggNjgwLjcyMjI5MDAzOTA2MjUgQyAxNzE5LjE1MDI2ODU1NDY4OCA2ODYuNjE5NjI4OTA2MjUgMTcxNy44OTUwMTk1MzEyNSA2OTIuODg1NTU5MDgyMDMxMyAxNzE3Ljg5NTAxOTUzMTI1IDY5OS4zNDYwMDgzMDA3ODEzIEMgMTcxNy44OTUwMTk1MzEyNSA3MDUuNjc2NTEzNjcxODc1IDE3MTkuMTA0MjQ4MDQ2ODc1IDcxMS44MjY0NzcwNTA3ODEzIDE3MjEuNDg5MTM1NzQyMTg4IDcxNy42MjUgQyAxNzIzLjc5MTAxNTYyNSA3MjMuMjIxNjc5Njg3NSAxNzI3LjA5MzM4Mzc4OTA2MyA3MjguMjc2NjcyMzYzMjgxMyAxNzMxLjMwNDU2NTQyOTY4OCA3MzIuNjQ5NjU4MjAzMTI1IEwgMTczMi4xNDkyOTE5OTIxODggNzMzLjUyNjc5NDQzMzU5MzggTCAxNzMxLjc1NzgxMjUgNzM0LjY3OTg3MDYwNTQ2ODggQyAxNzMxLjU3OTIyMzYzMjgxMyA3MzUuMjA2MDU0Njg3NSAxNzI4LjEyNDc1NTg1OTM3NSA3NDUuMTg4OTY0ODQzNzUgMTcyMS4zOTczMzg4NjcxODggNzUxLjQ3NjY4NDU3MDMxMjUgQyAxNzI1LjExMzY0NzQ2MDkzOCA3NTEuNDEyNTk3NjU2MjUgMTcyOC40MDk1NDU4OTg0MzggNzUxLjIzMjIzODc2OTUzMTMgMTczMS41NzE0MTExMzI4MTMgNzUwLjcyNDc5MjQ4MDQ2ODggQyAxNzM2Ljc0NzMxNDQ1MzEyNSA3NDkuODk0MTA0MDAzOTA2MyAxNzQxLjIwOTk2MDkzNzUgNzQ4LjIyMTE5MTQwNjI1IDE3NDYuMDQyNjAyNTM5MDYzIDc0NS4yOTk2ODI2MTcxODc1IEMgMTc0Ni4zNzgwNTE3NTc4MTMgNzQ1LjA5NzI5MDAzOTA2MjUgMTc0Ni42Njk5MjE4NzUgNzQ0Ljg4MzU0NDkyMTg3NSAxNzQ2Ljk2MTA1OTU3MDMxMyA3NDQuNjI3MDc1MTk1MzEyNSBMIDE3NDcuODU3Nzg4MDg1OTM4IDc0My44MzczNDEzMDg1OTM4IEwgMTc0OC45NzgxNDk0MTQwNjMgNzQ0LjI1MjY4NTU0Njg3NSBDIDE3NTQuMjE1ODIwMzEyNSA3NDYuMTk0NDU4MDA3ODEyNSAxNzU5LjcyNjU2MjUgNzQ3LjE3OTAxNjExMzI4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNzQ3LjE3OTAxNjExMzI4MTMgQyAxNzcxLjc2MzY3MTg3NSA3NDcuMTc5MDE2MTEzMjgxMyAxNzc3Ljk3NzUzOTA2MjUgNzQ1LjkxNTI4MzIwMzEyNSAxNzgzLjgyNjE3MTg3NSA3NDMuNDIyOTczNjMyODEyNSBDIDE3ODkuNDc3Mjk0OTIxODc1IDc0MS4wMTQ4MzE1NDI5Njg4IDE3OTQuNTUzMjIyNjU2MjUgNzM3LjU2NjcxMTQyNTc4MTMgMTc5OC45MTI3MTk3MjY1NjMgNzMzLjE3NDMxNjQwNjI1IEMgMTgwMy4yNzMzMTU0Mjk2ODggNzI4Ljc4MTAwNTg1OTM3NSAxODA2LjY5Njc3NzM0Mzc1IDcyMy42NjUyMjIxNjc5Njg4IDE4MDkuMDg4MDEyNjk1MzEzIDcxNy45NjkxMTYyMTA5Mzc1IEMgMTgxMS41NjM3MjA3MDMxMjUgNzEyLjA3MTg5OTQxNDA2MjUgMTgxMi44MTg5Njk3MjY1NjMgNzA1LjgwNjE1MjM0Mzc1IDE4MTIuODE4OTY5NzI2NTYzIDY5OS4zNDYwMDgzMDA3ODEzIEMgMTgxMi44MTg5Njk3MjY1NjMgNjkyLjg4NTU1OTA4MjAzMTMgMTgxMS41NjM3MjA3MDMxMjUgNjg2LjYxOTY4OTk0MTQwNjMgMTgwOS4wODgwMTI2OTUzMTMgNjgwLjcyMjI5MDAzOTA2MjUgQyAxODA2LjY5Njc3NzM0Mzc1IDY3NS4wMjYxMjMwNDY4NzUgMTgwMy4yNzMzMTU0Mjk2ODggNjY5LjkxMDIxNzI4NTE1NjMgMTc5OC45MTI3MTk3MjY1NjMgNjY1LjUxNjc4NDY2Nzk2ODggQyAxNzk0LjU1MzIyMjY1NjI1IDY2MS4xMjQzODk2NDg0Mzc1IDE3ODkuNDc3Mjk0OTIxODc1IDY1Ny42NzYyMDg0OTYwOTM4IDE3ODMuODI2MTcxODc1IDY1NS4yNjgwNjY0MDYyNSBDIDE3NzcuOTc3NTM5MDYyNSA2NTIuNzc1NzU2ODM1OTM3NSAxNzcxLjc2MzY3MTg3NSA2NTEuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBNIDE3NjUuMzU3MDU1NjY0MDYzIDY0OS41MTIwMjM5MjU3ODEzIEMgMTc5Mi42NzUwNDg4MjgxMjUgNjQ5LjUxMjAyMzkyNTc4MTMgMTgxNC44MTg5Njk3MjY1NjMgNjcxLjgyMjk5ODA0Njg3NSAxODE0LjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTQuODE4OTY5NzI2NTYzIDcyNi44Njc5ODA5NTcwMzEzIDE3OTIuNjc1MDQ4ODI4MTI1IDc0OS4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OS4xNzkwMTYxMTMyODEzIEMgMTc1OS4zNTQ5ODA0Njg3NSA3NDkuMTc5MDE2MTEzMjgxMyAxNzUzLjYwNDk4MDQ2ODc1IDc0OC4xMDEwMTMxODM1OTM4IDE3NDguMjgyOTU4OTg0Mzc1IDc0Ni4xMjc5OTA3MjI2NTYzIEMgMTc0Ny45NDc5OTgwNDY4NzUgNzQ2LjQyMjk3MzYzMjgxMjUgMTc0Ny41NjQ5NDE0MDYyNSA3NDYuNzE2OTc5OTgwNDY4OCAxNzQ3LjA3NjA0OTgwNDY4OCA3NDcuMDEyMDIzOTI1NzgxMyBDIDE3MzYuMzIzOTc0NjA5Mzc1IDc1My41MTIwMjM5MjU3ODEzIDE3MjguMDc5OTU2MDU0Njg4IDc1My41MTIwMjM5MjU3ODEzIDE3MTQuODE4OTY5NzI2NTYzIDc1My41MTIwMjM5MjU3ODEzIEMgMTcyNC41ODg5ODkyNTc4MTMgNzQ5LjM5Njk3MjY1NjI1IDE3MjkuNzc0MDQ3ODUxNTYzIDczNC4zMDIwMDE5NTMxMjUgMTcyOS44NjQwMTM2NzE4NzUgNzM0LjAzNjk4NzMwNDY4NzUgQyAxNzIxLjIyMzk5OTAyMzQzOCA3MjUuMDY1MDAyNDQxNDA2MyAxNzE1Ljg5NTAxOTUzMTI1IDcxMi44MzU5OTg1MzUxNTYzIDE3MTUuODk1MDE5NTMxMjUgNjk5LjM0NjAwODMwMDc4MTMgQyAxNzE1Ljg5NTAxOTUzMTI1IDY3MS44MjI5OTgwNDY4NzUgMTczOC4wMzc5NjM4NjcxODggNjQ5LjUxMjAyMzkyNTc4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNjQ5LjUxMjAyMzkyNTc4MTMgWiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjNjRiOGRmIi8+DQogIDwvZz4NCiAgPGcgaWQ9Ikdyb3VwXzc3NjAiIGRhdGEtbmFtZT0iR3JvdXAgNzc2MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3MTQuODE4IC02NDkuNTEyKSI+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8xMzM2IiBkYXRhLW5hbWU9IkVsbGlwc2UgMTMzNiIgY3g9IjEyLjI1IiBjeT0iMTIuMjUiIHI9IjEyLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzQ4LjA2OSA2ODIuMDQyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjRiOGRmIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzUxMyIgZGF0YS1uYW1lPSJMaW5lIDUxMyIgeDE9IjEyLjQ2MyIgeTE9IjEyLjQ2MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2OS4xMDYgNzAyLjgyOSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY0YjhkZiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPC9nPg0KPC9zdmc+DQo=);background-position:center}.filterable-list-container .mat-icon-button{background-color:transparent}.filterable-list-container .mat-icon-button.favorite{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDEuMWwyLjMsNC42NjcsNS4yLjcxLTMuNywzLjY1Mi44LDQuOTcxTDguNSwxMi43NjcsMy45LDE1LjFsLjktNC45NzFMMSw2LjQ3N2w1LjItLjcxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSAtMC4xKSIvPjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filterable-list-container .mat-icon-button.regular{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZGJkYmRiO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDMuMyw5LjksNi4ybC4yLjUuNS4xLDMuMi40TDExLjYsOS40bC0uNC40LjEuNS41LDMuMUw5LDExLjhsLS41LS4yLS41LjJMNS4yLDEzLjJsLjYtMywuMS0uNS0uNC0uNEwzLjIsNy4xbDMuMS0uNC41LS4xTDcsNi4xLDguNSwzLjNNOC41LDEsNi4yLDUuNywxLDYuNCw0LjgsMTBsLS45LDUsNC42LTIuM0wxMy4xLDE1bC0uOC01TDE2LDYuNGwtNS4yLS43WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEpIi8+PHJlY3QgY2xhc3M9ImIiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIvPjwvc3ZnPg==);background-position:center}.filterable-list-container .mat-icon-button.regular:hover{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCjxkZWZzPiA8c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPg0KPHBhdGggY2xhc3M9ImEiIGQ9Ik04LjUsMy4zLDkuOSw2LjJsLjIuNS41LjEsMy4yLjRMMTEuNiw5LjRsLS40LjQuMS41LjUsMy4xTDksMTEuOGwtLjUtLjItLjUuMkw1LjIsMTMuMmwuNi0zLC4xLS41LS40LS40TDMuMiw3LjFsMy4xLS40LjUtLjFMNyw2LjEsOC41LDMuM004LjUsMSw2LjIsNS43LDEsNi40LDQuOCwxMGwtLjksNSw0LjYtMi4zTDEzLjEsMTVsLS44LTVMMTYsNi40bC01LjItLjdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSkiLz4NCjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filter-input-container{display:flex;flex-direction:row;margin-right:10px;padding-left:6px}.filter-input-container .mat-form-field{font-size:13px;width:100%}.filter-input-container .mat-form-field input{font-family:Open Sans,Regular,sans-serif;color:#444}.filter-input-container .mat-form-field .mat-input-element{vertical-align:middle}.filter-input-container .mat-form-field .mat-form-field-ripple{top:1px;height:1px;background:#006ce0}.filter-input-container .mat-form-field .mat-form-field-underline{border-bottom:1px #c8c8c8 solid;background-color:transparent;margin-top:3px}.filter-input-container .mat-form-field .mat-form-field-wrapper{padding-top:5px;margin-bottom:-1.25em}.filter-input-container .mat-form-field .mat-form-field-empty.mat-form-field-label{padding-top:2px;color:#999}.filter-input-container .mat-form-field .mat-form-field-infix{border-top:none}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button,.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:18px;height:18px;margin-right:8px}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{color:#999;vertical-align:middle}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.search-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzgwOTViMyIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+PGNpcmNsZSBjeD0iNiIgY3k9IjYiIHI9IjQuNSIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTSA5LjQsOS40IDE0LDE0Ii8+PC9nPjwvc3ZnPg==)}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.clear-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPGcgaWQ9Ikdyb3VwXzIzNTUiIGRhdGEtbmFtZT0iR3JvdXAgMjM1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MyAtMjEzNCkiPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE0NiIgZGF0YS1uYW1lPSJMaW5lIDE0NiIgeTE9IjEwIiB4Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0Ni41IDIxMzcuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzc1NzU3NSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNDciIGRhdGEtbmFtZT0iTGluZSAxNDciIHgyPSIxMCIgeTI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDYuNSAyMTM3LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xMDkyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAxMDkyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0MyAyMTM0KSIgZmlsbD0ibm9uZSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.mat-list.mat-list-base.mat-action-list{padding-top:0;overflow:auto}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar{width:4px}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-track{background:transparent;border:4px solid transparent;background-clip:content-box}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-thumb{background:#999999;border-radius:4px}.mat-list.mat-list-base.mat-action-list .mat-list-item{font-size:13px;font-family:Open Sans,Regular,sans-serif;color:#444;height:33px;padding-left:6px;box-sizing:border-box}.mat-list.mat-list-base.mat-action-list .mat-list-item.active{background-color:#e5ebfb}.mat-list.mat-list-base.mat-action-list .mat-list-item:hover{background:#f2f5ff}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content{padding-left:8px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .mat-icon-button{height:16px;width:16px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .item-caption{padding-left:8px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
`],encapsulation:3}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Array)],ne.prototype,"items",void 0),(0,g.__decorate)([(0,l.CrtOutput)(),(0,g.__metadata)("design:type",e.EventEmitter)],ne.prototype,"itemSelected",void 0),(0,g.__decorate)([(0,l.CrtOutput)(),(0,g.__metadata)("design:type",e.EventEmitter)],ne.prototype,"favoriteStateChanged",void 0),ne=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.FilterableList",reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,g.__metadata)("design:paramtypes",[Ve,e.ChangeDetectorRef,e.Injector])],ne);class We{}We.\u0275fac=function(t){return new(t||We)},We.\u0275mod=e.\u0275\u0275defineNgModule({type:We}),We.\u0275inj=e.\u0275\u0275defineInjector({providers:[Oe.CustomEventService,Ve,{provide:Mo,useValue:new Jo("getFilterableListResources","setFilterableListResources",{localizableStrings:{NoDataPlaceholder:"No data",SearchPlaceholder:"Search",FilterFavoriteTitle:"Only favorites",RemoveFromFavoriteButtonTitle:"Remove from favorites",AddToFavoriteButtonTitle:"Add to favorites",ClearButtonTitle:"Cancel"}})}],imports:[s.CommonModule,c.FormsModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,io.MatLegacyListModule,w.MatLegacyButtonModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(We,{declarations:[ne,Ta],imports:[s.CommonModule,c.FormsModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,io.MatLegacyListModule,w.MatLegacyButtonModule],exports:[ne]})}();const as=["dataViewWrapper"];function os(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.additionalText)}}function is(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",11)(1,"a",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("href",n.helpLinkUrl.url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.helpLinkUrl.caption)}}function rs(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",14),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("mat-dialog-close",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"TableDialog.Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("mat-dialog-close",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.continueButtonCaption)}}function ls(a,t){a&1&&(e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"TableDialog.Close")," "))}class Ln{constructor(t,n){this.dialogData=t,this.scrollToBottomObserverFactory=n,this.title="",this.sortColumn="",this.additionalText="",this.continueButtonCaption=""}_initScrollToBottomObserver(){const t=this.dataViewWrapper.nativeElement;this._scrollToBottomObserver=this.scrollToBottomObserverFactory.createObserver(t,this._loadNextData.bind(this))}_loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnInit(){!this.dialogData||!this.dialogData.data||(this.tableDataSource=new Ka(this.dialogData.data),this.dataSchema=this.dialogData.dataSchema,this.title=this.dialogData.title||this.title,this.sortColumn=this.dialogData.sortColumn,this.additionalText=this.dialogData.additionalText,this.helpLinkUrl=this.dialogData.helpLinkUrl,this.continueButtonCaption=this.dialogData.continueButtonCaption)}ngOnDestroy(){this._scrollToBottomObserver&&this._scrollToBottomObserver.destroy()}}Ln.\u0275fac=function(t){return new(t||Ln)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA),e.\u0275\u0275directiveInject(m.ScrollToBottomObserverFactory))},Ln.\u0275cmp=e.\u0275\u0275defineComponent({type:Ln,selectors:[["ts-table-dialog"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(as,7),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.dataViewWrapper=o.first)}},decls:13,vars:8,consts:[["mat-dialog-title",""],[1,"dialog-content-wrapper"],["class","table-dialog-additional-text",4,"ngIf"],["class","table-dialog-help-link-url",4,"ngIf"],["mat-dialog-content","",1,"data-table"],["dataViewWrapper",""],["headerSticky","true",3,"dataSource","dataSchema","sortColumn"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],["withoutContinue",""],[1,"table-dialog-additional-text"],[1,"table-dialog-help-link-url"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275template(4,os,2,1,"div",2),e.\u0275\u0275template(5,is,3,2,"div",3),e.\u0275\u0275elementStart(6,"div",4,5),e.\u0275\u0275element(8,"ts-table",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275template(10,rs,6,6,"ng-container",8),e.\u0275\u0275template(11,ls,3,3,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),t&2){const o=e.\u0275\u0275reference(12);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.title),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.additionalText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.helpLinkUrl),e.\u0275\u0275advance(3),e.\u0275\u0275property("dataSource",n.tableDataSource)("dataSchema",n.dataSchema)("sortColumn",n.sortColumn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.continueButtonCaption)("ngIfElse",o)}},dependencies:[s.NgIf,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,Z,b.TranslatePipe],styles:[`ts-table-dialog{min-width:850px;max-width:900px;margin:0 8px!important;padding:0}ts-table-dialog .table-dialog-additional-text{margin-bottom:4px;display:inline}ts-table-dialog .table-dialog-help-link-url{display:inline;cursor:pointer}ts-table-dialog .data-table{overflow-y:auto!important;max-height:330px;margin:0;padding:0}ts-table-dialog .data-table table{padding-top:0}ts-table-dialog [mat-dialog-actions]{display:flex;flex-direction:row;justify-content:flex-end;margin:20px 0 10px!important}
`],encapsulation:2});function ss(a,t){if(a&1&&e.\u0275\u0275element(0,"mat-icon",1),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("svgIcon",n.svgIconName)}}class cs extends Ja{constructor(t){super(t),this.cellComponentClass=Tt}}class Tt extends he{get svgIconName(){return{[m.MessageType.Error]:this.errorIconName,[m.MessageType.Warning]:this.warningIconName,[m.MessageType.Information]:""}[this.getValue()]??""}constructor(t,n){super(),this._matIconRegistry=t,this._domSanitizer=n,this.errorIconName="error-icon",this.warningIconName="warning-icon",this._registerIcons()}_registerIcons(){[this.warningIconName,this.errorIconName].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(p(71477)("./"+t+".svg")))})}}Tt.\u0275fac=function(t){return new(t||Tt)(e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},Tt.\u0275cmp=e.\u0275\u0275defineComponent({type:Tt,selectors:[["ts-error-type-icon-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","error-type-icon",3,"svgIcon",4,"ngIf"],[1,"error-type-icon",3,"svgIcon"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,ss,1,1,"mat-icon",0),t&2&&e.\u0275\u0275property("ngIf",!n.isEmpty()&&n.getValue())},dependencies:[s.NgIf,v.MatIcon],styles:[".error-type-icon[_ngcontent-%COMP%]{height:16px;width:16px}"]});function ds(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-checkbox",1),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setValue(i.checked))}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",n.isDisabled())("checked",n.getValue())("matTooltip",n.getTooltipText())}}class ps extends Ja{constructor(t){super(t),this.cellComponentClass=Qe,this.valueType=l.DataValueType.Boolean}}class Qe extends ft{isDisabled(){const t=this.columnDataSchema.disabled;return typeof t=="function"?t(this.record):t}getTooltipText(){const t=this.columnDataSchema.tooltip;return typeof t=="function"?t(this.record):t}}Qe.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Qe)))(n||Qe)}}(),Qe.\u0275cmp=e.\u0275\u0275defineComponent({type:Qe,selectors:[["ts-checkbox-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"disabled","checked","matTooltip","change",4,"ngIf"],[3,"disabled","checked","matTooltip","change"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,ds,1,3,"mat-checkbox",0),t&2&&e.\u0275\u0275property("ngIf",!n.isEmpty())},dependencies:[s.NgIf,P.MatLegacyCheckbox,j.MatLegacyTooltip],encapsulation:2});class Ye{constructor(t){this._cdr=t,this._delay=2e3,this._stop=new C.Subject,this._start=new C.Subject,this._datetime=yt()(),this._timer$=(0,C.timer)(0,this._delay).pipe((0,u.takeUntil)(this._stop),(0,u.repeatWhen)(()=>this._start))}set datetime(t){this._stop.next(),this._datetime=yt()(t),this._start.next()}static _getDuration(t){const n=yt()();return t?yt().duration(t.diff(n)):yt().duration({hour:0,minute:0,second:0})}_getTimerSubscription$(){return this._timer$.subscribe(()=>{if(this.value="",this._datetime.isValid()){const t=Ye._getDuration(this._datetime);this.value=`${t.humanize(!0)}`}this._cdr.detectChanges()})}ngOnDestroy(){this._stop.next(null),this._stop.complete(),this._timerSubscription$.unsubscribe()}ngOnInit(){this._timerSubscription$=this._getTimerSubscription$()}}Ye.\u0275fac=function(t){return new(t||Ye)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},Ye.\u0275cmp=e.\u0275\u0275defineComponent({type:Ye,selectors:[["ts-time-ago"]],inputs:{datetime:"datetime"},decls:2,vars:1,consts:[[1,"time-ago"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"span",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.value))},changeDetection:0});class An{}An.\u0275fac=function(t){return new(t||An)},An.\u0275mod=e.\u0275\u0275defineNgModule({type:An}),An.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.FormsModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(An,{declarations:[Ye],imports:[s.CommonModule,c.FormsModule],exports:[Ye]})}();const ms=function(a,t){return{"date-picker-filter-container":a,"date-picker-filter-container-rtl":t}},us=function(a){return{"clear-date-icon-wrap":!0,"icon-hidden":a}};class Fn{constructor(t,n){this._directionality=n,this._defaultCulture="en-US",this.dateChange=new e.EventEmitter,this.cultureCode=t&&t.cultureInfo&&t.cultureInfo.sysCultureName||this._defaultCulture}set selectedDate(t){this._selectedDate=t}get selectedDate(){return this._selectedDate}updateFormattedValue(t){this.formattedDate=t&&t.toLocaleDateString(this.cultureCode)}isRtl(){return this._directionality&&this._directionality.value==="rtl"}clearDate(){this.selectedDate=null,this.clearIconVisible=!1,this.onDateChange()}showClearIcon(){this.clearIconVisible=!0}onDateChange(){const t=this.selectedDate;t&&this.showClearIcon(),this.updateFormattedValue(t),this.dateChange.emit(t)}}Fn.\u0275fac=function(t){return new(t||Fn)(e.\u0275\u0275directiveInject(m.UserInfo),e.\u0275\u0275directiveInject(Cn.Directionality))},Fn.\u0275cmp=e.\u0275\u0275defineComponent({type:Fn,selectors:[["ts-date-picker-filter"]],inputs:{selectedDate:"selectedDate",datePickerFilterFunction:"datePickerFilterFunction"},outputs:{dateChange:"dateChange"},decls:11,vars:13,consts:[[1,"date-picker-filter-component"],[3,"ngClass"],["matSuffix","",1,"datepicker-toggle",3,"for"],["svgIcon","datetime-picker-calendar-icon","matDatepickerToggleIcon","",1,"date-picker-calendar-icon"],["disabled","false","ngDefaultControl","",3,"restoreFocus"],["picker",""],[1,"date-time-buttom-marker"],["ngDefaultControl","",1,"date-time-value"],["ngDefaultControl","","disabled","",3,"matDatepickerFilter","matDatepicker","ngModel","dateInput","ngModelChange","dateChange"],[1,"close-icon",3,"ngClass","click"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-datepicker-toggle",2),e.\u0275\u0275element(3,"mat-icon",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-datepicker",4,5)(6,"span",6),e.\u0275\u0275elementStart(7,"span",7),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",8),e.\u0275\u0275listener("dateInput",function(){return n.showClearIcon()})("ngModelChange",function(i){return n.selectedDate=i})("dateChange",function(){return n.onDateChange()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"span",9),e.\u0275\u0275listener("click",function(){return n.clearDate()}),e.\u0275\u0275elementEnd()()()),t&2){const o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,ms,!n.isRtl(),n.isRtl())),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("restoreFocus",!1),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.formattedDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("matDatepickerFilter",n.datePickerFilterFunction)("matDatepicker",o)("ngModel",n.selectedDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,us,!n.clearIconVisible))}},dependencies:[s.NgClass,_.MatLegacySuffix,x.MatDatepicker,x.MatDatepickerInput,x.MatDatepickerToggle,x.MatDatepickerToggleIcon,v.MatIcon,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel],styles:[`.mat-calendar-body-cell-content.mat-focus-indicator{--palette-primary-500: #f2f5ff}.mat-calendar-body-cell-content.mat-focus-indicator.mat-calendar-body-selected{background-color:#006ce0}.date-picker-filter-component{display:inline-block;max-width:150px}.date-picker-filter-component .date-picker-filter-container{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-left:3px}.date-picker-filter-component .date-picker-filter-container span{font-size:14px}.date-picker-filter-component .date-picker-filter-container .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;left:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container .date-time-value{margin-left:7px}.date-picker-filter-component .date-picker-filter-container .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-left:0;margin-right:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container .close-icon.icon-hidden{display:none}.date-picker-filter-component .date-picker-filter-container-rtl{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container-rtl input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container-rtl .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-right:3px}.date-picker-filter-component .date-picker-filter-container-rtl span{font-size:14px}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;right:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-value{margin-right:7px}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-right:0;margin-left:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon.icon-hidden{display:none}
`],encapsulation:2});var ro=p(71006);class On{constructor(t,n){this._matIconRegistry=t,this._domSanitizer=n}registerIcons(){["datetime-picker-calendar-icon"].forEach(n=>{this._matIconRegistry?.addSvgIconLiteral(n,this._domSanitizer?.bypassSecurityTrustHtml(p(38280)("./"+n+".svg")))})}}On.\u0275fac=function(t){return new(t||On)(e.\u0275\u0275inject(v.MatIconRegistry),e.\u0275\u0275inject(pe.DomSanitizer))},On.\u0275prov=e.\u0275\u0275defineInjectable({token:On,factory:On.\u0275fac});function gs(a){return a.cultureInfo.sysCultureName}class Pn{constructor(t){this._assetsService=t,this._assetsService.registerIcons()}}Pn.\u0275fac=function(t){return new(t||Pn)(e.\u0275\u0275inject(On))},Pn.\u0275mod=e.\u0275\u0275defineNgModule({type:Pn}),Pn.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:y.MAT_DATE_LOCALE,useFactory:gs,deps:[m.UserInfo]},x.MatDatepickerModule,On],imports:[s.CommonModule,_.MatLegacyFormFieldModule,x.MatDatepickerModule,y.MatNativeDateModule,D.MatLegacyInputModule,ro.BrowserAnimationsModule,v.MatIconModule,c.FormsModule,V.HttpClientModule,M.MatLegacyDialogModule,_.MatLegacyFormFieldModule,x.MatDatepickerModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Pn,{declarations:[Fn],imports:[s.CommonModule,_.MatLegacyFormFieldModule,x.MatDatepickerModule,y.MatNativeDateModule,D.MatLegacyInputModule,ro.BrowserAnimationsModule,v.MatIconModule,c.FormsModule,V.HttpClientModule,M.MatLegacyDialogModule],exports:[_.MatLegacyFormFieldModule,Fn,x.MatDatepickerModule]})}();function hs(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.caption)}}class Vn{get searchKey(){return this._searchKey}set searchKey(t){if(this._searchKey=t,this._selectedColumn){const n=!t;this._changeFilter(n)}}get filteredColumns(){return this._filteredColumns}set entitySchema(t){this._entitySchema=t,this._columns=t.columns.filter(n=>m.DataValueTypeGroup.Text.includes(n.dataValueType)||n.dataValueType===l.DataValueType.Lookup||n.dataValueType===l.DataValueType.Guid),this._filteredColumns=this._columns}get selectedColumn(){return this._selectedColumn}constructor(t,n,o,i){this._entitySchemaService=t,this._maskService=n,this._dialogService=o,this._translateService=i,this._destroyed$=new C.Subject,this._searchKey="",this.valueChange=new e.EventEmitter}_buildFilterGroup(t){const n=new l.FilterGroup;n.logicalOperation=l.LogicalOperatorType.And;const o=this._selectedColumn.dataValueType===l.DataValueType.Guid?l.ComparisonType.Equal:l.ComparisonType.Contain;return n.addSchemaColumnFilterWithParameter(o,t,this._searchKey),n}_getFilterColumnPath(){return this._selectedColumn.dataValueType!==l.DataValueType.Lookup?(0,C.of)(this._selectedColumn.name):(this._maskService.showBodyMask(),this._entitySchemaService.getEntitySchemaByUId(this._selectedColumn.referenceSchemaUId).pipe((0,u.map)(t=>{this._maskService.hideBodyMask();const n=t.entitySchema.getPrimaryDisplayColumn()?.name;if(n)return this._selectedColumn.name+"."+n;const o=t.entitySchema.getPrimaryColumn()?.name;return this._selectedColumn.name+"."+o})))}_changeFilter(t=!1){if(t){this.valueChange.emit(null);return}if(this._selectedColumn.dataValueType===l.DataValueType.Guid&&!(0,l.isGuid)(this._searchKey)){this._dialogService.openInfoDialog(this._translateService.instant("QuickEntityFilter.NonGuidMessage"));return}this._getFilterColumnPath().pipe((0,u.takeUntil)(this._destroyed$)).subscribe(n=>{const o=this._buildFilterGroup(n);this.valueChange.emit(o)})}searchColumn(t){t||this.selectColumn(null),t=t.toLocaleLowerCase().trim(),this._filteredColumns=this._columns.filter(n=>n.caption.toLocaleLowerCase().includes(t))}getColumnCaption(t){return t.caption}selectColumn(t){if(this._selectedColumn=t,!t){this._changeFilter(!0);return}this._searchKey&&this._changeFilter()}ngOnInit(){this._selectedColumn=this._entitySchema?.getPrimaryDisplayColumn()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Vn.\u0275fac=function(t){return new(t||Vn)(e.\u0275\u0275directiveInject(m.EntitySchemaService),e.\u0275\u0275directiveInject(I.MaskService),e.\u0275\u0275directiveInject(I.DialogService),e.\u0275\u0275directiveInject(b.TranslateService))},Vn.\u0275cmp=e.\u0275\u0275defineComponent({type:Vn,selectors:[["ts-quick-entity-filter"]],inputs:{entitySchema:"entitySchema"},outputs:{valueChange:"valueChange"},decls:10,vars:5,consts:[[1,"select-column-container"],["type","text","matInput","","spellcheck","false",3,"matAutocomplete","value","input"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"search-container"],[3,"value","valueChange"],[3,"value"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"input",1),e.\u0275\u0275listener("input",function(i){return n.searchColumn(i.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275element(4,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-autocomplete",4,5),e.\u0275\u0275listener("optionSelected",function(i){return n.selectColumn(i.option.value)}),e.\u0275\u0275template(7,hs,2,2,"mat-option",6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",7)(9,"ts-search-input",8),e.\u0275\u0275listener("valueChange",function(i){return n.searchKey=i}),e.\u0275\u0275elementEnd()()),t&2){const o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(2),e.\u0275\u0275property("matAutocomplete",o)("value",n.selectedColumn==null?null:n.selectedColumn.caption),e.\u0275\u0275advance(3),e.\u0275\u0275property("displayWith",n.getColumnCaption),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.filteredColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",n.searchKey)}},dependencies:[s.NgForOf,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,Te.MatLegacyOption,_.MatLegacyFormField,_.MatLegacySuffix,D.MatLegacyInput,ze],styles:[`ts-quick-entity-filter{display:flex}ts-quick-entity-filter .select-column-container{flex-basis:50%;padding-right:20px}ts-quick-entity-filter .select-column-container .mat-form-field{width:100%!important}ts-quick-entity-filter .search-container{flex-basis:50%}
`],encapsulation:2});function fs(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"mat-icon",2),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("svgIcon",n.iconName)}}class Cs extends Ja{constructor(t,n){super(t),this.cellComponentClass=kt,this.iconName=n}}class kt extends he{get iconName(){return this.columnDataSchema.iconName}}kt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(kt)))(n||kt)}}(),kt.\u0275cmp=e.\u0275\u0275defineComponent({type:kt,selectors:[["ts-icon-table-cell"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","drag-drop-icon-wrapper","cdkDragHandle","",4,"ngIf"],["cdkDragHandle","",1,"drag-drop-icon-wrapper"],[3,"svgIcon"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,fs,2,1,"div",0),t&2&&e.\u0275\u0275property("ngIf",!n.isEmpty())},dependencies:[s.NgIf,v.MatIcon]});var Ba=p(38182),mi=p(59706);const _s=["originalPickerToggle"];function ys(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",11)}function vs(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",12)}function Ms(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onPickerIconClick())}),e.\u0275\u0275template(1,ys,1,0,"mat-icon",9),e.\u0275\u0275template(2,vs,1,0,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.type==="time")("ngIfElse",n)}}class Et extends I.BaseMaterialInput{get convertedValue(){return this._convertedValue}set convertedValue(t){this._convertedValue=t,this.innerValue=t.toDate()}constructor(t,n,o,i,r){super(t,n,o),this._matIconRegistry=i,this._domSanitizer=r,this.controlType="ts-datetime-picker",this.type="datetime",this._registerIcons()}_registerIcons(){["datetime-picker-toggle-date","datetime-picker-toggle-time"].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(p(86634)("./"+t+"-icon.svg")))}),this._matIconRegistry.addSvgIconLiteral("read-only",this._domSanitizer.bypassSecurityTrustHtml(p(94309)))}writeValue(t){this._convertedValue=yt()(t),super.writeValue(t)}onPickerIconClick(){this.originalPickerToggle.nativeElement.dispatchEvent(new MouseEvent("click"))}}Et.\u0275fac=function(t){return new(t||Et)(e.\u0275\u0275directiveInject(c.NgControl,10),e.\u0275\u0275directiveInject(eo.AutofillMonitor),e.\u0275\u0275directiveInject(Xa.FocusMonitor),e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},Et.\u0275cmp=e.\u0275\u0275defineComponent({type:Et,selectors:[["ts-datetime-picker"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(_s,5,e.ElementRef),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.originalPickerToggle=o.first)}},inputs:{label:"label",minDate:"minDate",maxDate:"maxDate",type:"type"},features:[e.\u0275\u0275ProvidersFeature([{provide:_.MatLegacyFormFieldControl,useExisting:Et}]),e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:10,consts:[[1,"datetime-picker-input-wrapper"],["matInput","","type","text","autocomplete","false","spellcheck","false",3,"ngModel","matDatetimepicker","required","min","max","disabled","ngModelChange"],["input",""],[3,"for"],["originalPickerToggle",""],["mat-icon-button","",3,"click",4,"ngIf"],["openOnFocus","true","mode","portrait",3,"type","disabled"],["datetimePicker",""],["mat-icon-button","",3,"click"],["svgIcon","datetime-picker-toggle-time",4,"ngIf","ngIfElse"],["dateIcon",""],["svgIcon","datetime-picker-toggle-time"],["svgIcon","datetime-picker-toggle-date"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),e.\u0275\u0275listener("ngModelChange",function(i){return n.convertedValue=i}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"mat-datetimepicker-toggle",3,4),e.\u0275\u0275template(5,Ms,4,2,"button",5),e.\u0275\u0275element(6,"mat-datetimepicker",6,7),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.convertedValue)("matDatetimepicker",o)("required",n.required)("min",n.minDate)("max",n.maxDate)("disabled",n.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("type",n.type)("disabled",n.disabled)}},dependencies:[s.NgIf,c.DefaultValueAccessor,c.NgControlStatus,c.RequiredValidator,c.NgModel,w.MatLegacyButton,Ba.MatDatetimepickerComponent,Ba.MatDatetimepickerToggleComponent,Ba.MatDatetimepickerInputDirective,v.MatIcon,D.MatLegacyInput],styles:[`ts-datetime-picker{width:100%}ts-datetime-picker .datetime-picker-input-wrapper{display:flex;align-items:center;position:relative;min-width:calc(18ch + 26px)}ts-datetime-picker .datetime-picker-input-wrapper mat-datetimepicker-toggle{display:none}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button]{height:26px;width:26px;line-height:26px;position:absolute;right:0}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button] mat-icon{height:16px!important;width:16px!important;line-height:16px;position:relative;bottom:2px}
`],encapsulation:2});class ae{}ae.\u0275fac=function(t){return new(t||ae)},ae.\u0275mod=e.\u0275\u0275defineNgModule({type:ae}),ae.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.FormsModule,w.MatLegacyButtonModule,x.MatDatepickerModule,Ba.MatDatetimepickerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,mi.MatMomentDatetimeModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(ae,{declarations:[Et],imports:[s.CommonModule,c.FormsModule,w.MatLegacyButtonModule,x.MatDatepickerModule,Ba.MatDatetimepickerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,mi.MatMomentDatetimeModule],exports:[Et]})}();var Ee=p(6523);class Rn{constructor(t){this._queryExecutor=t}_getColumnPath(t){return typeof t=="string"?t:t.columnPath}_addSchemaColumn(t,n){t.addSchemaColumn(this._getColumnPath(n))}_addPrimaryColumnIfNeeded(t,n,o){const i=t.getPrimaryColumn().name;n.some(r=>this._getColumnPath(r)===i)||o.addSchemaColumn(i)}_getEsqOrderDirection(t){return t?t==="asc"?l.OrderDirection.Asc:l.OrderDirection.Desc:l.OrderDirection.None}_applySort(t,n){if(!n?.sort)return;const o=this._getEsqOrderDirection(n.sort.direction);t.getColumn(n.sort.columnName).withOrdering(o,0)}_buildEsq(t,n){const o=new l.EntitySchemaQuery(t.name);return n.columns.forEach(i=>this._addSchemaColumn(o,i)),this._addPrimaryColumnIfNeeded(t,n.columns,o),this._applySort(o,n),n.filter&&o.filters.add(n.filter),o.rowCount=n.rowCount,o.rowsOffset=n.rowsOffset,o}loadEntityData(t,n){l.ValidationUtilities.checkArgumentEmpty("entitySchema",t),l.ValidationUtilities.checkArgumentEmpty("config",n);const o=this._buildEsq(t,n);return this._queryExecutor.executeSelectQuery(o)}}Rn.\u0275fac=function(t){return new(t||Rn)(e.\u0275\u0275inject(Ee.QueryExecutor))},Rn.\u0275prov=e.\u0275\u0275defineInjectable({token:Rn,factory:Rn.\u0275fac,providedIn:"root"});class jn{_mapEntityColumnDataSchema(t){return{name:t.name,caption:t.caption,valueType:t.dataValueType}}_getColumnPath(t){return typeof t=="string"?t:t.columnPath}buildTableDataSchema(t,n){l.ValidationUtilities.checkArgumentEmpty("entitySchema",t),l.ValidationUtilities.checkArgumentEmpty("columns",n);const o=n.map(r=>t.columns.find(d=>this._getColumnPath(r)===d.name)),i=t.getPrimaryColumn().name;return{columns:o.map(this._mapEntityColumnDataSchema.bind(this)),trackBy:r=>r[i]}}}jn.\u0275fac=function(t){return new(t||jn)},jn.\u0275prov=e.\u0275\u0275defineInjectable({token:jn,factory:jn.\u0275fac,providedIn:"root"});const bs=["dataViewWrapper"];class Nt{set config(t){this._validateConfig(t);const n=this._config;this._config=t,(0,S.isEqual)(t,n)||this._applyConfig(t,n)}get sort(){return this._sort}get selectedRecords(){if(!this._entitySchema)return[];const t=this._entitySchema.getPrimaryColumn().name;return this.selectedIds?this._data.filter(n=>this.selectedIds.includes(n[t])):[]}set selectedRecords(t){const n=this._entitySchema.getPrimaryColumn().name,o=this.selectedIds.filter(d=>!this.data.some(f=>f[n]===d)),i=new Set(this.selectedIds),r=new Set(t.map(d=>d[n]).concat(o));this.selectedIds=[...r],(0,S.isEqual)(i,r)||this.selectedIdsChange.emit(this.selectedIds)}get tableDataSchema(){return this._tableDataSchema}get data(){return this._data}get tableConfig(){return this._config?.tableConfig}constructor(t,n,o,i,r){this._restHandler=t,this._entitySchemaService=n,this._loaderService=o,this._tableDataSchemaBuilder=i,this._scrollToBottomObserverFactory=r,this._destroyed$=new C.Subject,this._defaultPageSize=20,this._data=[],this._tableDataSchema={columns:[]},this._allPagesWasLoaded=!1,this._isDataLoading=!1,this.selectedIds=[],this.selectedIdsChange=new e.EventEmitter,this.dataChange=new e.EventEmitter,this.rowDoubleClick=new e.EventEmitter}_getPageSize(t){return t.pageSize??this._defaultPageSize}_afterLoaded(t,n){const o=n.length<this._getPageSize(t);this._allPagesWasLoaded=o,this.dataChange.emit({data:this._data.slice(),isLastPage:o})}_executeLoading(t,n){const o=this._restHandler.handleRequest(n()).pipe((0,u.share)());return o.subscribe(i=>this._afterLoaded(t,i)),o}_validateConfig(t){if(l.ValidationUtilities.checkArgumentEmpty("config",t),l.ValidationUtilities.checkArgumentEmpty("entitySchema",t.entitySchema),typeof t.entitySchema=="string"&&l.ValidationUtilities.checkStringIsNotEmpty("entitySchema",t.entitySchema),l.ValidationUtilities.checkArgumentEmpty("columns",t.columns),t.columns.length===0)throw new Error("Entity data view config should contain at least one column.")}_initScrollToBottomObserver(){this._scrollToBottomObserver=this._scrollToBottomObserverFactory.createObserver(this.dataViewWrapper.nativeElement,this._onScrollToBottom.bind(this))}_initDefaultSort(t,n){const o=t.getPrimaryDisplayColumn()?.name,r=o&&n.columns.some(d=>this._getColumnPath(d)===o)?o:this._getColumnPath(n.columns[0]);this._sort={columnName:r,direction:"asc"}}_getEntitySchema(t){if(typeof t=="object")return this._entitySchema=t,(0,C.of)(t);const n=this._restHandler.handleRequest(this._entitySchemaService.getEntitySchemaByUId(t),{skipBodyMask:!0}).pipe((0,u.takeUntil)(this._destroyed$),(0,u.map)(o=>o.entitySchema),(0,u.share)());return n.subscribe(o=>this._entitySchema=o),n}_prepareLoaderFilters(t){let n=null;if(t.excludedIds?.length>0){let o;o=new l.FilterGroup,o.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,this._entitySchema.getPrimaryColumn().name,t.excludedIds),t.filter&&o.add(t.filter),n=o}else n=t.filter;return n}_createDefaultLoaderConfig(t){return{rowCount:this._getPageSize(t),rowsOffset:-1,sort:this._sort,columns:t.columns,filter:this._prepareLoaderFilters(t)}}_loadRows(t,n){return this._isDataLoading=!0,this._loaderService.loadEntityData(t,n).pipe((0,u.take)(1),(0,u.tap)(()=>this._isDataLoading=!1),(0,u.takeUntil)(this._destroyed$),(0,u.share)())}_loadNextData(t,n){const o=this._createDefaultLoaderConfig(n);o.rowsOffset=this._data.length;const i=this._loadRows(t,o);return i.subscribe(r=>this._data=this._data.concat(r)),i}_getColumnPath(t){return typeof t=="string"?t:t.columnPath}_resetScroll(){this.dataViewWrapper?.nativeElement&&(this.dataViewWrapper.nativeElement.scrollTop=0),this._scrollToBottomObserver?.resetScrollMaxPosition()}_loadFirstData(t,n){this._resetScroll();const o=this._createDefaultLoaderConfig(n),i=this._loadRows(t,o);return this._data=[],i.subscribe(r=>{this._data=r,this._tableDataSchema=this._tableDataSchemaBuilder.buildTableDataSchema(t,n.columns)}),i}_applyConfig(t,n){const o=t.columns;let i;if(!n||!(0,S.isEqual)(t.entitySchema,n.entitySchema))i=this._getEntitySchema(t.entitySchema).pipe((0,u.tap)(r=>this._initDefaultSort(r,t)),(0,u.mergeMap)(r=>this._loadFirstData(r,t)));else{const r=!(0,S.isEqual)(o,n.columns);r&&this._initDefaultSort(this._entitySchema,t),this._entitySchema&&(r||!(0,S.isEqual)(t.filter,n.filter)||!(0,S.isEqual)(t.excludedIds,n.excludedIds))&&(i=this._loadFirstData(this._entitySchema,t))}i&&this._executeLoading(t,()=>i)}_onScrollToBottom(){if(this._isDataLoading||this._allPagesWasLoaded)return;const t=this._config;this._executeLoading(t,()=>this._loadNextData(this._entitySchema,t))}onSortChange(t){if((0,S.isEqual)(t,this._sort))return;const n=this._config;this._sort=t,this._executeLoading(n,()=>this._loadFirstData(this._entitySchema,n))}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this._scrollToBottomObserver.destroy()}}Nt.\u0275fac=function(t){return new(t||Nt)(e.\u0275\u0275directiveInject(m.RestHandler),e.\u0275\u0275directiveInject(m.EntitySchemaService),e.\u0275\u0275directiveInject(Rn),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(m.ScrollToBottomObserverFactory))},Nt.\u0275cmp=e.\u0275\u0275defineComponent({type:Nt,selectors:[["ts-entity-data-view"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(bs,7),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.dataViewWrapper=o.first)}},inputs:{config:"config",selectedIds:"selectedIds"},outputs:{selectedIdsChange:"selectedIdsChange",dataChange:"dataChange",rowDoubleClick:"rowDoubleClick"},decls:3,vars:7,consts:[[1,"entity-data-view-wrapper"],["dataViewWrapper",""],[3,"data","dataSchema","sort","config","selected","selectedChange","sortChange","rowDoubleClick"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"ts-table",2),e.\u0275\u0275listener("selectedChange",function(i){return n.selectedRecords=i})("sortChange",function(i){return n.onSortChange(i)})("rowDoubleClick",function(i){return n.rowDoubleClick.emit(i)}),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275styleProp("display",n.data.length>0?null:"none"),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",n.data)("dataSchema",n.tableDataSchema)("sort",n.sort)("config",n.tableConfig)("selected",n.selectedRecords))},dependencies:[Z],styles:[".entity-data-view-wrapper[_ngcontent-%COMP%]{height:100%;overflow:auto}"]});function xs(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-quick-entity-filter",13),e.\u0275\u0275listener("valueChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onFilterChanged(i))}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("entitySchema",n.entitySchema)}}function Ss(a,t){a&1&&e.\u0275\u0275element(0,"mat-spinner",19)}const Is=function(a){return{"lookup-dialog-counter-value-hidden":a}};function ws(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",16)(5,"div",17),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ss,1,0,"mat-spinner",18),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"LookupDialog.Selected")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,Is,n.displayedSelectedRecordsCount===null)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.displayedSelectedRecordsCount||0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.displayedSelectedRecordsCount===null)}}function Ds(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-entity-data-view",20),e.\u0275\u0275listener("dataChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onEntityRecordsLoaded(i))})("selectedIdsChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectedIds=i)})("selectedIdsChange",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSelectedIdsChange())})("rowDoubleClick",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onRowDoubleClick(i))}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("config",n.entityDataViewConfig)("selectedIds",n.selectedIds)}}function Ts(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"LookupDialog.Blankslate")))}function ks(a,t){a&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"BaseTableDetail.BlankslateWithFilters")))}function Es(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,Ts,4,3,"ng-container",22),e.\u0275\u0275template(2,ks,3,3,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.entityFilter)("ngIfElse",n)}}class zn{get entityFilter(){return this._quickEntityFilter}get entityDataViewConfig(){return{entitySchema:this._entitySchema,columns:this._getDisplayedColumns(),tableConfig:this._getTableConfig(),excludedIds:this._getLookupDialogConfig().excludedIds,filter:this._quickEntityFilter,pageSize:this._pageSize}}get selectMode(){return this._dialogData.tableConfig.selectMode}get entitySchema(){return this._entitySchema}get defaultBlankslateVisible(){return this._defaultBlankslateVisible}get displayedSelectedRecordsCount(){return this._allPagesSelectionEnabled?this._allPagesSelectedCount:this._loadedSelectedCount}constructor(t,n,o,i,r,d,f){this._dialogData=t,this._dialogRef=n,this._entitySchemaService=o,this._restHandler=i,this._translateService=r,this._queryExecutor=d,this._dialogService=f,this._pageSize=20,this._allPagesSelectionWarningRecordsNumber=1e3,this._destroyed$=new C.Subject,this._allPagesRecordsCountRequestCancel$=new C.Subject,this._defaultBlankslateVisible=!1,this._loadedRecords=[],this._allPagesWasLoaded=!1,this._allPagesSelectionEnabled=!1,this._allPagesUnselectedIds=null,this._allPagesRecordsCount=null,this._allPagesSelectedCount=null,this._allRowsSelectState=null,this._loadedSelectedCount=0,this.selectedIds=[],l.ValidationUtilities.checkArgumentEmpty("data",t),l.ValidationUtilities.checkArgumentEmpty("lookupDialogConfig",t.lookupDialogConfig),this.selectedIds=t.lookupDialogConfig.selectedIds?.slice()??[],this._getEntitySchema(t.lookupDialogConfig.entitySchema).pipe((0,u.takeUntil)(this._destroyed$)).subscribe(E=>this._entitySchema=E),this._applyIncomingFilter()}_getPrimaryColumnName(){return this._entitySchema.getPrimaryColumn().name}_getLoadedRecordIds(){const t=this._getPrimaryColumnName();return this._loadedRecords.map(n=>n[t])}_unselectAllExceptLoaded(){const t=this.selectedIds;this.selectedIds=this._getLoadedRecordIds().filter(n=>t.includes(n))}_getLookupDialogConfig(){return this._dialogData.lookupDialogConfig}_actualizeLoadedSelectedCount(){this._loadedSelectedCount=this.selectedIds.length}_canExistNotLoadedSelectedRecords(t){return t===F.None&&!this._allPagesSelectionEnabled&&!this._allPagesWasLoaded}_actualizeAllPagesUnselectedIds(){const t=this.selectedIds,n=this._getLoadedRecordIds(),o=n.filter(r=>!t.includes(r)),i=n.filter(r=>t.includes(r));for(const r of o)this._allPagesUnselectedIds.add(r);for(const r of i)this._allPagesUnselectedIds.delete(r)}_calculateAllPagesSelectedCount(){this._allPagesSelectedCount=this._allPagesRecordsCount===null?null:this._allPagesRecordsCount-this._allPagesUnselectedIds.size}_setAllPagesRecordsCount(t){this._allPagesRecordsCount=t,this._calculateAllPagesSelectedCount()}_handleRequest(t){return n=>this._restHandler.handleRequest(n,t)}_getDisplayedColumns(){let t=this._getLookupDialogConfig().displayedColumns;if(!t){const n=this._entitySchema.getPrimaryDisplayColumn();t=n?[n.name]:[this._getPrimaryColumnName()]}return t}_getTableConfig(){return{...this._dialogData.tableConfig,allRowsSelectState:()=>this._allRowsSelectState,allRowsSelectToggleHandler:()=>this._allRowsSelectToggle()}}_applyIncomingFilter(){const t=this._getLookupDialogConfig().filter;!t||(this._quickEntityFilter||(this._quickEntityFilter=new l.FilterGroup),this._quickEntityFilter.add(t))}_getEntitySchema(t){return typeof t=="object"?(0,C.of)(t):this._entitySchemaService.getEntitySchemaByUId(t).pipe(this._handleRequest(),(0,u.map)(n=>n.entitySchema))}_actualizeDefaultBlankslateVisibility(t){this._defaultBlankslateVisible=t.length===0}_confirmAllPagesSelection(){if(this.displayedSelectedRecordsCount<this._allPagesSelectionWarningRecordsNumber)return(0,C.of)(!0);const t=this._translateService.instant("LookupDialog.AllPagesSelectionWarning");return this._dialogService.openConfirmationDialog(t).pipe((0,u.map)(n=>n===I.YesButton.result))}_enableAllPagesSelection(){this._unselectAllExceptLoaded(),this._allPagesSelectionEnabled=!0,this._allPagesRecordsCount||this._loadAllPagesRecordsCount(),this._allRowsSelectState=F.All,this._allPagesUnselectedIds=new Set}_disableAllPagesSelection({unselectAllRecords:t}){this._allPagesRecordsCountRequestCancel$.next(),this._allPagesSelectionEnabled=!1,t&&(this.selectedIds=[],this._allRowsSelectState=F.None),this._actualizeLoadedSelectedCount(),this._allPagesUnselectedIds=null}_createAllFilteredRecordsEsq(){const t=this._getPrimaryColumnName(),n=new l.EntitySchemaQuery(this._entitySchema.name);this._quickEntityFilter&&n.filters.add(this._quickEntityFilter);const o=this._getLookupDialogConfig().excludedIds;return o?.length>0&&n.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,t,o),n}_createAllFilteredIdsEsq(){const t=this._createAllFilteredRecordsEsq();return t.addSchemaColumn(this._getPrimaryColumnName()),t}_loadAllPagesRecordsCount(){const t=this._getPrimaryColumnName(),n=this._createAllFilteredRecordsEsq();n.addAggregationFunctionColumn(t,l.AggregationType.Count,"Count"),this._queryExecutor.executeSelectQuery(n).pipe(this._handleRequest({skipBodyMask:!0}),(0,u.takeUntil)((0,C.merge)(this._allPagesRecordsCountRequestCancel$,this._destroyed$)),(0,u.catchError)(()=>(this._disableAllPagesSelection({unselectAllRecords:!1}),C.EMPTY)),(0,u.map)(o=>o[0].Count)).subscribe(o=>this._setAllPagesRecordsCount(o))}_loadIsAnyRecordExist(t){const n=this._createAllFilteredIdsEsq();return n.rowCount=1,t(n),this._queryExecutor.executeSelectQuery(n).pipe((0,u.takeUntil)(this._destroyed$),this._handleRequest({maskDelay:0}),(0,u.map)(o=>o.length===1),(0,u.catchError)(()=>(0,C.of)(!0)),(0,u.shareReplay)())}_clearNotLoadedRecordsCachedInfo(){this._isAnyNotLoadedRecordSelected$=null,this._isAnyNotLoadedRecordUnselected$=null}_loadIsAnyNotLoadedRecordSelected(){return this._isAnyNotLoadedRecordSelected$??(this._isAnyNotLoadedRecordSelected$=this._loadIsAnyRecordExist(t=>t.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadIsAnyNotLoadedRecordUnselected(){return this._isAnyNotLoadedRecordUnselected$??(this._isAnyNotLoadedRecordUnselected$=this._loadIsAnyRecordExist(t=>t.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadAllPagesSelectedIds(){const t=this._getPrimaryColumnName(),n=this._getLoadedRecordIds().filter(o=>this._allPagesUnselectedIds.has(o));return this._queryExecutor.executeSelectQuery(this._createAllFilteredIdsEsq()).pipe((0,u.takeUntil)(this._destroyed$),this._handleRequest(),(0,u.map)(o=>o.map(i=>i[t])),(0,u.map)(o=>o.filter(i=>!n.includes(i))))}_actualizeAllRowsSelectState(){let t;const n=this._getLoadedRecordIds(),o=n.length>0&&n.some(r=>this.selectedIds.includes(r)),i=o&&n.every(r=>this.selectedIds.includes(r));return this.selectedIds.length===0||!o&&this._allPagesWasLoaded?t=(0,C.of)(F.None):i&&(this._allPagesWasLoaded||this._allPagesSelectionEnabled)?t=(0,C.of)(F.All):o&&!i?t=(0,C.of)(F.Intermediate):t=o?this._loadIsAnyNotLoadedRecordUnselected().pipe((0,u.map)(r=>r?F.Intermediate:F.All)):this._loadIsAnyNotLoadedRecordSelected().pipe((0,u.map)(r=>r?F.Intermediate:F.None)),t.subscribe(r=>this._allRowsSelectState=r),t}_unselectNotLoadedRecords(){const t=this._getPrimaryColumnName(),n=this._createAllFilteredIdsEsq();n.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Equal,t,this.selectedIds);const o=this._queryExecutor.executeSelectQuery(n).pipe(this._handleRequest(),(0,u.takeUntil)((0,C.merge)(this._destroyed$)),(0,u.map)(i=>i.map(r=>r[t])),(0,u.catchError)(()=>(0,C.of)([])),(0,u.share)());return o.subscribe(i=>{this.selectedIds=this.selectedIds.filter(r=>!i.includes(r))}),o}_toggleLoadedRecordsSelection(t){const n=this._getLoadedRecordIds();t===F.None?this.selectedIds=this.selectedIds.filter(o=>!n.includes(o)):this.selectedIds=[...new Set(this.selectedIds.concat(n))]}_toggleAllPagesSelectionIfRequired(t){const n=!this._allPagesSelectionEnabled&&this.selectedIds.length>0&&t===F.All&&!this._allPagesWasLoaded,o=this._allPagesSelectionEnabled&&t===F.None;return n?(this._enableAllPagesSelection(),!0):o?(this._disableAllPagesSelection({unselectAllRecords:!0}),!1):null}_allRowsSelectToggle(){const t=this._allRowsSelectState===F.All?F.None:F.All;this._allRowsSelectState=t,this._toggleLoadedRecordsSelection(t),this._canExistNotLoadedSelectedRecords(t)?(this._loadedSelectedCount=null,this._unselectNotLoadedRecords().subscribe(()=>this._actualizeLoadedSelectedCount())):this._actualizeLoadedSelectedCount(),this._toggleAllPagesSelectionIfRequired(t)===null&&this._allPagesSelectionEnabled&&(this._allPagesUnselectedIds.clear(),this._calculateAllPagesSelectedCount())}_resetSelectionOnFilterChanged(){this._allPagesSelectionEnabled&&this._disableAllPagesSelection({unselectAllRecords:!0}),this.selectMode!=="multi"&&(this.selectedIds=[]),this._setAllPagesRecordsCount(null),this._allRowsSelectState=null}_closeWithSelection(t){const n=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:t,selectedRecords:this._loadedRecords.filter(o=>t.includes(o[n]))})}getDialogTitle(){if(!this._entitySchema)return"";const t=this._translateService.instant("LookupDialog.TitleTemplate");return va.String.Format(t,this._entitySchema.caption)}ngOnDestroy(){this._destroyed$.next()}onFilterChanged(t){this._resetSelectionOnFilterChanged(),this._quickEntityFilter=t,this._applyIncomingFilter()}onEntityRecordsLoaded({data:t,isLastPage:n}){if(this._loadedRecords=t,this._clearNotLoadedRecordsCachedInfo(),this._actualizeDefaultBlankslateVisibility(t),this._allPagesWasLoaded=n,this._allPagesSelectionEnabled){const o=this._getPrimaryColumnName();this.selectedIds=t.map(i=>i[o]).filter(i=>!this._allPagesUnselectedIds.has(i)),this._actualizeLoadedSelectedCount(),n&&this._disableAllPagesSelection({unselectAllRecords:!1})}!this._allRowsSelectState&&this.selectMode==="multi"&&this._actualizeAllRowsSelectState()}isAnyRecordSelected(){return this.displayedSelectedRecordsCount>0}onRowDoubleClick(t){if(this.selectMode!=="single")return;const n=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:[t[n]],selectedRecords:[t]})}closeWithCurrentSelection(){this._allPagesSelectionEnabled?this._confirmAllPagesSelection().pipe((0,u.filter)(t=>t),(0,u.mergeMap)(()=>this._loadAllPagesSelectedIds())).subscribe(t=>this._closeWithSelection(t)):this._closeWithSelection(this.selectedIds)}onSelectedIdsChange(){this._allPagesSelectionEnabled?(this._actualizeAllPagesUnselectedIds(),this._calculateAllPagesSelectedCount()):this._actualizeLoadedSelectedCount(),this._actualizeAllRowsSelectState()}}zn.\u0275fac=function(t){return new(t||zn)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA),e.\u0275\u0275directiveInject(M.MatLegacyDialogRef),e.\u0275\u0275directiveInject(m.EntitySchemaService),e.\u0275\u0275directiveInject(m.RestHandler),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(Ee.QueryExecutor),e.\u0275\u0275directiveInject(I.DialogService))},zn.\u0275cmp=e.\u0275\u0275defineComponent({type:zn,selectors:[["ts-lookup-dialog"]],decls:20,vars:12,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"lookup-dialog-top-panel"],[1,"dialog-filters"],[3,"entitySchema","valueChange",4,"ngIf"],["class","counter-container",4,"ngIf"],["mat-dialog-content",""],[3,"config","selectedIds","dataChange","selectedIdsChange","rowDoubleClick",4,"ngIf"],["class","lookup-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"entitySchema","valueChange"],[1,"counter-container"],[1,"counter-label"],[1,"lookup-dialog-counter-value-wrapper"],[1,"counter-value",3,"ngClass"],["diameter","18",4,"ngIf"],["diameter","18"],[3,"config","selectedIds","dataChange","selectedIdsChange","rowDoubleClick"],[1,"lookup-dialog-blank-slate"],[4,"ngIf","ngIfElse"],["blankslateWithFilters",""]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275element(5,"mat-icon",2),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",3)(7,"div",4),e.\u0275\u0275template(8,xs,1,1,"ts-quick-entity-filter",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,ws,8,8,"div",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275template(11,Ds,1,2,"ts-entity-data-view",8),e.\u0275\u0275template(12,Es,4,2,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",10)(14,"button",11),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",12),e.\u0275\u0275listener("click",function(){return n.closeWithCurrentSelection()}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.getDialogTitle()),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.entitySchema),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.selectMode==="multi"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.entitySchema),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.defaultBlankslateVisible),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,8,"LookupDialog.CancelButton")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!n.isAnyRecordSelected()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,10,"LookupDialog.SelectButton")))},dependencies:[s.NgClass,s.NgIf,Nt,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,v.MatIcon,Pa.MatLegacyProgressSpinner,Vn,b.TranslatePipe],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}.counter-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575;margin-right:4px}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{font-size:14px;color:#444}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value.lookup-dialog-counter-value-hidden[_ngcontent-%COMP%]{visibility:hidden;width:0}[mat-dialog-content][_ngcontent-%COMP%]{max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .lookup-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center;padding-top:22px}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]});class Lt{constructor(t){this._dialogService=t,this._defaultTableConfig={headerSticky:!0}}_createTableConfig(t){return{...this._defaultTableConfig,...t}}openWithMultiselect(t){const n={lookupDialogConfig:t,tableConfig:this._createTableConfig({selectMode:"multi"}),gtmData:null};return this._dialogService.open(zn,{data:n}).pipe((0,u.map)(o=>({selectedIds:o?.selectedIds})))}open(t){const n={lookupDialogConfig:t,tableConfig:this._createTableConfig({selectMode:"single"}),gtmData:null};return this._dialogService.open(zn,{data:n}).pipe((0,u.map)(o=>({selectedId:o?.selectedIds[0],selectedRecord:o?.selectedRecords[0]})))}}Lt.\u0275fac=function(t){return new(t||Lt)(e.\u0275\u0275inject(I.DialogService))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac});class oe{}oe.\u0275fac=function(t){return new(t||oe)},oe.\u0275mod=e.\u0275\u0275defineNgModule({type:oe}),oe.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,W]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(oe,{declarations:[Nt],imports:[s.CommonModule,W],exports:[Nt]})}();class xe{}xe.\u0275fac=function(t){return new(t||xe)},xe.\u0275mod=e.\u0275\u0275defineNgModule({type:xe}),xe.\u0275inj=e.\u0275\u0275defineInjector({providers:[Lt],imports:[s.CommonModule,I.DialogModule,oe,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,M.MatLegacyDialogModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,Pa.MatLegacyProgressSpinnerModule,X,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(xe,{declarations:[zn,Vn],imports:[s.CommonModule,I.DialogModule,oe,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,M.MatLegacyDialogModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,Pa.MatLegacyProgressSpinnerModule,X,b.TranslateModule]})}();class Ns{}class Ls{}function As(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-checkbox",6),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.innerValue=i)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngModel",n.innerValue)("disabled",n.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.label)}}function Fs(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.openSelectLookupValueDialog())}),e.\u0275\u0275element(1,"mat-icon",12),e.\u0275\u0275elementEnd()}}function Os(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",13)}function Ps(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",8),e.\u0275\u0275template(4,Fs,2,0,"button",9),e.\u0275\u0275template(5,Os,1,0,"mat-icon",10),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.getLookupDisplayValue())("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.disabled)}}function Vs(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",13)}function Rs(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"input",14),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.innerValue=i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Vs,1,0,"mat-icon",10),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.innerValue)("required",n.required)("disabled",n.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.disabled)}}function js(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"textarea",14),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.innerValue=i)}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngModel",n.innerValue)("required",n.required)("disabled",n.disabled)}}function zs(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,js,1,3,"textarea",15),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.inputTypes.LongText)}}function Bs(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",13)}function Us(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ts-datetime-picker",17),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.innerValue=i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Bs,1,0,"mat-icon",10),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.innerValue)("label",n.label)("required",n.required)("disabled",n.disabled)("type",n.getDatetimePickerType()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.disabled)}}function Hs(a,t){a&1&&e.\u0275\u0275element(0,"mat-icon",13)}function Gs(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ts-number-input",18),e.\u0275\u0275listener("ngModelChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.innerValue=i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Hs,1,0,"mat-icon",10),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.innerValue)("required",n.required)("disabled",n.disabled)("precision",n.getNumberInputPrecision())("maxValue",n.numberMaxValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.disabled)}}function Zs(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Us,5,7,"mat-form-field",16),e.\u0275\u0275template(2,Gs,5,7,"mat-form-field",16),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.useDatepicker()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.useNumberInput())}}function Ws(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementContainerStart(1,2),e.\u0275\u0275template(2,As,2,3,"mat-checkbox",3),e.\u0275\u0275template(3,Ps,6,5,"mat-form-field",4),e.\u0275\u0275template(4,Rs,5,5,"mat-form-field",4),e.\u0275\u0275template(5,zs,4,2,"mat-form-field",4),e.\u0275\u0275template(6,Zs,3,2,"ng-container",5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass","input-type-"+n.inputTypes[n.inputType].toLowerCase()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",n.inputType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.inputTypes.Boolean),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.inputTypes.Lookup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.inputTypes.Text),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",n.inputTypes.LongText)}}var U;(function(a){a[a.Boolean=0]="Boolean",a[a.Integer=1]="Integer",a[a.Float=2]="Float",a[a.Date=3]="Date",a[a.Time=4]="Time",a[a.DateTime=5]="DateTime",a[a.Lookup=6]="Lookup",a[a.Text=7]="Text",a[a.LongText=8]="LongText"})(U||(U={}));const ui={[U.Boolean]:[l.DataValueType.Boolean],[U.Integer]:[l.DataValueType.Integer],[U.Float]:[l.DataValueType.Float,l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money],[U.Date]:[l.DataValueType.Date],[U.Time]:[l.DataValueType.Time],[U.DateTime]:[l.DataValueType.DateTime],[U.Lookup]:[l.DataValueType.Lookup],[U.Text]:[l.DataValueType.Text,l.DataValueType.SHORT_TEXT,l.DataValueType.PHONE_TEXT,l.DataValueType.WEB_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.MEDIUM_TEXT,l.DataValueType.Color,l.DataValueType.RICH_TEXT],[U.LongText]:[l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT]};class ka extends I.BaseMaterialInput{get column(){return this._column}set column(t){this._specifyInputType(t),this._column=t}get inputType(){return this._inputType}get numberMaxValue(){return this._column?.dataValueType===l.DataValueType.Integer?this._integerMaxValue:this._floatMaxValue}constructor(t,n,o,i,r,d,f,E,L){super(t,n,o),this._entitySchemaService=i,this._lookupDialogService=r,this._restErrorHandler=d,this._maskService=f,this._matIconRegistry=E,this._domSanitizer=L,this._integerMaxValue=2147483647,this._floatMaxValue=1175494351e29,this.inputTypes=U,this._registerIcons()}_specifyInputType(t){const n=Object.keys(ui).find(o=>ui[o].includes(t.dataValueType));this._inputType=n?parseInt(n):null}_registerIcons(){this._matIconRegistry.addSvgIconLiteral("read-only",this._domSanitizer.bypassSecurityTrustHtml(p(94309)))}_getLookupDialogConfig(t){const n=this.innerValue;return{entitySchema:t,displayedColumns:null,selectedIds:n?.value?[n.value]:null}}_setLookupValue(t,n){if(!n.selectedRecord)return;const o=t.getPrimaryDisplayColumn();this.innerValue={value:n.selectedId,displayValue:o?n.selectedRecord[o.name]:n.selectedId}}focusElementViaMouse(){}initMonitors(){}useDatepicker(){return[U.Date,U.Time,U.DateTime].includes(this._inputType)}getDatetimePickerType(){return{[l.DataValueType.Date]:"date",[l.DataValueType.Time]:"time",[l.DataValueType.DateTime]:"datetime"}[this._column.dataValueType]}useNumberInput(){return[U.Integer,U.Float].includes(this._inputType)}getNumberInputPrecision(){return{[l.DataValueType.Integer]:0,[l.DataValueType.Float]:2,[l.DataValueType.FLOAT1]:1,[l.DataValueType.FLOAT2]:2,[l.DataValueType.FLOAT3]:3,[l.DataValueType.FLOAT4]:4,[l.DataValueType.FLOAT8]:8,[l.DataValueType.Money]:2}[this._column.dataValueType]}openSelectLookupValueDialog(){this._maskService.showBodyMask();let t;this._restErrorHandler.handleRequest(this._entitySchemaService.getEntitySchemaByUId(this._column.referenceSchemaUId)).pipe((0,u.tap)(n=>{this._maskService.hideBodyMask(),t=n.entitySchema}),(0,u.mergeMap)(n=>this._lookupDialogService.open(this._getLookupDialogConfig(n.entitySchema)))).subscribe(n=>this._setLookupValue(t,n))}getLookupDisplayValue(){const t=this.innerValue;return t?.displayValue??t?.value??""}}ka.\u0275fac=function(t){return new(t||ka)(e.\u0275\u0275directiveInject(c.NgControl,10),e.\u0275\u0275directiveInject(eo.AutofillMonitor),e.\u0275\u0275directiveInject(Xa.FocusMonitor),e.\u0275\u0275directiveInject(m.EntitySchemaService),e.\u0275\u0275directiveInject(Lt),e.\u0275\u0275directiveInject(m.RestErrorHandler),e.\u0275\u0275directiveInject(I.MaskService),e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer))},ka.\u0275cmp=e.\u0275\u0275defineComponent({type:ka,selectors:[["ts-entity-column-value-input"]],inputs:{column:"column",label:"label"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","entity-column-value-input-wrapper",3,"ngClass",4,"ngIf"],[1,"entity-column-value-input-wrapper",3,"ngClass"],[3,"ngSwitch"],[3,"ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["floatLabel","always",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","disabled","ngModelChange"],["floatLabel","always"],["matInput","","type","text","disabled","true",3,"value","required"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["matSuffix","","svgIcon","read-only",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"],["svgIcon","search"],["matSuffix","","svgIcon","read-only"],["matInput","","type","text",3,"ngModel","required","disabled","ngModelChange"],["matInput","","type","text",3,"ngModel","required","disabled","ngModelChange",4,"ngSwitchCase"],["floatLabel","always",4,"ngIf"],[3,"ngModel","label","required","disabled","type","ngModelChange"],[3,"ngModel","required","disabled","precision","maxValue","ngModelChange"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Ws,7,6,"div",0),t&2&&e.\u0275\u0275property("ngIf",n.inputType!==null)},dependencies:[s.NgClass,s.NgIf,s.NgSwitch,s.NgSwitchCase,s.NgSwitchDefault,c.DefaultValueAccessor,c.NgControlStatus,c.RequiredValidator,c.NgModel,Et,w.MatLegacyButton,P.MatLegacyCheckbox,_.MatLegacyFormField,_.MatLegacyLabel,_.MatLegacySuffix,v.MatIcon,D.MatLegacyInput,Re],styles:[`ts-entity-column-value-input .entity-column-value-input-wrapper{display:flex;align-items:center}ts-entity-column-value-input .entity-column-value-input-wrapper:not(.input-type-longtext){height:44px}ts-entity-column-value-input .entity-column-value-input-wrapper.input-type-lookup button[matsuffix]{height:25px;width:25px}ts-entity-column-value-input .entity-column-value-input-wrapper.input-type-lookup button[matsuffix] mat-icon{height:16px;width:16px}ts-entity-column-value-input .entity-column-value-input-wrapper mat-form-field{width:100%}ts-entity-column-value-input .entity-column-value-input-wrapper mat-form-field textarea{min-height:calc(1em + 1px)}
`],encapsulation:2});class Se{}Se.\u0275fac=function(t){return new(t||Se)},Se.\u0275mod=e.\u0275\u0275defineNgModule({type:Se}),Se.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,c.FormsModule,ae,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,je]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Se,{declarations:[ka],imports:[s.CommonModule,c.FormsModule,ae,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,je],exports:[ka]})}();const Qs=function(a,t){return{"forecast-hint-content":a,"forecast-hint-content-rtl":t}};class Bn{set hintConfig(t){this._hintConfig!==t&&(this._hintConfig=t)}get hintConfig(){return this._hintConfig}get cssClasses(){return this._hintConfig?.cssClasses||this._defaultCssClass}constructor(t){this._directionality=t,this._defaultCssClass="simple-hint"}isRtl(){return this._directionality.value==="rtl"}}Bn.\u0275fac=function(t){return new(t||Bn)(e.\u0275\u0275directiveInject(Cn.Directionality))},Bn.\u0275cmp=e.\u0275\u0275defineComponent({type:Bn,selectors:[["ts-simple-hint"]],inputs:{hintConfig:"hintConfig"},decls:4,vars:8,consts:[[1,"simple-hint-value",3,"ngClass"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div")(1,"span",0),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"br"),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275classMap(n.cssClasses),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,Qs,!n.isRtl(),n.isRtl())),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.hintConfig==null?null:n.hintConfig.displayValue," "))},dependencies:[s.NgClass],styles:['.simple-hint[_ngcontent-%COMP%]{margin:15px 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;border-top:4px solid;position:relative;min-height:50px;padding:10px;text-align:left;box-shadow:#0000004d 0 0 .6em .02em;-moz-box-shadow:rgba(0,0,0,.3) 0 0 .2em;-webkit-box-shadow:rgba(0,0,0,.3) 0 0 .2em;font-size:13px;border-top-color:#20c964}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content[_ngcontent-%COMP%]{direction:ltr}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content-rtl[_ngcontent-%COMP%]{direction:ltr;text-align:right}.simple-hint[_ngcontent-%COMP%]:before{border-color:transparent transparent #20c964 transparent}.simple-hint[_ngcontent-%COMP%]:after, .simple-hint[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:0;height:0;border-style:solid}.simple-hint[_ngcontent-%COMP%]:after{left:calc(50% - 6px);top:-12px;border-color:transparent transparent #fff transparent;border-width:6px}.simple-hint[_ngcontent-%COMP%]:before{left:calc(50% - 7px);top:-17px;border-width:7px}']});class $e{}$e.\u0275fac=function(t){return new(t||$e)},$e.\u0275mod=e.\u0275\u0275defineNgModule({type:$e}),$e.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope($e,{declarations:[m.HintOverlayDirective,Bn],imports:[s.CommonModule],exports:[m.HintOverlayDirective,Bn]})}();var Lo=p(57685);function Ys(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onFullScreenClicked())}),e.\u0275\u0275element(2,"mat-icon",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disableRipple",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("svgIcon",n.fullScreenIcon)}}function $s(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",13),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onSettingActionClicked(r==null?null:r.code))}),e.\u0275\u0275element(2,"mat-icon",14),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(a&2){const n=t.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("svgIcon",n==null?null:n.imageName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n==null?null:n.name)}}function Js(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",8)(2,"div"),e.\u0275\u0275element(3,"mat-icon",9)(4,"span",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-menu",null,11),e.\u0275\u0275template(7,$s,5,2,"ng-container",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disableRipple",!0)("matMenuTriggerFor",n),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",o.settingActions)}}const qs=function(a){return{"panel-collapse-button-content-collapsed":a}},Ks=function(a){return{"panel-collapse-button-icon-close":a}};function Xs(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onCollapseButtonClicked())}),e.\u0275\u0275elementStart(2,"div",0),e.\u0275\u0275element(3,"mat-icon",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disableRipple",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,qs,n.isCollapsed)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Ks,n.isCollapsed))}}function ec(a,t){a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275projection(1,2),e.\u0275\u0275elementContainerEnd())}const tc=[[["",8,"panel-title-item"]],[["",8,"panel-action-button-left"]],[["",8,"panel-main-content"]]],nc=function(a,t){return{"panel-main-container":a,"panel-main-container-rtl":t}},ac=function(a){return{"panel-header-collapsed-container":a}},oc=function(a){return{clickable:a}},ic=[".panel-title-item",".panel-action-button-left",".panel-main-content"];class At{constructor(t,n){this._directionality=t,this._eventService=n,this.titleClicked=new e.EventEmitter,this.fullScreenClicked=new e.EventEmitter,this.collapseClicked=new e.EventEmitter,this.fullScreenIcon="full-screen-open"}isRtl(){return this._directionality.value==="rtl"}onTitleClicked(){this.titleConfig?.isClickable&&this.titleClicked.emit(this.titleConfig?.recordId)}onSettingActionClicked(t){this._eventService.emit({name:"settingActionClicked",value:t})}onFullScreenClicked(){this.isShowFullScreenButton&&(this.isFullScreen=!this.isFullScreen,this.fullScreenIcon=this.isFullScreen?"full-screen-close":"full-screen-open",this.fullScreenClicked.emit(this.isFullScreen))}onCollapseButtonClicked(){this.isShowCollapseButton&&(this.isCollapsed=!this.isCollapsed,this.collapseClicked.emit(this.isCollapsed))}}At.\u0275fac=function(t){return new(t||At)(e.\u0275\u0275directiveInject(Cn.Directionality),e.\u0275\u0275directiveInject(m.EventService))},At.\u0275cmp=e.\u0275\u0275defineComponent({type:At,selectors:[["ts-panel-content"]],inputs:{isFullScreen:"isFullScreen",isCollapsed:"isCollapsed",isShowCollapseButton:"isShowCollapseButton",isShowFullScreenButton:"isShowFullScreenButton",titleConfig:"titleConfig",settingActions:"settingActions"},outputs:{titleClicked:"titleClicked",fullScreenClicked:"fullScreenClicked",collapseClicked:"collapseClicked"},ngContentSelectors:ic,decls:12,vars:15,consts:[[3,"ngClass"],[1,"panel-header-container",3,"ngClass"],[1,"panel-left-container"],[1,"panel-caption",3,"ngClass","click"],[1,"panel-right-container"],[4,"ngIf"],["mat-icon-button","",3,"disableRipple","click"],[1,"panel-full-screen-button",3,"svgIcon"],["mat-icon-button","",1,"panel-settings-button",3,"disableRipple","matMenuTriggerFor"],["svgIcon","settings",1,"panel-settings-button-icon"],[1,"panel-arrow-down-icon"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","",1,"panel-settings-action-button",3,"click"],[1,"panel-action-button-image",3,"svgIcon"],["mat-icon-button","",1,"panel-collapse-button",3,"disableRipple","click"],["svgIcon","arrow-down",1,"panel-collapse-button-icon",3,"ngClass"]],template:function(t,n){t&1&&(e.\u0275\u0275projectionDef(tc),e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e.\u0275\u0275listener("click",function(){return n.onTitleClicked()}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275projection(7,1),e.\u0275\u0275template(8,Ys,3,2,"ng-container",5),e.\u0275\u0275template(9,Js,8,3,"ng-container",5),e.\u0275\u0275template(10,Xs,4,7,"ng-container",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,ec,2,0,"ng-container",5),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,nc,!n.isRtl(),n.isRtl())),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,ac,n.isCollapsed)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,oc,n.titleConfig==null?null:n.titleConfig.isClickable)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.titleConfig==null?null:n.titleConfig.displayValue," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.isShowFullScreenButton),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.settingActions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isShowCollapseButton),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isCollapsed))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,w.MatLegacyButton,de.MatLegacyMenu,de.MatLegacyMenuItem,de.MatLegacyMenuTrigger,v.MatIcon],styles:[`.panel-settings-action-button{align-items:center}.panel-settings-action-button .panel-action-button-image{height:19px;width:19px;display:inline-block}.panel-main-container{width:100%;display:flex;flex-direction:column}.panel-main-container .panel-header-container{min-height:40px;padding-top:16px;padding-left:16px;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:nowrap;align-items:center;background-color:#fff}.panel-main-container .panel-header-container .panel-left-container{display:flex;justify-content:flex-start;align-content:center;align-items:center;height:100%;flex-direction:row}.panel-main-container .panel-header-container .panel-left-container .panel-caption{color:#006ce0;font-size:18px}.panel-main-container .panel-header-container .panel-left-container .panel-caption.clickable:hover{cursor:pointer;text-decoration:underline}.panel-main-container .panel-header-container .panel-right-container{display:flex;justify-content:flex-end;align-items:center;height:100%;flex-direction:row}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button{width:32px;height:32px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-bottom:0}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div.panel-collapse-button-content-collapsed{padding-bottom:3px}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon{width:18px;height:18px;display:inline-block}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon-close{transform:rotate(180deg)}.panel-main-container .panel-header-container .panel-right-container .panel-full-screen-button{width:16px;height:16px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button{width:32px;height:32px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div{display:flex;flex-direction:row;justify-content:center;align-items:center}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div .panel-settings-button-icon{width:16px;display:inline-block}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div .panel-arrow-down-icon{position:relative;bottom:0;right:0;height:0;content:"";font-size:14px;border-right:.32em solid transparent;border-left:.32em solid transparent;border-top:.32em solid #54657d;margin-left:3px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button:hover{cursor:pointer}.panel-main-container-rtl{width:100%;display:flex;flex-direction:column}.panel-main-container-rtl .panel-header-container{min-height:40px;padding-top:16px;padding-right:16px;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:nowrap;align-items:center;background-color:#fff}.panel-main-container-rtl .panel-header-container .panel-left-container{display:flex;justify-content:flex-start;align-content:center;align-items:center;height:100%;flex-direction:row}.panel-main-container-rtl .panel-header-container .panel-left-container .panel-caption{color:#006ce0;font-size:18px}.panel-main-container-rtl .panel-header-container .panel-left-container .panel-caption.clickable:hover{cursor:pointer;text-decoration:underline}.panel-main-container-rtl .panel-header-container .panel-right-container{display:flex;justify-content:flex-end;align-items:center;height:100%;flex-direction:row}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button{width:32px;height:32px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-bottom:0}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div.panel-collapse-button-content-collapsed{padding-bottom:3px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon{width:18px;height:18px;display:inline-block}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon-close{transform:rotate(180deg)}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-full-screen-button{width:16px;height:16px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button{width:32px;height:32px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div{display:flex;flex-direction:row;justify-content:center;align-items:center}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div .panel-settings-button-icon{width:16px;display:inline-block}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div .panel-arrow-down-icon{position:relative;bottom:0;right:0;height:0;content:"";font-size:14px;border-right:.32em solid transparent;border-left:.32em solid transparent;border-top:.32em solid #54657d;margin-right:3px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button:hover{cursor:pointer}
`],encapsulation:2});function rc(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,7),e.\u0275\u0275elementStart(1,"div",8)(2,"mat-icon",9,10),e.\u0275\u0275listener("mouseover",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275reference(3);return e.\u0275\u0275resetView(i.show())})("mouseout",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275reference(3);return e.\u0275\u0275resetView(i.hide())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("libHintOverlay",n.infoHintConfig)}}const lc=[[["",8,"panel-list-action-button-left"]]],sc=function(a,t){return{"main-panel-list-container":a,"main-panel-list-container-rtl":t}},cc=function(){return[0]},dc=function(a){return{threshold:a}},pc=[".panel-list-action-button-left"];class Un{constructor(t){this._directionality=t,this.titleClicked=new e.EventEmitter,this.settingActionClicked=new e.EventEmitter,this.fullScreenClicked=new e.EventEmitter,this.collapseClicked=new e.EventEmitter,this.loadMore=new e.EventEmitter,this.sortChange=new e.EventEmitter}isRtl(){return this._directionality.value==="rtl"}onTitleClicked(t){this.titleClicked.emit(t)}onSettingActionClicked(t){this.settingActionClicked.emit(t)}onFullScreenClicked(t){this.isFullScreen=t,this.fullScreenClicked.emit(t)}onCollapseButtonClicked(t){this.isCollapsed=t,this.collapseClicked.emit(t)}onLoadMore(){this.isLoadMore&&this.loadMore.emit()}onSortChange(t){this.sortChange.emit(t)}}Un.\u0275fac=function(t){return new(t||Un)(e.\u0275\u0275directiveInject(Cn.Directionality))},Un.\u0275cmp=e.\u0275\u0275defineComponent({type:Un,selectors:[["ts-panel-list"]],inputs:{isShowInfoButton:"isShowInfoButton",infoHintConfig:"infoHintConfig",tableConfig:"tableConfig",tableDataSchema:"tableDataSchema",selected:"selected",tableData:"tableData",isFullScreen:"isFullScreen",isCollapsed:"isCollapsed",isShowCollapseButton:"isShowCollapseButton",isShowFullScreenButton:"isShowFullScreenButton",titleConfig:"titleConfig",settingActions:"settingActions",loadMoreButtonLczCaption:"loadMoreButtonLczCaption",isLoadMore:"isLoadMore",sortColumn:"sortColumn",sortDirection:"sortDirection"},outputs:{titleClicked:"titleClicked",settingActionClicked:"settingActionClicked",fullScreenClicked:"fullScreenClicked",collapseClicked:"collapseClicked",loadMore:"loadMore",sortChange:"sortChange"},ngContentSelectors:pc,decls:8,vars:22,consts:[[3,"ngClass"],[3,"isFullScreen","isCollapsed","isShowFullScreenButton","isShowCollapseButton","settingActions","titleConfig","collapseClicked","fullScreenClicked","settingActionClicked","titleClicked"],[1,"panel-action-button-left"],["class","panel-title-item",4,"ngIf"],[1,"panel-main-content","panel-table"],[3,"data","dataSchema","selected","headerSticky","config","sortColumn","sortDirection","selectedChange","sortChange"],["inViewport","",1,"panel-table-load-more-container",3,"inViewportOptions","inViewportAction"],[1,"panel-title-item"],[1,"panel-title-info-button"],["svgIcon","info",3,"libHintOverlay","mouseover","mouseout"],["titleInfoIcon","libHintOverlay"]],template:function(t,n){t&1&&(e.\u0275\u0275projectionDef(lc),e.\u0275\u0275elementStart(0,"div",0)(1,"ts-panel-content",1),e.\u0275\u0275listener("collapseClicked",function(i){return n.onCollapseButtonClicked(i)})("fullScreenClicked",function(i){return n.onFullScreenClicked(i)})("settingActionClicked",function(i){return n.onSettingActionClicked(i)})("titleClicked",function(i){return n.onTitleClicked(i)}),e.\u0275\u0275elementContainerStart(2,2),e.\u0275\u0275projection(3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(4,rc,4,1,"ng-container",3),e.\u0275\u0275elementStart(5,"div",4)(6,"ts-table",5),e.\u0275\u0275listener("selectedChange",function(i){return n.selected=i})("sortChange",function(i){return n.onSortChange(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275listener("inViewportAction",function(){return n.onLoadMore()}),e.\u0275\u0275elementEnd()()()()),t&2&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(16,sc,!n.isRtl(),n.isRtl())),e.\u0275\u0275advance(1),e.\u0275\u0275property("isFullScreen",n.isFullScreen)("isCollapsed",n.isCollapsed)("isShowFullScreenButton",n.isShowFullScreenButton)("isShowCollapseButton",n.isShowCollapseButton)("settingActions",n.settingActions)("titleConfig",n.titleConfig),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.isShowInfoButton),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",n.tableData)("dataSchema",n.tableDataSchema)("selected",n.selected)("headerSticky",!0)("config",n.tableConfig)("sortColumn",n.sortColumn)("sortDirection",n.sortDirection),e.\u0275\u0275advance(1),e.\u0275\u0275property("inViewportOptions",e.\u0275\u0275pureFunction1(20,dc,e.\u0275\u0275pureFunction0(19,cc))))},dependencies:[s.NgClass,s.NgIf,Z,v.MatIcon,m.HintOverlayDirective,Lo.InViewportDirective,At],styles:[`.main-panel-list-container .panel-main-container,.main-panel-list-container .panel-main-container-rtl{height:100%}.main-panel-list-container .panel-main-container .panel-left-container .panel-title-info-button,.main-panel-list-container .panel-main-container-rtl .panel-left-container .panel-title-info-button{align-items:center;margin-left:8px;height:24px;width:24px}.main-panel-list-container .panel-main-container .panel-table,.main-panel-list-container .panel-main-container-rtl .panel-table{flex-grow:2;overflow:auto}.main-panel-list-container .panel-main-container .panel-table::-webkit-scrollbar,.main-panel-list-container .panel-main-container-rtl .panel-table::-webkit-scrollbar{-webkit-appearance:none;width:5px;height:5px}.main-panel-list-container .panel-main-container .panel-table::-webkit-scrollbar-thumb,.main-panel-list-container .panel-main-container-rtl .panel-table::-webkit-scrollbar-thumb{background-color:#0003}.main-panel-list-container .panel-main-container .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container .panel-main-container .panel-table td.mat-cell:first-of-type,.main-panel-list-container .panel-main-container .panel-table td.mat-footer-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table td.mat-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table td.mat-footer-cell:first-of-type{padding-left:24px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container{display:block;text-align:center}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button{cursor:pointer}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button{height:16px;width:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon{height:16px;width:16px;line-height:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text{font-size:14px;color:#444;padding-left:4px;line-height:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover{color:#10a0e3}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-text,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-text{display:inline-block;vertical-align:top}.main-panel-list-container-rtl .panel-main-container,.main-panel-list-container-rtl .panel-main-container-rtl{height:100%}.main-panel-list-container-rtl .panel-main-container .panel-left-container .panel-title-info-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-left-container .panel-title-info-button{align-items:center;margin-right:8px;height:24px;width:24px}.main-panel-list-container-rtl .panel-main-container .panel-table,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table{flex-grow:2;overflow:auto}.main-panel-list-container-rtl .panel-main-container .panel-table::-webkit-scrollbar,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table::-webkit-scrollbar{-webkit-appearance:none;width:5px;height:5px}.main-panel-list-container-rtl .panel-main-container .panel-table::-webkit-scrollbar-thumb,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table::-webkit-scrollbar-thumb{background-color:#0003}.main-panel-list-container-rtl .panel-main-container .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container .panel-table td.mat-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container .panel-table td.mat-footer-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table td.mat-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table td.mat-footer-cell:first-of-type{padding-right:24px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container{display:block;text-align:center}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button{cursor:pointer}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button{height:16px;width:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon{height:16px;width:16px;line-height:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text{font-size:14px;color:#444;padding-right:4px;line-height:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover{color:#10a0e3}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-text,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-text{display:inline-block;vertical-align:top}
`],encapsulation:2});class Ft{constructor(t,n){this._matIconRegistry=t,this._domSanitizer=n}registerIcons(){["arrow-down","full-screen-open","full-screen-close","settings","info","show-more-icon"].forEach(n=>{this._matIconRegistry?.addSvgIconLiteral(n,this._domSanitizer?.bypassSecurityTrustHtml(p(46377)("./"+n+".svg")))})}}Ft.\u0275fac=function(t){return new(t||Ft)(e.\u0275\u0275inject(v.MatIconRegistry),e.\u0275\u0275inject(pe.DomSanitizer))},Ft.\u0275prov=e.\u0275\u0275defineInjectable({token:Ft,factory:Ft.\u0275fac});class Hn{constructor(t){this._assetsService=t,this._assetsService.registerIcons()}}Hn.\u0275fac=function(t){return new(t||Hn)(e.\u0275\u0275inject(Ft))},Hn.\u0275mod=e.\u0275\u0275defineNgModule({type:Hn}),Hn.\u0275inj=e.\u0275\u0275defineInjector({providers:[Ft],imports:[s.CommonModule,W,c.FormsModule,w.MatLegacyButtonModule,de.MatLegacyMenuModule,v.MatIconModule,ro.BrowserAnimationsModule,$e,Lo.InViewportModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Hn,{declarations:[At,Un],imports:[s.CommonModule,W,c.FormsModule,w.MatLegacyButtonModule,de.MatLegacyMenuModule,v.MatIconModule,ro.BrowserAnimationsModule,$e,Lo.InViewportModule],exports:[At,Un]})}();function mc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.data.additionalText)}}function uc(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",8),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",9),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("mat-dialog-close",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"ValidationErrorDialogComponent.Cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("mat-dialog-close",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.data.continueButtonCaption)}}function gc(a,t){a&1&&(e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"ValidationErrorDialogComponent.Close")))}class Ea{constructor(t){this.data=t}}Ea.\u0275fac=function(t){return new(t||Ea)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},Ea.\u0275cmp=e.\u0275\u0275defineComponent({type:Ea,selectors:[["ts-validation-error-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","validation-dialog-additional-text",4,"ngIf"],[1,"validation-dialog-error"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],["withoutContinue",""],[1,"validation-dialog-additional-text"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275template(4,mc,2,1,"span",2),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275template(8,uc,6,6,"ng-container",5),e.\u0275\u0275template(9,gc,3,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(10);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.data.title),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.data.additionalText),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.data.validationError),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.data.continueButtonCaption)("ngIfElse",o)}},dependencies:[s.NgIf,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,b.TranslatePipe],styles:[`ts-validation-error-dialog{margin:0!important;padding:0 6px;width:720px}ts-validation-error-dialog [mat-dialog-actions]{float:right}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error,ts-validation-error-dialog [mat-dialog-content] .validation-dialog-additional-text{white-space:pre-wrap}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error{font-family:monospace;font-size:13px}
`],encapsulation:2});var hc=p(66219);function lo(a){if(typeof a=="number")return!0;if(typeof a=="string"){const t=Number.parseInt(a);return String(t)===a}return!1}const fc=["container"],Ao={Primary:{key:"primary",value:"#FFFFFF"}},Cc="transparent",Fo={alignItems:"stretch"};class Y extends K.CrtBaseComponent{constructor(t){super(t),this.injector=t,this.destroyed$=new C.Subject,this.items=[],this.visiblePadding=!0,this.borderRadius=k.SizeEnum.None,this.stretch=!1,this.fitContent=!0,this.width=Number.MAX_VALUE,this.window=this.injector.get(Oe.WINDOW_TOKEN),this._featureService=this.injector.get(fe.FeatureService),this.renderer=this.injector.get(e.Renderer2)}get isResponsive(){return this.responsiveWidth<Number.MAX_VALUE}get isResponsiveWidth(){return this.width<this.responsiveWidth}get responsiveWidth(){return 395*this.window.devicePixelRatio}set responsiveWidth(t){throw new Error("responsiveWidth is not supported yet")}static isBaseColorKey(t){if(t&&typeof t=="string"){const n=t.toLowerCase();return Y._baseColors.some(o=>o.key===n)}return!1}static isBaseColorValue(t){if(t&&typeof t=="string"){const n=t.toLowerCase();return Y._baseColors.some(o=>o.value===n)}return!1}static getBaseColorKey(t){const n=t.toLowerCase();return Y._baseColors.find(o=>o.value===n)?.key}static getBaseColorValue(t){const n=t.toLowerCase();return Y._baseColors.find(o=>o.key===n)?.value}_preparePadding(){const{top:t,bottom:n}=this.padding;let{left:o,right:i}=this.padding;return this.isRtl()&&([i,o]=[o,i]),{top:t,bottom:n,left:o,right:i}}_paddingClasses(){const t=[],n=this.padding;if(!n)return t;if((0,S.isObject)(n)){const{top:o,bottom:i,left:r,right:d}=this._preparePadding();return this.applySizeClass("container-padding-top-{0}",o,t),this.applySizeClass("container-padding-bottom-{0}",i,t),this.applySizeClass("container-padding-left-{0}",r,t),this.applySizeClass("container-padding-right-{0}",d,t),t}return this.applySizeClass("container-padding-{0}",n,t),t}_paddingStyles(){const t={},n=this.padding;if(!n)return t;if((0,S.isObject)(n)){const{top:o,bottom:i,left:r,right:d}=this._preparePadding();return this.applySizeStyle("paddingTop",o,t),this.applySizeStyle("paddingBottom",i,t),this.applySizeStyle("paddingLeft",r,t),this.applySizeStyle("paddingRight",d,t),t}return this.applySizeStyle("padding",n,t),t}_borderRadiusClasses(){const t=[],n=this.borderRadius;return n&&n!==k.SizeEnum.None&&(this.applySizeClass("container-border-radius-{0}",n,t),t.push("container-border-area")),t}_borderRadiusStyles(){const t={},n=this.borderRadius;return n&&(lo(n)?t.borderRadius=`${n}px`:(0,k.isSizeEnum)(n)||(t.borderRadius=n)),t}_colorClasses(){const t=this.color?.toLowerCase(),n=[];return Y.isBaseColorKey(t)&&n.push(`container-background-color-${t}`),n}_colorStyles(){const t={};return this.color&&!Y.isBaseColorKey(this.color)&&(t.backgroundColor=this.color),t}onScroll(){}applySizeClass(t,n,o){if(typeof n=="string"&&(0,k.isSizeEnum)(n)&&n!==k.SizeEnum.None){const i=va.String.Format(t,n.toLowerCase());o.push(i)}}onResize(){this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.isResponsive&&(this.width=this.window.innerWidth,this.detectChanges())})})}getClasses(){const t=super.getClasses(),n=this._paddingClasses(),o=this._colorClasses(),i=this._borderRadiusClasses();return[...t,...n,...o,...i]}applySizeStyle(t,n,o){n&&(lo(n)?o[t]=`${n}px`:typeof n=="string"&&!(0,k.isSizeEnum)(n)&&(o[t]=n))}setValuesFromConfig(t,n=[]){super.setValuesFromConfig(t,["items"])}get containerStyles(){return{...this.styles||{},...this._paddingStyles(),...this._borderRadiusStyles(),...this._colorStyles()}}detectChangesAsync(t=null){this.window.requestAnimationFrame(()=>{setTimeout(()=>{this.detectChanges(),t?.()})})}ngOnInit(){this._featureService.getFeatureState("HideDesignPadding").subscribe(t=>{t&&(this.visiblePadding=!1)})}ngAfterViewInit(){this.zone=this.injector.get(e.NgZone),this.resizeObserver=new hc.Z(()=>this.onResize()),this.container&&this.resizeObserver.observe(this.container.nativeElement)}ngOnDestroy(){this.resizeObserver?.disconnect(),this.destroyed$.next(),this.destroyed$.complete()}}Y._baseColors=Object.values(Ao).map(({key:a,value:t})=>({key:a.toLowerCase(),value:t.toLowerCase()})),Y.\u0275fac=function(t){return new(t||Y)(e.\u0275\u0275directiveInject(e.Injector))},Y.\u0275dir=e.\u0275\u0275defineDirective({type:Y,viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(fc,5),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.container=o.first)}},hostVars:4,hostBindings:function(t,n){t&1&&e.\u0275\u0275listener("scroll",function(){return n.onScroll()}),t&2&&e.\u0275\u0275classProp("stretch",n.stretch)("fit-content",n.fitContent)},inputs:{items:"items",visiblePadding:"visiblePadding",padding:"padding",borderRadius:"borderRadius",color:"color",responsiveWidth:"responsiveWidth",stretch:"stretch",fitContent:"fitContent"},features:[e.\u0275\u0275InheritDefinitionFeature]}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",va.String)],Y.prototype,"color",void 0);class Gn extends Y{constructor(){super(...arguments),this.slotHTMLElements=[]}setSlotElementStyles(t){t=this.castSlotElements(t.filter(n=>!(n instanceof Comment))),this.applySlotElementStyles(t)}castSlotElements(t){}getItemLayout(t){}castElementStylesToLayoutConfig(t){}applySlotElementStyles(t){t.forEach(n=>{const o=this.getItemLayout(n.layoutConfig);Object.entries(o).forEach(([i,r])=>{const d=(0,S.kebabCase)(i);this.renderer.setStyle(n,d,r)})})}get shouldUseSlots(){return!this.items||!this.items.length}}Gn.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Gn)))(n||Gn)}}(),Gn.\u0275dir=e.\u0275\u0275defineDirective({type:Gn,features:[e.\u0275\u0275InheritDefinitionFeature]});const _c=["items"];function yc(a,t){a&1&&e.\u0275\u0275elementContainer(0)}function vc(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"slot",4),e.\u0275\u0275listener("slotchange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.slotChange(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(1)}}function Mc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275elementContainer(1,7),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",o.getItemLayout(n.layoutConfig)),e.\u0275\u0275advance(1),e.\u0275\u0275property("crtViewElement",n)}}function bc(a,t){if(a&1&&e.\u0275\u0275template(0,Mc,2,2,"div",5),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",n.items)}}const xc=["*"],gi=(a,t)=>{const n=a.charAt(0).toUpperCase()+a.slice(1);return{caption:`LayoutElements.Flex${n}.Caption`,hint:`LayoutElements.Flex${n}.Hint`,icon:p(20470)(`./flex-${a}-icon.svg`),defaultPropertyValues:{direction:a,items:[],fitContent:!0},position:t}},Ot={...Fo,direction:"row",justifyContent:"start",gap:k.SizeEnum.Small};let H=class extends Gn{constructor(t){super(t),this.injector=t,this._containerClasses=[],this.direction=Ot.direction,this.justifyContent=Ot.justifyContent,this.alignItems=Ot.alignItems,this.gap=Ot.gap,this.innerScroll=new e.EventEmitter}getClasses(){const n=[...super.getClasses(),...this._gapClasses()].sort();return(0,S.isEqual)(this._containerClasses,n)||(this._containerClasses=n),this._containerClasses}_gapClasses(){const t=[],n=this.gap||Ot.gap;return this.applySizeClass("container-gap-{0}",n,t),t}castElementStylesToLayoutConfig(t){const[n,o,i,r,d,f,E,L,mt,Co]=["basis","align-self","grow","shrink","width","height","min-width","max-width","min-height","max-height"].map(_o=>{const sp=`layout-config-${_o}`,Ti=t.getAttribute(sp);if(Ti)return Ti});return{basis:n,alignSelf:o,grow:Number(i),shrink:Number(r),width:Number(d),height:Number(f),minWidth:Number(E),maxWidth:Number(L),minHeight:Number(mt),maxHeight:Number(Co)}}castSlotElements(t){for(const n of t){const o=this.castElementStylesToLayoutConfig(n);n.layoutConfig=o}return t}get flexStyles(){const t={};t.justifyContent=this.justifyContent||Ot.justifyContent,t.alignItems=this.alignItems||Ot.alignItems,t.flexWrap=this.wrap||(this.isVertical?"nowrap":"wrap");const n=this.gap;return n&&(lo(n)?t.gap=n+"px":(0,k.isSizeEnum)(n)||(t.gap=n)),{...this.containerStyles,...t}}get flexDirection(){return this.isVertical?this.direction||this.styles?.flexDirection:this.isResponsiveWidth?this.direction==="row-reverse"?"column-reverse":"column":this.direction||this.styles?.flexDirection}get isVertical(){return["column","column-reverse"].includes(this.direction)}getItemLayout(t){let n={};return t?.basis&&(t.basis==="fit-content"?this.direction==="column"?n.height="fit-content":n.width="fit-content":n.flexBasis=t.basis),t?.grow!==void 0&&(n.flexGrow=t.grow),t?.shrink!==void 0&&(n.flexShrink=t.shrink),t?.alignSelf&&(n.alignSelf=t.alignSelf),t?.width&&(n.width=`${t.width}px`,n.minWidth=`${t.width}px`),t?.minWidth&&(n.minWidth=`${t.minWidth}px`),t?.maxWidth&&(n.maxWidth=`${t.maxWidth}px`),t?.height&&(n.height=`${t.height}px`,n.minHeight=`${t.height}px`),t?.minHeight&&(n.minHeight=`${t.minHeight}px`),t?.maxHeight&&(n.maxHeight=`${t.maxHeight}px`),t&&t.styles&&(n={...n,...t.styles}),n}ngAfterContentInit(){this.children.changes.pipe((0,u.startWith)(this.children),(0,u.takeUntil)(this.destroyed$)).subscribe(()=>{const t=this.children.map(({nativeElement:n})=>n);t?.length&&(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))})}slotChange(t){const n=t.target.assignedNodes();!n||!n.length||(this.slotHTMLElements=n,this.setSlotElementStyles(this.slotHTMLElements))}onInnerScroll(){this.innerScroll.emit()}};H.\u0275fac=function(t){return new(t||H)(e.\u0275\u0275directiveInject(e.Injector))},H.\u0275cmp=e.\u0275\u0275defineComponent({type:H,selectors:[["crt-flex"]],contentQueries:function(t,n,o){if(t&1&&e.\u0275\u0275contentQuery(o,_c,4,e.ElementRef),t&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.children=i)}},inputs:{direction:"direction",justifyContent:"justifyContent",wrap:"wrap",alignItems:"alignItems",gap:"gap"},outputs:{innerScroll:"innerScroll"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:xc,decls:6,vars:9,consts:[[1,"crt-flex",3,"ngStyle","ngClass","scroll"],[4,"ngIf","ngIfThen","ngIfElse"],["slotsTemplate",""],["itemsTemplate",""],[3,"slotchange"],["class","crt-view-element-container",3,"ngStyle",4,"ngFor","ngForOf"],[1,"crt-view-element-container",3,"ngStyle"],[3,"crtViewElement"]],template:function(t,n){if(t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("scroll",function(){return n.onInnerScroll()}),e.\u0275\u0275template(1,yc,1,0,"ng-container",1),e.\u0275\u0275template(2,vc,2,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,bc,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(3),i=e.\u0275\u0275reference(5);e.\u0275\u0275styleProp("flex-direction",n.flexDirection),e.\u0275\u0275property("ngStyle",n.flexStyles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id)("flex-direction",n.flexDirection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.shouldUseSlots)("ngIfThen",o)("ngIfElse",i)}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgStyle,K.ViewElementDirective],styles:[`.crt-flex,web-flex-container{display:flex;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){.crt-flex,web-flex-container{height:initial}}crt-flex{display:flex;flex-direction:column;min-height:0;min-width:0;overflow:auto}crt-flex.stretch{min-width:0;width:100%}crt-flex.stretch>.crt-flex{min-height:0;min-width:0}crt-flex .crt-flex>.stretch{flex-grow:1}.crt-view-element-container:empty{display:none}
`],encapsulation:2}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],H.prototype,"direction",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],H.prototype,"justifyContent",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],H.prototype,"wrap",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],H.prototype,"alignItems",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],H.prototype,"gap",void 0),(0,g.__decorate)([(0,l.CrtOutput)(),(0,g.__metadata)("design:type",Object)],H.prototype,"innerScroll",void 0),H=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.FlexContainer",contentSlots:["items"],reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,l.CrtInterfaceDesignerItem)({toolbarConfig:[gi("row",80),gi("column",90)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.FlexPropertiesPanel",viewElementGroupType:l.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.FlexContainer"}),(0,g.__metadata)("design:paramtypes",[e.Injector])],H);class Pt{constructor(){this._maxGridLayoutRow=1,this._maxColumnsCount=12,this._defaultItemLayout={colSpan:1,row:1,column:1,rowSpan:1},this._defaultRowSpan=1,this._defaultColSpan=6}_applyExplicitPositions(t,n){if(t.every(o=>!o?.layoutConfig)){let o=1,i=1;t.forEach(r=>{const d=r.layoutConfig||{};d.column===void 0&&(d.column=i,i++),d.colSpan===void 0&&(d.colSpan=1),d.row===void 0&&(d.row=o),d.rowSpan===void 0&&(d.rowSpan=1),d.column===1&&d.colSpan===-1&&o++,i>n&&(i=1,o++),r.layoutConfig=d})}return t}_checkBitmapIntersection(t,n){let o,i;for(o=0,i=t.length;o<i;o++)if((t[o]&n[o])>0)return!0;return!1}_calculateBitMask(t,n,o){const i=o-t;return Math.pow(2,i)-Math.pow(2,i-n)}_isEmpty(t){return t==null||t===""||(0,S.isArray)(t)&&t.length===0}_getItemBitmap(t,n){const o=[];if(this._isEmpty(t))return o;const i=t.column,r=t.row,d=t.colSpan||this._defaultColSpan,f=t.rowSpan||this._defaultRowSpan;let E,L;for(E=r,L=r+f;E<L;E++)o[E]=this._calculateBitMask(i,d,n);return o}_setDefaultValue(t,n,o,i){t[o]||(t[o]=i),n[o]||(n[o]=i)}_fixItemIntersect(t,n){const o=t.layoutConfig,i=n.layoutConfig,r=this._tryFixColumns(o,i);let d=!0;return r||(d=this._tryFixRows(o,i)),!r&&!d&&o.row>this._maxGridLayoutRow&&(this._maxGridLayoutRow+=1),!r&&!d&&this._moveDownItem(t),t}_moveDownItem(t){this._maxGridLayoutRow++;const n=t.layoutConfig;n.row=this._maxGridLayoutRow,n.column=1;const o=this._originalItems.find(i=>i.name===t.name);o&&(n.colSpan=o.layoutConfig.colSpan||1)}_tryFixColumns(t,n){return this._setDefaultValue(t,n,"colSpan",this._defaultColSpan),this._calculateNewParameters(t,n,"column","colSpan")}_tryFixRows(t,n){return this._setDefaultValue(t,n,"rowSpan",this._defaultRowSpan),this._calculateNewParameters(t,n,"row","rowSpan")}_calculateNewParameters(t,n,o,i){const r=t[i],d=n[i],f=n[o],E=f+d,L=t[o],mt=L+r,Co=f<=L,_o=Co?E-L:mt-f;return r<=_o?!1:(Co&&(t[o]=E),t[i]=r-_o,!0)}_compareItemsPositions(t,n){const o=t.layoutConfig||(0,S.cloneDeep)(this._defaultItemLayout),i=n.layoutConfig||(0,S.cloneDeep)(this._defaultItemLayout),r=Math.max(o.colSpan||this._defaultColSpan,o.rowSpan||this._defaultRowSpan),d=Math.max(i.colSpan||this._defaultColSpan,i.rowSpan||this._defaultRowSpan);return o.row!==i.row?o.row<i.row?-1:1:r<d||o.column<i.column&&r<=d?-1:1}_getMaxGridLayoutRow(t){const n=t.map(o=>{const i=o.layoutConfig||{},r=i.row||1,d=i.rowSpan||1;return r+d-1});return Math.max(...n)||1}_getMaxColumnsCount(t,n){const o=t.map(i=>{const r=i.layoutConfig||{},d=r.column||1,f=r.colSpan||1;return d+f-1});return Math.max(...o,n,this._maxColumnsCount)}fixItemsOverlap(t,n){this._originalItems=(0,S.cloneDeep)(t);const o=[],i=[];return this._maxGridLayoutRow=this._getMaxGridLayoutRow(t),this._maxColumnsCount=this._getMaxColumnsCount(t,n),[...t].sort((d,f)=>this._compareItemsPositions(d,f)).forEach(d=>{let f=this._getItemBitmap(d.layoutConfig,this._maxColumnsCount);i.forEach(E=>{const L=this._getItemBitmap(E.layoutConfig,this._maxColumnsCount);this._checkBitmapIntersection(L,f)&&(d=this._fixItemIntersect(d,E),f=this._getItemBitmap(d.layoutConfig,this._maxColumnsCount),o.push(d.name))}),i.push(d)}),this._applyExplicitPositions(t,n),{items:t,affectedItems:o}}}Pt.\u0275fac=function(t){return new(t||Pt)},Pt.\u0275prov=e.\u0275\u0275defineInjectable({token:Pt,factory:Pt.\u0275fac});const Sc=["items"];function Ic(a,t){a&1&&e.\u0275\u0275elementContainer(0)}function wc(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"slot",5),e.\u0275\u0275listener("slotchange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.slotChange(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(1)}}function Dc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275elementContainer(1,10),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngStyle",o.getItemLayout(n.layoutConfig)),e.\u0275\u0275advance(1),e.\u0275\u0275property("crtViewElement",n)}}function Tc(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Dc,2,2,"div",8),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.items)}}function kc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275elementContainer(1,10),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngStyle",o.getItemLayout(n.layoutConfig)),e.\u0275\u0275advance(1),e.\u0275\u0275property("crtViewElement",n)}}function Ec(a,t){if(a&1&&e.\u0275\u0275template(0,kc,2,2,"div",8),a&2){const n=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(1);e.\u0275\u0275property("ngForOf",n.fixItemsOverlap(n.items,o).items)}}function Nc(a,t){if(a&1&&(e.\u0275\u0275template(0,Tc,2,1,"ng-container",6),e.\u0275\u0275template(1,Ec,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)),a&2){const n=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.gridContainerAllowOverlapFeature)("ngIfElse",n)}}const Lc=["*"],Oo={...Fo,columnsTemplate:"minmax(32px, 1fr)"},Ua=(a,t,n={},o="column")=>{const i=Oo.columnsTemplate,r="minmax(max-content, 32px)",d=new Array(a).fill(i);return{caption:`LayoutElements.Grid${o.charAt(0).toUpperCase()+o.slice(1)}${a}.Caption`,icon:p(83028)(`./grid-${o}-${a}-icon.svg`),defaultPropertyValues:{columns:d,rows:r,gap:{columnGap:k.SizeEnum.Large},items:[],fitContent:!0,...n},position:t}},Ac=(a,t)=>{const n={padding:{top:k.SizeEnum.Medium,right:k.SizeEnum.Large,bottom:k.SizeEnum.Medium,left:k.SizeEnum.Large},color:Ao.Primary.key,borderRadius:k.SizeEnum.Medium};return Ua(a,t,n,"area")};let G=class extends Gn{ngAfterContentInit(){this.children.changes.pipe((0,u.startWith)(this.children),(0,u.takeUntil)(this.destroyed$)).subscribe(()=>{const t=this.children.map(({nativeElement:n})=>n);t?.length&&(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))})}getClasses(){const t=super.getClasses()||[],n=this._gridTemplateColumnsClasses(),o=this._gapClasses(),i=[...t,...n,...o].sort();return(0,S.isEqual)(this._containerClasses,i)||(this._containerClasses=i),this._containerClasses}get gridStyles(){const t={};return this.justifyItems&&(t.justifyItems=this.justifyItems),this.alignItems&&(t.alignItems=this.alignItems),this.isResponsiveWidth&&(t.gridTemplateAreas="initial"),{...this.containerStyles,...t,...this._gapStyles(),...this._rowsStyles(),...this._columnsStyles()}}get gridTemplateColumns(){return this.width<this.responsiveWidth?Oo.columnsTemplate:this.gridStyles.gridTemplateColumns}constructor(t){super(t),this.injector=t,this._containerClasses=[],this.featureService=this.injector.get(fe.FeatureService),this._gridContainerItemsLayoutService=this.injector.get(Pt),this.featureService.getFeatureState("GridContainerAllowOverlap").pipe((0,u.takeUntil)(this.destroyed$)).subscribe(n=>this.gridContainerAllowOverlapFeature=n)}_gapStyles(){const t={},n=this.gap;if((0,S.isObject)(n)){const{columnGap:o,rowGap:i}=n;this.applySizeStyle("columnGap",o,t),this.applySizeStyle("rowGap",i,t)}else this.applySizeStyle("gap",this.gap,t);return t}_rowsStyles(){const t={};return this.isResponsiveWidth?t.gridAutoRows="max-content":typeof this.rows=="string"?t.gridAutoRows=this.rows:this.rows instanceof Array&&(t.gridTemplateRows=this.rows.join(" ")),t}_columnsStyles(){const t={};return typeof this.columns=="string"?t.gridAutoColumns=this.columns:this.columns instanceof Array&&(t.gridTemplateColumns=this.columns.join(" ")),t}_gridTemplateColumnsClasses(){const t=[];return this.width<this.responsiveWidth&&t.push("crt-grid-responsive"),t}_gapClasses(){const t=[],n=this.gap;if(n)if((0,S.isObject)(n)){const{columnGap:o,rowGap:i}=n;this.applySizeClass("container-column-gap-{0}",o,t),this.applySizeClass("container-row-gap-{0}",i,t)}else this.applySizeClass("container-gap-{0}",n,t);return t}_fullLayoutConfig(t){const n={};let o="";t?.column!==void 0&&(o+=t.column),t?.colSpan!==void 0&&(o&&(o+="/"),t.colSpan!==-1&&(o+="span "),o+=t.colSpan);let i="";return t?.row!==void 0&&(i+=t.row),t?.rowSpan!==void 0&&(i&&(i+="/"),t.rowSpan!==-1&&(i+="span "),i+=t.rowSpan),o&&(n.gridColumn=o),i&&(n.gridRow=i),n}_responsiveLayoutConfig(t){const n={},o=t?.rowSpan;return o!==void 0&&o!==-1&&(n.gridRow=`span ${o}`),n}_computedGridColumns(t){return getComputedStyle(t).getPropertyValue("container-template-columns").split(" ")}_applySlotElementsResponsiveStyles(t){for(const n of t){const o=n?.layoutConfig?.rowSpan;o!==void 0&&o!==-1&&(this.renderer.setStyle(n,"grid-row-start",`span ${o}`),this.renderer.setStyle(n,"grid-row-end","auto")),this.renderer.setStyle(n,"grid-column-start","auto"),this.renderer.setStyle(n,"grid-column-end","auto")}}applySlotElementStyles(t){if(this.isResponsiveWidth){this._applySlotElementsResponsiveStyles(t);return}super.applySlotElementStyles(t)}castElementStylesToLayoutConfig(t){const[n,o,i,r]=["row","column","row-span","col-span"].map(d=>{const f=`layout-config-${d}`,E=t.getAttribute(f);if(E)return Number(E)});return{row:n,column:o,rowSpan:i,colSpan:r}}castSlotElements(t){for(const n of t)n.layoutConfig=this.castElementStylesToLayoutConfig(n);if(!this.gridContainerAllowOverlapFeature&&this.container?.nativeElement){const n=t.map(o=>({layoutConfig:o.layoutConfig}));this.fixItemsOverlap(n,this.container.nativeElement)}return t}onResize(){super.onResize(),this.shouldUseSlots&&this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.setSlotElementStyles(this.slotHTMLElements)})})}getItemLayout(t){return t?this.isResponsiveWidth?this._responsiveLayoutConfig(t):this._fullLayoutConfig(t):null}fixItemsOverlap(t,n){let o=[];if(this.allowOverlap!==!0&&t){const i=this._computedGridColumns(n);o=this._gridContainerItemsLayoutService.fixItemsOverlap(t,i.length).affectedItems}return{items:t,affectedItems:o}}slotChange(t){const n=t.target.assignedNodes();!n||!n.length||(this.slotHTMLElements=n,this.setSlotElementStyles(this.slotHTMLElements))}};G.\u0275fac=function(t){return new(t||G)(e.\u0275\u0275directiveInject(e.Injector))},G.\u0275cmp=e.\u0275\u0275defineComponent({type:G,selectors:[["crt-grid"]],contentQueries:function(t,n,o){if(t&1&&e.\u0275\u0275contentQuery(o,Sc,4,e.ElementRef),t&2){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.children=i)}},inputs:{rows:"rows",columns:"columns",gap:"gap",justifyItems:"justifyItems",alignItems:"alignItems",allowOverlap:"allowOverlap"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Lc,decls:7,vars:8,consts:[[1,"crt-grid",3,"ngStyle","ngClass"],["container",""],[4,"ngIf","ngIfThen","ngIfElse"],["slotsTemplate",""],["itemsTemplate",""],[3,"slotchange"],[4,"ngIf","ngIfElse"],["fixItemsLayoutConfig",""],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"crtViewElement"]],template:function(t,n){if(t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275template(2,Ic,1,0,"ng-container",2),e.\u0275\u0275template(3,wc,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Nc,3,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(4),i=e.\u0275\u0275reference(6);e.\u0275\u0275styleProp("grid-template-columns",n.gridTemplateColumns),e.\u0275\u0275property("ngStyle",n.gridStyles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.shouldUseSlots)("ngIfThen",o)("ngIfElse",i)}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgStyle,K.ViewElementDirective],styles:[`crt-grid,web-grid-container{display:block;width:100%;position:relative;min-height:0;min-width:0;overflow:auto}crt-grid>.crt-grid,web-grid-container>.crt-grid{display:grid;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){crt-grid>.crt-grid,web-grid-container>.crt-grid{height:initial}}crt-grid>.crt-grid>*,web-grid-container>.crt-grid>*{min-height:0;min-width:0;overflow:auto}@media screen and (max-width: 600px){.crt-grid:not(.crt-grid-responsive){grid-template-columns:1fr!important}}
`],encapsulation:2}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],G.prototype,"rows",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],G.prototype,"columns",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],G.prototype,"gap",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],G.prototype,"justifyItems",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],G.prototype,"alignItems",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Boolean)],G.prototype,"allowOverlap",void 0),G=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.GridContainer",contentSlots:["items"],reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,l.CrtInterfaceDesignerItem)({toolbarConfig:[Ac(1,40),Ua(1,50),Ua(2,60),Ua(3,70),Ua(4,80)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.GridPropertiesPanel",viewElementGroupType:l.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.GridContainer"}),(0,g.__metadata)("design:paramtypes",[e.Injector])],G);function Fc(a,t){if(a&1&&e.\u0275\u0275elementContainer(0,3),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("crtViewModel",n)("crtViewElement",o.itemViewConfig)}}function Oc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Fc,1,2,"ng-container",2),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModels)}}let ie=class extends K.CrtBaseComponent{};ie.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(ie)))(n||ie)}}(),ie.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["ts-component-list"]],inputs:{itemViewConfig:"itemViewConfig",viewModels:"viewModels"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[1,"ts-component-list",3,"ngStyle","ngClass"],[4,"ngIf"],[3,"crtViewModel","crtViewElement",4,"ngFor","ngForOf"],[3,"crtViewModel","crtViewElement"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Oc,2,1,"div",1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.viewModels))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgStyle,K.ViewModelDirective,K.ViewElementDirective],encapsulation:2}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",Object)],ie.prototype,"itemViewConfig",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",gt.BaseViewModelCollection)],ie.prototype,"viewModels",void 0),ie=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.ComponentList",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],ie);let me=class extends K.CrtBaseComponent{};me.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(me)))(n||me)}}(),me.\u0275cmp=e.\u0275\u0275defineComponent({type:me,selectors:[["ts-label"]],inputs:{label:"label"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"ts-label",3,"ngStyle","ngClass"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label))},dependencies:[s.NgClass,s.NgStyle],encapsulation:2}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],me.prototype,"label",void 0),me=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.DeprecatedLabel",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],me);let Ne=class extends K.CrtBaseComponent{};Ne.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Ne)))(n||Ne)}}(),Ne.\u0275cmp=e.\u0275\u0275defineComponent({type:Ne,selectors:[["ts-list"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:16,vars:3,consts:[[1,"ts-list",3,"ngStyle","ngClass"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"ul")(2,"li"),e.\u0275\u0275text(3,"1 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"li"),e.\u0275\u0275text(5,"2 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"li"),e.\u0275\u0275text(7,"3 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"li"),e.\u0275\u0275text(9,"4 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"li"),e.\u0275\u0275text(11,"5 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"li"),e.\u0275\u0275text(13,"6 Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"li"),e.\u0275\u0275text(15,"7 Item"),e.\u0275\u0275elementEnd()()()),t&2&&(e.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id))},dependencies:[s.NgClass,s.NgStyle],encapsulation:2}),Ne=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.List",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],Ne);class Zn{constructor(){this._direction="right",this.animationState="initial",this.isExpanded=!1,this.toggle=new e.EventEmitter}set direction(t){this._direction=t}get direction(){return this._direction}set animationDisabled(t){this._animationDisabled=t}get animationDisabled(){return this._animationDisabled}_setDefaultAnimationState(){this.animationState="initial"}_changeAnimationState(t){this.animationState=t}_onMouseEnter(){this._changeAnimationState(`slide-${this.direction}`)}_onMouseLeave(){this._changeAnimationState("initial")}onMouseAction(t){if(this.animationDisabled){this._setDefaultAnimationState();return}switch(t){case"enter":this._onMouseEnter();break;case"leave":this._onMouseLeave();break}}onToggle(){this.toggle.emit()}}Zn.\u0275fac=function(t){return new(t||Zn)},Zn.\u0275cmp=e.\u0275\u0275defineComponent({type:Zn,selectors:[["crt-expansion-button"]],inputs:{isExpanded:"isExpanded",direction:"direction",animationDisabled:"animationDisabled"},outputs:{toggle:"toggle"},decls:3,vars:8,consts:[[3,"mouseenter","mouseleave","click"],["svgIcon","collapse",1,"arrow-icon"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("mouseenter",function(){return n.onMouseAction("enter")})("mouseleave",function(){return n.onMouseAction("leave")})("click",function(){return n.onToggle()}),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275element(2,"mat-icon",1),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275classMapInterpolate1("expansion-button-wrapper ",n.direction,""),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("expansion-btn ",n.animationState,""),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("reversed",n.isExpanded))},dependencies:[v.MatIcon],styles:[`.expansion-button-wrapper{width:29px;height:40px;display:flex;position:absolute}.expansion-button-wrapper.left{justify-content:flex-end;left:-17px}.expansion-button-wrapper.left .expansion-btn{border-radius:8px 0 0 8px}.expansion-button-wrapper.left .expansion-btn .arrow-icon{transform:rotate(0)}.expansion-button-wrapper.left .expansion-btn .arrow-icon.reversed{transform:rotate(180deg)}.expansion-button-wrapper.right{justify-content:flex-start;left:17px}.expansion-button-wrapper.right .expansion-btn{border-radius:0 8px 8px 0}.expansion-button-wrapper.right .expansion-btn .arrow-icon{transform:rotate(180deg)}.expansion-button-wrapper.right .expansion-btn .arrow-icon.reversed{transform:rotate(0)}.expansion-button-wrapper .expansion-btn{display:flex;justify-content:center;align-items:center;height:100%;cursor:pointer;transition:.3s cubic-bezier(.18,.89,.32,1.28)}.expansion-button-wrapper .expansion-btn.initial{width:16px}.expansion-button-wrapper .expansion-btn.slide-left,.expansion-button-wrapper .expansion-btn.slide-right{width:25px}.expansion-button-wrapper .expansion-btn .arrow-icon{height:16px;width:16px}
`],encapsulation:2});class Je{constructor(t,n){this._matIconRegistry=t,this._domSanitizer=n,this._registerIcons()}_registerIcons(){["collapse"].forEach(n=>{this._matIconRegistry.addSvgIconLiteral(n,this._domSanitizer.bypassSecurityTrustHtml(p(88395)("./"+n+".svg")))})}}Je.\u0275fac=function(t){return new(t||Je)(e.\u0275\u0275inject(v.MatIconRegistry),e.\u0275\u0275inject(pe.DomSanitizer))},Je.\u0275mod=e.\u0275\u0275defineNgModule({type:Je}),Je.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,v.MatIconModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Je,{declarations:[Zn],imports:[s.CommonModule,v.MatIconModule],exports:[Zn]})}();function Pc(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-expansion-button",2),e.\u0275\u0275listener("toggle",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onToggle())}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("direction",n.panelConfig==null?null:n.panelConfig.direction)("animationDisabled",n.panelConfig==null?null:n.panelConfig.animationDisabled)("isExpanded",n.isExpanded)}}const Vc=function(a){return{show:a}},Rc=["*"];class Wn{constructor(){this.isExpanded=!1,this.toggle=new e.EventEmitter}onToggle(){this.toggle.emit()}}Wn.\u0275fac=function(t){return new(t||Wn)},Wn.\u0275cmp=e.\u0275\u0275defineComponent({type:Wn,selectors:[["ts-vertical-expansion-panel"]],inputs:{isExpanded:"isExpanded",panelConfig:"panelConfig"},outputs:{toggle:"toggle"},ngContentSelectors:Rc,decls:4,vars:7,consts:[["class","expansion-button",3,"direction","animationDisabled","isExpanded","toggle",4,"ngIf"],[1,"panel",3,"ngClass"],[1,"expansion-button",3,"direction","animationDisabled","isExpanded","toggle"]],template:function(t,n){t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Pc,1,3,"crt-expansion-button",0),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275projection(3),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275classMapInterpolate1("container button-placement-",n.panelConfig==null?null:n.panelConfig.direction,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.panelConfig==null?null:n.panelConfig.showToggleButton),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Vc,n.isExpanded)))},dependencies:[s.NgClass,s.NgIf,Zn],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100%}.expansion-button[_ngcontent-%COMP%]{position:absolute;z-index:3}.button-placement-left[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{right:calc(100% + 10px)}.button-placement-right[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{left:100%}.panel[_ngcontent-%COMP%]{display:none}.panel.show[_ngcontent-%COMP%]{display:flex;height:100%}"],changeDetection:0});var jc=p(22784);const zc=["*"];class Qn{constructor(t,n){this._almThemeService=t,this._materialIconsRegistrator=n;const o=[{name:"ellipse-logo",icon:p(8341)},{name:"rectangle-logo",icon:p(78254)},{name:"polygon-logo",icon:p(33517)},{name:"header-logo",icon:p(64478)}];this._materialIconsRegistrator.addIcons(o)}_getTheme(){return this._almThemeService.getCurrentThemeName()}ngOnInit(){this.themeName||this._getTheme().subscribe(t=>this.themeName=t)}}Qn.\u0275fac=function(t){return new(t||Qn)(e.\u0275\u0275directiveInject(jc.AlmThemeService),e.\u0275\u0275directiveInject(I.MaterialIconsRegistrator))},Qn.\u0275cmp=e.\u0275\u0275defineComponent({type:Qn,selectors:[["ts-alm-pages-container"]],inputs:{themeName:"themeName"},ngContentSelectors:zc,decls:17,vars:2,consts:[[1,"pages-wrapper"],[1,"header"],["svgIcon","header-logo",1,"header-logo-icon"],["svgIcon","ellipse-logo",1,"ellipse-logo-icon"],["svgIcon","rectangle-logo",1,"rectangle-logo-icon"],["svgIcon","polygon-logo",1,"polygon-logo-icon"],[1,"page-wrap"],[1,"footer"],[1,"slogan"]],template:function(t,n){t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"mat-icon",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"mat-icon",3)(4,"mat-icon",4)(5,"mat-icon",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275element(7,"router-outlet"),e.\u0275\u0275projection(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",7)(10,"div",8)(11,"span"),e.\u0275\u0275text(12,"One Platform"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14,"Freedom"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"span"),e.\u0275\u0275text(16,"Genuine Care"),e.\u0275\u0275elementEnd()()()()),t&2&&e.\u0275\u0275classMap(n.themeName)},dependencies:[we.RouterOutlet,v.MatIcon],styles:[".pages-wrapper[_ngcontent-%COMP%]{min-width:100vw;min-height:100vh}.pages-wrapper[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 52px)}.pages-wrapper[_ngcontent-%COMP%]   .ellipse-logo-icon[_ngcontent-%COMP%]{width:537px;height:537px;position:fixed;left:37vw;bottom:-100px;overflow:hidden}.pages-wrapper[_ngcontent-%COMP%]   .rectangle-logo-icon[_ngcontent-%COMP%]{width:127px;height:127px;position:fixed;bottom:-25px;right:10vh;overflow:hidden}.pages-wrapper[_ngcontent-%COMP%]   .polygon-logo-icon[_ngcontent-%COMP%]{width:74px;height:85px;position:absolute;left:4vw;bottom:3vh}.pages-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{z-index:10}.pages-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-logo-icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:9px;width:115px;height:25px}.pages-wrapper[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;z-index:10;height:52px}.pages-wrapper[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .slogan[_ngcontent-%COMP%]{position:absolute;bottom:18px;left:20px}.pages-wrapper[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .slogan[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:50px}"]});const Bc=[];class Yn{}Yn.\u0275fac=function(t){return new(t||Yn)},Yn.\u0275mod=e.\u0275\u0275defineNgModule({type:Yn}),Yn.\u0275inj=e.\u0275\u0275defineInjector({imports:[we.RouterModule.forChild(Bc),b.TranslateModule,v.MatIconModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Yn,{declarations:[Qn],imports:[we.RouterModule,b.TranslateModule,v.MatIconModule],exports:[Qn]})}();class qe{constructor(t){this._rightsService=t}transform(t,n){return t?this._rightsService.getCanExecuteOperation(n).pipe((0,u.map)(o=>t&&o)):(0,C.of)(!1)}}qe.\u0275fac=function(t){return new(t||qe)(e.\u0275\u0275directiveInject(fe.RightsService,16))},qe.\u0275pipe=e.\u0275\u0275definePipe({name:"checkOperationPermission",type:qe,pure:!0}),qe.\u0275prov=e.\u0275\u0275defineInjectable({token:qe,factory:qe.\u0275fac,providedIn:"root"});class $n{}$n.\u0275fac=function(t){return new(t||$n)},$n.\u0275mod=e.\u0275\u0275defineNgModule({type:$n}),$n.\u0275inj=e.\u0275\u0275defineInjector({}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope($n,{declarations:[qe],exports:[qe]})}();var so;(function(a){a.Completed="a1b0184b-0a54-4a47-ba08-a5772105d3b2"})(so||(so={}));var Po;(function(a){a[a.Inactive=0]="Inactive",a[a.Active=1]="Active",a[a.ChatsExceeded=2]="ChatsExceeded"})(Po||(Po={}));class hi{}class Uc{get chatQueueId(){return this._chatQueueId}set chatQueueId(t){this._chatQueueId=t}}var Ha;(function(a){a[a.Incoming=1]="Incoming",a[a.Outcoming=2]="Outcoming"})(Ha||(Ha={}));var Jn;(function(a){a[a.Text=0]="Text",a[a.File=1]="File",a[a.Image=2]="Image",a[a.System=5]="System"})(Jn||(Jn={}));class Hc{}class Gc{}class Zc{}class Wc{}class Qc{}var Ke;(function(a){a.FacebookMessenger="50491c6c-d82b-4b86-b38c-99262d11a5ac",a.Telegram="645170ab-c67a-4dcc-9def-c0e5236bdfe0",a.WhatsApp="1398dc73-b428-4e21-b97a-c1bb6b4bc621"})(Ke||(Ke={}));class fi{get type(){switch(this.typeId){case Ke.FacebookMessenger:return Ke.FacebookMessenger;case Ke.Telegram:return Ke.Telegram;default:throw new Error(`Type with id ${this.typeId} not found`)}}}class Vo{get photo(){return this._photo||((0,l.isEmptyGuid)(this.photoId)?"":(0,m.getImageFullUrlById)(this.photoId))}set photo(t){this._photo=t}constructor(t,n,o){this.id=t,this.name=n,this.photoId=o}}function Yc(a,t){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"img",3),e.\u0275\u0275elementContainerEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("src",n.contact==null?null:n.contact.photo,e.\u0275\u0275sanitizeUrl)}}function $c(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background",n.contactColor),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.getInitials())}}const Jc=["*"];class Vt{constructor(){this.contactClick=new e.EventEmitter}getInitials(){return this.contact&&this.contact.name?this.contact.name.replace(/\s+/g," ").trim().split(" ",2).map(function(n){return n.substr(0,1).toUpperCase()}).join(""):""}contactClicked(){return this.contactClick.emit({contactId:this.contact.id}),!1}}Vt.\u0275fac=function(t){return new(t||Vt)},Vt.\u0275cmp=e.\u0275\u0275defineComponent({type:Vt,selectors:[["ts-contact-photo"]],inputs:{contact:"contact",contactColor:"contactColor"},outputs:{contactClick:"contactClick"},ngContentSelectors:Jc,decls:5,vars:2,consts:[[3,"click"],[4,"ngIf","ngIfElse"],["noPhoto",""],["alt","Contact photo",1,"contact-photo",3,"src"],[1,"contact-photo","no-photo"]],template:function(t,n){if(t&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("click",function(){return n.contactClicked()}),e.\u0275\u0275template(1,Yc,2,1,"ng-container",1),e.\u0275\u0275template(2,$c,2,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275projection(4),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.contact.photo)("ngIfElse",o)}},dependencies:[s.NgIf],styles:[".contact-photo[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px;cursor:pointer}.contact-photo.no-photo[_ngcontent-%COMP%]{text-align:center;line-height:2.2em;font-size:14px;display:inline-block;min-width:32px;min-height:32px;color:#fff}"]});class Ga{constructor(t){this.element=t}_getHash(t){let n=0;for(let o=0;o<t.length;o++)n=t.charCodeAt(o)+((n<<5)-n);return n}_getColor(t){if(!t)return this.defaultColor||"orange";const o=this._getHash(t)%180;return"hsl("+o*2+",50%,50%)"}ngOnInit(){this.element.nativeElement.style.backgroundColor=this._getColor(this.value)}}Ga.\u0275fac=function(t){return new(t||Ga)(e.\u0275\u0275directiveInject(e.ElementRef))},Ga.\u0275dir=e.\u0275\u0275defineDirective({type:Ga,selectors:[["","tsBackgroundColor",""]],inputs:{value:["tsBackgroundColor","value"],defaultColor:"defaultColor"}});class Xe{}Xe.\u0275fac=function(t){return new(t||Xe)},Xe.\u0275mod=e.\u0275\u0275defineNgModule({type:Xe}),Xe.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Xe,{declarations:[Vt,Ga],imports:[s.CommonModule],exports:[Vt]})}();class Rt{_getChatOperator(t){const n=new hi;return t.Operator&&(n.contact=this._getContact(t["Operator.Contact"]),n.displayValue=t.Operator.displayValue,n.value=t.Operator.value),n}_getContact(t){if(t)return new Vo(t.value,t.displayValue,t.primaryImageValue)}_getChannel(t){const n=t.Channel,o=t["Channel.Provider"],i={};return n&&(i.id=n.value,i.name=n.displayValue),o&&(i.provider={id:o.value,name:o.displayValue,icon:(0,m.getImageUrlById)(o.primaryImageValue)}),i.source=t["Channel.Source"],i.msgSettingsId=t["Channel.MsgSettingsId"],i}_getQueue(t){const n=t.Queue,o={};return n&&(o.id=n.value),o}_createChat(t){const n=this._getContact(t.Contact);n.account=t["Contact.Account"];const o=this._getChannel(t),i=this._getQueue(t),r=this._getChatOperator(t);return{id:t.Id,contact:n,lastMessageTime:t.ModifiedOn,status:t.Status,channel:o,chatPreview:t.ChatPreview,operator:r,unprocessedMsgCount:t.UnprocessedMsgCount,chatStartDate:t.ChatStartDate,closeDate:t.CloseDate,completionDate:t.CompletionDate,lastMessageDirection:t.LastMessageDirection,channelId:t.ChannelId,chatQueueId:t.ChatQueueId||i.id}}_getLookupValue(t,n){return Object.prototype.hasOwnProperty.call(t,n)&&t[n]?t[n].value:void 0}getEntity(t){return this._createChat(t)}getEntityColumns(t){return[new m.EntityColumn("Id",t.id,l.DataValueType.Guid),new m.EntityColumn("Contact",this._getLookupValue(t,"contact"),l.DataValueType.Lookup),new m.EntityColumn("Contact.Account",this._getLookupValue(t,"account"),l.DataValueType.Lookup),new m.EntityColumn("ModifiedOn",t.lastMessageTime,l.DataValueType.DateTime),new m.EntityColumn("Status",this._getLookupValue(t,"status"),l.DataValueType.Lookup),new m.EntityColumn("Channel",this._getLookupValue(t,"channel"),l.DataValueType.Lookup),new m.EntityColumn("Channel.Provider",this._getLookupValue(t,"channel"),l.DataValueType.Lookup),new m.EntityColumn("Channel.Source",t.channel?.source,l.DataValueType.Text),new m.EntityColumn("Channel.MsgSettingsId",t.channel?.msgSettingsId,l.DataValueType.Text),new m.EntityColumn("ChatPreview",t.chatPreview,l.DataValueType.Text),new m.EntityColumn("Operator",this._getLookupValue(t,"operator"),l.DataValueType.Lookup),new m.EntityColumn("UnprocessedMsgCount",t.unprocessedMsgCount,l.DataValueType.Integer),new m.EntityColumn("ChatStartDate",t.chatStartDate,l.DataValueType.DateTime),new m.EntityColumn("CloseDate",t.closeDate,l.DataValueType.DateTime),new m.EntityColumn("CompletionDate",t.completionDate,l.DataValueType.DateTime),new m.EntityColumn("Operator.Contact",this._getLookupValue(t,"operatorContact"),l.DataValueType.Lookup),new m.EntityColumn("Queue",this._getLookupValue(t,"queue"),l.DataValueType.Lookup)]}}Rt.\u0275fac=function(t){return new(t||Rt)},Rt.\u0275prov=e.\u0275\u0275defineInjectable({token:Rt,factory:Rt.\u0275fac});class jt{_createChatQueueOperator(t){return{id:t.Id,operator:t.Operator,chatQueue:t.ChatQueue}}getValueFromLookup(t,n){return t.hasOwnProperty(n)&&!(0,S.isEmpty)(t[n])?t[n].value:void 0}getEntity(t){return this._createChatQueueOperator(t)}getEntityColumns(t){return[new m.EntityColumn("Id",t.id,l.DataValueType.Guid),new m.EntityColumn("Operator",this.getValueFromLookup(t,"operator"),l.DataValueType.Lookup),new m.EntityColumn("ChatQueue",this.getValueFromLookup(t,"chatQueue"),l.DataValueType.Lookup)]}}jt.\u0275fac=function(t){return new(t||jt)},jt.\u0275prov=e.\u0275\u0275defineInjectable({token:jt,factory:jt.\u0275fac});class zt{_createChannel(t){const n=t.Provider,o=t.ChatQueue,i=t.Language;return{id:t.Id,name:t.Name,typeId:n.value,typeName:n.displayValue,msgSettingsId:t.MsgSettingsId,queueId:o.value,queueName:o.displayValue,source:t.Source,isActive:t.IsActive,languageId:i.value,languageName:i.displayValue}}getEntity(t){return this._createChannel(t)}getEntityColumns(t){return[new m.EntityColumn("Id",t.id,l.DataValueType.Guid),new m.EntityColumn("Name",t.name,l.DataValueType.Text),new m.EntityColumn("Provider",t.typeId,l.DataValueType.Lookup),new m.EntityColumn("MsgSettingsId",t.msgSettingsId,l.DataValueType.Guid),new m.EntityColumn("ChatQueue",t.queueId,l.DataValueType.Lookup),new m.EntityColumn("Source",t.source,l.DataValueType.Text),new m.EntityColumn("IsActive",t.isActive,l.DataValueType.Boolean),new m.EntityColumn("Language",t.languageId,l.DataValueType.Lookup)]}}zt.\u0275fac=function(t){return new(t||zt)},zt.\u0275prov=e.\u0275\u0275defineInjectable({token:zt,factory:zt.\u0275fac});class re extends Ee.BaseEntityService{static get rowsCount(){return 30}constructor(t,n,o,i,r,d){super(n,o,i),this.rightsService=t,this.httpClient=r,this.userInfo=d,this._serviceUrl="/rest/OmnichannelChatService/",this._canManageChatsOperationCode="CanManageChats",this._cacheChatActions={},this.entitySchemaName="OmniChat"}_postWithChatId(t,n){const o=this._serviceUrl+n;return this.httpClient.post(o,{chatId:t})}_getMessages(t,n){const o=this._serviceUrl+n;return this.httpClient.post(o,{chatId:t}).pipe((0,u.map)(this._mapChatMessage()))}_getAllConversationMessages(t,n,o){const i=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),r=this._serviceUrl+"GetAllConversation";return this.httpClient.post(r,{contactId:t,channelId:n,rowCount:re.rowsCount,rowOffset:o},{headers:i}).pipe((0,u.map)(this._mapChatMessage()))}_mapChatMessage(){return t=>(t.forEach(n=>{n.time=new Date(n.time),n.author=new Vo(n.author.id,n.author.name,n.author.photoId)}),t)}acceptChat(t){return this._postWithChatId(t,"AcceptChat")}getConversation(t){return this._getMessages(t,"GetConversation")}getAllConversation(t,n,o=0){return this._getAllConversationMessages(t,n,o)}markAsRead(t){const n=this._serviceUrl+"MarkChatAsRead";this.httpClient.post(n,{chatId:t}).subscribe()}getMessageTemplate(t){const n=this._serviceUrl+"GetUnifiedMessageTemplate";return this.httpClient.post(n,{chatId:t})}sendMessage(t){const n="/rest/OmnichannelOutcomeMessagingService/SendMessage",o={message:t};return this.httpClient.post(n,o)}sendMessageWithAttachments(t,n){const o="/rest/OmnichannelOutcomeMessagingService/SendMessageWithAttachments",i=new FormData;return i.append("message",JSON.stringify(t)),Array.from(n).forEach((r,d)=>{i.append("file"+d,r,r.name)}),this.httpClient.post(o,i)}completeChat(t){return this._postWithChatId(t,"CloseActiveChat")}getOperatorChats(){const t=this._serviceUrl+"GetChats";return this.httpClient.post(t,{operatorId:this.userInfo.id}).pipe((0,u.map)(n=>({success:!0,errorInfo:null,result:n.Chats.map(o=>this.entityConverter.getEntity(o))})),(0,u.catchError)(n=>this.getBaseErrorResponse(n)))}getChatHistory(t){return this._getMessages(t,"GetHistory")}getChatActions(t){if(this._cacheChatActions[t])return(0,C.of)(this._cacheChatActions[t]);const n=this._serviceUrl+"GetChatActions";return this.httpClient.post(n,{chatId:t}).pipe((0,u.tap)(o=>this._cacheChatActions[t]=o))}isOperatorCanManageChats(){return this.rightsService.getCanExecuteOperation(this._canManageChatsOperationCode).pipe((0,u.map)(t=>t))}isOperatorActive(){const t=new l.EntitySchemaQuery("OperatorSession");return t.rowCount=1,t.addSchemaColumn("OperatorState.OperatorAvailable","IsActive"),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Is_null,"SessionEndDate",null),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"SysUser",this.userInfo.id),this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(n=>n&&n[0].IsActive||!1),(0,u.catchError)(()=>(0,C.of)(!1)))}isOperatorHasActiveChannel(){const t=new l.EntitySchemaQuery("Channel");t.rowCount=1;const n=new l.FilterGroup;return n.logicalOperation=l.LogicalOperatorType.Or,n.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnit:Operator].SysAdminUnit",this.userInfo.id),n.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnitRoleId:Operator].SysAdminUnit",this.userInfo.id),t.filters.add(n),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"IsActive",!0),this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(o=>o&&o.length>0||!1),(0,u.catchError)(()=>(0,C.of)(!1)))}}re.\u0275fac=function(t){return new(t||re)(e.\u0275\u0275inject(fe.RightsService),e.\u0275\u0275inject(Ee.QueryExecutor),e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(Rt),e.\u0275\u0275inject(V.HttpClient),e.\u0275\u0275inject(m.UserInfo))},re.\u0275prov=e.\u0275\u0275defineInjectable({token:re,factory:re.\u0275fac,providedIn:"root"});class et{constructor(t,n){this.httpClient=t,this.sysSettingsService=n,this._serviceUrl="/rest/FacebookOmnichannelMessagingService/",this._settingsCodes=["IdentityServerUrl"],this._sysSettingsValues={},this.sysSettingsService.getByCodes(this._settingsCodes).subscribe(o=>{const i=o&&o.success&&o.values&&(0,S.mapValues)(o.values||{},r=>r.value);i&&(this._sysSettingsValues=i)})}getApplicationId(){return this.httpClient.get(this._serviceUrl+"GetCurrentFacebookAppId")}getApiVersion(){return"v8.0"}getIdentityServerUrl(){return this._sysSettingsValues.IdentityServerUrl}}et.\u0275fac=function(t){return new(t||et)(e.\u0275\u0275inject(V.HttpClient),e.\u0275\u0275inject(fe.SysSettingsService))},et.\u0275prov=e.\u0275\u0275defineInjectable({token:et,factory:et.\u0275fac});class qn{constructor(t,n){this._settingsService=t,this._window=n,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management",this._toSubscribeFields="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}_loadScript(t,n,o=null){const i=document.createElement("script");i.async=!0,i.src=t,i.onload=n,o||(o=document.head),o.appendChild(i)}_innerLogin(t=!1){const n={scope:this._permissions,return_scopes:!0};return t&&(n.auth_type="rerequest"),new C.Observable(o=>{FB.login(i=>{i.authResponse?o.next(!0):o.next(!1)},n)})}_getSubscribed(t,n){FB.api(`/me/subscribed_apps?access_token=${t}`,"GET",{},o=>{n(o?.data?.[0]?.subscribed_fields||[])})}isLoggedIn(){return new C.Observable(t=>{FB.getLoginStatus(n=>{n.status==="connected"?t.next(!0):t.next(!1)})})}login(){return this._innerLogin()}reLogin(){return this._innerLogin(!0)}getPages(){return new C.Observable(t=>{FB.api("me/accounts",n=>{t.next(n)})})}initialize(){return new C.Observable(t=>{this._loadScript(this._sdkUrl,()=>{this._settingsService.getApplicationId().subscribe(n=>{const o=n.replace(/\D+/g,"").trim();FB.init({appId:o,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._settingsService.getApiVersion()}),this.isInitialized=!0,t.next(!0)})})})}attachPage(t){return new C.Observable(n=>{this._getSubscribed(t,o=>{const i=(0,S.union)(o,this._toSubscribeFields.split(",")).join(",");FB.api(`/me/subscribed_apps?subscribed_fields=${i}&access_token=${t}`,"POST",{},r=>{n.next(r)})})})}isFacebookSettingValid(){return this._settingsService.getIdentityServerUrl()&&this._window.location.protocol==="https:"}}qn.\u0275fac=function(t){return new(t||qn)(e.\u0275\u0275inject(et),e.\u0275\u0275inject("Window"))},qn.\u0275prov=e.\u0275\u0275defineInjectable({token:qn,factory:qn.\u0275fac});class Bt{constructor(t,n,o){this._sysSettingsService=t,this._facebookSettingsService=n,this._window=o,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management",this._fieldsToSubscribe="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}get fbApiLibrary(){return this._window.FB||null}_initApi(t){console.log(`FB.init call for appId:${t}`),this.fbApiLibrary.init({appId:t,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._facebookSettingsService.getApiVersion()})}_getSubscribedApps(t){return new C.Observable(n=>{console.log(`FB.api call for path '/me/subscribed_apps?access_token=${t}'`),this.fbApiLibrary.api(`/me/subscribed_apps?access_token=${t}`,"GET",{},o=>{const i=o?.data?.[0]?.subscribed_fields||[];n.next(i),n.complete()})})}isFacebookSettingValid(){var t=this;return(0,O.Z)(function*(){return(yield(0,C.firstValueFrom)(t._sysSettingsService.getValueByCode("IdentityServerUrl")))&&t._window.location.protocol==="https:"})()}initApi(){return this.fbApiLibrary?(0,C.of)(!0):this.loadLibrary().pipe((0,C.concatMap)(()=>this._facebookSettingsService.getApplicationId()),(0,C.concatMap)(t=>{const n=t.replace(/\D+/g,"").trim();return this._initApi(n),(0,C.of)(!0)}))}loadLibrary(){return new C.Observable(t=>{console.log("Loading FB SDK...");const n=document.createElement("script");n.src=this._sdkUrl,n.onload=()=>{console.log("FB SDK loaded"),t.next(),t.complete()},n.onerror=o=>{t.error(o)},document.body.appendChild(n)})}login(){const t={scope:this._permissions,return_scopes:!0,auth_type:"rerequest"};return new C.Observable(n=>{console.log("FB.login call"),this.fbApiLibrary.login(o=>{o.authResponse&&(n.next(),n.complete())},t)})}getPages(){return new C.Observable(t=>{console.log("FB.api call for path 'me/accounts'"),this.fbApiLibrary.api("me/accounts",n=>{const o=[];n.data.forEach(i=>{o.push({id:i.id,name:i.name,token:i.access_token})}),t.next(o),t.complete()})})}subscribeApps(t,n){return new C.Observable(o=>{console.log(`FB.api call for path '/me/subscribed_apps?subscribed_fields=${n}&access_token=${t}'`),this.fbApiLibrary.api(`/me/subscribed_apps?subscribed_fields=${n}&access_token=${t}`,"POST",{},i=>{o.next(Boolean(i)),o.complete()})})}attachPage(t){return this._getSubscribedApps(t).pipe((0,C.concatMap)(n=>{const o=(0,S.union)(n,this._fieldsToSubscribe.split(",")).join(",");return this.subscribeApps(t,o)}))}}Bt.\u0275fac=function(t){return new(t||Bt)(e.\u0275\u0275inject(fe.SysSettingsService),e.\u0275\u0275inject(et),e.\u0275\u0275inject("Window"))},Bt.\u0275prov=e.\u0275\u0275defineInjectable({token:Bt,factory:Bt.\u0275fac});class Ut{constructor(t){this.httpClient=t,this._serviceUrl="/rest/TelegramOmnichannelMessagingService/"}registerTelegramChannel(t){const n=this._serviceUrl+"RegisterChannel";return this.httpClient.post(n,{token:t})}validateRegisterChannel(t){if(t.IsTokenValid){if(t.IsTokenExist)return"ChatSettings.ChannelPage.Telegram.TelegramTokenAlreadyExists"}else return"ChatSettings.ChannelPage.Telegram.InvalidTelegramToken";return""}getTelegramUserName(t){const n=this._serviceUrl+"GetUserName";return this.httpClient.post(n,{settingsId:t})}removeTelegramChannel(t){const n=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),o=this._serviceUrl+"RemoveChannel";return this.httpClient.post(o,{telegramId:t},{headers:n})}}Ut.\u0275fac=function(t){return new(t||Ut)(e.\u0275\u0275inject(V.HttpClient))},Ut.\u0275prov=e.\u0275\u0275defineInjectable({token:Ut,factory:Ut.\u0275fac,providedIn:"root"});class Kn{constructor(t){this.httpClient=t,this._serviceUrl="/rest/FacebookOmnichannelMessagingService/"}registerFacebookChannel(t,n){const o=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),i=this._serviceUrl+"Register";return this.httpClient.post(i,{token:t,source:n},{headers:o})}removeFacebookChannel(t){const n=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),o=this._serviceUrl+"RemoveChannel";return this.httpClient.post(o,{facebookId:t},{headers:n})}}Kn.\u0275fac=function(t){return new(t||Kn)(e.\u0275\u0275inject(V.HttpClient))},Kn.\u0275prov=e.\u0275\u0275defineInjectable({token:Kn,factory:Kn.\u0275fac,providedIn:"root"});class Xn{wrapPhoneNumber(t){return`+${t}`}getRequestData(t,n,o,i){return{token:t,appId:n,integrationPhoneNumber:this.wrapPhoneNumber(o),channelPhoneNumber:this.wrapPhoneNumber(i)}}constructor(t){this.httpClient=t,this._serviceUrl="/rest/WhatsAppOmnichannelMessagingService/"}tryConnect(t,n,o,i){const r=this._serviceUrl+"Validate";return this.httpClient.post(r,this.getRequestData(t,n,o,i))}register(t,n,o,i){const r=this._serviceUrl+"RegisterChannel";return this.httpClient.post(r,this.getRequestData(t,n,o,i))}validateRegisterChannel(t){let n="";if(!t?.IsConnectionSuccess&&t?.errorInfo?.errorCode){const o=t.errorInfo.errorCode;["InvalidAppSidException","InvalidAccountPhoneNumberException","AuthenticateException"].indexOf(o)>-1?n=`ChatSettings.ChannelPage.WhatsApp.ErrorMessages.${o}`:n=t.errorInfo.message}return n}removeWhatsAppChannel(t){const n=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),o=this._serviceUrl+"RemoveChannel";return this.httpClient.post(o,{whatsAppId:t},{headers:n})}}Xn.\u0275fac=function(t){return new(t||Xn)(e.\u0275\u0275inject(V.HttpClient))},Xn.\u0275prov=e.\u0275\u0275defineInjectable({token:Xn,factory:Xn.\u0275fac,providedIn:"root"});class ea extends Ee.BaseEntityService{constructor(t,n,o){super(t,n,o),this.entitySchemaName="ChatQueueOperator"}mapSysAdminUnit(t){return{id:t.Id,name:t.Name,parentRoleId:t.ParentRole&&t.ParentRole.value,sysAdminUnitTypeValue:t.SysAdminUnitTypeValue}}addSysAdminUnitQueryFilters(t){const n=new l.FilterGroup;n.logicalOperation=l.LogicalOperatorType.Or,n.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_equal,"SysAdminUnitTypeValue",4),n.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Active",1),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ConnectionType",0),t.filters.add(n)}getSysAdminUnitQuery(){const t=new l.EntitySchemaQuery("SysAdminUnit");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name"),t.addSchemaColumn("ParentRole"),t.addSchemaColumn("SysAdminUnitTypeValue"),t.addSchemaColumn("ConnectionType"),t.addSchemaColumn("Active"),this.addSysAdminUnitQueryFilters(t),t}getItemsByChatQueueId(t){const n=this.createGetAllItemsEsq();return n.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue",t),this.queryExecutor.executeSelectQuery(n).pipe((0,u.map)(o=>({success:!0,errorInfo:null,result:o.map(i=>this.entityConverter.getEntity(i))})),(0,u.catchError)(o=>this.getBaseErrorResponse(o)))}getSysAdminUnitList(){const t=this.getSysAdminUnitQuery();return this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(n=>({success:!0,errorInfo:null,sysAdminUnits:n.map(o=>this.mapSysAdminUnit(o))})))}}ea.\u0275fac=function(t){return new(t||ea)(e.\u0275\u0275inject(Ee.QueryExecutor),e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(jt))},ea.\u0275prov=e.\u0275\u0275defineInjectable({token:ea,factory:ea.\u0275fac});class tt extends Ee.BaseEntityService{constructor(t,n,o){super(t,n,o),this.entitySchemaName="Channel"}_createNewChannel(t){const n=new fi;return n.id=(0,l.generateGuid)(),n.typeId=t,n}getLookupValues(t){const n=new l.EntitySchemaQuery(t);return n.addSchemaColumn("Id"),n.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),this.queryExecutor.executeSelectQuery(n).pipe((0,u.map)(o=>o.map(i=>({value:i.Id,displayValue:i.Name}))))}getChannelTypeItems(){const t=new l.EntitySchemaQuery("ChannelProvider");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),t.addSchemaColumn("PageUrl"),this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(n=>n.map(o=>({value:o.Id,displayValue:o.Name,pageUrl:o.PageUrl}))))}getChannelQueueItems(){const t=new l.EntitySchemaQuery("ChatQueue");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),t.addSchemaColumn("[ChatQueueOperator:ChatQueue].Id","Operator"),this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(n=>{const o=n.filter(r=>Boolean(r.Operator));return o.filter((r,d)=>o.findIndex(f=>f.Id===r.Id)===d).map(r=>({value:r.Id,displayValue:r.Name}))}))}getActiveLanguages(){const t=new l.EntitySchemaQuery("SysLanguage");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"IsUsed",1),this.queryExecutor.executeSelectQuery(t).pipe((0,u.map)(n=>n.map(o=>({value:o.Id,displayValue:o.Name}))))}generateNewChannelResponse(t){return{success:!0,result:[this._createNewChannel(t)]}}checkCanSaveChannel(t,n){const o=new l.EntitySchemaQuery("Channel");o.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Source",t),this.queryExecutor.executeSelectQuery(o).subscribe(i=>{n(!(i&&i[0]))})}}tt.\u0275fac=function(t){return new(t||tt)(e.\u0275\u0275inject(Ee.QueryExecutor),e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(zt))},tt.\u0275prov=e.\u0275\u0275defineInjectable({token:tt,factory:tt.\u0275fac});function qc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",2)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.firstMessageDate)}}function Kc(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",10)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.separatorText)}}const Xc=function(){return{}};function ed(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"label",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ts-contact-photo",13),e.\u0275\u0275listener("contactClick",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openContact(i.author.id))}),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("hidden",!o.isContactChanged(n)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.isBotMessage?o.bot.name:n.author.name," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("contact",n.isBotMessage?e.\u0275\u0275pureFunction0(4,Xc):n.author)("contactColor",n.direction===1?o.contactColor:"#40bf62")}}function td(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.formatSystemMessage(n))}}const Ci=function(a,t){return{"first-in-sequence":a,"last-in-sequence":t}};function nd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",15)(1,"span",16),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",17),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Ci,o.isFirstMessageInSequence(n),o.isLastMessageInSequence(n))),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.text),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.getLocalTime(n.time))}}const ad=function(a,t){return{width:a,height:t}};function od(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24)(1,"img",25),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.openImage(i))})("load",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.onChatImgLoaded(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span",26),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction2(3,ad,i.imageContainerSize.width+"px",i.imageContainerSize.height+"px"))("src",i.getImageUrl(n.fileId),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.getLocalTime(o.time))}}function id(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",27)(1,"span",28)(2,"a",29),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"span",17),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,Ci,i.isFirstMessageInSequence(o),i.isLastMessageInSequence(o))),e.\u0275\u0275advance(2),e.\u0275\u0275property("href",i.getFileUrl(n.fileId),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.fileName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.getLocalTime(o.time))}}function rd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,od,4,6,"div",22),e.\u0275\u0275template(2,id,6,7,"div",23),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngSwitch",n.fileType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",o.messageType.Image)}}function ld(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",30)(1,"span",16),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",17),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),a&2){const n=e.\u0275\u0275nextContext(2).$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.text),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.getLocalTime(n.time))}}function sd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275template(1,rd,3,2,"div",19),e.\u0275\u0275template(2,ld,5,2,"div",20),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.attachments),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.showMessageFromAttachment(n))}}const cd=function(a){return{"bot-message":a}},dd=function(a){return{display:a}};function pd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275text(1),e.\u0275\u0275template(2,Kc,3,1,"div",4),e.\u0275\u0275template(3,ed,4,5,"div",5),e.\u0275\u0275elementStart(4,"div",6),e.\u0275\u0275template(5,td,3,1,"div",7),e.\u0275\u0275template(6,nd,5,6,"div",8),e.\u0275\u0275template(7,sd,3,2,"div",9),e.\u0275\u0275elementEnd()()),a&2){const n=t.$implicit,o=t.index,i=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(i.getDirectionName(n.direction)+"-message"),e.\u0275\u0275propertyInterpolate1("id","message_",n.id,""),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,cd,n.isBotMessage))("ngStyle",e.\u0275\u0275pureFunction1(13,dd,i.getIsDuplicateMessage(n.id)?"none":"")),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.cachePreviousMessage(o)," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isShowSeparator(n,o)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isSystemMessage(n)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",n.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",i.messageType.System),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",i.messageType.Text)}}class Ie{constructor(t,n,o,i,r){this._userInfo=t,this._translateService=n,this.injector=o,this._contactColorService=i,this.featureService=r,this._omnichannelMessageFileSchema={name:"OmnichannelMessageFile",uid:"E6B4C4D4-0A51-4A6D-A8C5-18B63FADDAD4"},this._isFileApiEnabled=!1,this._fileServiceUrl=`rest/FileService/GetFile/${this._omnichannelMessageFileSchema.uid}/`,this._imageUrl=`img/entity/hash/${this._omnichannelMessageFileSchema.name}/Data/`,this._duplicateIds=[],this.messagesCounter=0,this.contactClick=new e.EventEmitter,this.messageType=Jn,this.bot={name:this._translateService.instant("ChatSettings.ChatWindow.Bots.Name")||"Bot"},this.imageContainerSize={width:200,height:120},this.lastSystemMessageIndex=0,this.featureService.getFeatureState("UseFileApiInChats").pipe((0,C.shareReplay)({bufferSize:1,refCount:!1})).subscribe(d=>this._isFileApiEnabled=d)}set messages(t){this._messages=t,t&&this._findDuplicateMessagesWithoutAttachments(),this._setLastSystemMessageIndex()}get messages(){return this._messages}static _trimSlashes(t){return t.replace(/(^([/\\])+)|(([/\\])+$)/,"")}static _isLargeImage(t,n){return t.naturalWidth>=n.offsetWidth||t.naturalHeight>=n.offsetHeight}_isNewDay(t){return this._previousMessage&&this._previousMessage.time&&t.time&&this._previousMessage.time.getDay()!==t.time.getDay()}_isNewMessages(t){const n=this.messages.length-this.messagesCounter;return t===n&&n>0}_formatDate(t){return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName).format(t)}_joinPath(...t){return t.map(n=>Ie._trimSlashes(n)).join("/")}_setFirstMessageData(){if(this.messages?.length>0){const t=this.messages.find(n=>n.direction===Ha.Incoming);if(!t)return;this.firstMessageDate=this._formatDate(t.time),this.contactColor=this._contactColorService.getNextColor(t.author.id)}}_setLastSystemMessageIndex(){!this._messages||(this._messages.length<re.rowsCount?this.lastSystemMessageIndex=0:this._messages.length===re.rowsCount?this.lastSystemMessageIndex=re.rowsCount-1:this.lastSystemMessageIndex=ki().findLastIndex(this._messages,t=>t.type===Jn.System)+1)}_isAuthorChanged(t,n){return t.author.id!==n.author.id||this.isSystemMessage(n)}_findDuplicateMessagesWithoutAttachments(){const t=this.messages.reduce((o,i)=>{const{text:r,time:d}=i,f=`${r}-${d}`;return o[f]||(o[f]=[]),o[f].push(i),o},{}),n=Object.values(t).filter(o=>o.length>1);this._duplicateIds=n.flat().filter(o=>(0,S.isEmpty)(o.attachments)).map(o=>o.id)}getDirectionName(t){return Ha[t].toLowerCase()}isContactChanged(t){return this._previousMessage?this._previousMessage.author.id!==t.author.id||this._previousMessage.isBotMessage!==t.isBotMessage||this._previousMessage.type===Jn.System:!0}ngOnChanges(){this._setFirstMessageData()}cachePreviousMessage(t){this._previousMessage=t>0?this.messages[t-1]:void 0}openContact(t){return this.contactClick.emit({contactId:t}),!1}trackMessageById(t,n){return n.id}isShowSeparator(t,n){return this._isNewDay(t)?this.separatorText=this._formatDate(t.time):this.separatorText=this._isNewMessages(n)?this._translateService.instant("ChatSettings.ChatWindow.NewMessages"):"",this.separatorText!==""}openImage(t){const n=t.target,o=document.body,i=document.createElement("div");i.classList.add("full-chat-image-container"),i.style.backgroundImage="url('"+n.src+"')",i.style.backgroundSize=Ie._isLargeImage(n,o)?"contain":"auto",i.addEventListener("click",function(){o.removeChild(i)}),o.appendChild(i)}getFileUrl(t){return this._joinPath((0,m.getWorkspaceBaseUrl)(),this._fileServiceUrl,t)}getImageUrl(t){return this._isFileApiEnabled?this.getFileUrl(t):this._joinPath((0,m.getWorkspaceBaseUrl)(),this._imageUrl,t)}isFirstMessageInSequence(t){const n=this.messages.findIndex(i=>i.id===t.id);if(n===0)return!0;const o=this.messages[n-1];return this._isAuthorChanged(t,o)}isLastMessageInSequence(t){const n=this.messages.findIndex(i=>i.id===t.id);if(n===this.messages.length-1)return!0;const o=this.messages[n+1];return this._isAuthorChanged(t,o)}isSystemMessage(t){return t.type===Jn.System}onChatImgLoaded(t){const n=t.target;this.isImageOversize(n.width,n.height)&&n.parentElement.classList.add("img-contain")}isImageOversize(t,n){const o=t/n,i=this.imageContainerSize.width/this.imageContainerSize.height;return Math.max(o,i)/Math.min(o,i)<=2&&t>this.imageContainerSize.width&&n>this.imageContainerSize.height}formatSystemMessage(t){const n=new Date(t.time);(0,m.setTimeZoneOffset)(n,this._userInfo.timeZoneOffsetHours);const o=this._formatDate(n),i=(0,m.getUserCultureTimeFormat)(n,this._userInfo.cultureInfo);return t.text.replace("{datePart}",o).replace("{timePart}",i)}getLocalTime(t){const n=new Date(t);return(0,m.setTimeZoneOffset)(n,this._userInfo.timeZoneOffsetHours),(0,m.getUserCultureTimeFormat)(n,this._userInfo.cultureInfo)}showMessageFromAttachment(t){return t.text}getIsDuplicateMessage(t){return this.messages?this._duplicateIds.indexOf(t)!==-1:!1}}Ie.\u0275fac=function(t){return new(t||Ie)(e.\u0275\u0275directiveInject(m.UserInfo),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(m.ContactColorService),e.\u0275\u0275directiveInject(fe.FeatureService))},Ie.\u0275cmp=e.\u0275\u0275defineComponent({type:Ie,selectors:[["crt-chat-messages"]],inputs:{messages:"messages",messagesCounter:"messagesCounter",chat:"chat"},outputs:{contactClick:"contactClick"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","first-message-date-separator messages-separator",4,"ngIf"],["class","message",3,"class","id","ngClass","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"first-message-date-separator","messages-separator"],[1,"message",3,"id","ngClass","ngStyle"],["class","messages-separator",4,"ngIf"],["class","message-author",3,"hidden",4,"ngIf"],[1,"text-block",3,"ngSwitch"],["class","system-message-type",4,"ngSwitchCase"],["class","message-type text-message-type",3,"ngClass",4,"ngSwitchCase"],["class","attachment-message-type",4,"ngSwitchDefault"],[1,"messages-separator"],[1,"message-author",3,"hidden"],[1,"author-name"],[1,"author-photo",3,"contact","contactColor","contactClick"],[1,"system-message-type"],[1,"message-type","text-message-type",3,"ngClass"],[1,"message-text"],[1,"message-time"],[1,"attachment-message-type"],[3,"ngSwitch",4,"ngFor","ngForOf"],["class","message-type text-message-type",4,"ngIf"],[3,"ngSwitch"],["class","message-type image-message-type",4,"ngSwitchCase"],["class","message-type file-message-type",3,"ngClass",4,"ngSwitchDefault"],[1,"message-type","image-message-type"],["alt","",1,"image-container",3,"ngStyle","src","click","load"],[1,"image-time"],[1,"message-type","file-message-type",3,"ngClass"],[1,"download-file","message-text"],[1,"file-message-type-link",3,"href"],[1,"message-type","text-message-type"]],template:function(t,n){t&1&&(e.\u0275\u0275template(0,qc,3,1,"div",0),e.\u0275\u0275template(1,pd,8,15,"div",1)),t&2&&(e.\u0275\u0275property("ngIf",n.firstMessageDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.messages)("ngForTrackBy",n.trackMessageById))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgStyle,s.NgSwitch,s.NgSwitchCase,s.NgSwitchDefault,Vt],styles:[".message[_ngcontent-%COMP%]{flex-direction:column;display:flex}.message[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_fadein .5s ease 1 alternate}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}.message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-size:11px;text-align:center;letter-spacing:0;color:#999;opacity:1;vertical-align:top}.message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;cursor:pointer}.message[_ngcontent-%COMP%]   .message-author[_ngcontent-%COMP%]{margin-bottom:-13px;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{display:block;position:relative;bottom:-3px;float:right;text-align:center;font-family:Open Sans,serif;letter-spacing:0;color:#999;opacity:1;padding-top:2px;font-size:11px;margin-left:13px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:3px;display:inline-block;padding:8px 10px;margin:1px 0 1px 39px;text-align:left}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{text-align:left;font-family:Open Sans,serif;font-size:15px;letter-spacing:0;color:#444;opacity:1;white-space:pre-wrap;word-break:break-word}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-time[_ngcontent-%COMP%]{position:absolute;right:18px;bottom:18px;color:#fff;background-color:#999;font-size:11px;border-radius:12px;padding-left:5px;padding-right:5px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .message-image-item[_ngcontent-%COMP%]{position:relative}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:auto;background-position:center;object-fit:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .system-message-type[_ngcontent-%COMP%]{font-size:11px;text-align:center;color:#999;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{padding-left:22px;text-decoration:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K);background-repeat:no-repeat;background-position:2px 5px}.message.incoming-message[_ngcontent-%COMP%]{text-align:left}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:0 16px 16px 0;padding-right:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.text-message-type[_ngcontent-%COMP%]{padding-left:14px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 16px 0}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:0 16px 16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#4e7bd8}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K)}.message.incoming-message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{float:left}.message.incoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-left:7px}.message.outcoming-message[_ngcontent-%COMP%]{text-align:right}.message.outcoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-right:7px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:16px 0 0 16px;padding-left:16px;padding-right:14px;margin-right:0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:16px 0 16px 16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#e5e8ee}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0iQ29tcG9uZW50IDQ2OSDigJMgMSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBzdHlsZT0iIj48cmVjdCBpZD0iYmFja2dyb3VuZHJlY3QiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9IjAiIHk9IjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIvPgogIAogIAogIAogIAo8ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PGcgaWQ9Ikdyb3VwXzc0OTIiIGRhdGEtbmFtZT0iR3JvdXAgNzQ5MiIgY2xhc3M9IiIgc3Ryb2tlPSIjZGFkYWRhIiBzdHJva2Utb3BhY2l0eT0iMSI+CiAgICA8cGF0aCBpZD0iUGF0aF82OTQ0IiBkYXRhLW5hbWU9IlBhdGggNjk0NCIgZD0iTTMuNSw3LjUwMDAwNzgxMjQ5OTk3MyBsNSw0LjUgbDUsLTQuNSAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RhZGFkYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KICA8L2c+PGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIgeTI9IjAuNSIgeDI9IjguNSIgeDE9IjguNSIgY2xhc3M9IiIvPjxsaW5lIGRhdGEtbmFtZT0iTGluZSA3NzgiIHkxPSIxMS41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMC41IiB4Mj0iOC41IiB4MT0iOC41IiBjbGFzcz0iIiBpZD0ic3ZnXzEiLz48bGluZSBpZD0iTGluZV83NzkiIGRhdGEtbmFtZT0iTGluZSA3NzkiIHgyPSIxNC41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMTQuNDgxNzAxNzM5MTMyNDA0IiB5MT0iMTQuNDgxNzAxNzM5MTMyNDA0IiB4MT0iMi41IiBjbGFzcz0iIi8+PHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIGNsYXNzPSIiIHk9IjIuMTk3ODAyNTQzNjQwMTM2NyIgeD0iNTEuMDk4OTAzNjU2MDA1ODYiIHRyYW5zZm9ybT0icm90YXRlKC0xLjU5MTE0NTE1NzgxNDAyNTkgNTkuMDk4OTAzNjU2MDA2MDE2LDEwLjE5NzgwMjU0MzY0MDAzNCkgIi8+PC9nPjwvc3ZnPg==)}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo[_ngcontent-%COMP%]   .contact-photo.no-photo[_ngcontent-%COMP%]{font-size:12px!important}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]{display:inline-block;width:16px}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{line-height:1.6em;font-size:1em;width:16px;height:16px;min-width:16px;min-height:16px}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]{background-color:#84007e}.message.bot-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiI+PGRlZnM+PHN0eWxlPi5he2ZpbGw6dXJsKCNhKTt9LmJ7ZmlsbDpub25lO3N0cm9rZTojZmZmO308L3N0eWxlPjxyYWRpYWxHcmFkaWVudCBpZD0iYSIgY3g9Ii0wLjY2NyIgY3k9Ii0wLjY3NSIgcj0iMi40NDgiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC42NjYsIDAuNzQ2LCAtMC43NDYsIDAuNjY2LCAtMC4zMjgsIDAuMDA0KSIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAwZmZmNyIvPjxzdG9wIG9mZnNldD0iMC41OTgiIHN0b3AtY29sb3I9IiM5NTAwNjMiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM4MTg0ZmYiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTY3LjczOCAtMykiPjxwYXRoIGNsYXNzPSJhIiBkPSJNNiwwQTYsNiwwLDEsMSwwLDYsNiw2LDAsMCwxLDYsMFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2Ny43MzggMykiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTAsMEgyLjE4OGwuODcyLTIuNzY4TDQuMjUsMi45NTgsNS4yNywwSDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3MC4yMzggOC45MTQpIi8+PC9nPjwvc3ZnPg);background-size:16px 16px;cursor:default}.messages-separator[_ngcontent-%COMP%]{width:100%;text-align:center;border-bottom:1px solid #e3e6ec;line-height:.1em;margin:17px 0}.messages-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;letter-spacing:0;color:#999;opacity:1;font-family:Open Sans,serif;font-size:11px}.first-message-date-separator[_ngcontent-%COMP%]{border:none;margin-top:8px}.incoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#eaedf3;border:1px solid #e3e6ec;align-self:flex-start}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#006ce0;align-self:flex-end}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%], .outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fff}.text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:none}.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-left:0}.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-right:0}"]});function md(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"span",2),e.\u0275\u0275text(2),e.\u0275\u0275elementStart(3,"a",3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.contactClicked(i.chat.operator.contact==null?null:i.chat.operator.contact.id))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()}if(a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.getEndDateCaption(n.chat.completionDate)," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.chat.operator.contact==null?null:n.chat.operator.contact.name)}}function ud(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",1)(2,"span",2),e.\u0275\u0275text(3),e.\u0275\u0275elementStart(4,"a",3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.contactClicked(i.chat.contact.id))}),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",4)(7,"crt-chat-messages",5),e.\u0275\u0275listener("chatChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.chat=i)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,md,5,2,"div",6),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.getStartDateCaption(n.chat.chatStartDate)," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.chat.contact.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("messages",n.messages)("chat",n.chat),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isChatCompleted())}}class ta{constructor(t,n,o){this.chatService=t,this._userInfo=n,this._translateService=o,this.contactClick=new e.EventEmitter,this.messagesLoaded=new e.EventEmitter}_loadHistory(){this.chatService.getChatHistory(this.chatId).pipe((0,C.tap)(t=>{t&&(this.messages=t,this._setChatInfo())})).subscribe()}_setChatInfo(){this.chatService.getItem(this.chatId).subscribe(t=>{t.success&&(this.chat=t.result[0],this.messagesLoaded.emit())})}getStartDateCaption(t){const n=this._translateService.instant("ChatSettings.History.Captions.StartDate");return va.String.Format(n,this.formatChatDate(t))}getEndDateCaption(t){const n=this._translateService.instant("ChatSettings.History.Captions.EndDate");return va.String.Format(n,this.formatChatDate(t))}formatChatDate(t){const n={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},o=t?new Date(t):new Date;return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName,n).format(o)}ngOnInit(){(0,l.isEmptyGuid)(this.chatId)||this._loadHistory()}contactClicked(t){this.contactClick.emit({contactId:t})}isChatCompleted(){return this.chat.status.value===so.Completed}}ta.\u0275fac=function(t){return new(t||ta)(e.\u0275\u0275directiveInject(re),e.\u0275\u0275directiveInject(m.UserInfo),e.\u0275\u0275directiveInject(b.TranslateService))},ta.\u0275cmp=e.\u0275\u0275defineComponent({type:ta,selectors:[["crt-omnichannel-messaging-chat-history"]],inputs:{chatId:["chatid","chatId"]},outputs:{contactClick:"contactClick",messagesLoaded:"messagesLoaded"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"chat-status-info-container"],[1,"chat-date"],[1,"contact-name",3,"click"],[1,"chat-history-component-container"],[3,"messages","chat","chatChange"],["class","chat-status-info-container",4,"ngIf"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,ud,9,5,"div",0),t&2&&e.\u0275\u0275property("ngIf",n.chat)},dependencies:[s.NgIf,Ie],styles:[`.chat-date{color:#999;font-size:13px;font-family:Open Sans,serif}.chat-history-component-container{margin-bottom:19px}.contact-name{font-size:13px;color:#4e7bd8;cursor:pointer}.contact-name:hover{text-decoration:underline}.full-chat-image-container{top:0;width:100%;height:100%;z-index:999999999999;position:fixed;align-items:center;background-position:center;background-repeat:no-repeat;background-color:#000000b3}
`],encapsulation:2});class Ht{constructor(t){this.data=t}}Ht.\u0275fac=function(t){return new(t||Ht)(e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},Ht.\u0275cmp=e.\u0275\u0275defineComponent({type:Ht,selectors:[["ts-facebook-channel-error-dialog"]],decls:12,vars:12,consts:[["mat-dialog-content",""],[1,"message"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementStart(4,"a",2),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",3)(9,"button",4),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Message")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",e.\u0275\u0275pipeBind1(5,6,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Link.Url"),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,8,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Link.Text")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,10,"InfoDialog.OK")," "))},dependencies:[w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogContent,M.MatLegacyDialogActions,b.TranslatePipe],styles:["[mat-dialog-content][_ngcontent-%COMP%]{max-height:450px;overflow-y:auto!important}[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]{margin:27px 0 0!important}"]});let Ro=class extends l.BaseRequestHandler{constructor(t){super(),this._facebookProvider=t}handle(t){return this._facebookProvider.initialize().pipe((0,C.take)(1)).subscribe(),this.next?.handle(t)}};Ro=(0,g.__decorate)([(0,l.CrtRequestHandler)({requestType:"crt.OpenFacebookIntegrationPageRequest",type:"crt.OpenFacebookIntegrationPageHandler"}),(0,g.__metadata)("design:paramtypes",[qn])],Ro);let co=class extends l.BaseRequestHandler{constructor(t,n,o,i){super(),this._telegramService=t,this._dialogService=n,this._translateService=o,this._maskService=i}_setModelValue(t,n,o,i){const r=t.getViewModelAttributePaths(n,o)[0];t[r]=i}_setModelValues(t,n){var o=this;return(0,O.Z)(function*(){const i=yield t.getPrimaryModelName();o._setModelValue(t,i,"Name",n.ChannelName),o._setModelValue(t,i,"Source",n.TelegramId),o._setModelValue(t,i,"MsgSettingsId",n.SettingsId)})()}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context;if(Object.keys(o.validate()).length>0)return;yield n._maskService.showBodyMask();const i=yield o.TelegramToken,r=yield(0,C.firstValueFrom)(n._telegramService.registerTelegramChannel(i)),d=n._telegramService.validateRegisterChannel(r);if(yield n._maskService.hideBodyMask(),d?.length>0)n._dialogService.openInfoDialog(n._translateService.instant(d));else return yield n._setModelValues(o,r),n.next?.handle(t)})()}};co=(0,g.__decorate)([(0,l.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.TelegramChannelSaveHandler",scopes:["TelegramChannel_AddingPage"]}),(0,g.__metadata)("design:paramtypes",[Ut,I.DialogService,b.TranslateService,l.MaskService])],co);let po=class extends l.BaseRequestHandler{constructor(t,n,o,i,r){super(),this._facebookApiProvider=t,this._dialogService=n,this._channelService=o,this._facebookRegistrationService=i,this._maskService=r}_isCreateFacebookChannelRequest(t){return t.entityName==="Channel"&&this._getDefaultValue(t,"Provider")===Ke.FacebookMessenger}_getDefaultValue(t,n){return t.defaultValues.find(o=>o.attributeName===n)?.value}_getChannel(t){return{id:(0,l.generateGuid)(),name:t.name,typeId:Ke.FacebookMessenger,source:t.id,isActive:!1}}_addFacebookMessengerChannels(t){var n=this;return(0,O.Z)(function*(){if(!(yield n._facebookApiProvider.isFacebookSettingValid())){yield(0,C.firstValueFrom)(n._dialogService.open(Ht,{height:"auto",width:"400px"}));return}n.initFacebookPages().pipe((0,C.concatMap)(o=>(0,C.from)(o)),(0,u.switchMap)(o=>n._facebookApiProvider.attachPage(o.token).pipe((0,u.switchMap)(()=>{const i=n._getChannel(o);return n._maskService.showBodyMask(),n._facebookRegistrationService.registerFacebookChannel(o.token,o.id).pipe((0,u.switchMap)(r=>r?.success?(i.msgSettingsId=r.SettingsId,(0,C.from)(n._channelService.insertItem(i)).pipe((0,u.switchMap)(()=>n._reloadChannelsList(t)))):(n._dialogService.openInfoDialog(r?.errorInfo?.message||"An unknown error occurred during the operation."),C.EMPTY)))})))).subscribe(()=>{console.log("FB channel connected")},null,()=>n._maskService.hideBodyMask())})()}_reloadChannelsList(t){return(0,O.Z)(function*(){const n=t.$context,o=yield n.getPrimaryModelName(),i=yield n.getPrimaryDataSchema(),r={type:"crt.LoadDataRequest",config:{loadType:l.DataSourceLoadType.Reload},$context:n,parameters:[{type:"primaryColumnValue",value:i.primaryAttributeName}],dataSourceName:o};yield l.HandlerChainService.instance.process(r)})()}initFacebookPages(){return this._facebookApiProvider.initApi().pipe((0,C.concatMap)(()=>this._facebookApiProvider.login()),(0,C.concatMap)(()=>this._facebookApiProvider.getPages()))}handle(t){var n=this;return(0,O.Z)(function*(){if(!n._isCreateFacebookChannelRequest(t))return n.next?.handle(t);yield n._addFacebookMessengerChannels(t)})()}};po=(0,g.__decorate)([(0,l.CrtRequestHandler)({requestType:"crt.CreateRecordRequest",type:"crt.FacebookChannelCreateRecordHandler",scopes:["ChatSettingsPage"]}),(0,g.__metadata)("design:paramtypes",[Bt,I.DialogService,tt,Kn,l.MaskService])],po);let mo=class extends l.BaseRequestHandler{constructor(t,n,o,i,r){super(),this._whatsAppService=t,this._channelService=n,this._dialogService=o,this._translateService=i,this._maskService=r}_handleConnectError(t){if(t?.errorInfo?.errorCode){const n=this._whatsAppService.validateRegisterChannel(t);this._dialogService.openInfoDialog(this._translateService.instant(n))}}_getDigits(t){return t.replace(/\D+/g,"")}_setModelValue(t,n,o,i){const r=t.getViewModelAttributePaths(n,o)[0];t[r]=i}_setModelValues(t,n,o){var i=this;return(0,O.Z)(function*(){const r=yield t.getPrimaryModelName();i._setModelValue(t,r,"MsgSettingsId",n.SettingsId),i._setModelValue(t,r,"Source",o),i._setModelValue(t,r,"Name",o)})()}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context;if(Object.keys(o.validate()).length>0)return;yield n._maskService.showBodyMask();const i=yield o.TwilioToken,r=yield o.ApplicationId,d=n._getDigits(yield o.VerificationPhoneNumber),f=n._getDigits(yield o.PhoneNumber);if(yield(0,C.firstValueFrom)(n.validateIntegration(f,d,i,r))){const L=yield(0,C.firstValueFrom)(n._whatsAppService.register(i,r,d,f)),mt=n._whatsAppService.validateRegisterChannel(L);if(yield n._maskService.hideBodyMask(),mt?.length>0)n._dialogService.openInfoDialog(n._translateService.instant(mt));else return yield n._setModelValues(t.$context,L,f),n.next?.handle(t)}})()}validateIntegration(t,n,o,i){return new C.Observable(r=>{this._channelService.checkCanSaveChannel(t,d=>{d?this._whatsAppService.tryConnect(o,i,n,t).subscribe(f=>{f?.IsConnectionSuccess?r.next(!0):(this._maskService.hideBodyMask(),this._handleConnectError(f),r.next(!1)),r.complete()}):(this._maskService.hideBodyMask(),this._dialogService.openInfoDialog(this._translateService.instant("ChatSettings.ChannelPage.WhatsApp.ChannelDuplicatedErrorMessage")),r.next(!1),r.complete())})})}};mo=(0,g.__decorate)([(0,l.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.WhatsAppSaveChannelHandler",scopes:["WhatsAppChannel_AddingPage"]}),(0,g.__metadata)("design:paramtypes",[Xn,tt,I.DialogService,b.TranslateService,l.MaskService])],mo);class gd{}var jo;(function(a){a[a.Deny=0]="Deny",a[a.CanRead=1]="CanRead",a[a.CanEdit=2]="CanEdit",a[a.All=3]="All"})(jo||(jo={}));class hd{}class fd{}class Cd{}var Na;(function(a){a[a.Deny=0]="Deny",a[a.Allow=1]="Allow",a[a.AllowAndGrant=2]="AllowAndGrant"})(Na||(Na={}));class _d{constructor(){this.readRightLevel=Na.Deny,this.editRightLevel=Na.Deny,this.deleteRightLevel=Na.Deny}}class yd{}class vd{}class nt{constructor(t){this.httpClient=t,this.serviceEndpoint="ServiceModel/RightManagementService.svc/"}saveAdministratedObject(t){const n=this.serviceEndpoint+"SaveAdministratedObject";return this.httpClient.post(n,{administratedObject:t})}getAdministratedObject(t){const n=this.serviceEndpoint+"GetAdministratedObject";return this.httpClient.post(n,{schemaUId:t})}getAdministratedObjects(t){let n;switch(t){case gn.Section:n="GetSectionObjects";break;case gn.Lookup:n="GetLookupObjects";break;case gn.All:default:n="GetAllObjects";break}const o=this.serviceEndpoint+n;return this.httpClient.post(o,null)}getSysAdminUnitList(){if(!this._getSysAdminUnitList$){const t=this.serviceEndpoint+"GetSysAdminUnitList";this._getSysAdminUnitList$=this.httpClient.post(t,null).pipe((0,u.shareReplay)(1)),this._getSysAdminUnitList$.subscribe()}return this._getSysAdminUnitList$}getSysAdminUnitById(t){const n=this.serviceEndpoint+"GetSysAdminUnitById";return this.httpClient.post(n,{sysAdminUnitId:t})}}nt.\u0275fac=function(t){return new(t||nt)(e.\u0275\u0275inject(V.HttpClient))},nt.\u0275prov=e.\u0275\u0275defineInjectable({token:nt,factory:nt.\u0275fac});var uo=p(24141),Md=p(28756),at=p(44157);const bd=["treeScrollWrapper"],_i=function(a){return{selected:a}};function xd(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-tree-node",5),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onNodeClick(r))}),e.\u0275\u0275element(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,_i,o.isSelectedNode(n))),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function Sd(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-tree-node",5),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onNodeClick(r))}),e.\u0275\u0275element(1,"div",7),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,_i,o.isSelectedNode(n))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",o.treeControl.isExpanded(n)?"minus":"plus"),e.\u0275\u0275attribute("aria-label","toggle "+n.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}class yi extends Md.FlatTreeControl{expandParents(t){const n=this.getLevel(t);if(n<1)return;const o=this.dataNodes.indexOf(t)-1;for(let i=o;i>=0;i--){const r=this.dataNodes[i];if(this.getLevel(r)<n){if(this.getDescendants(r).indexOf(t)===-1)continue;if(this.expand(r),this.getLevel(r)===0)break}}}}class na{constructor(){this.selectedUnitChange=new e.EventEmitter,this.treeControl=new yi(t=>t.level,t=>t.expandable),this.treeFlattener=new at.MatTreeFlattener(this._transformNodeToFlatNode,t=>t.level,t=>t.expandable,t=>t.children),this.treeDataSource=new at.MatTreeFlatDataSource(this.treeControl,this.treeFlattener)}set dataSource(t){this._dataSource!==t&&(this._dataSource=t,this._initTreeDataSource(),this._expandToSysAdminUnit(this.selectedUnit))}set selectedUnit(t){this._selectedUnit!==t&&(this._selectedUnit=t,this._expandToSysAdminUnit(t))}get selectedUnit(){return this._selectedUnit}_createNode(t){return{id:t.id,name:t.name,children:[]}}_transformNodeToFlatNode(t,n){return{id:t.id,name:t.name,expandable:!!(t.children&&t.children.length>0),level:n}}_createTreeDataFromFlatList(t){const n=[],o=[],i=t.map((r,d)=>(o[r.id]=d,this._createNode(r)),this);return t.forEach(r=>{const d=i[o[r.id]];if((0,l.isEmptyGuid)(r.parentRoleId)||r.sysAdminUnitTypeValue===m.SysAdminUnitType.User)n.push(d);else{const f=i[o[r.parentRoleId]];if(!f)return;f.children.push(d)}}),n}_initTreeDataSource(){if(!Array.isArray(this._dataSource)){this.treeDataSource=null;return}this.treeDataSource.data=this._createTreeDataFromFlatList(this._dataSource)}_expandToSysAdminUnit(t){if(!t||!this.treeControl.dataNodes)return;const n=this.treeControl.dataNodes.find(o=>o.id===t.id);!n||(this.treeControl.expandParents(n),setTimeout(()=>this._scrollToItem(t),0))}_scrollToItem(t){const n=this._dataSource.findIndex(r=>r.id===t.id),o=this.treeScrollWrapper.nativeElement,i=o.scrollHeight/this._dataSource.length;o.scrollTop=n*i}hasChildren(t,n){return n.expandable}onNodeClick(t){const n=this._dataSource.find(o=>o.id===t.id);this._selectedUnit=n,this.selectedUnitChange.emit(n)}isSelectedNode(t){return!!(this.selectedUnit&&this.selectedUnit.id===t.id)}}na.\u0275fac=function(t){return new(t||na)},na.\u0275cmp=e.\u0275\u0275defineComponent({type:na,selectors:[["ts-sysadminunit-tree"]],viewQuery:function(t,n){if(t&1&&e.\u0275\u0275viewQuery(bd,7),t&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.treeScrollWrapper=o.first)}},inputs:{dataSource:"dataSource",selectedUnit:"selectedUnit"},outputs:{selectedUnitChange:"selectedUnitChange"},decls:5,vars:3,consts:[[1,"tree-wrapper"],["treeScrollWrapper",""],[3,"dataSource","treeControl"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click"],[1,"toggle-icon"],["matTreeNodeToggle","",1,"toggle-icon",3,"ngClass"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"mat-tree",2),e.\u0275\u0275template(3,xd,3,4,"mat-tree-node",3),e.\u0275\u0275template(4,Sd,3,6,"mat-tree-node",4),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",n.treeDataSource)("treeControl",n.treeControl),e.\u0275\u0275advance(2),e.\u0275\u0275property("matTreeNodeDefWhen",n.hasChildren))},dependencies:[s.NgClass,at.MatTreeNodeDef,at.MatTreeNodePadding,at.MatTreeNodeToggle,at.MatTree,at.MatTreeNode],styles:[".tree-wrapper[_ngcontent-%COMP%]{padding-top:15px;display:block;overflow:auto;max-height:313px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{color:#444;line-height:19px;max-height:30px;min-height:30px;white-space:nowrap}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%]{background-color:#f2f5ff}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:14px;margin-top:2px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{background:url(plus.svg) no-repeat;cursor:pointer}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{background:url(minus.svg) no-repeat;cursor:pointer}"]});function Id(a,t){a&1&&e.\u0275\u0275element(0,"ts-mask")}function wd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function Dd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-optgroup",16),e.\u0275\u0275template(1,wd,2,2,"mat-option",18),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("label",n.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.sysAdminUnits)}}function Td(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),e.\u0275\u0275listener("selectedUnitChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectedUnit=i)})("dblclick",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onTreeDoubleClick())}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dataSource",n.dataSource)("selectedUnit",n.selectedUnit)}}function kd(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),e.\u0275\u0275listener("selectedUnitChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectedUnit=i)})("dblclick",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onTreeDoubleClick())}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dataSource",n.dataSource)("selectedUnit",n.selectedUnit)}}function Ed(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),e.\u0275\u0275listener("selectedUnitChange",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectedUnit=i)})("dblclick",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onTreeDoubleClick())}),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dataSource",n.dataSource)("selectedUnit",n.selectedUnit)}}var R;(function(a){a[a.OrganizationRoles=0]="OrganizationRoles",a[a.FunctionalRoles=1]="FunctionalRoles",a[a.Users=2]="Users"})(R||(R={}));class Ap{}class aa{constructor(t,n,o,i,r){this.dialogRef=t,this.dialogService=n,this.rightManagementService=o,this.translateService=i,this.data=r,this.isLoading=!1,this.selectedTabIndex=0}_getGroupNameByTabIndex(t){let n="";switch(t){case R.OrganizationRoles:n=this.translateService.instant("SelectSysAdminUnitDialog.OrganizationalRoles");break;case R.FunctionalRoles:n=this.translateService.instant("SelectSysAdminUnitDialog.FunctionalRoles");break;case R.Users:n=this.translateService.instant("SelectSysAdminUnitDialog.Users");break}return n}_getAllEmployeesUnit(){return this.sysAdminUnits.find(t=>t.id===m.ALL_EMPLOYEES_SYSADMINUNIT_ID)}_getAllPortalUsersUnit(){return this.sysAdminUnits.find(t=>t.id===m.ALL_PORTAL_USERS_SYSADMINUNIT_ID)}_getSysAdminUnitTypesByTabIndex(t){let n=[];switch(t){case R.OrganizationRoles:n=[m.SysAdminUnitType.Organization,m.SysAdminUnitType.Division,m.SysAdminUnitType.Manager,m.SysAdminUnitType.SelfServicePortalUser];break;case R.FunctionalRoles:n=[m.SysAdminUnitType.FunctionalRole];break;case R.Users:n=[m.SysAdminUnitType.User];break}return n}_fillSysAdminUnitGroups(t){this.sysAdminUnitGroups=[],Object.keys(R).forEach(n=>{const o=Number(R[n]);if(isNaN(o))return;const i=this._getSysAdminUnitTypesByTabIndex(o),r=t.filter(d=>i.indexOf(d.sysAdminUnitTypeValue)>-1);r.length>0&&this.sysAdminUnitGroups.push({name:this._getGroupNameByTabIndex(o),tabIndex:o,sysAdminUnits:r})})}_prepareSysAdminUnits(t){if(!t||!t.success){this.isLoading=!1,t&&t.errorInfo&&this.dialogService.openInfoDialog(t.errorInfo.message);return}this.sysAdminUnits=t.sysAdminUnits,this._fillSysAdminUnitGroups(this.sysAdminUnits),this.fillContentByTab(R.OrganizationRoles),this.isLoading=!1}_applySysAdminUnit(){const t=this.data&&this.data.validator,n=t&&t(this.selectedUnit);if(n&&!n.success){this.dialogService.openInfoDialog(n.message);return}this.dialogRef.close(this.selectedUnit)}_changeTabIndexBySysAdminUnitType(t){let n=this.selectedTabIndex;switch(t){case m.SysAdminUnitType.Organization:case m.SysAdminUnitType.Division:case m.SysAdminUnitType.Manager:case m.SysAdminUnitType.SelfServicePortalUser:n=R.OrganizationRoles;break;case m.SysAdminUnitType.FunctionalRole:n=R.FunctionalRoles;break;case m.SysAdminUnitType.User:n=R.Users;break}this.selectedTabIndex=n}ngOnInit(){this.isLoading=!0,this.rightManagementService.getSysAdminUnitList().subscribe(this._prepareSysAdminUnits.bind(this))}fillContentByTab(t){if(!Array.isArray(this.sysAdminUnits)){this.dataSource=null;return}const n=this._getSysAdminUnitTypesByTabIndex(t),o=this.sysAdminUnits.filter(i=>n.indexOf(i.sysAdminUnitTypeValue)>-1);if(t===R.FunctionalRoles){o.push(this._getAllEmployeesUnit());const i=this._getAllPortalUsersUnit();i&&o.push(i)}this.dataSource=o}onTreeDoubleClick(){this.selectedUnit&&this._applySysAdminUnit()}onSelectButtonClick(){this._applySysAdminUnit()}getSysAdminUnitName(t){return t.name}onFilteredSysAdminUnitSelected(t){const n=t.option.value;this._changeTabIndexBySysAdminUnitType(n.sysAdminUnitTypeValue),this.selectedUnit=n}search(t){if(!t){this.filteredSysAdminUnitGroups$=(0,C.of)([]);return}t=t.toLocaleLowerCase();const n=(o,i)=>{const r=i.toLowerCase();return o.filter(d=>d.name.toLowerCase().indexOf(r)!==-1)};this.filteredSysAdminUnitGroups$=(0,C.of)(this.sysAdminUnitGroups.map(o=>({name:o.name,tabIndex:o.tabIndex,sysAdminUnits:n(o.sysAdminUnits,t)})).filter(o=>o.sysAdminUnits.length>0))}isOrganizationalRolesVisible(){return this.selectedTabIndex===R.OrganizationRoles}isFunctionalRolesVisible(){return this.selectedTabIndex===R.FunctionalRoles}isUsersVisible(){return this.selectedTabIndex===R.Users}}aa.\u0275fac=function(t){return new(t||aa)(e.\u0275\u0275directiveInject(M.MatLegacyDialogRef),e.\u0275\u0275directiveInject(I.DialogService),e.\u0275\u0275directiveInject(nt),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},aa.\u0275cmp=e.\u0275\u0275defineComponent({type:aa,selectors:[["ts-select-sysadminunit-dialog"]],decls:34,vars:32,consts:[[4,"ngIf"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],[1,"search-input"],["floatLabel","never"],["matInput","","type","text","spellcheck","false",3,"placeholder","matAutocomplete","input","focus"],["matSuffix","","svgIcon","search"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["mat-stretch-tabs","","animationDuration","0ms","disableRipple","true",3,"selectedIndex","selectedIndexChange"],[3,"label"],[3,"dataSource","selectedUnit","selectedUnitChange","dblclick",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","selectedUnit","selectedUnitChange","dblclick"]],template:function(t,n){if(t&1&&(e.\u0275\u0275template(0,Id,1,0,"ts-mask",0),e.\u0275\u0275elementStart(1,"div",1)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",2),e.\u0275\u0275element(6,"mat-icon",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",4)(8,"button",5),e.\u0275\u0275listener("click",function(){return n.onSelectButtonClick()}),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",6),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"input",10),e.\u0275\u0275listener("input",function(i){return n.search(i.target.value)})("focus",function(i){return n.search(i.target.value)}),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"mat-icon",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-autocomplete",12,13),e.\u0275\u0275listener("optionSelected",function(i){return n.onFilteredSysAdminUnitSelected(i)}),e.\u0275\u0275template(22,Dd,2,2,"mat-optgroup",14),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"mat-tab-group",15),e.\u0275\u0275listener("selectedIndexChange",function(i){return n.selectedTabIndex=i})("selectedIndexChange",function(i){return n.fillContentByTab(i)}),e.\u0275\u0275elementStart(25,"mat-tab",16),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275template(27,Td,1,2,"ts-sysadminunit-tree",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-tab",16),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275template(30,kd,1,2,"ts-sysadminunit-tree",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-tab",16),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275template(33,Ed,1,2,"ts-sysadminunit-tree",17),e.\u0275\u0275elementEnd()()()),t&2){const o=e.\u0275\u0275reference(21);e.\u0275\u0275property("ngIf",n.isLoading),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,16,"SelectSysAdminUnitDialog.Title")),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!n.selectedUnit),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,18,"SelectSysAdminUnitDialog.Select")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,20,"SelectSysAdminUnitDialog.Cancel")),e.\u0275\u0275advance(5),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(18,22,"SelectSysAdminUnitDialog.Search"))("matAutocomplete",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("displayWith",n.getSysAdminUnitName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(23,24,n.filteredSysAdminUnitGroups$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("selectedIndex",n.selectedTabIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(26,26,"SelectSysAdminUnitDialog.OrganizationalRoles")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isOrganizationalRolesVisible()),e.\u0275\u0275advance(1),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(29,28,"SelectSysAdminUnitDialog.FunctionalRoles")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isFunctionalRolesVisible()),e.\u0275\u0275advance(1),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(32,30,"SelectSysAdminUnitDialog.Users")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isUsersVisible())}},dependencies:[I.MaskComponent,s.NgForOf,s.NgIf,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,Te.MatLegacyOption,Te.MatLegacyOptgroup,w.MatLegacyButton,M.MatLegacyDialogClose,M.MatLegacyDialogTitle,M.MatLegacyDialogContent,M.MatLegacyDialogActions,v.MatIcon,_.MatLegacyFormField,_.MatLegacySuffix,D.MatLegacyInput,uo.MatLegacyTabGroup,uo.MatLegacyTab,na,s.AsyncPipe,b.TranslatePipe],styles:["[_nghost-%COMP%]{padding:4px 10px;min-width:580px;min-height:512px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:5px!important}.search-input[_ngcontent-%COMP%]{padding-top:12px;font-size:14px}.search-input[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%;line-height:18px!important}.search-input[_ngcontent-%COMP%]   mat-icon[svgicon=search][_ngcontent-%COMP%]{width:16px;height:16px;line-height:0;vertical-align:middle}"]});class Nd extends gt.CreateRecordRequest{}let go=class extends l.BaseRequestHandler{constructor(t,n,o){super(),this.dialogService=t,this.queryExecutor=n,this.translateService=o,this._dataSourceName="QueueAgentsListDS"}_getEntityName(t){return t.$context.dataSchemas[this._dataSourceName]?.dataSourceConfig?.config?.entitySchemaName}_getInsertQuery(t,n){var o=this;return(0,O.Z)(function*(){const i=o._getEntityName(t),r=new l.InsertQuery(i);return[{path:"Operator",value:n,type:l.DataValueType.Guid},{path:"ChatQueue",value:yield t.$context.Id,type:l.DataValueType.Guid}].forEach(f=>{r.addColumn(f.path,f.value,f.type)}),r})()}_createDuplicationsValidator(t){return n=>{const o=t.find(i=>i.attributes.QueueAgentsListDS_Operator.value===n.id);return{success:(0,S.isEmpty)(o),message:this.translateService.instant("ChatSettings.ChatQueueOperatorDetail.DuplicationMessage")}}}_saveViewModel(t){return(0,O.Z)(function*(){const{$context:n,scopes:o}=t,i={type:"crt.SaveRecordRequest",preventCardClose:!0,scopes:o,$context:n};return yield l.HandlerChainService.instance.process(i)})()}_reloadAgentDetail(t){return(0,O.Z)(function*(){const n=t.$context,o=yield n.getPrimaryModelName(),i=yield n.getPrimaryDataSchema(),r={type:"crt.LoadDataRequest",config:{loadType:l.DataSourceLoadType.Reload},$context:n,parameters:[{type:"primaryColumnValue",value:i.primaryAttributeName}],dataSourceName:o};yield l.HandlerChainService.instance.process(r)})()}handle(t){var n=this;return(0,O.Z)(function*(){if(t.$context.PrimaryModelMode===m.ModelMode.Create&&!(yield n._saveViewModel(t)))return;const i=yield t.$context.QueueAgentsList,r=yield(0,C.lastValueFrom)(n.dialogService.open(aa,{data:{validator:n._createDuplicationsValidator(i)}}));if(r?.id){const d=yield n._getInsertQuery(t,r.id),f=n.queryExecutor.executeInsertQuery(d);yield(0,C.lastValueFrom)(f),yield n._reloadAgentDetail(t)}yield n.next?.handle(t)})()}};go=(0,g.__decorate)([(0,l.CrtRequestHandler)({type:"crt.CreateQueueAgentHandler",requestType:"crt.CreateQueueAgentHandlerRequest"}),(0,g.__metadata)("design:paramtypes",[I.DialogService,Ee.QueryExecutor,b.TranslateService])],go);let ho=class extends l.BaseRequestHandler{constructor(t){super(),this.telegramService=t,this._telegramBotAttrName="TelegramBot"}_setTelegramBotLink(t,n){const o=`<a target='_blank' href='https://t.me/${t}'>${t}</a>`;n[this._telegramBotAttrName]=o}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context,i=o.getViewModelAttributePaths(yield o.getPrimaryModelName(),"MsgSettingsId")[0],r=yield o[i],d=yield o[n._telegramBotAttrName];if(r&&!d){const f=yield(0,C.lastValueFrom)(n.telegramService.getTelegramUserName(r));n._setTelegramBotLink(f,o)}yield n.next?.handle(t)})()}};ho=(0,g.__decorate)([(0,l.CrtRequestHandler)({type:"crt.TelegramChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["TelegramChannel_EditPage"]}),(0,g.__metadata)("design:paramtypes",[Ut])],ho);class La{constructor(t){this.httpClient=t,this.channelAlreadyAddedToAnotherSiteErrorCode="ChannelAlreadyAddedToAnotherSite",this._serviceUrl="/rest/AdaOmnichannelMessagingService/"}register(t,n=!1){const o=this._serviceUrl+"Register";return this.httpClient.post(o,{settings:t,isForceRegistration:n})}removeAdaConnectorChannel(t){const n=new V.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),o=this._serviceUrl+"RemoveChannel";return this.httpClient.post(o,{adaChannelId:t},{headers:n})}}La.\u0275fac=function(t){return new(t||La)(e.\u0275\u0275inject(V.HttpClient))},La.\u0275prov=e.\u0275\u0275defineInjectable({token:La,factory:La.\u0275fac,providedIn:"root"});let zo=class extends l.BaseRequestHandler{constructor(t,n,o){super(),this._adaConnectorService=t,this._dialogService=n,this._maskService=o}_getRegistrationData(t){return(0,O.Z)(function*(){const n=yield t.AppId,o=yield t.ApiKey,i=yield t.ApiSecret;return{appId:n,apiKey:o,apiSecret:i}})()}_forceRegisterChannel(t){var n=this;return(0,O.Z)(function*(){yield n._maskService.showBodyMask();const o=yield(0,C.lastValueFrom)(n._adaConnectorService.register(yield n._getRegistrationData(t.$context),!0));if(yield n._maskService.hideBodyMask(),o?.errorInfo?.errorCode)n._dialogService.openInfoDialog(o.errorInfo.message);else return yield n._setModelValues(t.$context,o),n.next?.handle(t)})()}_handleRegistrationResponse(t,n){var o=this;return(0,O.Z)(function*(){if(t?.errorInfo?.errorCode===o._adaConnectorService.channelAlreadyAddedToAnotherSiteErrorCode){if((yield(0,C.lastValueFrom)(o._dialogService.openConfirmationDialog(t.errorInfo.message)))===I.YesButton.result)return o._forceRegisterChannel(n)}else o._dialogService.openInfoDialog(t.errorInfo.message)})()}_setModelValue(t,n,o,i){const r=t.getViewModelAttributePaths(n,o)[0];t[r]=i}_setModelValues(t,n){var o=this;return(0,O.Z)(function*(){const i=yield t.getPrimaryModelName();o._setModelValue(t,i,"MsgSettingsId",n.settingsId),o._setModelValue(t,i,"Name",n.name)})()}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context;if(Object.keys(o.validate()).length>0)return;yield n._maskService.showBodyMask();const i=yield(0,C.lastValueFrom)(n._adaConnectorService.register(yield n._getRegistrationData(o)));if(yield n._maskService.hideBodyMask(),!i.success)yield n._handleRegistrationResponse(i,t);else return yield n._setModelValues(t.$context,i),n.next?.handle(t)})()}};zo=(0,g.__decorate)([(0,l.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.AdaConnectorSaveChannelHandler",scopes:["AdaConnector_AddingPage"]}),(0,g.__metadata)("design:paramtypes",[La,I.DialogService,l.MaskService])],zo);let Bo=class extends l.BaseRequestHandler{constructor(){super(...arguments),this._facebookPageLinkAttrName="FacebookLink"}_setFacebookPageLink(t,n,o){const i=`<a target='_blank' href='https://facebook.com/${n}'>${t}</a>`;o[this._facebookPageLinkAttrName]=i}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context,i=o.getViewModelAttributePaths(yield o.getPrimaryModelName(),"Source")[0],r=yield o[i];if(r){const d=o.getViewModelAttributePaths(yield o.getPrimaryModelName(),"Name")[0],f=yield o[d];n._setFacebookPageLink(f,r,o)}yield n.next?.handle(t)})()}};Bo=(0,g.__decorate)([(0,l.CrtRequestHandler)({type:"crt.FacebookChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["FBMessengerChannel_EditPage"]})],Bo);let Uo=class extends l.BaseRequestHandler{constructor(){super(...arguments),this._telegramBotAttrName="WhatsAppLink"}_setWhatsAppLink(t,n){const o=`<a target='_blank' href='https://wa.me/${t}'>${t}</a>`;n[this._telegramBotAttrName]=o}handle(t){var n=this;return(0,O.Z)(function*(){const o=t.$context,i=o.getViewModelAttributePaths(yield o.getPrimaryModelName(),"Name")[0],r=yield o[i];r&&n._setWhatsAppLink(r,o),yield n.next?.handle(t)})()}};Uo=(0,g.__decorate)([(0,l.CrtRequestHandler)({type:"crt.WhatsAppChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["WhatsAppChannel_EditPage"]})],Uo);let ot=class{};ot.\u0275fac=function(t){return new(t||ot)},ot.\u0275mod=e.\u0275\u0275defineNgModule({type:ot}),ot.\u0275inj=e.\u0275\u0275defineInjector({providers:[tt,zt,re,Rt,Bt,et,jt,m.USER_INFO_PROVIDER,{provide:nt,useClass:ea}],imports:[s.CommonModule,Xe,c.FormsModule,V.HttpClientModule,b.TranslateModule,w.MatLegacyButtonModule,M.MatLegacyDialogModule]}),ot=(0,g.__decorate)([(0,l.CrtModule)({requestHandlers:[co,mo,go,ho,po,Bo,Uo,zo]})],ot),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(ot,{declarations:[ta,Ie,Ht],imports:[s.CommonModule,Xe,c.FormsModule,V.HttpClientModule,b.TranslateModule,w.MatLegacyButtonModule,M.MatLegacyDialogModule],exports:[ta,Ie,Ht]})}();function Ld(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",o.selectDisplayValue(n)," ")}}class Aa{constructor(){this.label="",this.selectedItem=null,this.selectedItemChange=new e.EventEmitter,this.list=[],this.fieldFocus=new e.EventEmitter,this.disabled="false"}_filterList(t){t?this.filteredList=this.list.filter(n=>n.displayValue.toLowerCase().indexOf(t.toLowerCase())>=0):this.filteredList=this.list}ngOnInit(){console.warn('Component "ComboboxEditComponent" is deprecated and will removed in future versions'),this.list$&&this.list$.pipe((0,u.map)(t=>this.list=t)).subscribe()}selectDisplayValue(t){return t&&t.displayValue||""}onOptionSelected(t){const n=t.option.value;this.selectedItem=n,this.selectedItemChange.emit(n)}onFieldInput(t){this._filterList(t.target.value)}onFieldFocus(){this.filteredList=this.list,this.fieldFocus.emit()}onAutocompleteClosed(t){this.list.some(o=>o.displayValue.toLowerCase()===t.toLowerCase())||(this.selectedItem=null,this.selectedItemChange.emit(null),this._filterList(""))}}Aa.\u0275fac=function(t){return new(t||Aa)},Aa.\u0275cmp=e.\u0275\u0275defineComponent({type:Aa,selectors:[["ts-combobox-edit"]],inputs:{label:"label",selectedItem:"selectedItem",list$:"list$",disabled:"disabled"},outputs:{selectedItemChange:"selectedItemChange",fieldFocus:"fieldFocus"},decls:11,vars:6,consts:[["floatLabel","always",1,"combobox-edit"],[1,"combobox-edit-search-input"],["type","text","matInput","","spellcheck","false",3,"matAutocomplete","value","disabled","input","focus"],["input",""],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected","closed"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(t&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",1)(4,"input",2,3),e.\u0275\u0275listener("input",function(r){return n.onFieldInput(r)})("focus",function(){return n.onFieldFocus()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275element(7,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-autocomplete",6,7),e.\u0275\u0275listener("optionSelected",function(r){return n.onOptionSelected(r)})("closed",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(n.onAutocompleteClosed(r.value))}),e.\u0275\u0275template(10,Ld,2,2,"mat-option",8),e.\u0275\u0275elementEnd()()()}if(t&2){const o=e.\u0275\u0275reference(9);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.label),e.\u0275\u0275advance(2),e.\u0275\u0275property("matAutocomplete",o)("value",n.selectDisplayValue(n.selectedItem))("disabled",n.disabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("displayWith",n.selectDisplayValue),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.filteredList)}},dependencies:[s.NgForOf,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,Te.MatLegacyOption,_.MatLegacyFormField,_.MatLegacyLabel,D.MatLegacyInput],styles:[".combobox-edit[_ngcontent-%COMP%]{width:100%}.combobox-edit[_ngcontent-%COMP%]   .combobox-edit-search-input[_ngcontent-%COMP%]{width:100%;display:inline-flex;align-items:center}"]});function Ad(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",1)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"input",2),e.\u0275\u0275listener("keydown.enter",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onEnterKeyDown(i))}),e.\u0275\u0275elementEnd()()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),e.\u0275\u0275attribute("id",n.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.caption),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",n.value)("value",n.value==null?null:n.value.value)}}let le=class extends K.CrtBaseComponent{constructor(){super(...arguments),this.enterKeyDown=new e.EventEmitter}onEnterKeyDown(t){this.enterKeyDown.next(t)}};le.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(le)))(n||le)}}(),le.\u0275cmp=e.\u0275\u0275defineComponent({type:le,selectors:[["ts-input"]],inputs:{caption:"caption",value:"value"},outputs:{enterKeyDown:"enterKeyDown"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","full-width ts-input","appearance","fill",3,"ngStyle","ngClass",4,"ngIf"],["appearance","fill",1,"full-width","ts-input",3,"ngStyle","ngClass"],["matInput","","autocomplete","off",3,"formControl","value","keydown.enter"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Ad,4,6,"mat-form-field",0),t&2&&e.\u0275\u0275property("ngIf",n.value)},dependencies:[s.NgClass,s.NgIf,s.NgStyle,c.DefaultValueAccessor,c.NgControlStatus,_.MatLegacyFormField,_.MatLegacyLabel,D.MatLegacyInput,c.FormControlDirective],encapsulation:2}),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",String)],le.prototype,"caption",void 0),(0,g.__decorate)([(0,l.CrtInput)(),(0,g.__metadata)("design:type",c.FormControl)],le.prototype,"value",void 0),(0,g.__decorate)([(0,l.CrtOutput)(),(0,g.__metadata)("design:type",Object)],le.prototype,"enterKeyDown",void 0),le=(0,g.__decorate)([(0,l.CrtViewElement)({type:"crt.DeprecatedInput",formControlConfig:{relatesTo:"value"},reuseStrategy:l.ViewElementReuseStrategy.Reuse})],le);const Fd=6,Ho={[k.SizeEnum.None]:0,[k.SizeEnum.Small]:8,[k.SizeEnum.Medium]:16,[k.SizeEnum.Large]:24},vi=["default-file-icon","file-excel","file-image","file-pdf","file-powerpoint","file-word"];var Mi=p(53020);class Gt{}Gt.\u0275fac=function(t){return new(t||Gt)},Gt.\u0275mod=e.\u0275\u0275defineNgModule({type:Gt}),Gt.\u0275inj=e.\u0275\u0275defineInjector({providers:[nt],imports:[I.DialogModule,I.MaskModule,I.TooltipModule,s.CommonModule,ln.DragDropModule,c.FormsModule,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,M.MatLegacyDialogModule,ut.MatDividerModule,ce.MatExpansionModule,v.MatIconModule,D.MatLegacyInputModule,de.MatLegacyMenuModule,$.MatLegacySelectModule,Mi.MatLegacySlideToggleModule,Pe.MatSortModule,z.MatLegacyTableModule,uo.MatLegacyTabsModule,j.MatLegacyTooltipModule,at.MatTreeModule,_.MatLegacyFormFieldModule,I.SelectMenuModule,b.TranslateModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(Gt,{declarations:[aa,na],imports:[I.DialogModule,I.MaskModule,I.TooltipModule,s.CommonModule,ln.DragDropModule,c.FormsModule,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,M.MatLegacyDialogModule,ut.MatDividerModule,ce.MatExpansionModule,v.MatIconModule,D.MatLegacyInputModule,de.MatLegacyMenuModule,$.MatLegacySelectModule,Mi.MatLegacySlideToggleModule,Pe.MatSortModule,z.MatLegacyTableModule,uo.MatLegacyTabsModule,j.MatLegacyTooltipModule,at.MatTreeModule,_.MatLegacyFormFieldModule,I.SelectMenuModule,b.TranslateModule]})}();class oa{constructor(t){this._elRef=t,this.clickOutside=new e.EventEmitter}onOutsideClick(t){const n=t.target;this._elRef.nativeElement.contains(n)||this.clickOutside.emit()}}oa.\u0275fac=function(t){return new(t||oa)(e.\u0275\u0275directiveInject(e.ElementRef))},oa.\u0275dir=e.\u0275\u0275defineDirective({type:oa,selectors:[["","crtClickOutside",""]],hostBindings:function(t,n){t&1&&e.\u0275\u0275listener("click",function(i){return n.onOutsideClick(i)},!1,e.\u0275\u0275resolveDocument)},outputs:{clickOutside:"crtClickOutside"}});class ia{constructor(){this.isRequired=!1}get ariaRequired(){return this.isRequired}}ia.\u0275fac=function(t){return new(t||ia)},ia.\u0275dir=e.\u0275\u0275defineDirective({type:ia,selectors:[["","crtAriaRequired",""]],hostVars:1,hostBindings:function(t,n){t&2&&e.\u0275\u0275attribute("aria-required",n.ariaRequired)},inputs:{isRequired:["crtAriaRequired","isRequired"]}});const Od=a=>({provide:c.NG_VALIDATORS,useExisting:a,multi:!0});class Za{get errors(){return this.getErrorMessages({...this.control?.errors,...this._parentControl?.errors})}get errorMessages(){return this.errors.join(`
`)}get invalid(){return this._isControlInvalid(this.control)||this._isControlInvalid(this._parentControl)}set parentControl(t){this._parentControl=t,this._reuseFeatureEnabled&&Boolean(this.control)&&(this.control.markAsUntouched(),this.control.markAsPristine())}constructor(t,n){this.injector=n,this.control=t;const o=this.injector.get(m.FEATURE_VALUES,{},{optional:!0}),i=this.injector.get(Oe.WINDOW_TOKEN);this._reuseFeatureEnabled=(0,S.get)(i,"Terrasoft")?.isAngularHost&&o?.UseSchemaOutletReuseViewStrategy}_isControlInvalid(t){return t.invalid&&(t.dirty||t.touched)}getErrorMessages(t){return Object.values(t||{}).map(n=>n?.message).filter(Boolean)}validate(t){return this.control.errors}ngDoCheck(){if(this.control.touched&&this._parentControl){this._parentControl.markAsTouched();return}if(this._parentControl?.touched&&!this.control.touched){this.control.markAsTouched();return}this.control.touched&&!this._parentControl&&this.control.markAsUntouched()}}Za.\u0275fac=function(t){return new(t||Za)(e.\u0275\u0275directiveInject(c.FormControl),e.\u0275\u0275directiveInject(e.Injector))},Za.\u0275dir=e.\u0275\u0275defineDirective({type:Za,inputs:{parentControl:"parentControl"}});var N;(function(a){a.Input="Input",a.CheckBox="CheckBox",a.Select="Select",a.Button="Button",a.LocalizableText="LocalizableText",a.FieldsGroup="FieldsGroup",a.FormGroup="FormGroup",a.Autocomplete="Autocomplete",a.RadioButtonGroup="RadioButtonGroup",a.Custom="Custom",a.Lookup="Lookup"})(N||(N={}));const Go=new e.InjectionToken("FIELD_CONFIG");var Le;(function(a){a.General="general",a.Editability="editability",a.Appearance="appearance",a.Advanced="advanced",a.ObjectSettings="objectsettings",a.Inheritance="inheritance",a.Behavior="behavior",a.DataSource="datasource",a.AccessRights="accessRights",a.HistoryColumns="historyColumns"})(Le||(Le={}));class J{get invalid(){return this.group.get(this.field.name).invalid}get required(){return this.field.validations&&this.field.validations.some(t=>t.name==="required")}get error(){const{validations:t,asyncValidations:n}=this.field;let o="";return[t,n].some(i=>{if(i){for(const r of i)if(this.group.get(this.field.name).hasError(r.name))return o=r.message,!0}}),o}ngOnInit(){this.field.value!==void 0&&this.group.get(this.field.name)&&this.group.get(this.field.name).setValue(this.field.value)}}J.\u0275fac=function(t){return new(t||J)},J.\u0275dir=e.\u0275\u0275defineDirective({type:J});class Zt extends J{}Zt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Zt)))(n||Zt)}}(),Zt.\u0275cmp=e.\u0275\u0275defineComponent({type:Zt,selectors:[["ts-button-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"full-width","ts-button-control",3,"formGroup"],["type","submit","mat-raised-button","","color","primary"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label))},dependencies:[w.MatLegacyButton,c.NgControlStatusGroup,c.FormGroupDirective],styles:["[_nghost-%COMP%]{display:block}"]});function Pd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class Wt extends J{}Wt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Wt)))(n||Wt)}}(),Wt.\u0275cmp=e.\u0275\u0275defineComponent({type:Wt,selectors:[["ts-checkbox-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[1,"full-width","ts-checkbox-control",3,"formGroup"],["disableRipple","",3,"formControlName"],[4,"ngIf"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-checkbox",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Pd,2,1,"mat-error",2),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.field.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.invalid))},dependencies:[s.NgIf,_.MatLegacyError,P.MatLegacyCheckbox,c.NgControlStatus,c.NgControlStatusGroup,c.FormGroupDirective,c.FormControlName],styles:[`:host{display:block}.ts-checkbox-control .mat-checkbox{display:block}
`],encapsulation:2});function Vd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class Qt extends J{}Qt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Qt)))(n||Qt)}}(),Qt.\u0275cmp=e.\u0275\u0275defineComponent({type:Qt,selectors:[["ts-input-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:5,consts:[["floatLabel","always",1,"full-width","ts-input-control",3,"formGroup"],["matInput","","autocomplete","off",3,"formControlName","required"],[4,"ngIf"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",1),e.\u0275\u0275template(4,Vd,2,1,"mat-error",2),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.field.name)("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.invalid))},dependencies:[s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,D.MatLegacyInput,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName],styles:["[_nghost-%COMP%]{display:block}"]});function Rd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementContainer(1,4),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("data-item-marker",o.field.name+" "+o.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("field",n)("group",o.nestedGroup)}}class it extends J{get nestedGroup(){return this.group.get(this.field.name)}}it.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(it)))(n||it)}}(),it.\u0275cmp=e.\u0275\u0275defineComponent({type:it,selectors:[["ts-form-group-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[3,"formGroup"],[1,"column-editor-cell-group",3,"formGroupName"],[1,"form-group"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,Rd,2,3,"div",3),e.\u0275\u0275elementEnd()()()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",n.field.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.field.nestedItems))},styles:["[_nghost-%COMP%]{display:block}"]});function jd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class Yt extends J{}Yt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Yt)))(n||Yt)}}(),Yt.\u0275cmp=e.\u0275\u0275defineComponent({type:Yt,selectors:[["ts-localizable-text-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:6,consts:[["floatLabel","always",1,"full-width","ts-localizable-text-control",3,"formGroup"],[3,"formControlName","label","required"],[4,"ngIf"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"ts-localizable-text-input",1),e.\u0275\u0275template(4,jd,2,1,"mat-error",2),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.field.name)("label",n.field.label)("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.invalid))},dependencies:[s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,ye],styles:["[_nghost-%COMP%]{display:block}"]});class Wa{}function zd(a,t){a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),a&2&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"columnEmpty")," "))}const Bd=function(a){return[a]};function Ud(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"stringFormat"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,e.\u0275\u0275pipeBind1(3,4,n.codeError.message),e.\u0275\u0275pureFunction1(6,Bd,n.codeError.parameter))," ")}}function Hd(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1)(1,"div",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",3)(4,"mat-label"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"ts-localizable-text-input",4),e.\u0275\u0275template(8,zd,3,3,"mat-error",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",6)(10,"mat-label"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"input",7),e.\u0275\u0275template(14,Ud,4,8,"mat-error",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",8)(16,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.dialogRef.close())}),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSaveClick())}),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()()()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",n.lookupForm),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.lookupForm),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,11,"captionLabel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("label",n.captionLabel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.caption==null?null:n.caption.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.lookupForm),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,13,"nameLabel")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.name==null?null:n.name.invalid),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(18,15,"cancelButton")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,17,"saveButton")," ")}}class ra{constructor(t,n,o){this.translateService=t,this.dialogRef=n,this.data=o}setLookupFormDefaultValues(){this.name.setValue(this.data.schemaNamePrefix)}get caption(){return this.lookupForm.get("caption")}get name(){return this.lookupForm.get("name")}get codeError(){const t=this.name.errors,n={message:"",parameter:null};switch(!0){case!(0,S.isUndefined)(t.required):n.message="columnEmpty";break;case!(0,S.isUndefined)(t.requiredWithPrefix):n.message="wrongColumnNameWithPrefix",n.parameter=t.requiredWithPrefix.prefix;break;case!(0,S.isUndefined)(t.pattern):n.message="wrongColumnName";break;case!(0,S.isUndefined)(t.duplicate):n.message="duplicateColumnName";break;case!(0,S.isUndefined)(t.maxlength):n.message="wrongCaptionLength",n.parameter=t.maxlength.requiredLength;break;case!(0,S.isUndefined)(t.prefix):n.message="wrongPrefix",n.parameter=t.prefix.requiredPrefix}return n}ngOnInit(){this.captionLabel=this.translateService.instant("captionLabel"),this.lookupForm=this.data.group,this.title=this.data.title,this.name.value===null&&this.setLookupFormDefaultValues()}onSaveClick(){this.lookupForm.valid?this.dialogRef.close(!0):(this.lookupForm.updateValueAndValidity(),this.lookupForm.markAllAsTouched())}}ra.\u0275fac=function(t){return new(t||ra)(e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(M.MatLegacyDialogRef),e.\u0275\u0275directiveInject(M.MAT_LEGACY_DIALOG_DATA))},ra.\u0275cmp=e.\u0275\u0275defineComponent({type:ra,selectors:[["ts-lookup-form"]],decls:1,vars:1,consts:[["class","lookup-dialog-form",3,"formGroup",4,"ngIf"],[1,"lookup-dialog-form",3,"formGroup"],["mat-dialog-title",""],["data-item-marker","new-lookup-caption","floatLabel","always",1,"full-width","ts-localizable-text-control",3,"formGroup"],["formControlName","caption","required","",3,"label"],[4,"ngIf"],["data-item-marker","new-lookup-name","floatLabel","always",1,"full-width","ts-input-control",3,"formGroup"],["matInput","","formControlName","name","autocomplete","off","required",""],["mat-dialog-actions",""],["mat-button","","data-item-marker","new-lookup-cancel",3,"click"],["mat-flat-button","","color","primary","data-item-marker","new-lookup-save",3,"click"]],template:function(t,n){t&1&&e.\u0275\u0275template(0,Hd,22,19,"form",0),t&2&&e.\u0275\u0275property("ngIf",n.lookupForm)},dependencies:[s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,D.MatLegacyInput,w.MatLegacyButton,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,ye,M.MatLegacyDialogTitle,M.MatLegacyDialogActions,b.TranslatePipe,m.StringFormatPipe],styles:["[_nghost-%COMP%]{display:block;margin:0;min-width:440px}[_nghost-%COMP%]   .lookup-dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .lookup-dialog-form[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{padding:0;margin-bottom:0;min-height:32px;margin-top:24px;justify-content:flex-end}"]});function Gd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function Zd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class rt extends J{get _filterValue$(){return this.group.get(this.field.name).valueChanges.pipe((0,u.startWith)(""),(0,u.map)(n=>typeof n=="string"?n.toLowerCase():n.name.toLowerCase()))}filterByContains(t,n){return t.filter(o=>o?.name?.toLowerCase()?.indexOf(n)>=0)}sortByLengthAsc(t){return t.sort((n,o)=>n?.name?.length>o?.name?.length?1:-1)}sortByStartWithAsc(t,n){return t.sort((o,i)=>o?.name?.toLowerCase()?.startsWith(n)&&i?.name?.toLowerCase()?.startsWith(n)?0:o?.name?.toLowerCase()?.startsWith(n)?-1:0)}updateValue(t){const n=this.group.get(this.field.name),o=n.value;if(o?.value){const i=t.find(r=>(0,S.isEqual)(r.value,o.value));i&&!(0,S.isEqual)(o,i)&&n.setValue(i)}}getOptions(){return(this.field.options instanceof Array?(0,C.of)(this.field.options):this.field.options).pipe((0,u.tap)(this.updateValue.bind(this)))}initOptions(){this.options=(0,C.combineLatest)([this._filterValue$,this.getOptions()]).pipe((0,u.map)(([t,n])=>({filterValue:t,options:t?this.filterByContains(n,t):n})),(0,u.map)(({filterValue:t,options:n})=>({filterValue:t,options:t?this.sortByLengthAsc(n):n})),(0,u.map)(({filterValue:t,options:n})=>this.sortByStartWithAsc(n,t)))}ngOnInit(){super.ngOnInit(),this.initOptions()}displayFn(t){return t?.name||""}}rt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(rt)))(n||rt)}}(),rt.\u0275cmp=e.\u0275\u0275defineComponent({type:rt,selectors:[["ts-autocomplete-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:[["floatLabel","always",1,"full-width","ts-autocomplete-control",3,"formGroup"],[1,"input-wrapper"],["type","text","matInput","",3,"formControlName","matAutocomplete","required"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[4,"ngIf"],[3,"value"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275element(4,"input",2),e.\u0275\u0275elementStart(5,"mat-autocomplete",3,4),e.\u0275\u0275template(7,Gd,2,2,"mat-option",5),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",6),e.\u0275\u0275element(10,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Zd,2,1,"mat-error",8),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(6);e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",n.field.name)("matAutocomplete",o)("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("displayWith",n.displayFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,8,n.options)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.invalid)}},dependencies:[s.NgForOf,s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,_.MatLegacySuffix,D.MatLegacyInput,Te.MatLegacyOption,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,s.AsyncPipe],styles:[`.ts-autocomplete-control{display:flex;align-items:center;justify-content:space-between}.ts-autocomplete-control .mat-form-field-infix{display:flex;align-items:center}.ts-autocomplete-control .mat-form-field-wrapper{width:100%}.ts-autocomplete-control .input-wrapper{flex-grow:1}
`],encapsulation:2});function Wd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function Qd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function Yd(a,t){if(a&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openLookupDialog(i))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"mat-icon",13),e.\u0275\u0275elementEnd()}if(a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("matTooltip",e.\u0275\u0275pipeBind1(1,2,n.allowEdit?"editLookupTooltipCaption":"createLookupTooltipCaption")),e.\u0275\u0275advance(2),e.\u0275\u0275property("svgIcon",n.lookupDialogIcon)}}class la extends rt{constructor(t,n,o,i,r){super(),this.lookupService=o,this.dialogService=i,this.translateService=r,this.editedItems={},t.addSvgIconLiteral("create-lookup-icon",n.bypassSecurityTrustHtml(p(77578))),t.addSvgIconLiteral("edit-lookup-icon",n.bypassSecurityTrustHtml(p(50312)))}get allowEdit(){return this.control.value?.allowEdit||this.control.value?.isNewLookup}get lookupDialogIcon(){return this.allowEdit?"edit-lookup-icon":"create-lookup-icon"}get control(){return this.group.get(this.field.name)}setLookupControl(t){const n=this.lookupForm.get("caption"),o=this.lookupForm.get("name"),i=n.value.getValue(this.translateService.currentLang),r=this.control.value?.value;this.control.patchValue({name:i,value:t?o.value:r,isNewLookup:t||this.control.value?.isNewLookup,newLookupCaption:n.value,newLookupName:o.value,allowEdit:!0}),this.editedItems[t?o.value:r]=this.control.value,this.control.updateValueAndValidity(),this.initOptions()}openDialog(t){this.dialogService.open(ra,{data:{group:this.lookupForm,title:this.translateService.instant(t?"newLookupCaption":"editLookupCaption"),schemaNamePrefix:this.field.validationConfig.schemaNamePrefix},panelClass:"lookup-detail-dialog",scrollStrategy:new Va.NoopScrollStrategy}).pipe((0,u.take)(1)).subscribe(n=>{n&&this.setLookupControl(t)})}openEditLookupDialog(){const{newLookupCaption:t,newLookupName:n}=this.control.value;(t||n?(0,C.of)({caption:t,name:n}):this.lookupService.getLookupInfo(this.control.value.value)).subscribe(({caption:o,name:i})=>{const r=this.lookupService.getLookupNameList().pipe((0,u.map)(d=>d.filter(f=>f!==i)));this.lookupForm=this.createLookupForm(r),this.lookupForm.patchValue({caption:new m.LocalizableStringArray(o),name:i}),this.openDialog(!1)})}openCreateLookupDialog(){const t=this.lookupService.getLookupNameList();this.lookupForm=this.createLookupForm(t),this.openDialog(!0)}getOptions(){return super.getOptions().pipe((0,u.map)(t=>{for(const n of t)this.editedItems[n.value]&&Object.assign(n,this.editedItems[n.value]);return t}))}createLookupForm(t){const n=this.field.validationConfig;return new c.FormGroup({caption:new c.UntypedFormControl(null,{validators:[ao.required(this.translateService.currentLang)]}),name:new c.UntypedFormControl(null,{validators:[c.Validators.required,m.CustomValidators.requiredWithPrefix(n.schemaNamePrefix),c.Validators.pattern(/^[a-zA-Z_]{1}[a-zA-Z0-9_]*$/),c.Validators.maxLength(n.maxColumnNameLength),m.CustomValidators.prefix(n.schemaNamePrefix)],asyncValidators:[m.CustomValidators.duplicateAsync(t)]})},{updateOn:"change"})}openLookupDialog(t){t.preventDefault(),this.allowEdit?this.openEditLookupDialog():this.openCreateLookupDialog()}}la.\u0275fac=function(t){return new(t||la)(e.\u0275\u0275directiveInject(v.MatIconRegistry),e.\u0275\u0275directiveInject(pe.DomSanitizer),e.\u0275\u0275directiveInject(Wa),e.\u0275\u0275directiveInject(I.DialogService),e.\u0275\u0275directiveInject(b.TranslateService))},la.\u0275cmp=e.\u0275\u0275defineComponent({type:la,selectors:[["ts-lookup-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:11,consts:[[1,"full-width","ts-lookup-control"],["floatLabel","always",3,"formGroup"],[1,"input-wrapper"],["type","text","matInput","",3,"formControlName","matAutocomplete","required"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[4,"ngIf"],["class","show-lookup-dialog","mat-icon-button","","data-item-marker","show-lookup-dialog",3,"matTooltip","click",4,"ngIf"],[3,"value"],["mat-icon-button","","data-item-marker","show-lookup-dialog",1,"show-lookup-dialog",3,"matTooltip","click"],[1,"lookup-form-icon",3,"svgIcon"]],template:function(t,n){if(t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementStart(6,"mat-autocomplete",4,5),e.\u0275\u0275template(8,Wd,2,2,"mat-option",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275element(11,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Qd,2,1,"mat-error",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Yd,3,4,"button",10),e.\u0275\u0275elementEnd()),t&2){const o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",n.field.name)("matAutocomplete",o)("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("displayWith",n.displayFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,9,n.options)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.field.isSupportCreatingMode)}},dependencies:[s.NgForOf,s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,_.MatLegacySuffix,D.MatLegacyInput,Te.MatLegacyOption,w.MatLegacyButton,A.MatLegacyAutocomplete,A.MatLegacyAutocompleteTrigger,v.MatIcon,j.MatLegacyTooltip,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,s.AsyncPipe,b.TranslatePipe],styles:[`.ts-lookup-control{display:flex;align-items:center;justify-content:space-between}.ts-lookup-control .mat-form-field-infix{display:flex;align-items:center}.ts-lookup-control .input-wrapper{flex-grow:1}.ts-lookup-control .mat-icon-button.show-lookup-dialog{display:flex;align-items:center;justify-content:center;height:32px;width:32px;min-width:32px;padding:0;border-radius:0;position:relative;bottom:4px}.ts-lookup-control .mat-icon-button.show-lookup-dialog:hover{background-color:#f2f5ff}.ts-lookup-control .mat-icon-button.show-lookup-dialog[disabled]{opacity:.6}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper{line-height:16px}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper .mat-icon{height:16px;width:16px;line-height:16px}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper .mat-icon svg{position:relative;bottom:1px}
`],encapsulation:2});function $d(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-option",4),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function Jd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class $t extends J{get options$(){return this.field.options instanceof Array?(0,C.of)(this.field.options):this.field.options}}$t.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory($t)))(n||$t)}}(),$t.\u0275cmp=e.\u0275\u0275defineComponent({type:$t,selectors:[["ts-select-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:[["floatLabel","always",1,"full-width","ts-select-control",3,"formGroup"],["disableRipple","","disableOptionCentering","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",1),e.\u0275\u0275template(4,$d,2,2,"mat-option",2),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Jd,2,1,"mat-error",3),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.field.name)("required",n.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(5,6,n.options$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.invalid))},dependencies:[s.NgForOf,s.NgIf,_.MatLegacyError,_.MatLegacyFormField,_.MatLegacyLabel,$.MatLegacySelect,Te.MatLegacyOption,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,s.AsyncPipe],styles:["[_nghost-%COMP%]{display:block}"]});function qd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementContainer(1,3),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("data-item-marker",n.name+" "+n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("field",n)("group",o.group)}}class lt extends J{}lt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(lt)))(n||lt)}}(),lt.\u0275cmp=e.\u0275\u0275defineComponent({type:lt,selectors:[["ts-fields-group-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[[1,"full-width","ts-fields-group-control",3,"formGroup"],[3,"expanded"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e.\u0275\u0275element(5,"div"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,qd,2,3,"div",2),e.\u0275\u0275elementEnd()()()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(3),e.\u0275\u0275classMap("expansion-panel-icon expansion-panel-icon-"+n.field.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.field.label," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.field.children))},styles:["[_nghost-%COMP%]{display:block}"]});function Kd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-radio-button",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",n.value)("checked",n.checked)("disabled",o.field.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function Xd(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}class Jt extends J{ngOnInit(){super.ngOnInit(),this.options=this.field.options.map(t=>({name:t.name,value:t.value,checked:t.value===this.field.value}))}}Jt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Jt)))(n||Jt)}}(),Jt.\u0275cmp=e.\u0275\u0275defineComponent({type:Jt,selectors:[["ts-radio-button-group"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:[[1,"full-width","ts-radio-button-group",3,"formGroup"],["id","radio-group-label"],[1,"ts-radio-group",3,"formControlName"],["disableRipple","","class","ts-radio-button",3,"value","checked","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],["disableRipple","",1,"ts-radio-button",3,"value","checked","disabled"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-radio-group",2),e.\u0275\u0275template(4,Kd,2,4,"mat-radio-button",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Xd,2,1,"mat-error",4),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.field.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",n.field.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.options),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.invalid))},dependencies:[s.NgForOf,s.NgIf,_.MatLegacyError,ke.MatLegacyRadioGroup,ke.MatLegacyRadioButton,c.NgControlStatus,c.NgControlStatusGroup,c.FormGroupDirective,c.FormControlName],styles:[".ts-radio-button-group   [_nghost-%COMP%]{display:block}.ts-radio-button-group[_ngcontent-%COMP%]   .ts-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});function ep(a,t){a&1&&e.\u0275\u0275elementContainer(0)}class sa extends J{constructor(t){super(),this.injector=t}ngOnInit(){this.customComponentInjector=e.Injector.create({providers:[{provide:Go,useValue:this.field},{provide:c.FormGroup,useValue:this.group}],parent:this.injector})}}sa.\u0275fac=function(t){return new(t||sa)(e.\u0275\u0275directiveInject(e.Injector))},sa.\u0275cmp=e.\u0275\u0275defineComponent({type:sa,selectors:[["ts-custom-template-control"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[1,"full-width","ts-custom-template",3,"formGroup"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,ep,1,0,"ng-container",1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngComponentOutlet",n.field.component)("ngComponentOutletInjector",n.customComponentInjector))},dependencies:[s.NgComponentOutlet,c.NgControlStatusGroup,c.FormGroupDirective],styles:["[_nghost-%COMP%]{display:block}"]});class Qa{constructor(t,n){this.group=t,this.field=n}}Qa.\u0275fac=function(t){return new(t||Qa)(e.\u0275\u0275directiveInject(c.FormGroup),e.\u0275\u0275directiveInject(Go))},Qa.\u0275dir=e.\u0275\u0275defineDirective({type:Qa});class st{constructor(){this.controlRegistry=new Map}getControlsConfig(){return{[N.Button]:Zt,[N.CheckBox]:Wt,[N.Input]:Qt,[N.FormGroup]:it,[N.Select]:$t,[N.LocalizableText]:Yt,[N.FieldsGroup]:lt,[N.Autocomplete]:rt,[N.RadioButtonGroup]:Jt,[N.Custom]:sa,[N.Lookup]:la}}registerDynamicControlComponent(t,n){this.controlRegistry.set(t,n)}unregisterDynamicControlComponent(t){this.controlRegistry.delete(t)}getDynamicControlComponent(t){return this.controlRegistry.get(t)}}st.\u0275fac=function(t){return new(t||st)},st.\u0275prov=e.\u0275\u0275defineInjectable({token:st,factory:st.\u0275fac});class se{static _createControlConfig(t,n){return t.type=n,t}static findFieldByName(t,n){let o=null;return t.forEach(i=>{o||(i.name===n?o=i:i.type===N.FieldsGroup&&(o=this.findFieldByName(i.children,n)))}),o}static addField(t,n,o){o===void 0&&(o=t.length),t.splice(o,0,n)}static addFieldToGroup(t,n,o,i){const r=this.findFieldByName(t,n);!r||r.type!==N.FieldsGroup||this.addField(r.children,o,i)}static createCheckBoxFieldConfig(t){return this._createControlConfig(t,N.CheckBox)}static createInputFieldConfig(t){return this._createControlConfig(t,N.Input)}static createAutocompleteFieldConfig(t){return this._createControlConfig(t,N.Autocomplete)}static createSelectFieldConfig(t){return this._createControlConfig(t,N.Select)}static createLocalizableTextFieldConfig(t){return this._createControlConfig(t,N.LocalizableText)}}class bi{static acceptableOptionsValidator(t){return n=>{const o=n.value;return(t instanceof Array?(0,C.of)(t):t).pipe((0,u.map)(i=>{if((0,S.isEmpty)(o))return!0;const r=typeof o=="string"?o.toLowerCase():o.name.toLowerCase();return i.some(d=>d?.name?.toLowerCase()===r||d?.value===o?.value)}),(0,u.first)(),(0,u.map)(i=>i?null:{acceptableOptions:{value:name}}))}}}class qt{constructor(t,n){this.container=t,this.dynamicFieldsService=n}ngOnInit(){this.components=this.dynamicFieldsService.getControlsConfig(),this.components[this.field.type]&&(this.componentRef=this.container.createComponent(this.components[this.field.type]),this.componentRef.instance.field=this.field,this.componentRef.instance.group=this.group,this.dynamicFieldsService.registerDynamicControlComponent(this.field.name,this.componentRef.instance))}ngOnDestroy(){this.componentRef?.destroy(),this.dynamicFieldsService.unregisterDynamicControlComponent(this.field.name)}}qt.\u0275fac=function(t){return new(t||qt)(e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(st))},qt.\u0275dir=e.\u0275\u0275defineDirective({type:qt,selectors:[["","tsDynamicField",""]],inputs:{field:"field",group:"group"}});function tp(a,t){if(a&1&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementContainer(1,2),e.\u0275\u0275elementEnd()),a&2){const n=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("data-item-marker",n.name+" "+n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("field",n)("group",o.form)}}class Kt{get value(){return this.form.value}get invalid(){return this.form.invalid}constructor(t,n){this.formBuilder=t,this.dynamicFieldsService=n,this.fields=[],this.submit=new e.EventEmitter}set updateOn(t){(!this.form||this.form.updateOn!==t)&&(this.form=this.createForm(t))}createForm(t="change"){const n=this.formBuilder.group({},{updateOn:t});return this.fields.forEach(o=>{const i=o.children;i?i.forEach(r=>this.setFormControl(n,r)):this.setFormControl(n,o)}),n}setFormControl(t,n){n.type===N.FormGroup?this.setFormGroup(t,n):this.setFormField(t,n)}setFormGroup(t,n){const o=this.formBuilder.group({});n.nestedItems.forEach(i=>{const r={value:n.value,disabled:i.disabled},d=this.formBuilder.control(r,this.bindValidations(n.validations||[]));o.addControl(i.name,d)}),t.addControl(n.name,o)}setFormField(t,n){if(n.type===N.Button||n.type===N.FieldsGroup)return;const o=this.formBuilder.control(n.value,this.bindValidations(n.validations||[]),this.bindAsyncValidations(n.asyncValidations||[]));n.disabled===!0&&o.disable(),t.addControl(n.name,o)}bindValidations(t){if(t.length>0){const n=this.getValidList(t);return c.Validators.compose(n)}return null}bindAsyncValidations(t){if(t.length>0){const n=this.getValidList(t);return c.Validators.composeAsync(n)}return null}getValidList(t){const n=[];return t.forEach(o=>{n.push(o.validator)}),n}validateAllFormFields(t){Object.keys(t.controls).forEach(n=>{t.get(n).markAsTouched({onlySelf:!0})})}ngOnInit(){this.form||(this.form=this.createForm())}onSubmit(t){t.preventDefault(),t.stopPropagation(),this.form.valid?this.submit.emit(this.form.value):this.validateAllFormFields(this.form)}addFieldValidation(t,n){const o=se.findFieldByName(this.fields,t);!o||(o.validations||(o.validations=[]),o.validations.push(n),this.form.get(t).setValidators(this.bindValidations(o.validations||[])))}setFieldValidations(t,n=[]){const o=se.findFieldByName(this.fields,t);o.validations=n,this.form.get(t).setValidators(this.bindValidations(o.validations))}findControlComponent(t){return this.dynamicFieldsService.getDynamicControlComponent(t)}}Kt.\u0275fac=function(t){return new(t||Kt)(e.\u0275\u0275directiveInject(c.FormBuilder),e.\u0275\u0275directiveInject(st))},Kt.\u0275cmp=e.\u0275\u0275defineComponent({type:Kt,selectors:[["ts-dynamic-form"]],inputs:{updateOn:"updateOn",fields:"fields"},outputs:{submit:"submit"},decls:2,vars:2,consts:[[1,"dynamic-form",3,"formGroup","submit"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(t,n){t&1&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("submit",function(i){return n.onSubmit(i)}),e.\u0275\u0275template(1,tp,2,3,"div",1),e.\u0275\u0275elementEnd()),t&2&&(e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.fields))},dependencies:[s.NgForOf,c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,qt],styles:[`.dynamic-form .mat-expansion-panel-body{display:grid;grid-column-gap:32px;grid-template-columns:repeat(auto-fill,minmax(318px,1fr));max-width:768px;width:100%}@media all and (-ms-high-contrast: none){.dynamic-form .mat-expansion-panel-body{display:flex;flex-direction:column}}.dynamic-form .full-width{width:100%}.dynamic-form .mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}
`],encapsulation:2});class ct{}ct.\u0275fac=function(t){return new(t||ct)},ct.\u0275mod=e.\u0275\u0275defineNgModule({type:ct}),ct.\u0275inj=e.\u0275\u0275defineInjector({imports:[D.MatLegacyInputModule,$.MatLegacySelectModule,P.MatLegacyCheckboxModule,w.MatLegacyButtonModule,_.MatLegacyFormFieldModule,ce.MatExpansionModule,A.MatLegacyAutocompleteModule,v.MatIconModule,ke.MatLegacyRadioModule,j.MatLegacyTooltipModule,D.MatLegacyInputModule,$.MatLegacySelectModule,P.MatLegacyCheckboxModule,w.MatLegacyButtonModule,_.MatLegacyFormFieldModule,ce.MatExpansionModule,A.MatLegacyAutocompleteModule,v.MatIconModule,ke.MatLegacyRadioModule,j.MatLegacyTooltipModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(ct,{imports:[D.MatLegacyInputModule,$.MatLegacySelectModule,P.MatLegacyCheckboxModule,w.MatLegacyButtonModule,_.MatLegacyFormFieldModule,ce.MatExpansionModule,A.MatLegacyAutocompleteModule,v.MatIconModule,ke.MatLegacyRadioModule,j.MatLegacyTooltipModule],exports:[D.MatLegacyInputModule,$.MatLegacySelectModule,P.MatLegacyCheckboxModule,w.MatLegacyButtonModule,_.MatLegacyFormFieldModule,ce.MatExpansionModule,A.MatLegacyAutocompleteModule,v.MatIconModule,ke.MatLegacyRadioModule,j.MatLegacyTooltipModule]})}();class ue{}ue.\u0275fac=function(t){return new(t||ue)},ue.\u0275mod=e.\u0275\u0275defineNgModule({type:ue}),ue.\u0275inj=e.\u0275\u0275defineInjector({providers:[st],imports:[s.CommonModule,ct,c.ReactiveFormsModule,c.FormsModule,be,M.MatLegacyDialogModule,b.TranslateModule.forChild()]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(ue,{declarations:[Kt,qt,Qt,it,$t,Wt,Zt,Yt,lt,rt,Jt,sa,la,ra,m.StringFormatPipe],imports:[s.CommonModule,ct,c.ReactiveFormsModule,c.FormsModule,be,M.MatLegacyDialogModule,b.TranslateModule],exports:[Kt]})}(),e.\u0275\u0275setComponentScope(it,function(){return[s.NgForOf,c.NgControlStatusGroup,c.FormGroupDirective,c.FormGroupName,qt]},[]),e.\u0275\u0275setComponentScope(lt,function(){return[s.NgForOf,ce.MatAccordion,ce.MatExpansionPanel,ce.MatExpansionPanelHeader,ce.MatExpansionPanelTitle,c.NgControlStatusGroup,c.FormGroupDirective,qt]},[]);class Zo{static prefixValidator(t,n){return n?()=>null:m.CustomValidators.prefix(t)}static lookupPrimaryDisplayColumn(t){return n=>(0,S.isEmpty)(n.value)||!n.value.value||n.value.isNewLookup?(0,C.of)(null):t.checkLookupPrimaryDisplayColumn(n.value).pipe((0,u.map)(o=>o?null:{primaryDisplayColumn:{value:n.value}}))}}class q{constructor(t,n){this.container=t,this.translateService=n,this.destroyed$=new C.Subject,this.formCreated=new e.EventEmitter,this.valueChanged=new e.EventEmitter}get formComponent(){return this.componentRef.instance}onConfigLoaded(t){for(const o of Object.keys(t)){const i=this.formComponent.form.get(o);i&&(this.getField(o).type===N.LocalizableText&&(t[o]=new m.LocalizableStringArray(t[o])),i.setValue(t[o]),i.updateValueAndValidity())}const{validationConfig:n}=t;this.setAdditionalValidators(n,t)}setAdditionalValidators(t,n){t.maxColumnCaptionLength&&this.formComponent.addFieldValidation("caption",{message:(0,m.format)(this.translateService.instant("wrongCaptionLength"),[t.maxColumnCaptionLength]),name:"maxlength",validator:ao.maxLength(this.translateService.currentLang,t.maxColumnCaptionLength)}),n.allowEmptyCaption||this.formComponent.addFieldValidation("caption",{message:this.translateService.instant("columnEmpty"),name:"required",validator:ao.required(this.translateService.currentLang)}),t.maxColumnNameLength&&this.formComponent.addFieldValidation("name",{message:(0,m.format)(this.translateService.instant("wrongCaptionLength"),[t.maxColumnNameLength]),name:"maxlength",validator:c.Validators.maxLength(t.maxColumnNameLength)}),this.formComponent.addFieldValidation("name",{message:(0,m.format)(this.translateService.instant("wrongPrefix"),[t.schemaNamePrefix]),name:"prefix",validator:Zo.prefixValidator(t.schemaNamePrefix,t.isInherited)}),this.formComponent.addFieldValidation("name",{message:(0,m.format)(this.translateService.instant("duplicateColumnName"),[]),name:"duplicate",validator:m.CustomValidators.duplicate(t.schemaColumnsNames)})}ngOnInit(){this.componentRef=this.container.createComponent(Kt),this.componentRef.instance.fields=this.fields,this.componentRef.instance.updateOn="change",this.onConfigLoaded(this.model),this.formCreated.emit(this.formComponent),this.formComponent.form.valueChanges.pipe((0,u.takeUntil)(this.destroyed$)).subscribe(t=>{this.valueChanged.next(t)})}getField(t){return se.findFieldByName(this.fields,t)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}q.\u0275fac=function(t){return new(t||q)(e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(b.TranslateService))},q.\u0275dir=e.\u0275\u0275defineDirective({type:q,selectors:[["","tsMetaItemPropertiesPage",""]],inputs:{fields:"fields",model:"model"},outputs:{formCreated:"formCreated",valueChanged:"valueChanged"}});class Ae{constructor(t){this.translateService=t,this.destroyed$=new C.Subject,this.valueChanged=new e.EventEmitter}setAllControlDisableState(){this.model.isDisabled&&this.formComponent.form.disable()}onFormCreated(t){this.formComponent=t,this.formComponent.form.valueChanges.pipe((0,u.takeUntil)(this.destroyed$)).subscribe(n=>{this.valueChanged.next(n)}),this.setAllControlDisableState()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}checkValidity(){const t=this.formComponent.form;return t.valid?!0:(t.updateValueAndValidity(),t.markAllAsTouched(),!1)}}Ae.\u0275fac=function(t){return new(t||Ae)(e.\u0275\u0275directiveInject(b.TranslateService))},Ae.\u0275cmp=e.\u0275\u0275defineComponent({type:Ae,selectors:[["ts-meta-item-properties-page"]],inputs:{model:"model",fields:"fields"},outputs:{valueChanged:"valueChanged"},decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class Fe extends Ae{constructor(t,n){super(n),this.snackBar=t,this._subscriptions=new C.Subscription,this._messageDuration=1e4}_showChangeTypeMessage(){const t=this.formComponent.form.get("name"),n=(0,m.format)(this.translateService.instant("changeTypeMessage"),[t.value]),o=this.translateService.instant("undoButtonCaption");return this.snackBar.open(n,o,{duration:this._messageDuration,panelClass:"change-type-message"})}_showPageDateValueTypeMessage(){return this.snackBar.open(this.translateService.instant("pageDataValueTypeTypeMessage"),null,{duration:this._messageDuration,panelClass:"page-data-value-type-message"})}_setDataValueType(t){const n=this.formComponent.form.get("dataValueType");n.setValue(t),n.updateValueAndValidity({emitEvent:!1})}_onDataValueTypeValueChanges(t,n,o){if(this._needShowNotice(t,n,o))this._showChangeTypeMessage().afterDismissed().pipe((0,u.first)(),(0,u.filter)(r=>r.dismissedByAction)).subscribe(()=>{setTimeout(()=>this._setDataValueType(t),0)});else{this.snackBar.dismiss();const i=se.findFieldByName(this.formComponent.fields,"dataValueType");this.fillAllowedDataValueType(n,i),this._changeDataValueTypeDependedProperties(n)}}_changeDataValueTypeDependedProperties(t){if(!m.DataValueTypeGroup.Text.includes(t))return;const o=this.formComponent.form.get("defValue");let i=o?.value??{};(t===l.DataValueType.PHONE_TEXT||t===l.DataValueType.RICH_TEXT)&&(i={valueSourceType:l.DefaultValueSource.None,value:null,valueSource:null},o.setValue(i)),this._updateIsMultiLineControlSettings(i,t),this._updateIsMaskedControlSettings(i,t),this._updateIsFormatValidatedControlSettings(i,t),this._updateIsLocalizableTextControlSettings(i,t),this._updateIsValueCloneableControlSettings(i)}_updateIsMultiLineControlSettings(t,n){const o=this.formComponent.form.get("isMultiLineText");!o||([l.DataValueType.PHONE_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.WEB_TEXT].includes(n)?this._changeControlSettings(o,!1,!1):n===l.DataValueType.RICH_TEXT?this._changeControlSettings(o,!0,!1):t.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(o,!1,!1):o.enable())}_updateIsMaskedControlSettings(t,n){const o=this.formComponent.form.get("isMasked");!o||(n===l.DataValueType.PHONE_TEXT?o.enable():n===l.DataValueType.RICH_TEXT?this._changeControlSettings(o,!1,!1):t.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(o,!1,!1):this._changeControlSettings(o,!1,!1))}_updateIsFormatValidatedControlSettings(t,n){const o=this.formComponent.form.get("isFormatValidated");!o||(n===l.DataValueType.EMAIL_TEXT?o.enable():this._changeControlSettings(o,!1,!1))}_updateIsLocalizableTextControlSettings(t,n){const o=this.formComponent.form.get("isLocalizableText");!o||([l.DataValueType.PHONE_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.WEB_TEXT].includes(n)?this._changeControlSettings(o,!1,!1):n===l.DataValueType.RICH_TEXT?o.enable():t.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(o,!1,!1):o.enable())}_updateIsValueCloneableControlSettings(t){const n=this.formComponent.form.get("isValueCloneable");!n||(t.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(n,!1,!1):n.enable())}_updateDefaultValueDependedProperties(t){const o=this.formComponent.form.get("dataValueType").value;!m.DataValueTypeGroup.Text.includes(o)||(this._updateIsMultiLineControlSettings(t,o),this._updateIsMaskedControlSettings(t,o),this._updateIsLocalizableTextControlSettings(t,o),this._updateIsValueCloneableControlSettings(t))}_changeControlSettings(t,n,o){t.setValue(n),o?t.enable():t.disable()}_needShowNotice(t,n,o){return o.checkTypeConversion&&o.dataValueType!==n&&m.ChangeColumnTypeRules.isPrecisionLost(t,n)}fillAllowedDataValueType(t,n){n.value=t,n.options=m.ChangeColumnTypeRules.getAllowedChangeTypes(t).map(o=>({name:this.translateService.instant(m.DataValueTypeItems[o.type].translateKey),value:o.type})),n.options.unshift({name:this.translateService.instant(m.DataValueTypeItems[t].translateKey),value:m.DataValueTypeItems[t].type})}ngOnInit(){const t={name:"dataValueType",type:N.Select,label:this.translateService.instant("columnFormat")};se.addFieldToGroup(this.fields,Le.General,t,2),this.fillAllowedDataValueType(this.model.dataValueType,t)}ngAfterViewInit(){this.model.needShowPageDataValueTypeMessage&&this._showPageDateValueTypeMessage()}onFormCreated(t){super.onFormCreated(t);const n=t.form.get("dataValueType"),o=this.model.initialDataValueType||this.model.dataValueType;this._subscriptions.add(n.valueChanges.subscribe(r=>this._onDataValueTypeValueChanges(o,r,this.model)));const i=t.form.get("defValue");i&&(this._updateDefaultValueDependedProperties(i.value),this._subscriptions.add(i.valueChanges.subscribe(r=>this._updateDefaultValueDependedProperties(r))))}ngOnDestroy(){this.snackBar.dismiss(),this._subscriptions.unsubscribe()}}Fe.\u0275fac=function(t){return new(t||Fe)(e.\u0275\u0275directiveInject(qa.MatLegacySnackBar),e.\u0275\u0275directiveInject(b.TranslateService))},Fe.\u0275cmp=e.\u0275\u0275defineComponent({type:Fe,selectors:[["ts-meta-item-with-data-value-type-properties-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class Xt extends Fe{ngOnInit(){super.ngOnInit();const t=se.findFieldByName(this.fields,"dataValueType");t.label=this.translateService.instant("columnTextFormat"),this.model.dataValueType!==l.DataValueType.PHONE_TEXT&&this.model.dataValueType!==l.DataValueType.WEB_TEXT&&this.model.dataValueType!==l.DataValueType.EMAIL_TEXT&&this.model.dataValueType!==l.DataValueType.RICH_TEXT&&se.addFieldToGroup(this.fields,Le.Appearance,{name:"isMultilineText",value:this.model.isMultilineText,type:N.CheckBox,label:this.translateService.instant("isMultilineTextLabel")})}}Xt.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(Xt)))(n||Xt)}}(),Xt.\u0275cmp=e.\u0275\u0275defineComponent({type:Xt,selectors:[["ts-text-meta-item-properties-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class en extends Fe{ngOnInit(){super.ngOnInit();const t=se.findFieldByName(this.fields,"dataValueType");t.label=this.translateService.instant("columnNumberFormat")}}en.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(en)))(n||en)}}(),en.\u0275cmp=e.\u0275\u0275defineComponent({type:en,selectors:[["ts-number-meta-item-properties-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class tn extends Fe{}tn.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(tn)))(n||tn)}}(),tn.\u0275cmp=e.\u0275\u0275defineComponent({type:tn,selectors:[["ts-date-time-meta-item-properties-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class nn extends Ae{}nn.\u0275fac=function(){let a;return function(n){return(a||(a=e.\u0275\u0275getInheritedFactory(nn)))(n||nn)}}(),nn.\u0275cmp=e.\u0275\u0275defineComponent({type:nn,selectors:[["ts-boolean-meta-item-properties-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class xi{static acceptableOptionsValidator(t){return n=>n.value&&n.value.isNewLookup?(0,C.of)(null):bi.acceptableOptionsValidator(t)(n)}}class ca extends Ae{constructor(t,n){super(t),this.translateService=t,this.lookupService=n,this._isCascadeDisabled=!1,this.lookupControlValidations=[{name:"required",validator:c.Validators.required,message:this.translateService.instant("selectValueCaption")}]}setLookupControlDisabledState(){this.model.canChangeReferenceSchema||this.formComponent.form.get(this.lookupControlName).disable()}get referenceSchemaList(){return this.lookupService.getLookupList()}get lookupControlName(){return"lookup"}addDataSourceFieldsGroup(){se.addField(this.fields,{name:Le.DataSource,label:this.translateService.instant("dataSource"),type:N.FieldsGroup,children:[]},1)}addLookupField(){const t=this.referenceSchemaList;se.addFieldToGroup(this.fields,Le.DataSource,{label:this.translateService.instant(this.lookupControlName),name:this.lookupControlName,type:N.Lookup,value:this.model.referenceSchemaConfig?.uId?{value:this.model.referenceSchemaConfig.uId,name:this.model.referenceSchemaConfig.caption,allowEdit:this.model.referenceSchemaConfig.allowEdit}:null,options:t,isSupportCreatingMode:this.model.canCreateReferenceSchema,validationConfig:this.model.validationConfig,validations:this.lookupControlValidations,asyncValidations:[{name:"acceptableOptions",validator:xi.acceptableOptionsValidator(t),message:this.translateService.instant("selectValueCaption")},{name:"primaryDisplayColumn",validator:Zo.lookupPrimaryDisplayColumn(this.lookupService),message:this.translateService.instant("lookupSchemaDoesNotHavePrimaryDisplayColumnMsg")}]})}addIsSimpleLookupField(){se.addFieldToGroup(this.fields,Le.DataSource,{type:N.RadioButtonGroup,label:this.translateService.instant("lookupView"),name:"isSimpleLookup",value:this.model.isSimpleLookup,options:[{name:this.translateService.instant("selectionWindow"),value:!1},{name:this.translateService.instant("list"),value:!0}]})}get isCascadeDisabled(){return this._isCascadeDisabled}set isCascadeDisabled(t){this._isCascadeDisabled=t}addIsCascadeField(){const t=typeof this.model.isCascade=="boolean"?this.model.isCascade:!1;se.addFieldToGroup(this.fields,Le.DataSource,{type:N.RadioButtonGroup,label:this.translateService.instant("lookupValueDeletion"),disabled:this.isCascadeDisabled,name:"isCascade",value:t,options:[{name:this.translateService.instant("blockDeletionCaption"),value:!1},{name:this.translateService.instant("DeleteRecordsCaption"),value:!0}]})}addFields(){this.addDataSourceFieldsGroup(),this.addLookupField(),this.addIsSimpleLookupField(),this.addIsCascadeField()}ngOnInit(){this.addFields()}onFormCreated(t){super.onFormCreated(t),this.setLookupControlDisabledState()}}ca.\u0275fac=function(t){return new(t||ca)(e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(Wa))},ca.\u0275cmp=e.\u0275\u0275defineComponent({type:ca,selectors:[["ts-lookup-meta-item-properties-page"]],features:[e.\u0275\u0275ProvidersFeature([]),e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(t,n){t&1&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275listener("formCreated",function(i){return n.onFormCreated(i)}),e.\u0275\u0275elementContainerEnd()),t&2&&e.\u0275\u0275property("model",n.model)("fields",n.fields)},dependencies:[q],encapsulation:2});class da extends Wa{constructor(t){super(),this.customEventService=t}checkLookupPrimaryDisplayColumn(t){return this.customEventService.getDataViaEvent("CheckLookupPrimaryDisplayColumn",t)}getLookupInfo(t){return this.customEventService.getDataViaEvent("GetLookupInfo",t)}getLookupList(){return this.customEventService.getDataViaEvent("GetLookupList")}getLookupNameList(){return this.customEventService.getDataViaEvent("GetLookupNameList")}}da.\u0275fac=function(t){return new(t||da)(e.\u0275\u0275inject(Oe.CustomEventService))},da.\u0275prov=e.\u0275\u0275defineInjectable({token:da,factory:da.\u0275fac});class dt{}dt.\u0275fac=function(t){return new(t||dt)},dt.\u0275mod=e.\u0275\u0275defineNgModule({type:dt}),dt.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:Wa,useClass:da}],imports:[s.CommonModule,ue,qa.MatLegacySnackBarModule,v.MatIconModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,c.ReactiveFormsModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(dt,{declarations:[q,Ae,Fe,nn,tn,en,Xt,ca],imports:[s.CommonModule,ue,qa.MatLegacySnackBarModule,v.MatIconModule,D.MatLegacyInputModule,w.MatLegacyButtonModule,c.ReactiveFormsModule],exports:[q,Ae,Fe,nn,tn,en,Xt,ca]})}();class Si{getFields(t){return[]}}class Fa extends Si{constructor(t,n){super(),this.translateService=t,this.customEventService=n}getFields(t){const n=t.validationConfig?.schemaNamePrefix;return[{name:Le.General,label:this.translateService.instant("generalCaption"),type:N.FieldsGroup,children:[{name:"caption",label:this.translateService.instant("captionLabel"),type:N.LocalizableText,validations:[]},{name:"name",label:this.translateService.instant("nameLabel"),type:N.Input,validations:[{message:this.translateService.instant("columnEmpty"),name:"required",validator:c.Validators.required},{message:(0,m.format)(this.translateService.instant("wrongColumnNameWithPrefix"),[n]),name:"requiredWithPrefix",validator:m.CustomValidators.requiredWithPrefix(n)},{message:this.translateService.instant("wrongColumnName"),name:"pattern",validator:c.Validators.pattern(/^[a-zA-Z_]{1}[a-zA-Z0-9_]*$/)}]}]}]}getModel(){return this.customEventService.getDataViaEvent("GetColumnConfig")}}Fa.\u0275fac=function(t){return new(t||Fa)(e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(Oe.CustomEventService))},Fa.\u0275prov=e.\u0275\u0275defineInjectable({token:Fa,factory:Fa.\u0275fac});function Ii(a){return a.cultureInfo.sysCultureName}const np={showDelay:300,hideDelay:300,touchendHideDelay:1e3,position:"above"};let pt=class{constructor(t){this._materialIconsRegistrator=t,vi.forEach(n=>{this._materialIconsRegistrator.addIcons([{name:n,icon:p(20695)(`./${n}.svg`)},{name:`${n}-large`,icon:p(87197)(`./${n}.svg`)}])})}};pt.\u0275fac=function(t){return new(t||pt)(e.\u0275\u0275inject(I.MaterialIconsRegistrator))},pt.\u0275mod=e.\u0275\u0275defineNgModule({type:pt}),pt.\u0275inj=e.\u0275\u0275defineInjector({providers:[Oe.WINDOW_PROVIDER,dn,Pt,{provide:y.MAT_DATE_LOCALE,useFactory:Ii,deps:[m.UserInfo]},{provide:y.MAT_DATE_FORMATS,useValue:$a.MAT_MOMENT_DATE_FORMATS},{provide:y.DateAdapter,useClass:$a.MomentDateAdapter,deps:[y.MAT_DATE_LOCALE]},{provide:j.MAT_LEGACY_TOOLTIP_DEFAULT_OPTIONS,useValue:np}],imports:[s.CommonModule,ae,Ge,ue,Se,oe,We,c.FormsModule,xe,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,x.MatDatepickerModule,M.MatLegacyDialogModule,ut.MatDividerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,de.MatLegacyMenuModule,$a.MatMomentDateModule,Pa.MatLegacyProgressSpinnerModule,y.MatRippleModule,$.MatLegacySelectModule,j.MatLegacyTooltipModule,X,we.RouterModule,W,m.CommonModule,b.TranslateModule,c.ReactiveFormsModule,K.ViewModule,ce.MatExpansionModule,Je,I.NotifyModule,Gt,ae,ue,Se,oe,xe,dt,X,W]}),pt=(0,g.__decorate)([(0,l.CrtModule)({viewElements:[G,H,le,me,ie,ne,Ne],converters:[k.FormatValueConverter,k.InvertBooleanValueConverter,k.IsEqual,k.ToBooleanConverter,k.ToEmailLinkConverter,k.ToEmptyPlaceholderConverter,k.ToDisplayValueConverter,k.ToImageLinkConverter,k.ToObjectPropConverter,k.ToPhoneLinkConverter,k.ToFileLinkConverter,k.ToLookupConverter,k.LinkPrefixConverter,k.ToValuesFromCollectionConverter,k.ToDcmStageValueConverter,k.InterpolateStringConverter,k.IsEveryEqualToConverter],requestHandlers:[gt.ChangeViewModelAttributeValueHandler]}),(0,g.__metadata)("design:paramtypes",[I.MaterialIconsRegistrator])],pt),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(pt,{declarations:[Ze,Qe,Aa,Nn,un,St,Tt,Sn,B,kt,Mn,Dt,hn,fn,Ln,Ea,G,H,me,ie,le,Ne,Wn,oa,ia],imports:[s.CommonModule,ae,Ge,ue,Se,oe,We,c.FormsModule,xe,A.MatLegacyAutocompleteModule,w.MatLegacyButtonModule,P.MatLegacyCheckboxModule,x.MatDatepickerModule,M.MatLegacyDialogModule,ut.MatDividerModule,_.MatLegacyFormFieldModule,v.MatIconModule,D.MatLegacyInputModule,de.MatLegacyMenuModule,$a.MatMomentDateModule,Pa.MatLegacyProgressSpinnerModule,y.MatRippleModule,$.MatLegacySelectModule,j.MatLegacyTooltipModule,X,we.RouterModule,W,m.CommonModule,b.TranslateModule,c.ReactiveFormsModule,K.ViewModule,ce.MatExpansionModule,Je,I.NotifyModule,Gt],exports:[Ze,Qe,Aa,Nn,un,ae,St,ue,Se,oe,Tt,Sn,B,le,xe,dt,Mn,Dt,hn,X,fn,Ln,W,G,H,me,ie,Wn,oa,ia]})}();function ap(...a){const t=new c.UntypedFormControl(...a);return new gt.FormControlBasedCrtControl(t)}var T;(function(a){a.DEFAULT="default-file-icon",a.IMAGE="file-image",a.PDF="file-pdf",a.WORD="file-word",a.EXCEL="file-excel",a.POWERPOINT="file-powerpoint"})(T||(T={}));const wi={doc:T.WORD,docx:T.WORD,pdf:T.PDF,ppt:T.POWERPOINT,pptx:T.POWERPOINT,xls:T.EXCEL,xlsx:T.EXCEL,bmp:T.IMAGE,gif:T.IMAGE,ico:T.IMAGE,jpeg:T.IMAGE,jpg:T.IMAGE,png:T.IMAGE,svg:T.IMAGE,webp:T.IMAGE,ai:T.IMAGE,cod:T.IMAGE,cmx:T.IMAGE,emz:T.IMAGE,eps:T.IMAGE,dib:T.IMAGE,heic:T.IMAGE,ief:T.IMAGE,jfif:T.IMAGE,jpe:T.IMAGE,pbm:T.IMAGE,pgm:T.IMAGE,pjp:T.IMAGE,pjpeg:T.IMAGE,pnm:T.IMAGE,ppm:T.IMAGE,ras:T.IMAGE,rgb:T.IMAGE,tif:T.IMAGE,xbm:T.IMAGE,xpm:T.IMAGE,xwd:T.IMAGE};class Oa{getFileIcon(t,n=""){const o=t?.lastIndexOf(".")||-1;let i=T.DEFAULT;if(o!==-1){const r=t.split(".").pop();i=wi[r?.toLowerCase()]||T.DEFAULT}return n?`${i}-${n}`:i}}Oa.\u0275fac=function(t){return new(t||Oa)},Oa.\u0275prov=e.\u0275\u0275defineInjectable({token:Oa,factory:Oa.\u0275fac});class op{}const ip={minWidth:0,maxWidth:Number.MAX_VALUE},Wo=new e.InjectionToken("A horizontal resizing configuration");class an{constructor(t,n){this._isRtl=t.value==="rtl",this._defaultResizingConfig=this._mergeConfigs(n,ip)}get resizeEdges(){return this._isRtl?{left:!0}:{right:!0}}_mergeConfigs(t,n){return{minWidth:t?.minWidth??n?.minWidth,maxWidth:t?.maxWidth??n?.maxWidth,defaultWidth:t?.defaultWidth??n?.defaultWidth}}isAvailableEdges(t){return this._isRtl?Boolean(t?.left):Boolean(t?.right)}getAdjustedWidth(t,n){const{minWidth:o,maxWidth:i,defaultWidth:r}=this._mergeConfigs(n,this._defaultResizingConfig);return typeof t!="number"?r:(t=Math.min(t,i),t=Math.max(t,o),t)}}an.\u0275fac=function(t){return new(t||an)(e.\u0275\u0275inject(Cn.Directionality),e.\u0275\u0275inject(Wo,8))},an.\u0275prov=e.\u0275\u0275defineInjectable({token:an,factory:an.\u0275fac});class on{static withConfig(t){return{ngModule:on,providers:[an,{provide:Wo,useValue:t}]}}}on.\u0275fac=function(t){return new(t||on)},on.\u0275mod=e.\u0275\u0275defineNgModule({type:on}),on.\u0275inj=e.\u0275\u0275defineInjector({providers:[an]});function rp(a){let t={top:0,bottom:0,left:0,right:0};if((0,S.isObject)(a))(0,S.forIn)(t,(n,o)=>{t[o]=Ho[a[o]]??a[o]});else if((0,S.isNumber)(a))(0,S.forIn)(t,(n,o)=>{t[o]=a});else if((0,S.isString)(a)&&(0,k.isSizeEnum)(a))(0,S.forIn)(t,(n,o)=>{t[o]=Ho[a]});else if((0,S.isString)(a)&&!(0,k.isSizeEnum)(a)){const n=a,o=Number(n);if(o)(0,S.forIn)(t,(i,r)=>{t[r]=o});else{const i=n?.split(" "),[r,d,f,E]=i.map(L=>Number(L.split("px")?.[0]));i.length>1?t={top:r,bottom:f??r,left:E??d,right:d}:(0,S.forIn)(t,(L,mt)=>{t[mt]=r})}}return t}var lp=p(3127),fo=p(59929);class pa{_mapDataSchemaAttributeToStructureItem(t){return{name:t.name,caption:t.caption,dataValueType:t.dataValueType,item:t}}_mapToStructureExplorerItem(t){return{columnPath:t.path,caption:t.caption,metaPath:t.path,metaPathCaption:t.caption,hasChildren:!0,name:t.name,id:t.name,tags:[t.caption,t.name],data:{name:t.name,caption:t.caption,isDataSource:!1,item:t}}}_mapDataSchemaToStructureItem(t,n){return{name:t,caption:n.caption,item:n,isDataSource:!0,dataSchemaType:n.type}}getDataSchemaAttributeStructureItemsBySchemaName(t,n,o){return this.getDataSchemaByName(t,o).pipe((0,u.map)(i=>({caption:i.caption,structureItems:i.attributes.filter(r=>r.usageType!==l.DataSchemaAttributeUsageType.None).map(r=>this._mapDataSchemaAttributeToStructureItem(r))})),(0,u.mergeMap)(i=>n?.useBackwards?this.getDataSchemaBackReference({schemaName:t,schemaCaption:i.caption?.toString()}).pipe((0,u.map)(r=>[...i.structureItems,...r])):(0,C.of)(i.structureItems)))}getDataSchemaAttributeStructureExplorerItemByPath(t,n){return this.getDataSchemaAttributeByPath(t,n).pipe((0,u.map)(o=>this._mapToStructureExplorerItem(o)))}getDataSourceStructureItemByName(t){return this.getDataSourceByName(t).pipe((0,u.switchMap)(n=>(0,C.forkJoin)([(0,C.of)(n),n.getSchema().pipe((0,u.take)(1))])),(0,u.map)(([n,o])=>this._mapDataSchemaToStructureItem(n.dataSourceName,o)))}getDataSourceStructureItems(){return this.getDataSources().pipe((0,u.mergeAll)(),(0,u.switchMap)(t=>(0,C.forkJoin)([(0,C.of)(t),t.getSchema().pipe((0,u.take)(1))]).pipe((0,u.filter)(n=>!n[0].hasErrors))),(0,u.map)(([t,n])=>this._mapDataSchemaToStructureItem(t.dataSourceName,n)),(0,u.toArray)())}}pa.\u0275fac=function(t){return new(t||pa)},pa.\u0275prov=e.\u0275\u0275defineInjectable({token:pa,factory:pa.\u0275fac});const Di="DataSourceStructureExplorerDataProvider";class rn extends fo.BaseStructureExplorerDataProvider{constructor(t,n,o,i,r){super(),this._dataSourceStructureItemService=t,this._rightsService=n,this._userInfo=o,this.translateService=i,this.featureValues=r,this._defaultCaptionKey="CDK.DataGroupCaption",this.name=Di,this.setMapFunction(this._mapItemToExplorerItem)}_setTranslations(){this._defaultCaption=this.translateService.instant(this._defaultCaptionKey)}_getAttributes(t,n){return(0,C.forkJoin)([(0,C.of)(this.featureValues.UseColumnReadPermissionsForStructureExplorer),this._dataSourceStructureItemService.getDataSchemaAttributeStructureItemsBySchemaName(t,this.launchOptions,n)]).pipe((0,u.mergeMap)(([o,i])=>(0,C.iif)(()=>o&&n===l.DataSchemaType.Entity,this._rightsService.getCanReadColumns({schemaName:t,columnNames:i.filter(r=>r.item.attributeType===l.DataSchemaAttributeType.OwnAttribute).map(r=>r.name)}).pipe((0,u.mergeMap)(r=>{let d=[];return this._userInfo.isSSP&&(i=i.filter(f=>f.item.usageType===l.DataSchemaAttributeUsageType.General)),!r||Object.keys(r).length===0?(0,C.of)(i):(d=i.filter(f=>r[f.name]!==!1),(0,C.of)(d))})),(0,C.of)(i))))}_getDataSources(){return this._dataSourceStructureItemService.getDataSourceStructureItems()}_getDataSourceStructureItemByName(t){return this._dataSourceStructureItemService.getDataSourceStructureItemByName(t)}_joinPath(...t){return t.filter(lp.coerceBooleanProperty).join(".")}_setStructureExplorerItemPaths(t,n){t.metaPath=this._joinPath(n?.metaPath,t.metaPath),t.columnPath=this._joinPath(n?.columnPath,t.columnPath),t.metaPathCaption=this._joinPath(n?.caption,t.metaPathCaption)}getCaption(){return this._currentSelectedItem?.caption||this._defaultCaption}mapItemsToResult(t){const n={items:[],relatedItems:[],hideItems:!1};return t.forEach(o=>{const i=o.data.item,r=i.attributeType;o.data.isDataSource?(n.relatedItems.push(o),n.hideItems=!0):i.dataValueType===l.DataValueType.Lookup&&i.referenceSchemaName&&(o.data.dataSchemaType=l.DataSchemaType.Entity,n.relatedItems.push(o)),r!==l.DataSchemaAttributeType.BackReferenceAttribute&&n.items.push(o)}),n}getChildItems(t){return this._getAttributes(t)}getAllItems(t){const n=t.data==null;if(this._currentSelectedItem=t.data,n)return this._getDataSources();const o=t.data.item;return this._getAttributes(o.referenceSchemaName||o.name,this._currentSelectedItem?.dataSchemaType)}_getStructureItemIcon(t){if(t.item instanceof gt.DataSchemaAttribute&&t.item.defaultValueSchema){const{valueSourceType:n}=t.item.defaultValueSchema;if(n===l.DefaultValueSource.Sequence)return"autonumber-icon"}return null}_mapItemToExplorerItem(t){const n={columnPath:t.item.name,data:t,hasChildren:!0,tags:[t.caption,t.name],caption:t.caption,shortCaption:t.shortCaption,id:t.name,name:t.name,metaPathCaption:t.caption,metaPath:t.name},o=this._getStructureItemIcon(t);return o&&(n.iconName=o),n}_mapDataSourceItemToStructureExplorerItem(t){const n={columnPath:t.item.name,hasChildren:!0,caption:t.caption,shortCaption:t.shortCaption,metaPath:t.name,id:t.name,metaPathCaption:t.caption,name:t.name,tags:[t.caption,t.name],data:{name:t.name,caption:t.caption,isDataSource:!0,item:t.item,dataSchemaType:t.dataSchemaType}},o=this._getStructureItemIcon(t);return o&&(n.iconName=o),n}_findOwnAttribute(t,n,o){return this._getAttributes(t,o).pipe((0,u.map)(i=>i.map(r=>this._mapItemToExplorerItem(r))),(0,u.map)(i=>i.find(r=>r.name===n)))}_getSelectedReferenceAttributes(t,n){const o=n.split("."),i=t.item.name,r=t.item.caption;return(0,C.combineLatest)(o.map((d,f)=>{const E=`${i}.${o.slice(0,f+1).join(".")}`;return this._dataSourceStructureItemService.getDataSchemaAttributeStructureExplorerItemByPath(E,t.dataSchemaType)})).pipe((0,u.tap)(d=>{d.forEach((f,E)=>{const L=d[E-1];this._setStructureExplorerItemPaths(f,L)}),d.forEach(f=>{f.metaPath=this._joinPath(t.name,f.metaPath),f.columnPath=this._joinPath(i,f.columnPath),f.metaPathCaption=this._joinPath(r,f.metaPathCaption)})}))}_getSelectedAttributes(t,n){const o=t.item.name;return this._findOwnAttribute(o,n,t.dataSchemaType).pipe((0,u.mergeMap)(i=>{if(i){i.columnPath=`${t.name}.${i.columnPath}`,i.metaPath=`${t.name}.${i.name}`;const r=`${t.caption}.${i.caption}`;return i.metaPathCaption=r,(0,C.of)([i])}else return this._getSelectedReferenceAttributes(t,n)}))}_getSelectedPath(t){if(!t||t.length===0)return null;this._currentSelectedItem=null;const n=t[0].split("."),o=n.shift(),i=n.join(".");return{dataSourceName:o,path:i}}_getRootItem(){const t=this.getDefaultRootItem();return t.caption=this.getCaption(),t}_getInitialStataForDataSource({dataSourceName:t,path:n}){const o=this._getRootItem();return this._getDataSourceStructureItemByName(t).pipe((0,u.tap)(i=>{o.id=i.name,o.caption=i.caption,o.data=i}),(0,u.map)(i=>({structureItem:i,structureExplorerItem:this._mapDataSourceItemToStructureExplorerItem(i)})),(0,u.mergeMap)(({structureItem:i,structureExplorerItem:r})=>(0,C.iif)(()=>Boolean(n),this._getSelectedAttributes(i,n).pipe((0,u.map)(d=>[r,...d])),(0,C.of)([o,r]))),(0,u.map)(i=>new fo.StructureExplorerInitialState([i])))}_getInitialStateForSelectedPath({dataSourceName:t,path:n}){return this._getDataSources().pipe((0,u.mergeMap)(o=>{const i=o.find(f=>f.name===t),r=this._mapDataSourceItemToStructureExplorerItem(i),d=this._getRootItem();return this._getSelectedAttributes(i,n).pipe((0,u.map)(f=>new fo.StructureExplorerInitialState([[d,r,...f]])))}))}getInitialState(t){if(this._setTranslations(),this._currentSelectedItem=null,t.navigateOnlyThroughDataSource)return this._getInitialStataForDataSource({...this._getSelectedPath(t.options?.selectedMetaPaths),dataSourceName:t.navigateOnlyThroughDataSource});const n=this._getSelectedPath(t.options?.selectedMetaPaths);return n?this._getInitialStateForSelectedPath(n):(0,C.of)(new fo.StructureExplorerInitialState([]))}}rn.\u0275fac=function(t){return new(t||rn)(e.\u0275\u0275inject(pa),e.\u0275\u0275inject(fe.RightsService),e.\u0275\u0275inject(m.UserInfo),e.\u0275\u0275inject(b.TranslateService),e.\u0275\u0275inject(m.FEATURE_VALUES))},rn.\u0275prov=e.\u0275\u0275defineInjectable({token:rn,factory:rn.\u0275fac});class ma{constructor(t,n){this._queryExecutor=t,this._translateService=n,this._byColumnCaptionKey="CDK.ByColumnCaption",this._whereColumnCaptionKey="CDK.WhereColumnCaption",this._isColumnCaptionKey="CDK.IsColumnCaption",this._whereColumnCaption=this._translateService.instant(this._whereColumnCaptionKey),this._isColumnCaption=this._translateService.instant(this._isColumnCaptionKey),this._byColumnCaption=this._translateService.instant(this._byColumnCaptionKey)}_getBackwardReferencesEsq(t){const n=new l.EntitySchemaQuery("SysEntitySchemaReference");return n.addSchemaColumn("ColumnCaption","ColumnCaption"),n.addSchemaColumn("ColumnName","ColumnName"),n.addSchemaColumn("SysSchema.Name","Name"),n.addSchemaColumn("SysSchema.Caption","Caption"),n.rowCount=-1,n.isDistinct=!0,n.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"[SysSchema:Id:ReferenceSchema].Name",t),n.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_start_with,"SysSchema.Name","VwSys"),n.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_start_with,"SysSchema.Name","Sys"),n.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"UsageType",0),n}_mapRowItemToDataSourceStructureItem(t,n){const o=t.Name,i=t.ColumnName,r=t.ColumnCaption,d=t.Caption,f=`${n} ${this._isColumnCaption} ${r}`,E=`(${this._whereColumnCaption} ${f})`,L=n===r?`${d} (${this._byColumnCaption} ${r})`:`${d} ${E}`;return{caption:L,shortCaption:d,dataValueType:l.DataValueType.Lookup,name:o,item:{caption:L,attributeType:l.DataSchemaAttributeType.BackReferenceAttribute,dataValueType:l.DataValueType.Lookup,isValueCloneable:!0,name:o,path:`[${o}:${i}].Id`,referenceSchemaName:o}}}getBackwardReferences(t){const n=this._getBackwardReferencesEsq(t.schemaName);return this._queryExecutor.executeSelectQuery(n).pipe((0,u.map)(o=>o.map(i=>this._mapRowItemToDataSourceStructureItem(i,t.schemaCaption))))}}ma.\u0275fac=function(t){return new(t||ma)(e.\u0275\u0275inject(Ee.QueryExecutor),e.\u0275\u0275inject(b.TranslateService))},ma.\u0275prov=e.\u0275\u0275defineInjectable({token:ma,factory:ma.\u0275fac});var Ya=p(18369);class ua{}ua.\u0275fac=function(t){return new(t||ua)},ua.\u0275mod=e.\u0275\u0275defineNgModule({type:ua}),ua.\u0275inj=e.\u0275\u0275defineInjector({providers:[rn,ma,{provide:Ya.DATA_PROVIDER,useExisting:rn,multi:!0}],imports:[Ya.StructureExplorerModule,Ya.StructureExplorerModule]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(ua,{imports:[Ya.StructureExplorerModule],exports:[Ya.StructureExplorerModule]})}()},51868:h=>{h.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 1V15H13V5H8.99999V1H3ZM2 0H9.99999V4H14V16H2V0Z" fill="#006CE0"/>
<path d="M10 0L14 4H10V0Z" fill="#006CE0"/>
</svg>
`},79143:h=>{h.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#207245"/>
<path d="M13.1334 4.73367H11.2667V5.66701H13.1334V4.73367Z" fill="#207245"/>
<path d="M10.3334 4.73367H9.40002V5.66701H10.3334V4.73367Z" fill="#207245"/>
<path d="M13.1334 6.60034H11.2667V7.53368H13.1334V6.60034Z" fill="#207245"/>
<path d="M10.3334 6.60034H9.40002V7.53368H10.3334V6.60034Z" fill="#207245"/>
<path d="M13.1334 8.46701H11.2667V9.40034H13.1334V8.46701Z" fill="#207245"/>
<path d="M10.3334 8.46701H9.40002V9.40034H10.3334V8.46701Z" fill="#207245"/>
<path d="M13.1334 10.3337H11.2667V11.267H13.1334V10.3337Z" fill="#207245"/>
<path d="M10.3334 10.3337H9.40002V11.267H10.3334V10.3337Z" fill="#207245"/>
<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#207245"/>
<path d="M3.80005 5.66699L6.60005 10.8003" stroke="#207245" stroke-miterlimit="10"/>
<path d="M3.80005 10.3337L6.60005 5.20035" stroke="#207245" stroke-miterlimit="10"/>
</svg>
`},68523:h=>{h.exports=`<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.5458 3H1.54578V13H15.5458V3Z" stroke="#FF8800" stroke-miterlimit="10"/>
<path d="M11.0458 8C11.8742 8 12.5458 7.32843 12.5458 6.5C12.5458 5.67157 11.8742 5 11.0458 5C10.2173 5 9.54578 5.67157 9.54578 6.5C9.54578 7.32843 10.2173 8 11.0458 8Z" fill="#FF8800"/>
<path d="M1.54578 13V11.6514L5.09954 6.32074L10.9439 13H1.54578Z" stroke="#FF8800"/>
<path d="M15.5458 13H13.8134L11.776 9.94392L13.447 9.10838L15.5458 11.2071V13Z" stroke="#FF8800"/>
</svg>
`},76655:h=>{h.exports=`<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 8V2H10.3L14 5.42461V14H6.5" stroke="#F40000" stroke-miterlimit="10"/>
<path d="M10.4702 2H9.47021V6H13.4702V5H10.4702V2Z" fill="#F40000"/>
<path d="M12.4598 11.07C12.4498 10.98 12.3799 10.86 12.2999 10.78C12.0799 10.56 11.5899 10.44 10.8499 10.43C10.3499 10.43 9.73986 10.47 9.10986 10.56C8.82986 10.39 8.52986 10.21 8.29986 9.98996C7.67986 9.39996 7.15984 8.57996 6.83984 7.67996C6.85984 7.59996 6.87984 7.51995 6.89984 7.44995C6.89984 7.44995 7.24985 5.41996 7.15985 4.73996C7.14985 4.64996 7.13984 4.61995 7.11984 4.54995L7.08984 4.46997C6.98984 4.24997 6.80986 4.00996 6.51986 4.01996H6.33984C6.00984 4.01996 5.74984 4.17997 5.67984 4.43997C5.46984 5.23997 5.67986 6.42995 6.07986 7.97995L5.97986 8.22995C5.69986 8.93995 5.33984 9.64996 5.02984 10.27L4.98987 10.35C4.65987 11.01 4.35984 11.57 4.08984 12.04L3.80984 12.19C3.80984 12.19 3.30986 12.46 3.19986 12.53C2.24986 13.11 1.60985 13.77 1.50985 14.3C1.47985 14.47 1.50986 14.68 1.66986 14.78L1.93985 14.9199C2.05985 14.9799 2.17984 15.01 2.30984 15.01C2.98984 15.01 3.77984 14.14 4.86984 12.21C6.12984 11.79 7.55984 11.44 8.80984 11.25C9.76984 11.8 10.9398 12.18 11.6798 12.18C11.8098 12.18 11.9299 12.17 12.0199 12.14C12.1599 12.1 12.2799 12.02 12.3499 11.91C12.4899 11.69 12.5199 11.38 12.4799 11.07H12.4598ZM2.13986 14.4799C2.25986 14.1299 2.74986 13.45 3.47986 12.84C3.52986 12.8 3.63987 12.69 3.73987 12.59C2.97987 13.83 2.46986 14.32 2.13986 14.47V14.4799ZM6.43985 4.36996C6.65985 4.36996 6.77985 4.92996 6.78985 5.45996C6.79985 5.98996 6.67984 6.35997 6.52984 6.62997C6.40984 6.21997 6.34985 5.57995 6.34985 5.16995C6.34985 5.16995 6.34985 4.36996 6.43985 4.36996ZM5.15985 11.58C5.30985 11.3 5.46985 11.0099 5.62985 10.6999C6.02985 9.93995 6.26984 9.33997 6.45984 8.84997C6.82984 9.53997 7.28986 10.12 7.82986 10.59C7.89986 10.65 7.96985 10.71 8.03985 10.77C6.93985 10.99 5.98985 11.26 5.15985 11.59V11.58ZM12.0898 11.52C12.0198 11.56 11.8298 11.59 11.7098 11.59C11.3098 11.59 10.8198 11.4 10.1298 11.1C10.3998 11.08 10.6399 11.07 10.8599 11.07C11.2599 11.07 11.3799 11.0699 11.7699 11.1699C12.1599 11.2699 12.1699 11.48 12.0999 11.52H12.0898Z" fill="#F40000"/>
</svg>
`},13117:h=>{h.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#D24625"/>
<path d="M13.1333 10.3337H8.46667V11.267H13.1333V10.3337Z" fill="#D24625"/>
<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#D24625"/>
<path d="M11.2667 4.73367V6.60034H13.1334C13.1334 5.57367 12.2934 4.73367 11.2667 4.73367Z" fill="#D24625"/>
<path d="M6.63733 7.067C6.63733 6.227 6.33866 5.50835 5.89999 5.16302C5.22799 4.64035 4.192 4.73366 4.192 4.73366H3.79065V11.267H4.72398V9.44701C5.05065 9.44701 5.46132 9.37234 5.83465 9.09234C6.36665 8.69101 6.62799 8.00968 6.62799 7.05768L6.63733 7.067ZM5.28399 8.34566C5.11599 8.47633 4.90133 8.51368 4.73333 8.51368V5.62968C4.91066 5.65768 5.12533 5.71368 5.29333 5.86302C5.564 6.09635 5.704 6.49768 5.704 7.05768C5.704 7.49635 5.62932 8.07501 5.28399 8.33634V8.34566Z" fill="#D24625"/>
<path d="M10.3334 7.53366V5.66699C9.98802 5.66699 9.67069 5.76966 9.40002 5.92832V9.14834C9.67069 9.307 9.98802 9.40967 10.3334 9.40967C11.36 9.40967 12.2 8.56967 12.2 7.543H10.3334V7.53366Z" fill="#D24625"/>
</svg>
`},1850:h=>{h.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#2A5699"/>
<path d="M13.1334 4.73367H9.40002V5.66701H13.1334V4.73367Z" fill="#2A5699"/>
<path d="M13.1334 6.60034H9.40002V7.53368H13.1334V6.60034Z" fill="#2A5699"/>
<path d="M13.1334 8.46701H9.40002V9.40034H13.1334V8.46701Z" fill="#2A5699"/>
<path d="M13.1334 10.3337H9.40002V11.267H13.1334V10.3337Z" fill="#2A5699"/>
<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#2A5699"/>
<path d="M5.90935 10.3337L5.19069 7.35632L4.48135 10.3337H3.88403L2.8667 5.66699H3.61335L4.2107 8.58833L4.90136 5.66699H5.49868L6.18936 8.61633L6.78668 5.66699H7.53337L6.51604 10.3337H5.90935Z" fill="#2A5699"/>
</svg>
`},89743:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M31 6L39 14H31V6Z" fill="#0058EF"/>
<mask id="path-2-inside-1_3672_46963" fill="white">
<path fill-rule="evenodd" clip-rule="evenodd" d="M31 6H11V44H39V14H31V6Z"/>
</mask>
<path d="M11 6V4H9V6H11ZM31 6H33V4H31V6ZM11 44H9V46H11V44ZM39 44V46H41V44H39ZM39 14H41V12H39V14ZM31 14H29V16H31V14ZM11 8H31V4H11V8ZM13 44V6H9V44H13ZM39 42H11V46H39V42ZM37 14V44H41V14H37ZM39 12H31V16H39V12ZM33 14V6H29V14H33Z" fill="#0058EF" mask="url(#path-2-inside-1_3672_46963)"/>
</svg>
`},22249:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.849 16.7535L20.249 32.1535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>
<path d="M11.849 30.7535L20.249 15.3535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>
<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#207245" stroke-width="2"/>
<path d="M26.8625 10.1133H43.551V38.0085H26.8625M26.8625 15.8385H31.5311M26.8625 21.3201H31.5311M26.8625 27.0454H31.5311M26.8625 32.6488H31.5311M34.2463 15.8385H39.9148M34.2463 21.3201H39.9148M34.2463 27.0454H39.9148M34.2463 32.6488H39.9148" stroke="#207245" stroke-width="2"/>
</svg>
`},8379:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 37V11H43V37H5Z" stroke="#FF8800" stroke-width="2" stroke-miterlimit="10"/>
<path d="M33.6655 20.1493C33.6655 21.8257 32.3244 23.1657 30.6932 23.1657C29.0621 23.1657 27.7209 21.8257 27.7209 20.1493C27.7209 18.4729 29.0621 17.1329 30.6932 17.1329C32.3244 17.1329 33.6655 18.4729 33.6655 20.1493Z" stroke="#FF8800" stroke-width="2"/>
<path d="M6.09387 37V33.8161L14.9636 19.1407L31.0907 37H6.09387Z" stroke="#FF8800" stroke-width="2"/>
<path d="M42.0514 37H37.8244L32.1907 29.215L37.0649 26.7508L42.0514 32.5684V37Z" stroke="#FF8800" stroke-width="2"/>
</svg>
`},96870:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 24V6H29.9001L41 16.2738V42H18.5" stroke="#F40000" stroke-width="2" stroke-miterlimit="10"/>
<path d="M29.3433 6.01556V16.5029C33.371 16.5029 41.4263 16.5029 41.4263 16.5029" stroke="#F40000" stroke-width="2"/>
<path d="M35.9689 33.2099C35.9389 32.9399 35.7289 32.5799 35.4889 32.3399C34.8289 31.6799 33.3589 31.3199 31.1389 31.2899C29.6389 31.2899 27.8089 31.4099 25.9189 31.6799C25.0789 31.1699 24.1789 30.6299 23.4889 29.9699C21.6289 28.1999 20.0689 25.7399 19.1089 23.0399C19.1689 22.7999 19.2289 22.5598 19.2889 22.3498C19.2889 22.3498 20.3389 16.2599 20.0689 14.2199C20.0389 13.9499 20.0089 13.8599 19.9489 13.6499L19.8589 13.4099C19.5589 12.7499 19.0189 12.0299 18.1489 12.0599H17.6089C16.6189 12.0599 15.8389 12.5399 15.6289 13.3199C14.9989 15.7199 15.6289 19.2898 16.8289 23.9398L16.5289 24.6898C15.6889 26.8198 14.6089 28.9499 13.6789 30.8099L13.559 31.0499C12.569 33.0299 11.6689 34.7099 10.8589 36.1199L10.0189 36.5699C10.0189 36.5699 8.51893 37.3799 8.18893 37.5899C5.33893 39.3299 3.41892 41.3099 3.11892 42.8999C3.02892 43.4099 3.11893 44.0399 3.59893 44.3399L4.4089 44.7598C4.7689 44.9398 5.12888 45.0299 5.51888 45.0299C7.55888 45.0299 9.92887 42.4199 13.1989 36.6299C16.9789 35.3699 21.2689 34.3199 25.0189 33.7499C27.8989 35.3999 31.4089 36.5399 33.6289 36.5399C34.0189 36.5399 34.3789 36.5098 34.6489 36.4198C35.0689 36.2999 35.4289 36.0599 35.6389 35.7299C36.0589 35.0699 36.1489 34.1399 36.0289 33.2099H35.9689ZM5.00893 43.4398C5.36893 42.3898 6.83892 40.3499 9.02892 38.5199C9.17892 38.3999 9.50895 38.0699 9.80895 37.7699C7.52895 41.4899 5.99893 42.9599 5.00893 43.4099V43.4398ZM17.9089 13.1099C18.5689 13.1099 18.9289 14.7899 18.9589 16.3799C18.9889 17.9699 18.6289 19.0799 18.1789 19.8899C17.8189 18.6599 17.6389 16.7398 17.6389 15.5098C17.6389 15.5098 17.6389 13.1099 17.9089 13.1099ZM14.0689 34.7399C14.5189 33.8999 14.9989 33.0298 15.4789 32.0998C16.6789 29.8198 17.3989 28.0199 17.9689 26.5499C19.0789 28.6199 20.4589 30.3599 22.0789 31.7699C22.2889 31.9499 22.4989 32.1299 22.7089 32.3099C19.4089 32.9699 16.5589 33.7799 14.0689 34.7699V34.7399ZM34.8589 34.5599C34.6489 34.6799 34.0789 34.7699 33.7189 34.7699C32.5189 34.7699 31.0489 34.1999 28.9789 33.2999C29.7889 33.2399 30.5089 33.2099 31.1689 33.2099C32.3689 33.2099 32.7289 33.2098 33.8989 33.5098C35.0689 33.8098 35.0989 34.4399 34.8889 34.5599H34.8589Z" fill="#F40000"/>
</svg>
`},77374:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#D24625" stroke-width="2"/>
<path d="M33.8 14.2097V19.8097H39.4C39.4 16.7297 36.88 14.2097 33.8 14.2097Z" fill="#D24625"/>
<path d="M31.0004 22.6097V17.0097C29.9644 17.0097 29.0124 17.3177 28.2004 17.7937V27.4537C29.0124 27.9297 29.9644 28.2377 31.0004 28.2377C34.0804 28.2377 36.6004 25.7177 36.6004 22.6377H31.0004V22.6097Z" fill="#D24625"/>
<path d="M19.9124 21.2097C19.9124 18.6897 19.0163 16.5337 17.7003 15.4977C15.6843 13.9297 12.5764 14.2097 12.5764 14.2097H11.3723V33.8097H14.1723V28.3497C15.1523 28.3497 16.3843 28.1257 17.5043 27.2857C19.1003 26.0817 19.8843 24.0377 19.8843 21.1817L19.9124 21.2097ZM15.8523 25.0457C15.3483 25.4377 14.7043 25.5497 14.2003 25.5497V16.8977C14.7323 16.9817 15.3764 17.1497 15.8804 17.5977C16.6924 18.2977 17.1124 19.5017 17.1124 21.1817C17.1124 22.4977 16.8883 24.2337 15.8523 25.0177V25.0457Z" fill="#D24625"/>
<path d="M26.8625 10.0612H43.551V37.9563H26.8625" stroke="#D24625" stroke-width="2"/>
<path d="M26.8748 32.0246H39.8748" stroke="#D24625" stroke-width="2"/>
</svg>
`},74154:h=>{h.exports=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.728 31.001L15.5721 22.069L13.444 31.001H11.6521L8.6001 17.001H10.8401L12.6321 25.765L14.7041 17.001H16.496L18.5681 25.849L20.36 17.001H22.6001L19.5481 31.001H17.728Z" fill="#2A5699"/>
<path d="M26.8413 4.54126L4.42773 9.53558V38.5271L26.8413 43.0342V4.54126Z" stroke="#2A5699" stroke-width="2"/>
<path d="M26.8413 9.90106H43.5298V37.7962H26.8413M26.8413 15.6263H39.5098M26.8413 21.1079H39.5098M26.8413 26.8331H39.5098M26.8413 32.4365H39.5098" stroke="#2A5699" stroke-width="2"/>
</svg>
`},80805:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><defs><clipPath id="a"><path fill="none" d="M0 0h33.75v5H0z"/></clipPath></defs><g transform="translate(-516 -872)"><rect width="72" height="64" rx="6" transform="translate(516 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(524 880)" fill="none"/><g data-name="Group 14754" transform="rotate(90 519.455 828.779)" fill="#7fc8f4"><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 697.929 120.8)" opacity=".5"/><rect width="36.729" height="10.91" rx="4" transform="rotate(-90 703.725 115.004)" opacity=".5"/><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 709.862 108.867)" opacity=".5"/></g><g transform="rotate(90 -156.375 730.875)"><path d="M4 2.5 0 5V0ZM11 2.5 7 5V0ZM18 2.5 14 5V0ZM25 2.5 21 5V0ZM32 2.5 28 5V0Z" fill="#004fd6"/></g></g></svg>
`},15335:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g transform="translate(-418 -872)"><rect width="72" height="64" rx="6" transform="translate(418 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(426 880)" fill="none"/><g transform="translate(-148.128 117.452)" fill="#7fc8f4"><rect width="22" height="15" rx="4" transform="rotate(-90 690.338 113.21)" opacity=".5"/><rect width="22" height="16" rx="4" transform="rotate(-90 698.838 104.71)" opacity=".5"/><rect width="22" height="15" rx="4" transform="rotate(-90 707.838 95.71)" opacity=".5"/></g><g><path d="m434 890.5-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Z" fill="#004fd6"/></g></g></svg>
`},85482:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">
	<rect width="72" height="64" fill="none" rx="6"/>
	<g stroke="#999" stroke-width="0.5">
		<rect width="56" height="46" x="8" y="8" fill="#fff" rx="4"/>
		<rect width="55" height="45" x="8.5" y="8.5" fill="none" rx="3.5"/>
	</g>
	<g fill="#d1d1d1">
		<rect width="40" height="6" x="16" y="18" rx="3"/>
		<rect width="40" height="6" x="16" y="28" rx="3"/>
		<rect width="40" height="6" x="16" y="38" rx="3"/>
	</g>
</svg>
`},96153:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">
	<rect width="72" height="64" fill="none" rx="6"/>
	<g fill="#7fc8f4" stroke="#006ce0" opacity=".34">
		<rect width="50" height="43" x="11" y="11" rx="4"/>
		<rect width="49" height="42" x="11.5" y="11.5" fill="none" rx="3.5"/>
	</g>
</svg>
`},38926:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39843" transform="translate(484 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g></g></svg>'},73953:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(456 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39906" transform="translate(474 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39907" transform="translate(492 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g></g></svg>'},39079:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39908" transform="translate(470 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39909" transform="translate(483 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39910" transform="translate(496 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g></g></svg>'},94309:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><g fill="#afb4c1"><path d="m9 11.8h2v3.3h-2z"/><circle cx="10" cy="12" r="1.5"/></g><g fill="none" stroke="#afb4c1" stroke-miterlimit="10"><path d="m16.5 18.5h-13c-.6 0-1-.4-1-1v-9c0-.6.4-1 1-1h13c.6 0 1 .4 1 1v9c0 .6-.4 1-1 1z"/><path d="M5.5,7V5.5c0-2.2,1.8-4,4-4h1c2.2,0,4,1.8,4,4V7" stroke-width="1.25"/></g></svg>'},8341:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="537" height="537" viewBox="0 0 537 537">
  <g id="Ellipse_2751" data-name="Ellipse 2751" fill="none" stroke="#fff" stroke-width="70" opacity="0.15">
    <circle cx="268.5" cy="268.5" r="268.5" stroke="none"/>
    <circle cx="268.5" cy="268.5" r="233.5" fill="none"/>
  </g>
</svg>
`},64478:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="115" height="25" viewBox="0 0 115 25">
  <defs>
    <clipPath id="clip-path">
      <rect id="Rectangle_40815" data-name="Rectangle 40815" width="115" height="25" transform="translate(1242 6)" fill="#fff" stroke="#707070" stroke-width="1"/>
    </clipPath>
    <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
      <stop offset="0" stop-color="#284578"/>
      <stop offset="1" stop-color="#14233c"/>
    </linearGradient>
  </defs>
  <g id="Mask_Group_15154" data-name="Mask Group 15154" transform="translate(-1242 -6)" clip-path="url(#clip-path)">
    <g id="Group_14476" data-name="Group 14476" transform="translate(1247.072 9.799)">
      <path id="Path_6161" data-name="Path 6161" d="M19.5-13.931c2.8,0,4.106-1.394,4.106-3.015,0-3.894-6.425-2.273-6.425-4.864,0-.924.773-1.682,2.576-1.682a5.478,5.478,0,0,1,2.909.864l.5-1.212a6.24,6.24,0,0,0-3.409-.939c-2.788,0-4.061,1.394-4.061,3.031,0,3.94,6.425,2.3,6.425,4.894,0,.924-.788,1.637-2.621,1.637A5.459,5.459,0,0,1,16-16.446l-.561,1.182A6.3,6.3,0,0,0,19.5-13.931Zm8.273-.121h1.5V-23.34h3.637v-1.318H24.133v1.318h3.637Zm10.643.121c2.8,0,4.485-1.621,4.485-4.7v-6.031h-1.47v5.97c0,2.349-1.091,3.409-3,3.409s-2.985-1.061-2.985-3.409v-5.97H33.927v6.031C33.927-15.552,35.624-13.931,38.412-13.931Zm5.878-.121h4.47c3.409,0,5.728-2.152,5.728-5.3s-2.318-5.3-5.728-5.3H44.29Zm1.515-1.318v-7.97H48.67c2.621,0,4.3,1.606,4.3,3.985s-1.682,3.985-4.3,3.985Zm9.63,1.318h1.515V-24.659H55.436Zm8.115.121a5.374,5.374,0,0,0,5.622-5.425,5.374,5.374,0,0,0-5.622-5.425A5.391,5.391,0,0,0,57.9-19.355,5.391,5.391,0,0,0,63.551-13.931Zm0-1.349a3.99,3.99,0,0,1-4.137-4.076,3.99,3.99,0,0,1,4.137-4.076,3.982,3.982,0,0,1,4.106,4.076A3.982,3.982,0,0,1,63.551-15.279Z" transform="translate(-15.435 28.176)" fill="#ff4013"/>
      <g id="Group_5734" data-name="Group 5734" transform="translate(56.205)">
        <g id="Group_4741" data-name="Group 4741" transform="translate(0 3.373)">
          <path id="Path_4276" data-name="Path 4276" d="M355.826,146.735a4.065,4.065,0,0,1-.207-5.786,4.167,4.167,0,0,1,5.847-.2H363.2l-.054-.081a5.51,5.51,0,0,0-9.091,0,5.371,5.371,0,0,0-.506,5.145,5.507,5.507,0,0,0,9.6.922c.032-.047.065-.1.1-.148h-1.626A4.167,4.167,0,0,1,355.826,146.735Z" transform="translate(-353.122 -138.27)" fill="#ff4013"/>
          <path id="Path_4277" data-name="Path 4277" d="M485.965,148.379a4.286,4.286,0,0,0-7.469-.717,4.179,4.179,0,0,0-.393,4,4.247,4.247,0,0,0,1.546,1.858,4.29,4.29,0,0,0,5.923-1.141A4.178,4.178,0,0,0,485.965,148.379Zm-3.941,4.579A2.945,2.945,0,1,1,485,150.013,2.963,2.963,0,0,1,482.025,152.958Z" transform="translate(-437.23 -143.395)" fill="#ff4013"/>
          <path id="Path_4278" data-name="Path 4278" d="M402.81,145.8a4.089,4.089,0,0,0-4.208,3.963q0,.132,0,.264a4.178,4.178,0,0,0,4.508,4.243,4.23,4.23,0,0,0,3.306-1.347l-.837-.97a3.145,3.145,0,0,1-2.42,1,2.831,2.831,0,0,1-3.037-2.426h6.8c.016-.141.032-.329.032-.454A4.021,4.021,0,0,0,402.81,145.8Zm-2.688,3.647a2.709,2.709,0,0,1,5.377,0Z" transform="translate(-383.811 -143.396)" fill="#ff4013"/>
          <path id="Path_4279" data-name="Path 4279" d="M389.828,145.806a3.21,3.21,0,0,0-3.052,1.471v-1.393H385.32v8.3h1.518v-4.133a2.487,2.487,0,0,1,2.642-2.8,2.692,2.692,0,0,1,.348.016Z" transform="translate(-374.856 -143.399)" fill="#ff4013"/>
          <path id="Path_4280" data-name="Path 4280" d="M458.472,147.988c-.837,0-1.1-.5-1.1-1.393V142.1h2.4v-1.236h-2.406v-2.434h-1.518v2.434h-.522V142.1h.522v4.555c0,1.675.757,2.6,2.45,2.6a2.326,2.326,0,0,0,1.627-.579l-.474-1.078A1.377,1.377,0,0,1,458.472,147.988Z" transform="translate(-422.111 -138.38)" fill="#ff4013"/>
          <rect id="Rectangle_5019" data-name="Rectangle 5019" width="1.518" height="8.297" transform="translate(38.391 2.485)" fill="#ff4013"/>
          <path id="Path_4281" data-name="Path 4281" d="M433.24,147.035a4.287,4.287,0,0,0-6.55.626,4.179,4.179,0,0,0-.393,4,4.244,4.244,0,0,0,1.546,1.858,4.285,4.285,0,0,0,5.4-.514v1.166h1.31v-8.3h-1.31Zm-3.022,5.922a2.945,2.945,0,1,1,2.975-2.944A2.963,2.963,0,0,1,430.219,152.958Z" transform="translate(-402.272 -143.395)" fill="#ff4013"/>
        </g>
        <path id="Path_5977" data-name="Path 5977" d="M460.573,131.073l-5.876,1.349,1.75-1.349-7.169-3.363Z" transform="translate(-417.936 -127.71)" fill="url(#linear-gradient)"/>
        <path id="Path_5977-2" data-name="Path 5977-2" d="M460.573,131.073h-4.127l-7.169-3.363Z" transform="translate(-417.936 -127.71)" fill="#284578"/>
      </g>
    </g>
  </g>
</svg>
`},33517:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="74" height="85" viewBox="0 0 74 85">
  <g id="Polygon_360" data-name="Polygon 360" transform="translate(74) rotate(90)" fill="none" opacity="0.15">
    <path d="M42.5,0,85,74H0Z" stroke="none"/>
    <path d="M 42.5 24.09488677978516 L 20.73017120361328 62 L 64.26982879638672 62 L 42.5 24.09488677978516 M 42.5 0 L 85 74 L 0 74 L 42.5 0 Z" stroke="none" fill="#fff"/>
  </g>
</svg>
`},78254:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="127" height="127" viewBox="0 0 127 127">
  <g id="Rectangle_39586" data-name="Rectangle 39586" fill="none" stroke="#fff" stroke-width="23" opacity="0.15">
    <rect width="127" height="127" stroke="none"/>
    <rect x="11.5" y="11.5" width="104" height="104" fill="none"/>
  </g>
</svg>
`},53409:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(143.941 -406.051)"><rect width="2" height="2" transform="translate(-136.941 408.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 413.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 418.051)" style="fill: #8095b3;"/></g><rect width="16" height="16" style="fill: none;"/></svg>
`},54422:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 1 20 20" enable-background="new 0 0 20 20"><path d="M17,3V1h-3v2H6V1H3v2H0v4v1v12h20V3H17z M15,2h1v3h-1V2z M4,2h1v3H4V2z M19,19H1V8h18V19z M19,7H1V4h2v2h3V4h8
	v2h3V4h2V7z" fill="#8095b3"/><path fill="none" stroke="#8095b3" stroke-miterlimit="10" d="m6.5 12.5l3 3 5-5"/></svg>
`},21695:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><path d="M-26.666,687.452l2.438,2,4.062-4" transform="translate(31.666 -676.453)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(0 2)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><rect width="16" height="14" style="stroke: none;"/><rect x="0.5" y="0.5" width="15" height="13" style="fill: none;"/></g><line x2="16" transform="translate(0 6.5)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(2)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g><g transform="translate(11)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g></svg>
`},89854:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(-1816.814 -33.301)"><g transform="translate(1816.814 33.301)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><circle cx="8" cy="8" r="8" style="stroke: none;"/><circle cx="8" cy="8" r="7.5" style="fill: none;"/></g><path d="M1824.814,36.015v5.244l3.266,3.8" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/></g></svg>
`},76974:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.a,.b{fill:none;}.b{stroke:#8095b3;stroke-miterlimit:10;}.c{fill:#8095b3;}</style></defs><rect class="a" width="16" height="16"/><rect class="b" width="11" height="9" rx="2" transform="translate(2.5 5.5)"/><path class="c" d="M9,9H7v2H9V9Z"/><path class="b" d="M626.5-136.5v-2a2,2,0,0,1,2-2h1a2,2,0,0,1,2,2v2" transform="translate(-621 142)"/></svg>'},58796:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.error-icon-a{fill:#df1f26;}.error-icon-b,.error-icon-c{fill:none;}.error-icon-b{stroke:#fff;stroke-miterlimit:10;stroke-width:1.5px;}</style></defs><circle class="error-icon-a" cx="7" cy="7" r="7" transform="translate(1 1)"/><line class="error-icon-b" x2="6" y2="6" transform="translate(5 5)"/><line class="error-icon-b" y1="6" x2="6" transform="translate(5 5)"/><rect class="error-icon-c" width="16" height="16"/></svg>'},11342:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16.001" height="16" viewBox="0 0 16.001 16"><defs><style>.warning-icon-a{fill:#ff9800;}.warning-icon-b,.warning-icon-d{fill:none;}.warning-icon-b{stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}.warning-icon-c{fill:#fff;}</style></defs><g transform="translate(-1330.138 361.759)"><path class="warning-icon-a" d="M1345.172-346.541H1331.1a.964.964,0,0,1-.84-1.438l7.033-12.505a.965.965,0,0,1,1.682,0l7.034,12.505A.965.965,0,0,1,1345.172-346.541Z"/><line class="warning-icon-b" y2="3" transform="translate(1338.139 -355.279)"/><circle class="warning-icon-c" cx="1.25" cy="1.25" r="1.25" transform="translate(1336.889 -350.529)"/></g><rect class="warning-icon-d" width="16" height="16" transform="translate(0.001)"/></svg>'},67525:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.a,.b{fill:none;}.b{stroke:#fff;stroke-linecap:round;stroke-width:1.5px;}</style></defs><g transform="translate(16) rotate(90)"><rect class="a" width="16" height="16"/><path class="b" d="M10.365,0,5.182,5.465,0,0" transform="translate(2.818 5.268)"/></g></svg>'},63853:h=>{h.exports=`<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
  <rect id="Rectangle_7" data-name="Rectangle 7" width="16" height="16" fill="none"/>
  <line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>
  <line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>
</svg>
`},83225:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
	<g fill="none">
		<path d="M0 16V0h16v16z"/>
		<path d="m14 5-5.5 5.5L3 5" stroke="#006ce0"/>
	</g>
</svg>
`},6428:h=>{h.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
	<path d="M7.49134 3.22305C7.49134 2.82264 7.15352 2.49805 6.73681 2.49805C6.32009 2.49805 5.98227 2.82264 5.98227 3.22305V3.41077H2.75453C2.33782 3.41077 2 3.73536 2 4.13577C2 4.53618 2.33782 4.86077 2.75453 4.86077H8.1046C7.97647 5.14655 7.83931 5.42552 7.69554 5.69677C7.2841 6.47305 6.81859 7.18611 6.35614 7.81489C6.03052 7.32801 5.72261 6.82084 5.42587 6.29971C5.22585 5.94845 4.76734 5.81949 4.40177 6.01168C4.03619 6.20387 3.90199 6.64443 4.102 6.9957C4.49601 7.68763 4.91857 8.37339 5.38474 9.03245C5.01375 9.46248 4.68032 9.81285 4.4245 10.0693C4.26253 10.2316 4.13205 10.3559 4.04334 10.4385C3.999 10.4797 3.96513 10.5106 3.94302 10.5305L3.91885 10.5521L3.91369 10.5567C3.60572 10.8261 3.58243 11.285 3.86266 11.5811C4.143 11.8774 4.6202 11.8992 4.92852 11.6298L4.42092 11.0934C4.92852 11.6298 4.92837 11.63 4.92852 11.6298L4.93016 11.6284L4.93303 11.6259L4.94239 11.6176L4.97513 11.5883C5.00304 11.5632 5.0429 11.5269 5.09339 11.4799C5.19436 11.3859 5.33801 11.2489 5.51383 11.0727C5.7348 10.8512 6.00719 10.5671 6.30993 10.2276C6.54806 10.5072 6.79704 10.7786 7.05826 11.0401C7.34683 11.329 7.82447 11.3384 8.12511 11.0611C8.42574 10.7839 8.43553 10.3249 8.14697 10.036C7.84094 9.72969 7.55143 9.40554 7.27557 9.06637C8.14191 7.94752 9.08008 6.50571 9.73299 4.86077H10.7151C11.1318 4.86077 11.4696 4.53618 11.4696 4.13577C11.4696 3.73536 11.1318 3.41077 10.7151 3.41077H9.22026C9.20855 3.41051 9.19687 3.41051 9.18522 3.41077H7.49134V3.22305Z" fill="#0D2E4E"/>
	<path fill-rule="evenodd" clip-rule="evenodd" d="M9.88447 7.94801C10.2159 7.17997 11.3516 7.1894 11.6692 7.96284L13.9471 13.5101C14.1001 13.8826 13.9098 14.3036 13.5222 14.4506C13.1346 14.5976 12.6963 14.4148 12.5434 14.0423L11.9148 12.5116L9.5486 12.5116L8.88299 14.0539C8.72337 14.4238 8.28192 14.5993 7.89699 14.4459C7.51205 14.2925 7.32941 13.8684 7.48903 13.4985L8.27697 11.6728C8.29592 11.5574 8.34318 11.4511 8.41171 11.3606L9.88447 7.94801ZM10.1744 11.0616H11.3194L10.7611 9.70208L10.1744 11.0616Z" fill="#0D2E4E"/>
</svg>
`},18435:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.lsa{fill:#8095b3;}.lsb,.lsc{fill:none;}.lsb{stroke:#8095b3;stroke-miterlimit:10;}</style></defs><path class="lsa" d="M14.5,14l-.9-2.5H10L9.1,14H8.2l3.2-8.4h.8L15.4,14ZM12,7.1c0-.1-.1-.2-.1-.3s-.1-.2-.1-.3h0a.367.367,0,0,1-.1.3c-.1.1,0,.2-.1.3l-1.4,3.7h3.1Z" transform="translate(0.301 1)"/><line class="lsb" x2="10" transform="translate(0.301 2.5)"/><line class="lsb" y2="2" transform="translate(4.801 1)"/><path class="lsb" d="M1.5,11.5S6.2,7.2,8,2" transform="translate(0.301 1)"/><path class="lsb" d="M3,4.5a24.292,24.292,0,0,0,4.5,5.6" transform="translate(0.301 1)"/><rect class="lsc" width="16" height="16"/></svg>'},98728:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
	<g fill="none">
		<path d="M16 0v16H0V0z"/>
		<path d="m2 11 5.5-5.5L13 11" stroke="#006ce0"/>
	</g>
</svg>
`},36141:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
<defs><style>.arrow-down-svg-icon{fill:none;}.arrow-down-svg-icon{stroke:#006ce0;stroke-width:1.1px;}</style></defs>
<g transform="translate(16 16) rotate(180)"><path class="arrow-down-svg-icon" d="M7,13,0,6.5,7,0" transform="translate(14.548 5.25) rotate(90)"/></g></svg>`},15894:h=>{h.exports=`<svg id="Component_654_1" data-name="Component 654 \u2013 1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
  <rect id="Rectangle_6580" data-name="Rectangle 6580" width="16" height="16" fill="none"/>
  <line id="Line_831" data-name="Line 831" y1="4" x2="4" transform="translate(2 10)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>
  <line id="Line_832" data-name="Line 832" y1="4" x2="4" transform="translate(10 2)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>
  <path id="Path_7086" data-name="Path 7086" d="M-57.433,448.76h-4.5v-4.5Z" transform="translate(70.933 -441.76)" fill="#54657d"/>
  <path id="Path_7087" data-name="Path 7087" d="M-69.585,451.912h4.5v4.5Z" transform="translate(72.085 -442.912)" fill="#54657d"/>
</svg>
`},30360:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
	<defs>
		<style>.a {
			fill: #54657d;
		}

		.b, .c {
			fill: none;
		}

		.b {
			stroke: #54657d;
			stroke-miterlimit: 10;
		}</style>
	</defs>
	<path class="a" d="M-347,453.292h-5v-5Z" transform="translate(354 -439.292)"/>
	<path class="a" d="M-340,446.292v-5h-5Z" transform="translate(354 -439.292)"/>
	<line class="b" y1="4" x2="4" transform="translate(9 3)"/>
	<line class="b" y1="4" x2="4" transform="translate(3 9)"/>
	<rect class="c" width="16" height="16"/>
</svg>
`},10761:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.info-icon-a,.info-icon-c{fill:none;}.info-icon-a{stroke:#22ac14;stroke-miterlimit:10;}.info-icon-b{fill:#22ac14;}</style></defs><g transform="translate(2.5 2.5)"><circle class="info-icon-a" cx="9.5" cy="9.5" r="9.5"/><rect class="info-icon-b" width="2" height="7" transform="translate(8.5 7.5)"/><rect class="info-icon-b" width="2" height="2" transform="translate(8.5 4.5)"/></g><rect class="info-icon-c" width="24" height="24"/></svg>
`},22574:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
	<path fill="#54657d" d="M8.54 16h-.99a1.4 1.4 0 0 1-1.1-.46 1.51 1.51 0 0 1-.41-1.04v-.8a.95.95 0 0 0-.3-.12.53.53 0 0 1-.23-.09l-.59.5a1.54 1.54 0 0 1-2.2 0l-.71-.7a1.48 1.48 0 0 1-.37-.5 1.43 1.43 0 0 1-.13-.58A1.54 1.54 0 0 1 2 11.1l.61-.61q-.1-.14-.15-.25A.5.5 0 0 1 2.4 10h-.9A1.43 1.43 0 0 1 0 8.5V7.49a1.47 1.47 0 0 1 .4-1.1A1.5 1.5 0 0 1 1.5 6h.8a.95.95 0 0 0 .1-.28.38.38 0 0 1 .1-.21L2 4.89a1.73 1.73 0 0 1-.37-.52 1.38 1.38 0 0 1 0-1.17 1.75 1.75 0 0 1 .36-.51l.7-.7a1.6 1.6 0 0 1 2.22 0l.6.6a.46.46 0 0 1 .22-.18l.3-.12v-.8A1.47 1.47 0 0 1 6.44.4a1.5 1.5 0 0 1 1.1-.4h1a1.5 1.5 0 0 1 1.1.4 1.46 1.46 0 0 1 .4 1.1v.8a1.45 1.45 0 0 0 .3.09.4.4 0 0 1 .22.11l.6-.51a1.6 1.6 0 0 1 2.2 0l.7.7a1.6 1.6 0 0 1 .02 2.2l-.61.6.15.25a.51.51 0 0 1 .06.25h.8a1.42 1.42 0 0 1 1.1.44A1.5 1.5 0 0 1 16 7.5V8.5a1.41 1.41 0 0 1-.44 1.08 1.5 1.5 0 0 1-1.07.42h-.8a.96.96 0 0 0-.1.28.32.32 0 0 1-.11.21l.61.61a1.55 1.55 0 0 1 0 2.18l-.7.7a1.54 1.54 0 0 1-2.22 0l-.59-.58a2.17 2.17 0 0 0-.26.13.48.48 0 0 1-.26.05v.8a1.65 1.65 0 0 1-.4 1.19 1.45 1.45 0 0 1-1.1.43Zm-3.3-3.92.4.22a2.03 2.03 0 0 0 .5.23c.2.06.4.12.6.16l.4.1v1.6a.59.59 0 0 0 .13.33.43.43 0 0 0 .37.18h1.01a.53.53 0 0 0 .32-.14.45.45 0 0 0 .18-.38V12.8l.4-.1a2.33 2.33 0 0 0 .55-.2 2.4 2.4 0 0 1 .56-.2l.4-.2 1.1 1.2a.43.43 0 0 0 .33.16.3.3 0 0 0 .29-.16l.68-.68a.49.49 0 0 0 .17-.36.26.26 0 0 0-.17-.26l-1.2-1.1.21-.4a2.63 2.63 0 0 0 .24-.52c.06-.18.12-.38.16-.58l.1-.4h1.6a.56.56 0 0 0 .34-.14.43.43 0 0 0 .17-.35V7.49a.53.53 0 0 0-.14-.32.46.46 0 0 0-.38-.17h-1.6l-.09-.4a2.58 2.58 0 0 0-.2-.56 2.62 2.62 0 0 1-.2-.54l-.21-.4 1.2-1.22a.42.42 0 0 0 .17-.33.26.26 0 0 0-.16-.26l-.69-.7a.54.54 0 0 0-.35-.14.26.26 0 0 0-.26.14l-1.12 1.2-.4-.19a1.8 1.8 0 0 0-.51-.24l-.6-.15-.49-.12v-1.6a.49.49 0 0 0-.18-.32.5.5 0 0 0-.34-.17h-.99a.5.5 0 0 0-.34.17.48.48 0 0 0-.18.32v1.6l-.4.11a2.67 2.67 0 0 0-.55.19 4.24 4.24 0 0 1-.56.2l-.28.29-1.1-1.2a.54.54 0 0 0-.36-.14.27.27 0 0 0-.26.15l-.8.7a.42.42 0 0 0-.16.32.3.3 0 0 0 .16.28l1.2 1.1-.18.5a1.76 1.76 0 0 0-.25.51l-.17.59-.2.3h-1.6a.5.5 0 0 0-.34.17.49.49 0 0 0-.18.32v1a.49.49 0 0 0 .18.32.5.5 0 0 0 .34.19h1.6l.1.4a2.25 2.25 0 0 0 .2.55 2.27 2.27 0 0 1 .2.55l.2.4-1.2 1.1a.23.23 0 0 0-.1.15 1.32 1.32 0 0 0 0 .15.83.83 0 0 0 0 .14.33.33 0 0 0 .1.17l.7.68a.5.5 0 0 0 .35.16.26.26 0 0 0 .26-.16ZM8 11a2.86 2.86 0 0 1-2.13-.9A2.92 2.92 0 0 1 5 8a3 3 0 0 1 6 0 2.92 2.92 0 0 1-.87 2.11A2.86 2.86 0 0 1 8 11Zm0-5a2 2 0 0 0-1.99 2 1.95 1.95 0 0 0 .59 1.43 1.98 1.98 0 0 0 2.8 0A1.95 1.95 0 0 0 10 8a2 2 0 0 0-2-2Z"/>
</svg>
`},80507:h=>{h.exports=`<svg id="Component_661_1" data-name="Component 661 \u2013 1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
  <rect id="Rectangle_6417" data-name="Rectangle 6417" width="16" height="16" transform="translate(0 16) rotate(-90)" fill="none"/>
  <path id="Path_6923" data-name="Path 6923" d="M-1147.478,6876.829l-6,6c.008-.008,6,6,6,6" transform="translate(-6874.329 -1139.978) rotate(-90)" fill="none" stroke="#006ce0" stroke-width="1"/>
  <path id="Path_7027" data-name="Path 7027" d="M-1147.478,6876.829l-6,6c.008-.008,6,6,6,6" transform="translate(-6874.329 -1144.978) rotate(-90)" fill="none" stroke="#006ce0" stroke-width="1"/>
</svg>
`},77578:h=>{h.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g transform="translate(2.5 1.5)"><line x2="12" fill="none" stroke-miterlimit="10" stroke="#54657d" transform="translate(0 7)"/><line y1="12" fill="none" stroke-miterlimit="10" stroke="#54657d" transform="translate(6 1)"/></g><rect fill="none" width="16"  height="16"/></svg>
`},50312:h=>{h.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect class="a" fill="none" width="16" height="16"/><g transform="translate(828.001 -256.344)"><g class="b" stroke-miterlimit="10" fill="none" transform="translate(-0.562 -0.563)"><path class="d" d="M-822.721,270.046a2.984,2.984,0,0,0-3,.861l-.715-.714a2.983,2.983,0,0,0,.862-3l9.281-9.282,2.856,2.856Z"/><path class="e" stroke="none" fill="#54657d" d="M -824.6316528320313 269.1003723144531 C -824.2100830078125 268.9744262695313 -823.8204345703125 268.9347534179688 -823.4967651367188 268.9347534179688 C -823.3335571289063 268.9347534179688 -823.1836547851563 268.9448852539063 -823.0501098632813 268.9602355957031 L -814.8533325195313 260.7627868652344 L -816.2953491210938 259.3211669921875 L -824.4864501953125 267.5129089355469 C -824.4336547851563 267.9642028808594 -824.45556640625 268.5171203613281 -824.6316528320313 269.1003723144531 M -825.7241821289063 270.9070129394531 C -826.014892578125 270.6171875 -826.1371459960938 270.4949951171875 -826.4390258789063 270.1930847167969 C -825.00927734375 268.7652282714844 -825.5767211914063 267.18896484375 -825.5767211914063 267.18896484375 L -816.2954711914063 257.9070129394531 L -813.4390258789063 260.7626647949219 L -822.7213134765625 270.045654296875 C -822.7213134765625 270.045654296875 -823.029541015625 269.9347534179688 -823.4967651367188 269.9347534179688 C -824.0857543945313 269.9347534179688 -824.927490234375 270.1108093261719 -825.7241821289063 270.9070129394531 Z"/></g><path class="c" stroke="#54657d" fill="none" d="M.5.5l2,2" transform="translate(-819.501 259.844)"/></g></svg>'}}]);
